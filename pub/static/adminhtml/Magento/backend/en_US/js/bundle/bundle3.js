require.config({"config": {
        "jsbuild":{"Magento_PageBuilder/js/content-type/products/mass-converter/carousel-widget-directive.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_PageBuilder/js/mass-converter/widget-directive-abstract\", \"Magento_PageBuilder/js/utils/object\"], function (_widgetDirectiveAbstract, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var WidgetDirective = /*#__PURE__*/function (_widgetDirectiveAbstr) {\n    \"use strict\";\n\n    _inheritsLoose(WidgetDirective, _widgetDirectiveAbstr);\n\n    function WidgetDirective() {\n      return _widgetDirectiveAbstr.apply(this, arguments) || this;\n    }\n\n    var _proto = WidgetDirective.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param {object} data\n     * @param {object} config\n     * @returns {object}\n     */\n    _proto.fromDom = function fromDom(data, config) {\n      var attributes = _widgetDirectiveAbstr.prototype.fromDom.call(this, data, config);\n\n      data.carousel_products_count = attributes.products_count;\n      data.sort_order = attributes.sort_order;\n      data.condition_option = attributes.condition_option || \"condition\";\n      data[data.condition_option] = this.decodeWysiwygCharacters(this.decodeHtmlCharacters(attributes.condition_option_value || \"\"));\n      data.conditions_encoded = this.decodeWysiwygCharacters(attributes.conditions_encoded || \"\");\n      data[data.condition_option + \"_source\"] = data.conditions_encoded;\n      return data;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {object} data\n     * @param {object} config\n     * @returns {object}\n     */\n    ;\n\n    _proto.toDom = function toDom(data, config) {\n      var attributes = {\n        type: \"Magento\\\\CatalogWidget\\\\Block\\\\Product\\\\ProductsList\",\n        template: \"Magento_PageBuilder::catalog/product/widget/content/carousel.phtml\",\n        anchor_text: \"\",\n        id_path: \"\",\n        show_pager: 0,\n        products_count: data.carousel_products_count,\n        condition_option: data.condition_option,\n        condition_option_value: \"\",\n        type_name: \"Catalog Products Carousel\",\n        conditions_encoded: this.encodeWysiwygCharacters(data.conditions_encoded || \"\")\n      };\n\n      if (data.sort_order) {\n        attributes.sort_order = data.sort_order;\n      }\n\n      if (typeof data[data.condition_option] === \"string\") {\n        attributes.condition_option_value = this.encodeWysiwygCharacters(data[data.condition_option]);\n      }\n\n      if (attributes.conditions_encoded.length === 0) {\n        return data;\n      }\n\n      (0, _object.set)(data, config.html_variable, this.buildDirective(attributes));\n      return data;\n    }\n    /**\n     * @param {string} content\n     * @returns {string}\n     */\n    ;\n\n    _proto.encodeWysiwygCharacters = function encodeWysiwygCharacters(content) {\n      return content.replace(/\\{/g, \"^[\").replace(/\\}/g, \"^]\").replace(/\"/g, \"`\").replace(/\\\\/g, \"|\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    }\n    /**\n     * @param {string} content\n     * @returns {string}\n     */\n    ;\n\n    _proto.decodeWysiwygCharacters = function decodeWysiwygCharacters(content) {\n      return content.replace(/\\^\\[/g, \"{\").replace(/\\^\\]/g, \"}\").replace(/`/g, \"\\\"\").replace(/\\|/g, \"\\\\\").replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\");\n    }\n    /**\n     * Decode html special characters\n     *\n     * @param {string} content\n     * @returns {string}\n     */\n    ;\n\n    _proto.decodeHtmlCharacters = function decodeHtmlCharacters(content) {\n      if (content) {\n        var htmlDocument = new DOMParser().parseFromString(content, \"text/html\");\n        return htmlDocument.body ? htmlDocument.body.textContent : content;\n      }\n\n      return content;\n    };\n\n    return WidgetDirective;\n  }(_widgetDirectiveAbstract);\n\n  return WidgetDirective;\n});\n//# sourceMappingURL=carousel-widget-directive.js.map","Magento_PageBuilder/js/content-type/products/mass-converter/widget-directive.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_PageBuilder/js/mass-converter/widget-directive-abstract\", \"Magento_PageBuilder/js/utils/object\"], function (_widgetDirectiveAbstract, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var WidgetDirective = /*#__PURE__*/function (_widgetDirectiveAbstr) {\n    \"use strict\";\n\n    _inheritsLoose(WidgetDirective, _widgetDirectiveAbstr);\n\n    function WidgetDirective() {\n      return _widgetDirectiveAbstr.apply(this, arguments) || this;\n    }\n\n    var _proto = WidgetDirective.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param {object} data\n     * @param {object} config\n     * @returns {object}\n     */\n    _proto.fromDom = function fromDom(data, config) {\n      var attributes = _widgetDirectiveAbstr.prototype.fromDom.call(this, data, config);\n\n      data.products_count = attributes.products_count;\n      data.sort_order = attributes.sort_order;\n      data.condition_option = attributes.condition_option || \"condition\";\n      data[data.condition_option] = this.decodeWysiwygCharacters(this.decodeHtmlCharacters(attributes.condition_option_value || \"\"));\n      data.conditions_encoded = this.decodeWysiwygCharacters(attributes.conditions_encoded || \"\");\n      data[data.condition_option + \"_source\"] = data.conditions_encoded;\n      return data;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {object} data\n     * @param {object} config\n     * @returns {object}\n     */\n    ;\n\n    _proto.toDom = function toDom(data, config) {\n      var attributes = {\n        type: \"Magento\\\\CatalogWidget\\\\Block\\\\Product\\\\ProductsList\",\n        template: \"Magento_CatalogWidget::product/widget/content/grid.phtml\",\n        anchor_text: \"\",\n        id_path: \"\",\n        show_pager: 0,\n        products_count: data.products_count,\n        condition_option: data.condition_option,\n        condition_option_value: \"\",\n        type_name: \"Catalog Products List\",\n        conditions_encoded: this.encodeWysiwygCharacters(data.conditions_encoded || \"\")\n      };\n\n      if (data.sort_order) {\n        attributes.sort_order = data.sort_order;\n      }\n\n      if (typeof data[data.condition_option] === \"string\") {\n        attributes.condition_option_value = this.encodeWysiwygCharacters(data[data.condition_option]);\n      }\n\n      if (attributes.conditions_encoded.length === 0) {\n        return data;\n      }\n\n      (0, _object.set)(data, config.html_variable, this.buildDirective(attributes));\n      return data;\n    }\n    /**\n     * @param {string} content\n     * @returns {string}\n     */\n    ;\n\n    _proto.encodeWysiwygCharacters = function encodeWysiwygCharacters(content) {\n      return content.replace(/\\{/g, \"^[\").replace(/\\}/g, \"^]\").replace(/\"/g, \"`\").replace(/\\\\/g, \"|\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    }\n    /**\n     * @param {string} content\n     * @returns {string}\n     */\n    ;\n\n    _proto.decodeWysiwygCharacters = function decodeWysiwygCharacters(content) {\n      return content.replace(/\\^\\[/g, \"{\").replace(/\\^\\]/g, \"}\").replace(/`/g, \"\\\"\").replace(/\\|/g, \"\\\\\").replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\");\n    }\n    /**\n     * Decode html special characters\n     *\n     * @param {string} content\n     * @returns {string}\n     */\n    ;\n\n    _proto.decodeHtmlCharacters = function decodeHtmlCharacters(content) {\n      if (content) {\n        var htmlDocument = new DOMParser().parseFromString(content, \"text/html\");\n        return htmlDocument.body ? htmlDocument.body.textContent : content;\n      }\n\n      return content;\n    };\n\n    return WidgetDirective;\n  }(_widgetDirectiveAbstract);\n\n  return WidgetDirective;\n});\n//# sourceMappingURL=widget-directive.js.map","Magento_PageBuilder/js/content-type/products/form/provider.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_PageBuilder/js/form/provider',\n    'Magento_PageBuilder/js/form/provider/conditions-data-processor'\n], function (Provider, conditionsDataProcessor) {\n    'use strict';\n\n    return Provider.extend({\n        /** @inheritdoc **/\n        save: function () {\n            var data = this.get('data');\n\n            conditionsDataProcessor(data, data['condition_option'] + '_source');\n\n            return this._super();\n        }\n    });\n});\n","Magento_PageBuilder/js/content-type/products/appearance/carousel/widget.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'underscore',\n    'matchMedia',\n    'Magento_PageBuilder/js/utils/breakpoints',\n    'Magento_PageBuilder/js/events',\n    'slick'\n], function ($, _, mediaCheck, breakpointsUtils, events) {\n    'use strict';\n\n    /**\n     * Build slick\n     *\n     * @param {jQuery} $carouselElement\n     * @param {Object} config\n     */\n    function buildSlick($carouselElement, config) {\n        /**\n         * Prevent each slick slider from being initialized more than once which could throw an error.\n         */\n        if ($carouselElement.hasClass('slick-initialized')) {\n            $carouselElement.slick('unslick');\n        }\n\n        config.slidesToScroll = config.slidesToShow;\n        $carouselElement.slick(config);\n    }\n\n    /**\n     * Initialize slider.\n     *\n     * @param {jQuery} $element\n     * @param {Object} slickConfig\n     * @param {Object} breakpoint\n     */\n    function initSlider($element, slickConfig, breakpoint) {\n        var productCount = $element.find('.product-item').length,\n            $carouselElement = $($element.children()),\n            centerModeClass = 'center-mode',\n            carouselMode = $element.data('carousel-mode'),\n            slidesToShow = breakpoint.options.products[carouselMode] ?\n                breakpoint.options.products[carouselMode].slidesToShow :\n                breakpoint.options.products.default.slidesToShow;\n\n        slickConfig.slidesToShow = parseFloat(slidesToShow);\n\n        if (carouselMode === 'continuous' && productCount > slickConfig.slidesToShow) {\n            $element.addClass(centerModeClass);\n            slickConfig.centerPadding = $element.data('center-padding');\n            slickConfig.centerMode = true;\n        } else {\n            $element.removeClass(centerModeClass);\n            slickConfig.infinite = $element.data('infinite-loop');\n        }\n\n        buildSlick($carouselElement, slickConfig);\n    }\n\n    return function (config, element) {\n        var $element = $(element),\n            $carouselElement = $($element.children()),\n            currentViewport = config.currentViewport,\n            currentBreakpoint = config.breakpoints[currentViewport],\n            slickConfig = {\n                autoplay: $element.data('autoplay'),\n                autoplaySpeed: $element.data('autoplay-speed') || 0,\n                arrows: $element.data('show-arrows'),\n                dots: $element.data('show-dots')\n            };\n\n        _.each(config.breakpoints, function (breakpoint) {\n            mediaCheck({\n                media: breakpointsUtils.buildMedia(breakpoint.conditions),\n\n                /** @inheritdoc */\n                entry: function () {\n                    initSlider($element, slickConfig, breakpoint);\n                }\n            });\n        });\n\n        //initialize slider when content type is added in mobile viewport\n        if (currentViewport === 'mobile') {\n            initSlider($element, slickConfig, currentBreakpoint);\n        }\n\n        // Redraw slide after content type gets redrawn\n        events.on('contentType:redrawAfter', function (args) {\n            if ($carouselElement.closest(args.element).length) {\n                $carouselElement.slick('setPosition');\n            }\n        });\n\n        events.on('stage:viewportChangeAfter', function (args) {\n            var breakpoint = config.breakpoints[args.viewport];\n\n            initSlider($element, slickConfig, breakpoint);\n        });\n    };\n});\n","Magento_PageBuilder/js/content-type/banner/preview.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"jarallax\", \"jarallaxVideo\", \"jquery\", \"jquery/z-index\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"mageUtils\", \"underscore\", \"vimeoWrapper\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/uploader\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/utils/editor\", \"Magento_PageBuilder/js/utils/nesting-link-dialog\", \"Magento_PageBuilder/js/utils/nesting-widget-dialog\", \"Magento_PageBuilder/js/wysiwyg/factory\", \"Magento_PageBuilder/js/content-type/preview\"], function (_jarallax, _jarallaxVideo, _jquery, _zIndex, _translate, _events, _mageUtils, _underscore, _vimeoWrapper, _hideShowOption, _uploader, _delayUntil, _editor, _nestingLinkDialog, _nestingWidgetDialog, _factory, _preview) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Preview = /*#__PURE__*/function (_preview2) {\n    \"use strict\";\n\n    _inheritsLoose(Preview, _preview2);\n\n    function Preview() {\n      var _this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _preview2.call.apply(_preview2, [this].concat(args)) || this;\n      _this.buttonPlaceholder = (0, _translate)(\"Edit Button Text\");\n      _this.wysiwygDeferred = _jquery.Deferred();\n      _this.handledDoubleClick = false;\n      _this.videoUpdateProperties = [\"background_type\", \"video_fallback_image\", \"video_lazy_load\", \"video_loop\", \"video_play_only_visible\", \"video_source\"];\n      _this.bannerOverlaySelector = \".pagebuilder-overlay\";\n      _this.defaultOverlayZIndex = 2;\n      _this.activeEditorOverlayZIndex = 3;\n      _this.buildJarallax = _underscore.debounce(function () {\n        // Destroy all instances of the plugin prior\n        try {\n          jarallax(_this.wrapper, \"destroy\");\n        } catch (e) {// Failure of destroying is acceptable\n        }\n\n        if (_this.wrapper && _this.wrapper.dataset.backgroundType === \"video\" && _this.wrapper.dataset.videoSrc.length) {\n          _underscore.defer(function () {\n            // Build Parallax on elements with the correct class\n            jarallax(_this.wrapper, {\n              videoSrc: _this.wrapper.dataset.videoSrc,\n              imgSrc: _this.wrapper.dataset.videoFallbackSrc,\n              videoLoop: _this.contentType.dataStore.get(\"video_loop\") === \"true\",\n              speed: 1,\n              videoPlayOnlyVisible: _this.contentType.dataStore.get(\"video_play_only_visible\") === \"true\",\n              videoLazyLoading: _this.contentType.dataStore.get(\"video_lazy_load\") === \"true\"\n            }); // @ts-ignore\n\n            if (_this.wrapper.jarallax && _this.wrapper.jarallax.video) {\n              // @ts-ignore\n              _this.wrapper.jarallax.video.on(\"started\", function () {\n                // @ts-ignore\n                if (_this.wrapper.jarallax && _this.wrapper.jarallax.$video) {\n                  // @ts-ignore\n                  _this.wrapper.jarallax.$video.style.visibility = \"visible\";\n                }\n              });\n            }\n          });\n        }\n      }, 50);\n      return _this;\n    }\n\n    var _proto = Preview.prototype;\n\n    /**\n     * Get background image url base on the viewport.\n     *\n     * @returns {string}\n     */\n    _proto.getBackgroundImage = function getBackgroundImage() {\n      var mobileImage = this.contentType.dataStore.get(\"mobile_image\");\n      var desktopImage = this.contentType.dataStore.get(\"background_image\");\n      var backgroundImage = this.viewport() === \"mobile\" && mobileImage.length ? mobileImage : desktopImage;\n      return backgroundImage.length ? \"url(\\\"\" + backgroundImage[0].url + \"\\\")\" : \"none\";\n    }\n    /**\n     * Return an array of options\n     *\n     * @returns {OptionsInterface}\n     */\n    ;\n\n    _proto.retrieveOptions = function retrieveOptions() {\n      var options = _preview2.prototype.retrieveOptions.call(this);\n\n      options.hideShow = new _hideShowOption({\n        preview: this,\n        icon: _hideShowOption.showIcon,\n        title: _hideShowOption.showText,\n        action: this.onOptionVisibilityToggle,\n        classes: [\"hide-show-content-type\"],\n        sort: 40\n      });\n      return options;\n    }\n    /**\n     * Get registry callback reference to uploader UI component\n     *\n     * @returns {Uploader}\n     */\n    ;\n\n    _proto.getUploader = function getUploader() {\n      var initialImageValue = this.contentType.dataStore.get(this.config.additional_data.uploaderConfig.dataScope, \"\"); // Create uploader\n\n      return new _uploader(\"imageuploader_\" + this.contentType.id, this.config.additional_data.uploaderConfig, this.contentType.id, this.contentType.dataStore, initialImageValue);\n    }\n    /**\n     * @param {HTMLElement} element\n     */\n    ;\n\n    _proto.afterRenderWysiwyg = function afterRenderWysiwyg(element) {\n      var _this2 = this;\n\n      this.element = element;\n      element.id = this.contentType.id + \"-editor\"; // Set the innerHTML manually so we don't upset Knockout & TinyMCE\n\n      element.innerHTML = this.data.content.html();\n      this.contentType.dataStore.subscribe(function () {\n        // If we're not focused into TinyMCE inline, update the value when it changes in the data store\n        if (!_this2.wysiwyg || _this2.wysiwyg && _this2.wysiwyg.getAdapter().id !== (0, _editor.getActiveEditor)().id) {\n          element.innerHTML = _this2.data.content.html();\n        }\n      }, \"message\");\n      /**\n       * afterRenderWysiwyg is called whenever Knockout causes a DOM re-render. This occurs frequently within Slider\n       * due to Slick's inability to perform a refresh with Knockout managing the DOM. Due to this the original\n       * WYSIWYG instance will be detached from this slide and we need to re-initialize on click.\n       */\n\n      this.wysiwyg = null;\n    }\n    /**\n     * Stop event to prevent execution of action when editing textarea.\n     *\n     * @param {Preview} preview\n     * @param {JQueryEventObject} event\n     * @returns {Boolean}\n     */\n    ;\n\n    _proto.stopEvent = function stopEvent(preview, event) {\n      event.stopPropagation();\n      return true;\n    }\n    /**\n     * Init WYSIWYG on load\n     *\n     * @param element\n     * @deprecated please use activateEditor & initWysiwygFromClick\n     */\n    ;\n\n    _proto.initWysiwyg = function initWysiwyg(element) {\n      this.element = element;\n      element.id = this.contentType.id + \"-editor\";\n      this.wysiwyg = null;\n      return this.initWysiwygFromClick(false);\n    }\n    /**\n     * Init the WYSIWYG\n     *\n     * @param {boolean} focus Should wysiwyg focus after initialization?\n     * @returns Promise\n     */\n    ;\n\n    _proto.initWysiwygFromClick = function initWysiwygFromClick(focus) {\n      var _this3 = this;\n\n      if (focus === void 0) {\n        focus = false;\n      }\n\n      if (this.wysiwyg) {\n        return Promise.resolve(this.wysiwyg);\n      }\n\n      var wysiwygConfig = this.config.additional_data.wysiwygConfig.wysiwygConfigData;\n\n      if (focus) {\n        wysiwygConfig.adapter.settings.auto_focus = this.element.id;\n\n        wysiwygConfig.adapter.settings.init_instance_callback = function (editor) {\n          editor.on(\"focus\", function () {\n            (0, _jquery)(_this3.element).parents(_this3.bannerOverlaySelector).zIndex(_this3.activeEditorOverlayZIndex);\n          });\n          editor.on(\"blur\", function () {\n            (0, _jquery)(_this3.element).parents(_this3.bannerOverlaySelector).zIndex(_this3.defaultOverlayZIndex);\n            (0, _nestingLinkDialog)(_this3.contentType.dataStore, _this3.wysiwyg, \"message\", \"link_url\");\n            (0, _nestingWidgetDialog)(_this3.contentType.dataStore, _this3.wysiwyg, \"message\", \"link_url\");\n          });\n\n          _underscore.defer(function () {\n            _this3.element.blur();\n\n            _this3.element.focus();\n          });\n        };\n      }\n\n      wysiwygConfig.adapter.settings.fixed_toolbar_container = \"#\" + this.contentType.id + \" .pagebuilder-banner-text-content\";\n      return (0, _factory)(this.contentType.id, this.element.id, this.config.name, wysiwygConfig, this.contentType.dataStore, \"message\", this.contentType.stageId).then(function (wysiwyg) {\n        _this3.wysiwyg = wysiwyg;\n        return wysiwyg;\n      });\n    }\n    /**\n     * Makes WYSIWYG active\n     *\n     * @param {Preview} preview\n     * @param {JQueryEventObject} event\n     * @returns {Boolean}\n     */\n    ;\n\n    _proto.activateEditor = function activateEditor(preview, event) {\n      var _this4 = this;\n\n      if (this.element && !this.wysiwyg) {\n        var bookmark = (0, _editor.createBookmark)(event);\n        (0, _editor.lockImageSize)(this.element);\n        this.element.removeAttribute(\"contenteditable\");\n\n        _underscore.defer(function () {\n          _this4.initWysiwygFromClick(true).then(function () {\n            return (0, _delayUntil)(function () {\n              // We no longer need to handle double click once it's initialized\n              _this4.handledDoubleClick = true;\n\n              _this4.wysiwygDeferred.resolve();\n\n              (0, _editor.moveToBookmark)(bookmark);\n              (0, _editor.unlockImageSize)(_this4.element);\n            }, function () {\n              return _this4.element.classList.contains(\"mce-edit-focus\");\n            }, 10);\n          }).catch(function (error) {\n            // If there's an error with init of WYSIWYG editor push into the console to aid support\n            console.error(error);\n          });\n        });\n      } else if (this.element && this.wysiwyg) {\n        var element = this.element || this.textarea;\n\n        if (event.currentTarget !== event.target && event.target !== element && !element.contains(event.target)) {\n          return;\n        }\n\n        element.focus();\n      }\n    }\n    /**\n     * If a user double clicks prior to initializing TinyMCE, forward the event\n     *\n     * @param preview\n     * @param event\n     */\n    ;\n\n    _proto.handleDoubleClick = function handleDoubleClick(preview, event) {\n      var _this5 = this;\n\n      if (this.handledDoubleClick) {\n        return;\n      }\n\n      event.preventDefault();\n      var targetIndex = (0, _editor.findNodeIndex)(this.element, event.target.tagName, event.target);\n      this.handledDoubleClick = true;\n      this.wysiwygDeferred.then(function () {\n        var target = document.getElementById(event.target.id);\n\n        if (!target) {\n          target = (0, _editor.getNodeByIndex)(_this5.element, event.target.tagName, targetIndex);\n        }\n\n        if (target) {\n          target.dispatchEvent((0, _editor.createDoubleClickEvent)());\n        }\n      });\n    }\n    /**\n     * Set state based on overlay mouseover event for the preview\n     */\n    ;\n\n    _proto.onMouseOverWrapper = function onMouseOverWrapper() {\n      if (this.data.main.attributes()[\"data-show-overlay\"] === \"hover\") {\n        this.data.overlay.attributes(Object.assign(this.data.overlay.attributes(), {\n          \"data-background-color-orig\": this.data.overlay.style().backgroundColor\n        }));\n        this.data.overlay.style(Object.assign(this.data.overlay.style(), {\n          backgroundColor: this.data.overlay.attributes()[\"data-overlay-color\"]\n        }));\n      }\n\n      if (this.data.main.attributes()[\"data-show-button\"] === \"hover\") {\n        this.data.button.style(Object.assign(this.data.button.style(), {\n          opacity: 1,\n          visibility: \"visible\"\n        }));\n      }\n    }\n    /**\n     * Set state based on overlay mouseout event for the preview\n     */\n    ;\n\n    _proto.onMouseOutWrapper = function onMouseOutWrapper() {\n      if (this.data.main.attributes()[\"data-show-overlay\"] === \"hover\") {\n        this.data.overlay.style(Object.assign(this.data.overlay.style(), {\n          backgroundColor: this.data.overlay.attributes()[\"data-background-color-orig\"]\n        }));\n      }\n\n      if (this.data.main.attributes()[\"data-show-button\"] === \"hover\") {\n        this.data.button.style(Object.assign(this.data.button.style(), {\n          opacity: 0,\n          visibility: \"hidden\"\n        }));\n      }\n    }\n    /**\n     * @returns {Boolean}\n     */\n    ;\n\n    _proto.isWysiwygSupported = function isWysiwygSupported() {\n      return (0, _editor.isWysiwygSupported)();\n    }\n    /**\n     * @param {HTMLTextAreaElement} element\n     */\n    ;\n\n    _proto.initTextarea = function initTextarea(element) {\n      var _this6 = this;\n\n      this.textarea = element; // set initial value of textarea based on data store\n\n      this.textarea.value = this.contentType.dataStore.get(\"message\");\n      this.adjustTextareaHeightBasedOnScrollHeight(); // Update content in our stage preview textarea after its slideout counterpart gets updated\n\n      _events.on(\"form:\" + this.contentType.id + \":saveAfter\", function () {\n        _this6.textarea.value = _this6.contentType.dataStore.get(\"message\");\n\n        _this6.adjustTextareaHeightBasedOnScrollHeight();\n      });\n    }\n    /**\n     * Save current value of textarea in data store\n     */\n    ;\n\n    _proto.onTextareaKeyUp = function onTextareaKeyUp() {\n      this.adjustTextareaHeightBasedOnScrollHeight();\n      this.contentType.dataStore.set(\"message\", this.textarea.value);\n    }\n    /**\n     * Start stage interaction on textarea blur\n     */\n    ;\n\n    _proto.onTextareaFocus = function onTextareaFocus() {\n      (0, _jquery)(this.textarea).closest(\".pagebuilder-banner-text-content\").addClass(\"pagebuilder-toolbar-active\");\n\n      _events.trigger(\"stage:interactionStart\");\n    }\n    /**\n     * Stop stage interaction on textarea blur\n     */\n    ;\n\n    _proto.onTextareaBlur = function onTextareaBlur() {\n      (0, _jquery)(this.textarea).closest(\".pagebuilder-banner-text-content\").removeClass(\"pagebuilder-toolbar-active\");\n\n      _events.trigger(\"stage:interactionStop\");\n    }\n    /**\n     * Init the parallax element\n     *\n     * @param {HTMLElement} element\n     */\n    ;\n\n    _proto.initParallax = function initParallax(element) {\n      var _this7 = this;\n\n      this.wrapper = element;\n\n      _underscore.defer(function () {\n        _this7.buildJarallax();\n      });\n    }\n    /**\n     * Destroy jarallax instance.\n     */\n    ;\n\n    _proto.destroy = function destroy() {\n      _preview2.prototype.destroy.call(this);\n\n      if (this.wrapper) {\n        jarallax(this.wrapper, \"destroy\");\n      }\n    }\n    /**\n     * @inheritDoc\n     */\n    ;\n\n    _proto.bindEvents = function bindEvents() {\n      var _this8 = this;\n\n      this.contentType.dataStore.subscribe(function (state) {\n        var sanitizedContent = (0, _editor.removeReservedHtmlAttributes)(state.message);\n\n        if (sanitizedContent !== state.message) {\n          state.message = sanitizedContent;\n        }\n      }, \"message\");\n\n      _preview2.prototype.bindEvents.call(this);\n\n      _events.on(\"banner:mountAfter\", function (args) {\n        if (args.id === _this8.contentType.id) {\n          _this8.buildJarallax();\n\n          _this8.isSnapshot.subscribe(function (value) {\n            _this8.changeUploaderControlsVisibility();\n          });\n\n          _this8.changeUploaderControlsVisibility();\n        }\n      });\n\n      _events.on(this.config.name + \":\" + this.contentType.id + \":updateAfter\", function () {\n        var dataStore = _this8.contentType.dataStore.getState();\n\n        var imageObject = dataStore[_this8.config.additional_data.uploaderConfig.dataScope][0] || {}; // Resolves issue when tinyMCE injects a non-breaking space on reinitialization and removes placeholder.\n\n        if (dataStore.message === \"<div data-bind=\\\"html: data.content.html\\\">&nbsp;</div>\") {\n          _this8.contentType.dataStore.set(\"message\", \"\");\n        }\n\n        _events.trigger(\"image:\" + _this8.contentType.id + \":assignAfter\", imageObject);\n      });\n\n      this.contentType.dataStore.subscribe(function (data) {\n        if (this.shouldUpdateVideo(data)) {\n          this.buildJarallax();\n        }\n      }.bind(this));\n\n      _events.on(\"image:\" + this.contentType.id + \":uploadAfter\", function () {\n        _this8.contentType.dataStore.set(\"background_type\", \"image\");\n      });\n\n      _events.on(\"stage:\" + this.contentType.stageId + \":viewportChangeAfter\", function (args) {\n        _this8.buildJarallax();\n      });\n    }\n    /**\n     * Change uploader controls visibility\n     */\n    ;\n\n    _proto.changeUploaderControlsVisibility = function changeUploaderControlsVisibility() {\n      var _this9 = this;\n\n      this.getUploader().getUiComponent()(function (uploader) {\n        uploader.visibleControls = !_this9.isSnapshot();\n      });\n    }\n    /**\n     * Adjust textarea's height based on scrollHeight\n     */\n    ;\n\n    _proto.adjustTextareaHeightBasedOnScrollHeight = function adjustTextareaHeightBasedOnScrollHeight() {\n      this.textarea.style.height = \"\";\n      var scrollHeight = this.textarea.scrollHeight;\n      var minHeight = parseInt((0, _jquery)(this.textarea).css(\"min-height\"), 10);\n\n      if (scrollHeight === minHeight) {\n        // leave height at 'auto'\n        return;\n      }\n\n      (0, _jquery)(this.textarea).height(scrollHeight);\n    }\n    /**\n     * Check if video options has been updated.\n     *\n     * @return boolean\n     */\n    ;\n\n    _proto.shouldUpdateVideo = function shouldUpdateVideo(state) {\n      var _this10 = this;\n\n      var previousState = this.contentType.dataStore.getPreviousState();\n\n      var diff = _mageUtils.compare(previousState, state).changes;\n\n      if (diff.length > 0) {\n        return _underscore.some(diff, function (element) {\n          if (element.name === \"video_fallback_image\") {\n            return (!_underscore.isEmpty(previousState.video_fallback_image) && previousState.video_fallback_image) !== (!_underscore.isEmpty(state.video_fallback_image) && state.video_fallback_image);\n          }\n\n          return _this10.videoUpdateProperties.indexOf(element.name) !== -1;\n        });\n      }\n    };\n\n    return Preview;\n  }(_preview);\n\n  return Preview;\n});\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/banner/wysiwyg/tinymce/component-initializer.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"mage/adminhtml/wysiwyg/events\"], function (_jquery, _events) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var ComponentInitializer = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function ComponentInitializer() {}\n\n    var _proto = ComponentInitializer.prototype;\n\n    /**\n     * The editor element\n     */\n\n    /**\n     * The configuration of the wysiwyg content type\n     */\n\n    /**\n     * Initialize the instance\n     *\n     * @param {Wysiwyg} wysiwyg\n     */\n    _proto.initialize = function initialize(wysiwyg) {\n      this.$element = (0, _jquery)(\"#\" + wysiwyg.elementId);\n      this.config = wysiwyg.config;\n      var tinymce = wysiwyg.getAdapter();\n      tinymce.eventBus.attachEventHandler(_events.afterFocus, this.onFocus.bind(this));\n      tinymce.eventBus.attachEventHandler(_events.afterBlur, this.onBlur.bind(this));\n    }\n    /**\n     * Called when tinymce is focused\n     */\n    ;\n\n    _proto.onFocus = function onFocus() {\n      var _this = this;\n\n      // If there isn't enough room for a left-aligned toolbar, right align it\n      if ((0, _jquery)(window).width() < this.$element.offset().left + parseInt(this.config.adapter_config.minToolbarWidth, 10)) {\n        this.$element.addClass(\"_right-aligned-toolbar\");\n      } else {\n        this.$element.removeClass(\"_right-aligned-toolbar\");\n      }\n\n      _jquery.each(this.config.adapter_config.parentSelectorsToUnderlay, function (i, selector) {\n        _this.$element.closest(selector).css(\"z-index\", 100);\n      });\n    }\n    /**\n     * Called when tinymce is blurred\n     */\n    ;\n\n    _proto.onBlur = function onBlur() {\n      var _this2 = this;\n\n      _jquery.each(this.config.adapter_config.parentSelectorsToUnderlay, function (i, selector) {\n        _this2.$element.closest(selector).css(\"z-index\", \"\");\n      });\n    };\n\n    return ComponentInitializer;\n  }();\n\n  return ComponentInitializer;\n});\n//# sourceMappingURL=component-initializer.js.map","Magento_PageBuilder/js/content-type/banner/converter/attribute/overlay-color.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var OverlayColor = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function OverlayColor() {}\n\n    var _proto = OverlayColor.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value === \"transparent\" ? \"\" : value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      if (data.overlay_color) {\n        return data.overlay_color.toString();\n      }\n\n      return \"\";\n    };\n\n    return OverlayColor;\n  }();\n\n  return OverlayColor;\n});\n//# sourceMappingURL=overlay-color.js.map","Magento_PageBuilder/js/content-type/banner/converter/style/overlay-background-color.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var OverlayBackgroundColor = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function OverlayBackgroundColor() {}\n\n    var _proto = OverlayBackgroundColor.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (data.show_overlay === \"always\" && value !== \"\" && value !== undefined) {\n        return value;\n      }\n\n      return \"transparent\";\n    };\n\n    return OverlayBackgroundColor;\n  }();\n\n  return OverlayBackgroundColor;\n});\n//# sourceMappingURL=overlay-background-color.js.map","Magento_PageBuilder/js/content-type/banner/converter/style/button-visibility.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var ButtonVisibility = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function ButtonVisibility() {}\n\n    var _proto = ButtonVisibility.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      return data.show_button === \"always\" ? \"visible\" : \"hidden\";\n    };\n\n    return ButtonVisibility;\n  }();\n\n  return ButtonVisibility;\n});\n//# sourceMappingURL=button-visibility.js.map","Magento_PageBuilder/js/content-type/banner/converter/style/button-opacity.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var ButtonOpacity = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function ButtonOpacity() {}\n\n    var _proto = ButtonOpacity.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      return data.show_button === \"always\" ? \"1\" : \"0\";\n    };\n\n    return ButtonOpacity;\n  }();\n\n  return ButtonOpacity;\n});\n//# sourceMappingURL=button-opacity.js.map","Magento_PageBuilder/js/content-type/banner/appearance/default/widget.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'Magento_PageBuilder/js/widget/show-on-hover',\n    'Magento_PageBuilder/js/widget/video-background'\n], function (showOnHover, videoBackground) {\n    'use strict';\n\n    return function (config, element) {\n        var videoElement = element[0].querySelector('[data-background-type=video]');\n\n        showOnHover(config);\n\n        if (videoElement) {\n            videoBackground(config, videoElement);\n        }\n    };\n});\n","Magento_PageBuilder/js/content-type/row/preview.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"jarallax\", \"jarallaxVideo\", \"jquery\", \"knockout\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/resource/resize-observer/ResizeObserver\", \"underscore\", \"vimeoWrapper\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/preview-collection\"], function (_jarallax, _jarallaxVideo, _jquery, _knockout, _events, _ResizeObserver, _underscore, _vimeoWrapper, _hideShowOption, _previewCollection) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\n    \"use strict\";\n\n    _inheritsLoose(Preview, _previewCollection2);\n\n    /**\n     * Debounce and defer the init of Jarallax\n     *\n     * @type {(() => void) & _.Cancelable}\n     */\n\n    /**\n     * @param {ContentTypeInterface} contentType\n     * @param {ContentTypeConfigInterface} config\n     * @param {ObservableUpdater} observableUpdater\n     */\n    function Preview(contentType, config, observableUpdater) {\n      var _this;\n\n      _this = _previewCollection2.call(this, contentType, config, observableUpdater) || this;\n      _this.wrapClass = _knockout.observable(false);\n      _this.buildJarallax = _underscore.debounce(function () {\n        // Destroy all instances of the plugin prior\n        try {\n          jarallax(_this.element, \"destroy\");\n        } catch (e) {// Failure of destroying is acceptable\n        }\n\n        if (_this.element && (0, _jquery)(_this.element).hasClass(\"jarallax\") && _this.contentType.dataStore.get(\"background_type\") !== \"video\" && _this.contentType.dataStore.get(\"background_image\").length) {\n          _underscore.defer(function () {\n            // Build Parallax on elements with the correct class\n            var parallaxSpeed = Number.parseFloat(_this.contentType.dataStore.get(\"parallax_speed\"));\n            jarallax(_this.element, {\n              imgPosition: _this.contentType.dataStore.get(\"background_position\") || \"50% 50%\",\n              imgRepeat: _this.contentType.dataStore.get(\"background_repeat\") || \"no-repeat\",\n              imgSize: _this.contentType.dataStore.get(\"background_size\") || \"cover\",\n              speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5\n            });\n            jarallax(_this.element, \"onResize\");\n          });\n        }\n\n        if (_this.element && _this.element.dataset.backgroundType === \"video\" && _this.element.dataset.videoSrc.length) {\n          var parallaxSpeed = _this.contentType.dataStore.get(\"enable_parallax\") === \"1\" ? Number.parseFloat(_this.contentType.dataStore.get(\"parallax_speed\")) : 1;\n\n          _underscore.defer(function () {\n            // Build Parallax on elements with the correct class\n            jarallax(_this.element, {\n              videoSrc: _this.element.dataset.videoSrc,\n              imgSrc: _this.element.dataset.videoFallbackSrc,\n              videoLoop: _this.contentType.dataStore.get(\"video_loop\") === \"true\",\n              speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5,\n              videoPlayOnlyVisible: _this.contentType.dataStore.get(\"video_play_only_visible\") === \"true\",\n              videoLazyLoading: _this.contentType.dataStore.get(\"video_lazy_load\") === \"true\"\n            }); // @ts-ignore\n\n            if (_this.element.jarallax && _this.element.jarallax.video) {\n              // @ts-ignore\n              _this.element.jarallax.video.on(\"started\", function () {\n                // @ts-ignore\n                if (_this.element.jarallax.$video) {\n                  // @ts-ignore\n                  _this.element.jarallax.$video.style.visibility = \"visible\";\n                }\n              });\n            }\n          });\n        }\n      }, 50);\n\n      _this.contentType.dataStore.subscribe(_this.buildJarallax);\n\n      _events.on(\"row:mountAfter\", function (args) {\n        if (args.id === _this.contentType.id) {\n          _this.buildJarallax();\n        }\n      });\n\n      _events.on(\"contentType:mountAfter\", function (args) {\n        if (args.contentType.parentContentType && args.contentType.parentContentType.id === _this.contentType.id) {\n          _this.buildJarallax();\n        }\n      });\n\n      _events.on(\"stage:\" + _this.contentType.stageId + \":fullScreenModeChangeAfter\", _this.toggleFullScreen.bind(_assertThisInitialized(_this)));\n\n      _events.on(\"stage:\" + _this.contentType.stageId + \":viewportChangeAfter\", function (args) {\n        _this.buildJarallax();\n      });\n\n      return _this;\n    }\n    /**\n     * Get background image url base on the viewport.\n     *\n     * @returns {string}\n     */\n\n\n    var _proto = Preview.prototype;\n\n    _proto.getBackgroundImage = function getBackgroundImage() {\n      var mobileImage = this.contentType.dataStore.get(\"mobile_image\");\n      var desktopImage = this.contentType.dataStore.get(\"background_image\");\n      var backgroundImage = this.viewport() === \"mobile\" && mobileImage.length ? mobileImage : desktopImage;\n      return backgroundImage.length ? \"url(\\\"\" + backgroundImage[0].url + \"\\\")\" : \"none\";\n    }\n    /**\n     * Toggle fullscreen\n     */\n    ;\n\n    _proto.toggleFullScreen = function toggleFullScreen() {\n      if ((0, _jquery)(this.element).hasClass(\"jarallax\")) {\n        this.buildJarallax();\n      }\n    }\n    /**\n     * Use the conditional remove to disable the option when the content type has a single child\n     *\n     * @returns {OptionsInterface}\n     */\n    ;\n\n    _proto.retrieveOptions = function retrieveOptions() {\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\n\n      options.hideShow = new _hideShowOption({\n        preview: this,\n        icon: _hideShowOption.showIcon,\n        title: _hideShowOption.showText,\n        action: this.onOptionVisibilityToggle,\n        classes: [\"hide-show-content-type\"],\n        sort: 40\n      });\n      return options;\n    }\n    /**\n     * Init the parallax element\n     *\n     * @param {HTMLElement} element\n     */\n    ;\n\n    _proto.initParallax = function initParallax(element) {\n      var _this2 = this;\n\n      this.element = element;\n\n      _underscore.defer(function () {\n        _this2.buildJarallax();\n      });\n\n      new _ResizeObserver(function () {\n        // Observe for resizes of the element and force jarallax to display correctly\n        if ((0, _jquery)(_this2.element).hasClass(\"jarallax\") && _this2.contentType.dataStore.get(\"background_image\").length) {\n          jarallax(_this2.element, \"onResize\");\n          jarallax(_this2.element, \"onScroll\");\n        }\n      }).observe(this.element);\n    }\n    /**\n     * Destroy jarallax instance.\n     */\n    ;\n\n    _proto.destroy = function destroy() {\n      _previewCollection2.prototype.destroy.call(this);\n\n      if (this.element) {\n        jarallax(this.element, \"destroy\");\n      }\n    }\n    /**\n     * Return selected element styles\n     *\n     * @param element\n     * @param styleProperties\n     */\n    ;\n\n    _proto.getStyle = function getStyle(element, styleProperties) {\n      var stylesObject = element.style();\n      return styleProperties.reduce(function (obj, key) {\n        var _extends2;\n\n        return _extends({}, obj, (_extends2 = {}, _extends2[key] = stylesObject[key], _extends2));\n      }, {});\n    }\n    /**\n     * Return element styles without selected\n     *\n     * @param element\n     * @param styleProperties\n     */\n    ;\n\n    _proto.getStyleWithout = function getStyleWithout(element, styleProperties) {\n      var stylesObject = element.style();\n      return Object.keys(stylesObject).filter(function (key) {\n        return !styleProperties.includes(key);\n      }).reduce(function (obj, key) {\n        var _extends3;\n\n        return _extends({}, obj, (_extends3 = {}, _extends3[key] = stylesObject[key], _extends3));\n      }, {});\n    };\n\n    return Preview;\n  }(_previewCollection);\n\n  return Preview;\n});\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/row/converter/style/margins.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var Margins = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Margins() {}\n\n    var _proto = Margins.prototype;\n\n    /**\n     * @param {string} value\n     * @returns {Object | string}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var result = {};\n      var value = (0, _object.get)(data, name);\n\n      if (value && _underscore.isString(value)) {\n        value = JSON.parse(value);\n      }\n\n      if (value && undefined !== value.margin) {\n        result.marginLeft = value.margin.left ? value.margin.left + \"px\" : \"\";\n        result.marginTop = value.margin.top ? value.margin.top + \"px\" : \"\";\n        result.marginRight = value.margin.right ? value.margin.right + \"px\" : \"\";\n        result.marginBottom = (parseInt(value.margin.bottom, 10) > 0 ? value.margin.bottom : 1) + \"px\";\n      }\n\n      return result;\n    };\n\n    return Margins;\n  }();\n\n  return Margins;\n});\n//# sourceMappingURL=margins.js.map","Magento_PageBuilder/js/content-type/row/converter/style/paddings.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var Paddings = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Paddings() {}\n\n    var _proto = Paddings.prototype;\n\n    /**\n     * @param {string} value\n     * @returns {Object | string}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var result = {};\n      var value = (0, _object.get)(data, name);\n\n      if (value && _underscore.isString(value)) {\n        value = JSON.parse(value);\n      }\n\n      if (value && undefined !== value.padding) {\n        result.paddingLeft = value.padding.left ? value.padding.left + \"px\" : \"\";\n        result.paddingTop = value.padding.top ? value.padding.top + \"px\" : \"\";\n        result.paddingRight = value.padding.right ? value.padding.right + \"px\" : \"\";\n        result.paddingBottom = value.padding.bottom ? value.padding.bottom + \"px\" : \"\";\n      }\n\n      return result;\n    };\n\n    return Paddings;\n  }();\n\n  return Paddings;\n});\n//# sourceMappingURL=paddings.js.map","Magento_PageBuilder/js/content-type/row/appearance/default/widget-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(['underscore', 'jquery', 'Magento_PageBuilder/js/events'], function (_, $, events) {\n    'use strict';\n\n    return function (target) {\n        return function (config, element) {\n            var result = target(config, element),\n                stageId = $(element).parents('[data-role=\"pagebuilder-stage\"]').attr('id'),\n                $element = $(element);\n\n            if ($element.data('appearance') === 'contained') {\n                $element = $(element).find('[data-element=\"inner\"]');\n            }\n\n            // If Parallax isn't enabled, let's not attach the event\n            if ($element.data('enableParallax') !== 1) {\n                return result;\n            }\n\n            // Listen for full screen events and destroy and rebuild jarallax\n            events.on('stage:' + stageId + ':fullScreenModeChangeAfter', function () {\n                _.delay(function () {\n                    $element.jarallax('destroy');\n                    target(config, element);\n                }, 350);\n            });\n\n            return result;\n        };\n    };\n});\n","Magento_PageBuilder/js/content-type/row/appearance/default/widget.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_PageBuilder/js/widget/video-background',\n    'jarallax'\n], function ($, videoBackground) {\n    'use strict';\n\n    return function (config, element) {\n        var $element = $(element),\n            parallaxSpeed = null,\n            elementStyle = null;\n\n        if ($element.data('appearance') === 'contained') {\n            $element = $(element).find('[data-element=\"inner\"]');\n        }\n\n        if ($element.data('background-type') === 'video') {\n            videoBackground(config, $element[0]);\n\n            return;\n        }\n\n        if ($element.data('enableParallax') !== 1) {\n            return;\n        }\n\n        $element.addClass('jarallax');\n        $element.attr('data-jarallax', '');\n\n        parallaxSpeed = parseFloat($element.data('parallaxSpeed'));\n        elementStyle = window.getComputedStyle($element[0]);\n\n        window.jarallax($element[0], {\n            imgPosition: elementStyle.backgroundPosition || '50% 50%',\n            imgRepeat: elementStyle.backgroundRepeat || 'no-repeat',\n            imgSize: elementStyle.backgroundSize || 'cover',\n            speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5\n        });\n    };\n});\n","Magento_PageBuilder/js/content-type/block/preview.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/widget-initializer\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/style-registry\", \"Magento_PageBuilder/js/utils/object\", \"Magento_PageBuilder/js/content-type/preview\"], function (_jquery, _knockout, _translate, _widgetInitializer, _mageUtils, _underscore, _config, _hideShowOption, _styleRegistry, _object, _preview) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Preview = /*#__PURE__*/function (_preview2) {\n    \"use strict\";\n\n    _inheritsLoose(Preview, _preview2);\n\n    /**\n     * @inheritdoc\n     */\n    function Preview(contentType, config, observableUpdater) {\n      var _this;\n\n      _this = _preview2.call(this, contentType, config, observableUpdater) || this;\n      _this.displayingBlockPreview = _knockout.observable(false);\n      _this.loading = _knockout.observable(false);\n      _this.messages = {\n        NOT_SELECTED: (0, _translate)(\"Empty Block\"),\n        UNKNOWN_ERROR: (0, _translate)(\"An unknown error occurred. Please try again.\")\n      };\n      _this.placeholderText = _knockout.observable(_this.messages.NOT_SELECTED);\n      return _this;\n    }\n    /**\n     * Return an array of options\n     *\n     * @returns {OptionsInterface}\n     */\n\n\n    var _proto = Preview.prototype;\n\n    _proto.retrieveOptions = function retrieveOptions() {\n      var options = _preview2.prototype.retrieveOptions.call(this);\n\n      options.hideShow = new _hideShowOption({\n        preview: this,\n        icon: _hideShowOption.showIcon,\n        title: _hideShowOption.showText,\n        action: this.onOptionVisibilityToggle,\n        classes: [\"hide-show-content-type\"],\n        sort: 40\n      });\n      return options;\n    }\n    /**\n     * Runs the widget initializer for each configured widget\n     */\n    ;\n\n    _proto.initializeWidgets = function initializeWidgets(element) {\n      if (element) {\n        this.element = element;\n        (0, _widgetInitializer)({\n          config: _config.getConfig(\"widgets\"),\n          breakpoints: _config.getConfig(\"breakpoints\"),\n          currentViewport: _config.getConfig(\"viewport\")\n        }, element);\n      }\n    }\n    /**\n     * Updates the view state using the data provided\n     * @param {DataObject} data\n     */\n    ;\n\n    _proto.processBlockData = function processBlockData(data) {\n      // Only load if something changed\n      this.displayPreviewPlaceholder(data, \"block_id\");\n\n      if (data.block_id && data.template.length !== 0) {\n        this.processRequest(data, \"block_id\", \"title\");\n      }\n    }\n    /**\n     * @inheritdoc\n     */\n    ;\n\n    _proto.afterObservablesUpdated = function afterObservablesUpdated() {\n      _preview2.prototype.afterObservablesUpdated.call(this);\n\n      var data = this.contentType.dataStore.getState(); // Only load if something changed\n\n      this.processBlockData(data);\n    }\n    /**\n     * Display preview placeholder\n     *\n     * @param {DataObject} data\n     * @param {string} identifierName\n     */\n    ;\n\n    _proto.displayPreviewPlaceholder = function displayPreviewPlaceholder(data, identifierName) {\n      var blockId = (0, _object.get)(data, identifierName); // Only load if something changed\n\n      if (this.lastBlockId === blockId && this.lastTemplate === data.template) {\n        // The mass converter will have transformed the HTML property into a directive\n        if (this.lastRenderedHtml) {\n          this.data.main.html(this.lastRenderedHtml);\n          this.showBlockPreview(true);\n          this.initializeWidgets(this.element);\n        }\n      } else {\n        this.showBlockPreview(false);\n        this.placeholderText(\"\");\n      }\n\n      if (!blockId || blockId && blockId.toString().length === 0 || data.template.length === 0) {\n        this.showBlockPreview(false);\n        this.placeholderText(this.messages.NOT_SELECTED);\n        return;\n      }\n    }\n    /**\n     *\n     * @param {DataObject} data\n     * @param {string} identifierName\n     * @param {string} labelKey\n     */\n    ;\n\n    _proto.processRequest = function processRequest(data, identifierName, labelKey) {\n      var _this2 = this;\n\n      var url = _config.getConfig(\"preview_url\");\n\n      var identifier = (0, _object.get)(data, identifierName);\n      var requestConfig = {\n        // Prevent caching\n        method: \"POST\",\n        data: {\n          role: this.config.name,\n          block_id: identifier,\n          directive: this.data.main.html()\n        }\n      };\n      this.loading(true); // Retrieve a state object representing the block from the preview controller and process it on the stage\n\n      _jquery.ajax(url, requestConfig) // The state object will contain the block name and either html or a message why there isn't any.\n      .done(function (response) {\n        // Empty content means something bad happened in the controller that didn't trigger a 5xx\n        if (typeof response.data !== \"object\") {\n          _this2.showBlockPreview(false);\n\n          _this2.placeholderText(_this2.messages.UNKNOWN_ERROR);\n\n          return;\n        } // Update the stage content type label with the real block title if provided\n\n\n        _this2.displayLabel(response.data[labelKey] ? response.data[labelKey] : _this2.config.label);\n\n        var content = \"\";\n\n        if (response.data.content) {\n          content = _this2.processContent(response.data.content);\n\n          _this2.data.main.html(content);\n\n          _this2.showBlockPreview(true);\n\n          _this2.initializeWidgets(_this2.element);\n        } else if (response.data.error) {\n          _this2.showBlockPreview(false);\n\n          _this2.placeholderText(response.data.error);\n        }\n\n        _this2.lastBlockId = parseInt(identifier.toString(), 10);\n        _this2.lastTemplate = data.template.toString();\n        _this2.lastRenderedHtml = content;\n      }).fail(function () {\n        _this2.showBlockPreview(false);\n\n        _this2.placeholderText(_this2.messages.UNKNOWN_ERROR);\n      }).always(function () {\n        _this2.loading(false);\n      });\n    }\n    /**\n     * Toggle display of block preview.  If showing block preview, add hidden mode to PB preview.\n     * @param {boolean} isShow\n     */\n    ;\n\n    _proto.showBlockPreview = function showBlockPreview(isShow) {\n      this.displayingBlockPreview(isShow);\n    }\n    /**\n     * Adapt content to view it on stage.\n     *\n     * @param content\n     */\n    ;\n\n    _proto.processContent = function processContent(content) {\n      var processedContent = this.processBackgroundImages(content);\n      processedContent = this.processBreakpointStyles(processedContent);\n      return processedContent;\n    }\n    /**\n     * Generate styles for background images.\n     *\n     * @param {string} content\n     * @return string\n     */\n    ;\n\n    _proto.processBackgroundImages = function processBackgroundImages(content) {\n      var document = new DOMParser().parseFromString(content, \"text/html\");\n      var elements = document.querySelectorAll(\"[data-background-images]\");\n      var styleBlock = document.createElement(\"style\");\n\n      var viewports = _config.getConfig(\"viewports\");\n\n      elements.forEach(function (element) {\n        var rawAttrValue = element.getAttribute(\"data-background-images\").replace(/\\\\(.)/mg, \"$1\");\n        var attrValue = JSON.parse(rawAttrValue);\n\n        var elementClass = \"background-image-\" + _mageUtils.uniqueid(13);\n\n        var rules = \"\";\n        Object.keys(attrValue).forEach(function (imageName) {\n          var imageUrl = attrValue[imageName];\n          var viewportName = imageName.replace(\"_image\", \"\");\n\n          if (viewports[viewportName].stage && imageUrl) {\n            rules += \".\" + viewportName + \"-viewport .\" + elementClass + \" {\\n                            background-image: url(\\\"\" + imageUrl + \"\\\");\\n                        }\";\n          }\n        });\n\n        if (rules.length) {\n          styleBlock.append(rules);\n          element.classList.add(elementClass);\n        }\n      });\n\n      if (elements.length && styleBlock.innerText.length) {\n        document.body.append(styleBlock);\n        content = document.head.innerHTML + document.body.innerHTML;\n      }\n\n      return content;\n    }\n    /**\n     * Replace media queries with viewport classes.\n     *\n     * @param {string} content\n     * @return string\n     */\n    ;\n\n    _proto.processBreakpointStyles = function processBreakpointStyles(content) {\n      var document = new DOMParser().parseFromString(content, \"text/html\");\n      var styleBlocks = document.querySelectorAll(\"style\");\n      var mediaStyleBlock = document.createElement(\"style\");\n\n      var viewports = _config.getConfig(\"viewports\");\n\n      styleBlocks.forEach(function (styleBlock) {\n        var cssRules = styleBlock.sheet.cssRules;\n        Array.from(cssRules).forEach(function (rule) {\n          var mediaScope = rule instanceof CSSMediaRule && _underscore.findKey(viewports, function (viewport) {\n            return rule.conditionText === viewport.media;\n          });\n\n          if (mediaScope) {\n            Array.from(rule.cssRules).forEach(function (mediaRule, index) {\n              if (mediaRule.selectorText.indexOf(_styleRegistry.pbStyleAttribute) !== -1) {\n                var searchPattern = new RegExp(_config.getConfig(\"bodyId\") + \" \", \"g\");\n                var replaceValue = _config.getConfig(\"bodyId\") + \" .\" + mediaScope + \"-viewport \";\n                var selector = mediaRule.selectorText.replace(searchPattern, replaceValue);\n                mediaStyleBlock.append(selector + \" {\" + mediaRule.style.cssText + \"}\");\n              }\n            });\n          }\n        });\n      });\n\n      if (mediaStyleBlock.innerText.length) {\n        document.body.append(mediaStyleBlock);\n        content = document.head.innerHTML + document.body.innerHTML;\n      }\n\n      return content;\n    };\n\n    return Preview;\n  }(_preview);\n\n  return Preview;\n});\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/block/mass-converter/widget-directive.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_PageBuilder/js/mass-converter/widget-directive-abstract\", \"Magento_PageBuilder/js/utils/object\"], function (_widgetDirectiveAbstract, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Enables the settings of the content type to be stored as a widget directive.\n   *\n   * @api\n   */\n  var WidgetDirective = /*#__PURE__*/function (_widgetDirectiveAbstr) {\n    \"use strict\";\n\n    _inheritsLoose(WidgetDirective, _widgetDirectiveAbstr);\n\n    function WidgetDirective() {\n      return _widgetDirectiveAbstr.apply(this, arguments) || this;\n    }\n\n    var _proto = WidgetDirective.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param {object} data\n     * @param {object} config\n     * @returns {object}\n     */\n    _proto.fromDom = function fromDom(data, config) {\n      var attributes = _widgetDirectiveAbstr.prototype.fromDom.call(this, data, config);\n\n      data.template = attributes.template;\n      data.block_id = attributes.block_id;\n      return data;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {object} data\n     * @param {object} config\n     * @returns {object}\n     */\n    ;\n\n    _proto.toDom = function toDom(data, config) {\n      var attributes = {\n        type: \"Magento\\\\Cms\\\\Block\\\\Widget\\\\Block\",\n        template: data.template,\n        block_id: data.block_id,\n        type_name: \"CMS Static Block\"\n      };\n\n      if (!attributes.block_id || !attributes.template) {\n        return data;\n      }\n\n      (0, _object.set)(data, config.html_variable, this.buildDirective(attributes));\n      return data;\n    };\n\n    return WidgetDirective;\n  }(_widgetDirectiveAbstract);\n\n  return WidgetDirective;\n});\n//# sourceMappingURL=widget-directive.js.map","Magento_PageBuilder/js/content-type/root-container/content-type-collection.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_Ui/js/modal/alert\", \"Magento_PageBuilder/js/content-type-collection\"], function (_alert, _contentTypeCollection) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var RootContainer = /*#__PURE__*/function (_contentTypeCollectio) {\n    \"use strict\";\n\n    _inheritsLoose(RootContainer, _contentTypeCollectio);\n\n    function RootContainer() {\n      return _contentTypeCollectio.apply(this, arguments) || this;\n    }\n\n    var _proto = RootContainer.prototype;\n\n    /**\n     * Remove a child from the observable array\n     *\n     * @param child\n     */\n    _proto.removeChild = function removeChild(child) {\n      if (this.getChildren().length === 1) {\n        (0, _alert)({\n          content: $t(\"You are not able to remove the final row from the content.\"),\n          title: $t(\"Unable to Remove\")\n        });\n        return;\n      }\n\n      _contentTypeCollectio.prototype.removeChild.call(this, child);\n    };\n\n    return RootContainer;\n  }(_contentTypeCollection);\n\n  return RootContainer;\n});\n//# sourceMappingURL=content-type-collection.js.map","Magento_PageBuilder/js/content-type/video/preview.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/preview\"], function (_hideShowOption, _preview) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Preview = /*#__PURE__*/function (_preview2) {\n    \"use strict\";\n\n    _inheritsLoose(Preview, _preview2);\n\n    function Preview() {\n      return _preview2.apply(this, arguments) || this;\n    }\n\n    var _proto = Preview.prototype;\n\n    /**\n     * Return an array of options\n     *\n     * @returns {OptionsInterface}\n     */\n    _proto.retrieveOptions = function retrieveOptions() {\n      var options = _preview2.prototype.retrieveOptions.call(this);\n\n      options.hideShow = new _hideShowOption({\n        preview: this,\n        icon: _hideShowOption.showIcon,\n        title: _hideShowOption.showText,\n        action: this.onOptionVisibilityToggle,\n        classes: [\"hide-show-content-type\"],\n        sort: 40\n      });\n      return options;\n    };\n\n    _proto.isHosted = function isHosted(src) {\n      var youtubeRegExp = new RegExp(\"^(?:https?:\\/\\/|\\/\\/)?(?:www\\\\.|m\\\\.)?\" + \"(?:youtu\\\\.be\\/|youtube\\\\.com\\/(?:embed\\/|v\\/|watch\\\\?v=|watch\\\\?.+&v=))([\\\\w-]{11})(?![\\\\w-])\");\n      var vimeoRegExp = new RegExp(\"https?:\\/\\/(?:www\\\\.|player\\\\.)?vimeo.com\\/(?:channels\\/\" + \"(?:\\\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\\\d+)\\/video\\/|video\\/|)(\\\\d+)(?:$|\\/|\\\\?)\");\n      return vimeoRegExp.test(src) || youtubeRegExp.test(src);\n    }\n    /**\n     * After render callback\n     *\n     * @param {HTMLVideoElement} videoElement\n     * @param {Preview} self\n     */\n    ;\n\n    _proto.onAfterRender = function onAfterRender(videoElement, self) {\n      // Assign muted attribute explicitly due to API issues\n      videoElement.muted = self.data.video.attributes().autoplay;\n    };\n\n    return Preview;\n  }(_preview);\n\n  return Preview;\n});\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/video/master.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_PageBuilder/js/content-type/master\"], function (_master) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var Master = /*#__PURE__*/function (_master2) {\n    \"use strict\";\n\n    _inheritsLoose(Master, _master2);\n\n    function Master() {\n      return _master2.apply(this, arguments) || this;\n    }\n\n    var _proto = Master.prototype;\n\n    _proto.isHosted = function isHosted(src) {\n      var youtubeRegExp = new RegExp(\"^(?:https?:\\/\\/|\\/\\/)?(?:www\\\\.|m\\\\.)?\" + \"(?:youtu\\\\.be\\/|youtube\\\\.com\\/(?:embed\\/|v\\/|watch\\\\?v=|watch\\\\?.+&v=))([\\\\w-]{11})(?![\\\\w-])\");\n      var vimeoRegExp = new RegExp(\"https?:\\/\\/(?:www\\\\.|player\\\\.)?vimeo.com\\/(?:channels\\/\" + \"(?:\\\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\\\d+)\\/video\\/|video\\/|)(\\\\d+)(?:$|\\/|\\\\?)\");\n      return vimeoRegExp.test(src) || youtubeRegExp.test(src);\n    };\n\n    return Master;\n  }(_master);\n\n  return Master;\n});\n//# sourceMappingURL=master.js.map","Magento_PageBuilder/js/content-type/video/converter/attribute/videosrc.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var VideoSrc = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function VideoSrc() {}\n\n    /**\n     * Parse YouTube parameters from given URL and Autoplay setting from UI\n     *\n     * @param url string\n     * @param data DataObject\n     * @returns string\n     * @private\n     */\n    VideoSrc.parseYoutubeGetParams = function parseYoutubeGetParams(url, data) {\n      var acceptableYouTubeParams = [\"rel\", \"controls\", \"autoplay\", \"mute\", \"loop\", \"playlist\", \"cc_lang_pref\", \"cc_load_policy\", \"color\", \"disablekb\", \"end\", \"fs\", \"hl\", \"iv_load_policy\", \"modestbranding\", \"start\"];\n      var a = document.createElement(\"a\");\n      a.href = url;\n      var urlGetParams = {};\n      a.search.slice(a.search.indexOf(\"?\") + 1).split(\"&\").map(function (hash) {\n        var _hash$split = hash.split(\"=\"),\n            key = _hash$split[0],\n            val = _hash$split[1];\n\n        urlGetParams[key] = decodeURIComponent(val);\n      });\n      var filteredGetParams = {};\n\n      for (var _i = 0, _acceptableYouTubePar = acceptableYouTubeParams; _i < _acceptableYouTubePar.length; _i++) {\n        var param = _acceptableYouTubePar[_i];\n\n        if (urlGetParams.hasOwnProperty(param)) {\n          filteredGetParams[param] = urlGetParams[param];\n        }\n      }\n\n      if (data.autoplay === \"true\") {\n        filteredGetParams.autoplay = \"1\";\n        filteredGetParams.mute = \"1\";\n      } else {\n        delete filteredGetParams.autoplay;\n        delete filteredGetParams.mute;\n      }\n\n      var processedGetParams = [];\n\n      for (var _param in filteredGetParams) {\n        if (filteredGetParams.hasOwnProperty(_param)) {\n          processedGetParams.push(encodeURI(_param + \"=\" + filteredGetParams[_param]));\n        }\n      }\n\n      return processedGetParams.length > 0 ? \"?\" + processedGetParams.join(\"&\") : \"\";\n    }\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    ;\n\n    var _proto = VideoSrc.prototype;\n\n    _proto.fromDom = function fromDom(value) {\n      value = value.replace(/\\?autoplay=1&mute=1/g, \"\");\n      value = value.replace(/&autoplay=1&mute=1/g, \"\");\n      value = value.replace(/\\?title=0&byline=0&portrait=0/g, \"\");\n      value = value.replace(/&autoplay=1&autopause=0&muted=1/g, \"\");\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (value === undefined) {\n        return \"\";\n      }\n\n      var youtubeRegExp = new RegExp(\"^(?:https?:\\/\\/|\\/\\/)?(?:www\\\\.|m\\\\.)?\" + \"(?:youtu\\\\.be\\/|youtube\\\\.com\\/(?:embed\\/|v\\/|watch\\\\?v=|watch\\\\?.+&v=))([\\\\w-]{11})(?![\\\\w-])\");\n      var vimeoRegExp = new RegExp(\"https?:\\/\\/(?:www\\\\.|player\\\\.)?vimeo.com\\/(?:channels\\/\" + \"(?:\\\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\\\d+)\\/video\\/|video\\/|)(\\\\d+)(?:$|\\/|\\\\?)\");\n\n      if (youtubeRegExp.test(value)) {\n        return \"https://www.youtube.com/embed/\" + youtubeRegExp.exec(value)[1] + VideoSrc.parseYoutubeGetParams(value, data);\n      } else if (vimeoRegExp.test(value)) {\n        return \"https://player.vimeo.com/video/\" + vimeoRegExp.exec(value)[3] + \"?title=0&byline=0&portrait=0\" + (data.autoplay === \"true\" ? \"&autoplay=1&autopause=0&muted=1\" : \"\");\n      }\n\n      return value;\n    };\n\n    return VideoSrc;\n  }();\n\n  return VideoSrc;\n});\n//# sourceMappingURL=videosrc.js.map","Magento_PageBuilder/js/content-type/video/converter/attribute/autoplay.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var VideoSrc = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function VideoSrc() {}\n\n    var _proto = VideoSrc.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value === \"true\" ? value : \"false\";\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {boolean|string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n      return value === \"true\" ? true : null;\n    };\n\n    return VideoSrc;\n  }();\n\n  return VideoSrc;\n});\n//# sourceMappingURL=autoplay.js.map","Magento_PageBuilder/js/content-type/video/converter/attribute/src.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var Src = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Src() {}\n\n    var _proto = Src.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      var fileRegExp = new RegExp(\"^(webm:|mp4:|ogv:)\");\n\n      if (fileRegExp.test(value)) {\n        return value.substr(fileRegExp.exec(value)[0].length);\n      }\n\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (value === undefined) {\n        return \"\";\n      }\n\n      var youtubeRegExp = new RegExp(\"^(?:https?:\\/\\/|\\/\\/)?(?:www\\\\.|m\\\\.)?\" + \"(?:youtu\\\\.be\\/|youtube\\\\.com\\/(?:embed\\/|v\\/|watch\\\\?v=|watch\\\\?.+&v=))([\\\\w-]{11})(?![\\\\w-])\");\n      var vimeoRegExp = new RegExp(\"https?:\\/\\/(?:www\\\\.|player\\\\.)?vimeo.com\\/(?:channels\\/\" + \"(?:\\\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\\\d+)\\/video\\/|video\\/|)(\\\\d+)(?:$|\\/|\\\\?)\");\n      var fileRegExp = new RegExp(\"^(?:https:|http:)?\\\\/\\\\/.*[\\\\\\\\\\\\/].+\\\\.(webm|mp4|ogv)(?!\\w)\");\n\n      if (youtubeRegExp.test(value)) {\n        return \"https://www.youtube.com/embed/\" + youtubeRegExp.exec(value)[1];\n      } else if (vimeoRegExp.test(value)) {\n        return \"https://player.vimeo.com/video/\" + vimeoRegExp.exec(value)[3] + \"?title=0&byline=0&portrait=0\";\n      } else if (fileRegExp.test(value)) {\n        var result = fileRegExp.exec(value);\n        return result[1] + \":\" + value;\n      }\n\n      return value;\n    };\n\n    return Src;\n  }();\n\n  return Src;\n});\n//# sourceMappingURL=src.js.map","Magento_PageBuilder/js/content-type/buttons/preview.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"jquery\", \"knockout\", \"mage/translate\", \"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type-menu/option\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/content-type/preview-collection\"], function (_jquery, _knockout, _translate, _events, _underscore, _config, _contentTypeFactory, _hideShowOption, _option, _delayUntil, _previewCollection) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\n    \"use strict\";\n\n    _inheritsLoose(Preview, _previewCollection2);\n\n    /**\n     * @param {ContentTypeCollectionInterface} contentType\n     * @param {ContentTypeConfigInterface} config\n     * @param {ObservableUpdater} observableUpdater\n     */\n    function Preview(contentType, config, observableUpdater) {\n      var _this;\n\n      _this = _previewCollection2.call(this, contentType, config, observableUpdater) || this; // Keeps track of number of button item to disable sortable if there is only 1.\n\n      _this.focusedButton = _knockout.observable();\n      _this.debouncedResizeHandler = _underscore.debounce(function () {\n        _this.resizeChildButtons();\n      }, 350);\n\n      _this.contentType.children.subscribe(function () {\n        var sortableElement = (0, _jquery)(_this.wrapperElement).find(\".buttons-container\");\n\n        if (!sortableElement.data(\"ui-sortable\")) {\n          return;\n        }\n\n        if (_this.contentType.children().length <= 1) {\n          sortableElement.sortable(\"disable\");\n        } else {\n          sortableElement.sortable(\"enable\");\n        }\n      }); // Monitor focus tab to start / stop interaction on the stage, debounce to avoid duplicate calls\n\n\n      _this.focusedButton.subscribe(_underscore.debounce(function (index) {\n        if (index !== null) {\n          _events.trigger(\"stage:interactionStart\");\n\n          var focusedButton = _this.contentType.children()[index];\n\n          (0, _delayUntil)(function () {\n            return (0, _jquery)(focusedButton.preview.wrapperElement).find(\"[contenteditable]\").focus();\n          }, function () {\n            return typeof focusedButton.preview.wrapperElement !== \"undefined\";\n          }, 10);\n        } else {\n          // We have to force the stop as the event firing is inconsistent for certain operations\n          _events.trigger(\"stage:interactionStop\", {\n            force: true\n          });\n        }\n      }, 1));\n\n      return _this;\n    }\n    /**\n     * Bind events\n     */\n\n\n    var _proto = Preview.prototype;\n\n    _proto.bindEvents = function bindEvents() {\n      var _this2 = this;\n\n      _previewCollection2.prototype.bindEvents.call(this);\n\n      _events.on(\"buttons:dropAfter\", function (args) {\n        if (args.id === _this2.contentType.id && _this2.contentType.children().length === 0) {\n          _this2.addButton();\n        }\n      });\n\n      _events.on(\"buttons:renderAfter\", function (args) {\n        if (args.contentType.id === _this2.contentType.id) {\n          _this2.debouncedResizeHandler();\n        }\n      });\n\n      _events.on(\"button-item:renderAfter\", function (args) {\n        if (args.contentType.parentContentType.id === _this2.contentType.id) {\n          _this2.debouncedResizeHandler();\n        }\n      });\n\n      _events.on(\"stage:updateAfter\", function () {\n        _this2.debouncedResizeHandler();\n      });\n\n      _events.on(\"contentType:redrawAfter\", function () {\n        _this2.debouncedResizeHandler();\n      }); // Capture when a content type is duplicated within the container\n\n\n      var duplicatedButton;\n      var duplicatedButtonIndex;\n\n      _events.on(\"button-item:duplicateAfter\", function (args) {\n        if (_this2.contentType.id === args.duplicateContentType.parentContentType.id && args.direct) {\n          duplicatedButton = args.duplicateContentType;\n          duplicatedButtonIndex = args.index;\n        }\n      });\n\n      _events.on(\"button-item:mountAfter\", function (args) {\n        if (duplicatedButton && args.id === duplicatedButton.id) {\n          _this2.focusedButton(duplicatedButtonIndex);\n        }\n      });\n    }\n    /**\n     * Return an array of options\n     *\n     * @returns {OptionsInterface}\n     */\n    ;\n\n    _proto.retrieveOptions = function retrieveOptions() {\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\n\n      options.add = new _option({\n        preview: this,\n        icon: \"<i class='icon-pagebuilder-add'></i>\",\n        title: (0, _translate)(\"Add Button\"),\n        action: this.addButton,\n        classes: [\"add-child\"],\n        sort: 10\n      });\n      options.hideShow = new _hideShowOption({\n        preview: this,\n        icon: _hideShowOption.showIcon,\n        title: _hideShowOption.showText,\n        action: this.onOptionVisibilityToggle,\n        classes: [\"hide-show-content-type\"],\n        sort: 40\n      });\n      return options;\n    }\n    /**\n     * Add button-item to buttons children array\n     */\n    ;\n\n    _proto.addButton = function addButton() {\n      var _this3 = this;\n\n      var createButtonItemPromise = (0, _contentTypeFactory)(_config.getContentTypeConfig(\"button-item\"), this.contentType, this.contentType.stageId, {});\n      createButtonItemPromise.then(function (button) {\n        _this3.contentType.addChild(button);\n\n        var buttonIndex = _this3.contentType.children().indexOf(button);\n\n        _this3.focusedButton(buttonIndex > -1 ? buttonIndex : null);\n\n        return button;\n      }).catch(function (error) {\n        console.error(error);\n      });\n    }\n    /**\n     * Get the sortable options for the buttons sorting\n     *\n     * @param {string} orientation\n     * @param {string} tolerance\n     * @returns {JQueryUI.Sortable}\n     */\n    ;\n\n    _proto.getSortableOptions = function getSortableOptions(orientation, tolerance) {\n      if (orientation === void 0) {\n        orientation = \"width\";\n      }\n\n      if (tolerance === void 0) {\n        tolerance = \"intersect\";\n      }\n\n      return {\n        handle: \".button-item-drag-handle\",\n        items: \".pagebuilder-content-type-wrapper\",\n        cursor: \"grabbing\",\n        containment: \"parent\",\n        tolerance: tolerance,\n        revert: 200,\n        disabled: this.contentType.children().length <= 1,\n\n        /**\n         * Provide custom helper element\n         *\n         * @param {Event} event\n         * @param {JQueryUI.Sortable} element\n         * @returns {Element}\n         */\n        helper: function helper(event, element) {\n          var helper = (0, _jquery)(element).clone().css({\n            opacity: \"0.7\",\n            width: \"auto\"\n          });\n          helper[0].querySelector(\".pagebuilder-options\").remove();\n          return helper[0];\n        },\n        placeholder: {\n          /**\n           * Provide custom placeholder element\n           *\n           * @param {JQuery} item\n           * @returns {JQuery}\n           */\n          element: function element(item) {\n            var placeholder = item.clone().css({\n              display: \"inline-block\",\n              opacity: \"0.3\"\n            }).removeClass(\"focused\").addClass(\"sortable-placeholder\");\n            placeholder[0].querySelector(\".pagebuilder-options\").remove();\n            return placeholder[0];\n          },\n          update: function update() {\n            return;\n          }\n        },\n\n        /**\n         * Trigger interaction start on sort\n         */\n        start: function start() {\n          _events.trigger(\"stage:interactionStart\");\n        },\n\n        /**\n         * Stop stage interaction on stop\n         */\n        stop: function stop() {\n          _events.trigger(\"stage:interactionStop\");\n        }\n      };\n    }\n    /**\n     * Resize width of all child buttons. Dependently make them the same width if configured.\n     */\n    ;\n\n    _proto.resizeChildButtons = function resizeChildButtons() {\n      if (this.wrapperElement) {\n        var buttonItems = (0, _jquery)(this.wrapperElement).find(\".pagebuilder-button-item > a\");\n        var buttonResizeValue = 0;\n\n        if (this.contentType.dataStore.get(\"is_same_width\") === \"true\") {\n          if (buttonItems.length > 0) {\n            var currentLargestButtonWidth = this.findLargestButtonWidth(buttonItems);\n            var parentWrapperWidth = (0, _jquery)(this.wrapperElement).find(\".buttons-container\").width();\n\n            if (currentLargestButtonWidth === 0) {\n              return;\n            }\n\n            buttonResizeValue = Math.min(currentLargestButtonWidth, parentWrapperWidth);\n          }\n        }\n\n        buttonItems.css(\"min-width\", buttonResizeValue);\n      }\n    }\n    /**\n     * Find the largest button width for calculating same size value.\n     *\n     * @param {JQuery} buttonItems\n     * @returns {number}\n     */\n    ;\n\n    _proto.findLargestButtonWidth = function findLargestButtonWidth(buttonItems) {\n      var _this4 = this;\n\n      return _underscore.max(_underscore.map(buttonItems, function (buttonItem) {\n        return _this4.calculateButtonWidth((0, _jquery)(buttonItem));\n      }));\n    }\n    /**\n     * Manually calculate button width using content plus box widths (padding, border)\n     *\n     * @param {JQuery} buttonItem\n     * @returns {number}\n     */\n    ;\n\n    _proto.calculateButtonWidth = function calculateButtonWidth(buttonItem) {\n      if (buttonItem.is(\":visible\") === false) {\n        return 0;\n      }\n\n      var widthProperties = [\"paddingLeft\", \"paddingRight\", \"borderLeftWidth\", \"borderRightWidth\"];\n      var buttonText = buttonItem.find(\"[data-element='link_text']\");\n      var textWidth = buttonText.css(\"display\", \"inline-block\").width();\n      buttonText.css(\"display\", \"\");\n      return widthProperties.reduce(function (accumulatedWidth, widthProperty) {\n        return accumulatedWidth + (parseInt(buttonItem.css(widthProperty), 10) || 0);\n      }, textWidth);\n    };\n\n    return Preview;\n  }(_previewCollection);\n\n  return Preview;\n});\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/buttons/converter/style/preview/display/flex.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Display = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Display() {}\n\n    var _proto = Display.prototype;\n\n    /**\n     * Ensure the display none property doesn't persist to the preview\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return;\n    }\n    /**\n     * Ensure the display none property doesn't persist to the preview\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      return \"flex\";\n    };\n\n    return Display;\n  }();\n\n  return Display;\n});\n//# sourceMappingURL=flex.js.map","Magento_PageBuilder/js/content-type/buttons/converter/style/display/flex.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Flex = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Flex() {}\n\n    var _proto = Flex.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return !(value === \"none\");\n    }\n    /**\n     * Convert value to knockout format, if buttons are displayed they should be inline block\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (!_underscore.isUndefined(value) && value === false) {\n        return \"none\";\n      }\n\n      return \"flex\";\n    };\n\n    return Flex;\n  }();\n\n  return Flex;\n});\n//# sourceMappingURL=flex.js.map","Magento_PageBuilder/js/content-type/buttons/converter/style/display/boolean.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Boolean = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Boolean() {}\n\n    var _proto = Boolean.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return !(value === \"none\");\n    }\n    /**\n     * Convert value to knockout format, if buttons are displayed they should be reset to default\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (!_underscore.isUndefined(value) && value === false) {\n        return \"none\";\n      }\n\n      return \"\";\n    };\n\n    return Boolean;\n  }();\n\n  return Boolean;\n});\n//# sourceMappingURL=boolean.js.map","Magento_PageBuilder/js/content-type/buttons/appearance/inline/widget.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'Magento_PageBuilder/js/events'\n], function ($, events) {\n    'use strict';\n\n    /**\n     * Equalize the width of a list of button-item components\n     *\n     * @param {JQuery} buttonList\n     */\n    var equalizeButtonWidth = function (buttonList) {\n        var buttonMinWidth = 0;\n\n        buttonList.css('min-width', buttonMinWidth);\n        buttonList.each(function () {\n            var buttonWidth = this.offsetWidth;\n\n            if (buttonWidth > buttonMinWidth) {\n                buttonMinWidth = buttonWidth;\n            }\n        });\n        buttonList.css('min-width', buttonMinWidth);\n    };\n\n    return function (config, element) {\n        var $element = $(element),\n            buttonSelector = '[data-element=\"link\"], [data-element=\"empty_link\"]';\n\n        if ($element.data('sameWidth')) {\n            equalizeButtonWidth($element.find(buttonSelector));\n            $(window).on('resize', function () {\n                equalizeButtonWidth($element.find(buttonSelector));\n            });\n            events.on('contentType:redrawAfter', function (eventData) {\n                if ($element.closest(eventData.element).length > 0) {\n                    equalizeButtonWidth($element.find(buttonSelector));\n                }\n            });\n        }\n    };\n});\n","Magento_PageBuilder/js/content-type/tab-item/preview.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"jquery\", \"knockout\", \"Magento_PageBuilder/js/content-type-menu/conditional-remove-option\", \"Magento_PageBuilder/js/content-type/preview-collection\"], function (_jquery, _knockout, _conditionalRemoveOption, _previewCollection) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Preview = /*#__PURE__*/function (_previewCollection2) {\n    \"use strict\";\n\n    _inheritsLoose(Preview, _previewCollection2);\n\n    function Preview() {\n      var _this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _previewCollection2.call.apply(_previewCollection2, [this].concat(args)) || this;\n      _this.fieldsToIgnoreOnRemove = [\"tab_name\"];\n      return _this;\n    }\n\n    var _proto = Preview.prototype;\n\n    /**\n     * Get background image url base on the viewport.\n     *\n     * @returns {string}\n     */\n    _proto.getBackgroundImage = function getBackgroundImage() {\n      var mobileImage = this.contentType.dataStore.get(\"mobile_image\");\n      var desktopImage = this.contentType.dataStore.get(\"background_image\");\n      var backgroundImage = this.viewport() === \"mobile\" && mobileImage.length ? mobileImage : desktopImage;\n      return backgroundImage.length ? \"url(\\\"\" + backgroundImage[0].url + \"\\\")\" : \"none\";\n    }\n    /**\n     * Force the focus on the clicked tab header\n     *\n     * @param {number} index\n     * @param {JQueryEventObject} event\n     */\n    ;\n\n    _proto.onClick = function onClick(index, event) {\n      (0, _jquery)(event.currentTarget).find(\"[contenteditable]\").focus();\n      event.stopPropagation();\n    }\n    /**\n     * On focus in set the focused button\n     *\n     * @param {number} index\n     * @param {Event} event\n     */\n    ;\n\n    _proto.onFocusIn = function onFocusIn(index, event) {\n      var parentPreview = this.contentType.parentContentType.preview;\n\n      if (parentPreview.focusedTab() !== index) {\n        parentPreview.setFocusedTab(index, true);\n      }\n    }\n    /**\n     * On focus out set the focused tab to null\n     *\n     * @param {number} index\n     * @param {JQueryEventObject} event\n     */\n    ;\n\n    _proto.onFocusOut = function onFocusOut(index, event) {\n      if (this.contentType && this.contentType.parentContentType) {\n        var parentPreview = this.contentType.parentContentType.preview;\n\n        var unfocus = function unfocus() {\n          window.getSelection().removeAllRanges();\n          parentPreview.focusedTab(null);\n        };\n\n        if (event.relatedTarget && _jquery.contains(parentPreview.wrapperElement, event.relatedTarget)) {\n          // Verify the focus was not onto the options menu\n          if ((0, _jquery)(event.relatedTarget).closest(\".pagebuilder-options\").length > 0) {\n            unfocus();\n          } else {\n            // Have we moved the focus onto another button in the current group?\n            var tabItem = _knockout.dataFor(event.relatedTarget);\n\n            if (tabItem && tabItem.contentType && tabItem.contentType.parentContentType && tabItem.contentType.parentContentType.id === this.contentType.parentContentType.id) {\n              var newIndex = tabItem.contentType.parentContentType.children().indexOf(tabItem.contentType);\n              parentPreview.setFocusedTab(newIndex, true);\n            } else {\n              unfocus();\n            }\n          }\n        } else if (parentPreview.focusedTab() === index) {\n          unfocus();\n        }\n      }\n    }\n    /**\n     * Get the options instance\n     *\n     * @returns {OptionsInterface}\n     */\n    ;\n\n    _proto.retrieveOptions = function retrieveOptions() {\n      var options = _previewCollection2.prototype.retrieveOptions.call(this);\n\n      delete options.move;\n      delete options.title;\n      options.remove = new _conditionalRemoveOption(_extends({}, options.remove.config, {\n        preview: this\n      }));\n      return options;\n    };\n\n    return Preview;\n  }(_previewCollection);\n\n  return Preview;\n});\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/image/preview.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/uploader\", \"Magento_PageBuilder/js/content-type/preview\"], function (_events, _hideShowOption, _uploader, _preview) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Preview = /*#__PURE__*/function (_preview2) {\n    \"use strict\";\n\n    _inheritsLoose(Preview, _preview2);\n\n    function Preview() {\n      return _preview2.apply(this, arguments) || this;\n    }\n\n    var _proto = Preview.prototype;\n\n    /**\n     * Return an array of options\n     *\n     * @returns {OptionsInterface}\n     */\n    _proto.retrieveOptions = function retrieveOptions() {\n      var options = _preview2.prototype.retrieveOptions.call(this);\n\n      options.hideShow = new _hideShowOption({\n        preview: this,\n        icon: _hideShowOption.showIcon,\n        title: _hideShowOption.showText,\n        action: this.onOptionVisibilityToggle,\n        classes: [\"hide-show-content-type\"],\n        sort: 40\n      });\n      return options;\n    }\n    /**\n     * Get registry callback reference to uploader UI component\n     *\n     * @returns {Uploader}\n     */\n    ;\n\n    _proto.getUploader = function getUploader() {\n      var initialImageValue = this.contentType.dataStore.get(this.config.additional_data.uploaderConfig.dataScope, \"\");\n      return new _uploader(\"imageuploader_\" + this.contentType.id, this.config.additional_data.uploaderConfig, this.contentType.id, this.contentType.dataStore, initialImageValue);\n    }\n    /**\n     * Get viewport image data\n     */\n    ;\n\n    _proto.getViewportImageData = function getViewportImageData() {\n      var desktopImageData = this.data.desktop_image;\n      var mobileImageData = this.data.mobile_image;\n      return this.viewport() === \"mobile\" && typeof mobileImageData !== \"undefined\" ? mobileImageData : desktopImageData;\n    }\n    /**\n     * @inheritDoc\n     */\n    ;\n\n    _proto.bindEvents = function bindEvents() {\n      var _this = this;\n\n      _preview2.prototype.bindEvents.call(this);\n\n      _events.on(\"image:mountAfter\", function (args) {\n        if (args.id === _this.contentType.id) {\n          _this.isSnapshot.subscribe(function (value) {\n            _this.changeUploaderControlsVisibility();\n          });\n\n          _this.changeUploaderControlsVisibility();\n        }\n      });\n\n      _events.on(this.config.name + \":\" + this.contentType.id + \":updateAfter\", function () {\n        var files = _this.contentType.dataStore.get(_this.config.additional_data.uploaderConfig.dataScope);\n\n        var imageObject = files ? files[0] : {};\n\n        _events.trigger(\"image:\" + _this.contentType.id + \":assignAfter\", imageObject);\n      });\n    }\n    /**\n     * Change uploader controls visibility\n     */\n    ;\n\n    _proto.changeUploaderControlsVisibility = function changeUploaderControlsVisibility() {\n      var _this2 = this;\n\n      this.getUploader().getUiComponent()(function (uploader) {\n        uploader.visibleControls = !_this2.isSnapshot();\n      });\n    };\n\n    return Preview;\n  }(_preview);\n\n  return Preview;\n});\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/content-type/observable-updater/css.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Generate Knockout compatible bindings for the elements css binding\n   *\n   * @param elementName\n   * @param config\n   * @param data\n   * @param converterResolver\n   * @param converterPool\n   * @param previousData\n   */\n  function generate(elementName, config, data, converterResolver, converterPool, previousData) {\n    var css = (0, _object.get)(data, config.css.var);\n    var newClasses = {};\n\n    if (css && css.length > 0) {\n      css.toString().split(\" \").map(function (value) {\n        return newClasses[value] = true;\n      });\n    }\n\n    for (var _i = 0, _Object$keys = Object.keys(previousData); _i < _Object$keys.length; _i++) {\n      var className = _Object$keys[_i];\n\n      if (!(className in newClasses)) {\n        newClasses[className] = false;\n      }\n    }\n\n    return newClasses;\n  }\n\n  return generate;\n});\n//# sourceMappingURL=css.js.map","Magento_PageBuilder/js/content-type/observable-updater/style.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\", \"Magento_PageBuilder/js/utils/string\"], function (_underscore, _object, _string) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Generate Knockout compatible bindings for the elements style binding\n   *\n   * @param elementName\n   * @param config\n   * @param data\n   * @param converterResolver\n   * @param converterPool\n   * @param previousData\n   */\n  function generate(elementName, config, data, converterResolver, converterPool, previousData) {\n    var newStyles = {};\n\n    if (config.style) {\n      for (var _iterator = _createForOfIteratorHelperLoose(config.style), _step; !(_step = _iterator()).done;) {\n        var propertyConfig = _step.value;\n\n        if (\"read\" === propertyConfig.persistence_mode) {\n          continue;\n        }\n\n        var value = void 0;\n\n        if (!!propertyConfig.static) {\n          value = propertyConfig.value;\n        } else {\n          value = (0, _object.get)(data, propertyConfig.var);\n          var converter = converterResolver(propertyConfig);\n\n          if (converterPool.get(converter)) {\n            value = converterPool.get(converter).toDom(propertyConfig.var, data);\n          }\n        }\n\n        if (typeof value === \"object\") {\n          _underscore.extend(newStyles, value);\n        } else if (value !== undefined) {\n          newStyles[(0, _string.fromSnakeToCamelCase)(propertyConfig.name)] = value;\n        }\n      }\n    }\n\n    if (previousData) {\n      /**\n       * If so we need to retrieve the previous styles applied to this element and create a new object\n       * which forces all of these styles to be \"false\". Knockout doesn't clean existing styles when\n       * applying new styles to an element. This resolves styles sticking around when they should be\n       * removed.\n       */\n      var removeCurrentStyles = Object.keys(previousData).reduce(function (object, styleName) {\n        var _Object$assign;\n\n        return Object.assign(object, (_Object$assign = {}, _Object$assign[styleName] = \"\", _Object$assign));\n      }, {});\n\n      if (!_underscore.isEmpty(removeCurrentStyles)) {\n        newStyles = _underscore.extend(removeCurrentStyles, newStyles);\n      }\n    }\n\n    return newStyles;\n  }\n\n  return generate;\n});\n//# sourceMappingURL=style.js.map","Magento_PageBuilder/js/content-type/observable-updater/attributes.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\ndefine([\"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _config, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Generate Knockout compatible bindings for the elements attribute binding\n   *\n   * @param elementName\n   * @param config\n   * @param data\n   * @param converterResolver\n   * @param converterPool\n   */\n  function generate(elementName, config, data, converterResolver, converterPool) {\n    var attributeData = {};\n\n    var _loop = function _loop() {\n      var attributeConfig = _step.value;\n\n      if (\"read\" === attributeConfig.persistence_mode) {\n        return \"continue\";\n      } // @ts-ignore\n\n\n      var value = void 0;\n\n      if (!!attributeConfig.static) {\n        value = attributeConfig.value;\n      } else {\n        value = (0, _object.get)(data, attributeConfig.var);\n      }\n\n      var converter = converterResolver(attributeConfig);\n\n      if (converterPool.get(converter)) {\n        value = converterPool.get(converter).toDom(attributeConfig.var, data);\n      } // Replacing src attribute with data-tmp-src to prevent img requests in iframe during master format rendering\n\n\n      if (_config.getMode() !== \"Preview\" && attributeConfig.name === \"src\" && _underscore.isString(value) && !value.indexOf(\"{{media url=\")) {\n        attributeData[\"data-tmp-\" + attributeConfig.name] = value; // @ts-ignore\n\n        Object.defineProperty(attributeData, attributeConfig.name, {\n          get: function get() {\n            return value;\n          }\n        });\n      } else {\n        attributeData[attributeConfig.name] = value;\n      }\n    };\n\n    for (var _iterator = _createForOfIteratorHelperLoose(config.attributes), _step; !(_step = _iterator()).done;) {\n      var _ret = _loop();\n\n      if (_ret === \"continue\") continue;\n    }\n\n    attributeData[\"data-element\"] = elementName;\n    return attributeData;\n  }\n\n  return generate;\n});\n//# sourceMappingURL=attributes.js.map","Magento_PageBuilder/js/content-type/observable-updater/html.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/utils/editor\", \"Magento_PageBuilder/js/utils/object\"], function (_config, _directives, _editor, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Generate Knockout compatible bindings for the elements html binding\n   *\n   * @param elementName\n   * @param config\n   * @param data\n   * @param converterResolver\n   * @param converterPool\n   */\n  function generate(elementName, config, data, converterResolver, converterPool) {\n    var value = config.html.var ? (0, _object.get)(data, config.html.var, config.html.placeholder) : config.html.placeholder;\n    var converter = converterResolver(config.html);\n\n    if (converterPool.get(converter)) {\n      value = converterPool.get(converter).toDom(config.html.var, data);\n    } // if value is empty, use placeholder\n\n\n    if (typeof value === \"string\" && !value.length && config.html.placeholder) {\n      value = config.html.placeholder;\n    } // Replacing src attribute with data-tmp-src to prevent img requests in iframe during master format rendering\n\n\n    if (_config.getMode() !== \"Preview\" && typeof value === \"string\" && value.indexOf(\"{{media url=\") !== -1) {\n      value = (0, _directives.replaceWithDataSrc)(value);\n    } // Process all desktop styles that left unprocessed after migrating from inline styles.\n\n\n    if (typeof value === \"string\") {\n      value = (0, _editor.processInlineStyles)(value);\n    }\n\n    return value;\n  }\n\n  return generate;\n});\n//# sourceMappingURL=html.js.map","Magento_PageBuilder/js/content-type/html/preview.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_PageBuilder/js/content-type-menu/hide-show-option\", \"Magento_PageBuilder/js/content-type/preview\"], function (_hideShowOption, _preview) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Preview = /*#__PURE__*/function (_preview2) {\n    \"use strict\";\n\n    _inheritsLoose(Preview, _preview2);\n\n    function Preview() {\n      return _preview2.apply(this, arguments) || this;\n    }\n\n    var _proto = Preview.prototype;\n\n    /**\n     * Return an array of options\n     *\n     * @returns {OptionsInterface}\n     */\n    _proto.retrieveOptions = function retrieveOptions() {\n      var options = _preview2.prototype.retrieveOptions.call(this);\n\n      options.hideShow = new _hideShowOption({\n        preview: this,\n        icon: _hideShowOption.showIcon,\n        title: _hideShowOption.showText,\n        action: this.onOptionVisibilityToggle,\n        classes: [\"hide-show-content-type\"],\n        sort: 40\n      });\n      return options;\n    };\n\n    return Preview;\n  }(_preview);\n\n  return Preview;\n});\n//# sourceMappingURL=preview.js.map","Magento_PageBuilder/js/system/config/enable-field.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/translate',\n    'Magento_Ui/js/modal/confirm',\n    'domReady!'\n], function ($, $t, confirm) {\n    'use strict';\n\n    return function (config, enableSelectEl) {\n\n        var $enableSelectEl = $(enableSelectEl),\n            isEnabledInDatabase = !!parseInt($enableSelectEl.val(), 10);\n\n        $enableSelectEl.on('change', function () {\n            var userIsDisabling = !parseInt($enableSelectEl.val(), 10);\n\n            if (!isEnabledInDatabase || !userIsDisabling) {\n                return;\n            }\n\n            confirm({\n                title: $t(config.modalTitleText),\n                content: $t(config.modalContentBody),\n                buttons: [{\n                    text: $t('Cancel'),\n                    class: 'action-secondary action-dismiss action-pagebuilder-cancel',\n\n                    /**\n                     * Close modal and trigger 'cancel' action on click\n                     */\n                    click: function (event) {\n                        this.closeModal(event);\n                    }\n                }, {\n                    text: $t('Turn Off'),\n                    class: 'action-primary action-accept',\n\n                    /**\n                     * Close modal and trigger 'confirm' action on click\n                     */\n                    click: function (event) {\n                        this.closeModal(event, true);\n                    }\n                }],\n                actions: {\n\n                    /**\n                     * Revert back to original Enabled setting\n                     */\n                    cancel: function () {\n                        $enableSelectEl.val(Number(true));\n                    }\n                }\n            });\n        });\n    };\n});\n","Magento_PageBuilder/js/system/config/switch-attribute-type.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'mage/translate',\n    'Magento_Ui/js/modal/confirm',\n    'domReady!'\n], function ($, $t, confirm) {\n    'use strict';\n\n    return function (config, attributeDropDownEl) {\n\n        var $attributeDropDownEl = $(attributeDropDownEl),\n            previousOption = '';\n\n        $attributeDropDownEl.on('focus', function () {\n            // Store the current value on focus and on change\n            previousOption = this.value;\n        });\n\n        $attributeDropDownEl.on('change', function () {\n\n            if (attributeDropDownEl.options.length > 3 ||\n                this.value === 'pagebuilder' ||\n                previousOption !== 'pagebuilder'\n            ) {\n                return;\n            }\n\n            confirm({\n                title: $t(config.modalTitleText),\n                content: $t(config.modalContentBody),\n                buttons: [{\n                    text: $t('Cancel'),\n                    class: 'action-secondary action-dismiss action-pagebuilder-cancel',\n\n                    /**\n                     * Close modal and trigger 'cancel' action on click\n                     */\n                    click: function (event) {\n                        this.closeModal(event);\n                    }\n                }, {\n                    text: $t('Change Input Type'),\n                    class: 'action-primary action-accept',\n\n                    /**\n                     * Close modal and trigger 'confirm' action on click\n                     */\n                    click: function (event) {\n                        this.closeModal(event, true);\n                    }\n                }],\n                actions: {\n\n                    /**\n                     * Revert back to 'pagebuilder' setting\n                     */\n                    cancel: function () {\n                        $attributeDropDownEl.val('pagebuilder');\n                        $attributeDropDownEl.trigger('change');\n                    }\n                }\n            });\n        });\n    };\n});\n","Magento_PageBuilder/js/system/config/google-maps-api-key-validator.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(['jquery'], function ($) {\n    'use strict';\n\n    /**\n     * Initialize click and input events to handle validation\n     *\n     * @param {Object} config\n     * @param {HTMLElement} el\n     */\n    var GoogleMapsApiKeyValidator = function (config, el) {\n        var sourceElement = $('#' + config.sourceField),\n            initialValue = sourceElement.val(),\n            resultElement = $('#' + config.elementId + ' > .result');\n\n        if (initialValue) {\n            $(el).attr('disabled', false);\n        }\n\n        $(el).on('click', function () {\n            var resultText = config.invalidLabel,\n                resultIcon = 'icon-admin-pagebuilder-error',\n                resultHtml;\n\n            $.ajax({\n                url: config.validateUrl,\n                showLoader: true,\n                data: {\n                    googleMapsApiKey: sourceElement.val()\n                }\n            }).done(function (data) {\n                if (data.success) {\n                    resultText = config.validLabel;\n                    resultIcon = 'icon-admin-pagebuilder-success';\n                }\n\n                resultHtml = '<i class=\"' + resultIcon + '\"></i> ' + resultText;\n                resultElement.html(resultHtml);\n            });\n        });\n\n        sourceElement.on('keyup', function (event) {\n            var elementValue = event.currentTarget.value,\n                buttonText = config.buttonLabel;\n\n            $(el).attr('disabled', !elementValue);\n            resultElement.html(buttonText);\n        });\n    };\n\n    return GoogleMapsApiKeyValidator;\n});\n","Magento_PageBuilder/js/system/config/validator-rules-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    return function (target) {\n        $.validator.addMethod(\n            'validate-google-map-style',\n            function (value) {\n                if ($.mage.isEmptyNoTrim(value)) {\n                    return true;\n                }\n\n                try {\n                    JSON.parse(value);\n                } catch (e) {\n                    return false;\n                }\n\n                return true;\n            },\n            $.mage.__('Google Maps Style JSON is invalid. Please paste the valid JSON style.')\n        );\n\n        $.validator.addMethod(\n            'validate-greater-than-one',\n            function (value) {\n                return !(value <= 1);\n            },\n            $.mage.__('Please enter a number 2 or greater in this field.')\n        );\n\n        $.validator.addMethod(\n            'validate-default-grid-size',\n            function (value) {\n                return !(parseInt(value, 10) >\n                    parseInt($('[name=\"groups[pagebuilder][fields][column_grid_max][value]\"]').val(), 10)\n                );\n            },\n            $.mage.__('Default grid size must be less than the maximum grid size.')\n        );\n\n        return target;\n    };\n});\n","Magento_PageBuilder/js/widget/show-on-hover.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine(['jquery'], function ($) {\n    'use strict';\n\n    /**\n     * Show the overlay on hover of specific elements\n     *\n     * @param {JQuery<Element>[]} $elements\n     */\n    function showOverlayOnHover($elements) {\n        $elements.each(function (index, element) {\n            var overlayEl = $(element).find('.pagebuilder-overlay'),\n                overlayColor = overlayEl.attr('data-overlay-color');\n\n            $(element).on('mouseenter', function () {\n                overlayEl.css('background-color', overlayColor);\n            });\n\n            $(element).on('mouseleave', function () {\n                overlayEl.css('background-color', 'transparent');\n            });\n        });\n    }\n\n    /**\n     * Show button on hover of specific elements\n     *\n     * @param {JQuery<Element>[]} $elements\n     * @param {String} buttonClass\n     */\n    function showButtonOnHover($elements, buttonClass) {\n        $elements.each(function (index, element) {\n            var buttonEl = $(element).find(buttonClass);\n\n            $(element).on('mouseenter', function () {\n                buttonEl.css({\n                    'opacity': '1',\n                    'visibility': 'visible'\n                });\n            });\n\n            $(element).on('mouseleave', function () {\n                buttonEl.css({\n                    'opacity': '0',\n                    'visibility': 'hidden'\n                });\n            });\n        });\n    }\n\n    return function (config) {\n\n        var buttonSelector = config.buttonSelector,\n            overlayHoverSelector = 'div[data-content-type=\"%s\"][data-show-overlay=\"%s\"]'\n                .replace('%s', config.dataRole)\n                .replace('%s', config.showOverlay),\n            overlayButtonSelector = 'div[data-content-type=\"%s\"][data-show-button=\"%s\"]'\n                .replace('%s', config.dataRole)\n                .replace('%s', config.showOverlay);\n\n        showOverlayOnHover($(overlayHoverSelector));\n        showButtonOnHover($(overlayButtonSelector), buttonSelector);\n    };\n});\n","Magento_PageBuilder/js/widget/video-background.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'jarallax',\n    'jarallaxVideo',\n    'vimeoWrapper'\n], function ($) {\n    'use strict';\n\n    return function (config, element) {\n        var $element = $(element),\n            parallaxSpeed = $element.data('enableParallax') !== 1 ? 1 : parseFloat($element.data('parallaxSpeed'));\n\n        if ($element.data('background-type') !== 'video') {\n            return;\n        }\n\n        $element.addClass('jarallax');\n        $element.attr('data-jarallax', '');\n\n        window.jarallax($element[0], {\n            imgSrc: $element.data('videoFallbackSrc'),\n            speed: !isNaN(parallaxSpeed) ? parallaxSpeed : 0.5,\n            videoLoop: $element.data('videoLoop'),\n            videoPlayOnlyVisible: $element.data('videoPlayOnlyVisible'),\n            videoLazyLoading: $element.data('videoLazyLoad'),\n            disableVideo: false,\n            elementInViewport: $element.data('elementInViewport') &&\n                $element[0].querySelector($element.data('elementInViewport'))\n        });\n        $element[0].jarallax.video && $element[0].jarallax.video.on('started', function () {\n            if ($element[0].jarallax.$video) {\n                $element[0].jarallax.$video.style.visibility = 'visible';\n            }\n        });\n    };\n});\n","Magento_PageBuilder/js/mass-converter/widget-directive-abstract.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var WidgetDirectiveAbstract = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function WidgetDirectiveAbstract() {}\n\n    var _proto = WidgetDirectiveAbstract.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param {ConverterDataInterface} data\n     * @param {ConverterConfigInterface} config\n     * @returns {WidgetDirectiveAttributes}\n     */\n    _proto.fromDom = function fromDom(data, config) {\n      var _this = this;\n\n      var attributes = {};\n      (0, _object.get)(data, config.html_variable).replace(/\\{\\{widget([\\S\\s]*?)\\}\\}/i, function (match, attributeString) {\n        attributes = _this.parseAttributesString(attributeString);\n      }.bind(this));\n      return attributes;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {ConverterDataInterface} data\n     * @param {ConverterConfigInterface} config\n     * @returns {object}\n     */\n    ;\n\n    _proto.toDom = function toDom(data, config) {\n      (0, _object.set)(data, config.html_variable, this.buildDirective(data));\n      return data;\n    }\n    /**\n     * Build the directive string using the supplies attributes\n     *\n     * @param {object} attributes\n     * @returns {string}\n     */\n    ;\n\n    _proto.buildDirective = function buildDirective(attributes) {\n      return \"{{widget \" + this.createAttributesString(attributes) + \"}}\";\n    }\n    /**\n     * @param {string} attributes\n     * @return {Object}\n     */\n    ;\n\n    _proto.parseAttributesString = function parseAttributesString(attributes) {\n      var result = {};\n      attributes.replace(/(\\w+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g, function (match, key, value) {\n        result[key] = value.replace(/&quote;/g, \"\\\"\");\n        return \"\";\n      });\n      return result;\n    }\n    /**\n     * @param {Object} attributes\n     * @return {string}\n     */\n    ;\n\n    _proto.createAttributesString = function createAttributesString(attributes) {\n      var result = \"\";\n\n      _underscore.each(attributes, function (value, name) {\n        result += name + \"=\\\"\" + String(value).replace(/\"/g, \"&quote;\") + \"\\\" \";\n      });\n\n      return result.substr(0, result.length - 1);\n    };\n\n    return WidgetDirectiveAbstract;\n  }();\n\n  return WidgetDirectiveAbstract;\n});\n//# sourceMappingURL=widget-directive-abstract.js.map","Magento_PageBuilder/js/mass-converter/background-type.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var BackgroundType = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function BackgroundType() {}\n\n    var _proto = BackgroundType.prototype;\n\n    /**\n     * Process data after it's read and converted by element converters\n     *\n     * @param {ConverterDataInterface} data\n     * @param {ConverterConfigInterface} config\n     * @returns {object}\n     */\n    _proto.fromDom = function fromDom(data, config) {\n      return data;\n    }\n    /**\n     * Process data before it's converted by element converters\n     *\n     * @param {ConverterDataInterface} data\n     * @param {ConverterConfigInterface} config\n     * @returns {object}\n     */\n    ;\n\n    _proto.toDom = function toDom(data, config) {\n      var backgroundType = (0, _object.get)(data, config.attribute_name);\n\n      if (backgroundType === \"video\") {\n        (0, _object.set)(data, config.desktop_image_variable, []);\n        (0, _object.set)(data, config.mobile_image_variable, []);\n      } else if (backgroundType === \"image\") {\n        (0, _object.set)(data, config.video_source_variable, null);\n        (0, _object.set)(data, config.video_fallback_image_variable, []);\n        (0, _object.set)(data, config.video_overlay_color_variable, \"\");\n      }\n\n      return data;\n    };\n\n    return BackgroundType;\n  }();\n\n  return BackgroundType;\n});\n//# sourceMappingURL=background-type.js.map","Magento_PageBuilder/js/mass-converter/converter-pool-factory.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/loader\", \"Magento_PageBuilder/js/mass-converter/converter-pool\"], function (_config, _loader, _converterPool) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Create a new instance of converter pool\n   */\n  function create(contentType) {\n    var config = _config.getContentTypeConfig(contentType);\n\n    var converters = [];\n    var appearanceName;\n\n    for (var _i = 0, _Object$keys = Object.keys(config.appearances); _i < _Object$keys.length; _i++) {\n      appearanceName = _Object$keys[_i];\n      var appearance = config.appearances[appearanceName];\n\n      if (undefined !== appearance && undefined !== appearance.converters) {\n        for (var _iterator = _createForOfIteratorHelperLoose(appearance.converters), _step; !(_step = _iterator()).done;) {\n          var converterConfig = _step.value;\n\n          if (!!converterConfig.component && !_converterPool.get(converterConfig.component)) {\n            converters.push(converterConfig.component);\n          }\n        }\n      }\n    }\n\n    return new Promise(function (resolve) {\n      (0, _loader)(converters, function () {\n        for (var _len = arguments.length, loadedConverters = new Array(_len), _key = 0; _key < _len; _key++) {\n          loadedConverters[_key] = arguments[_key];\n        }\n\n        for (var i = 0; i < converters.length; i++) {\n          _converterPool.register(converters[i], new loadedConverters[i]());\n        }\n\n        resolve(_converterPool);\n      });\n    });\n  }\n\n  return create;\n});\n//# sourceMappingURL=converter-pool-factory.js.map","Magento_PageBuilder/js/mass-converter/converter-pool.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var DataConverterPool = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function DataConverterPool() {\n      this.converters = {};\n    }\n\n    var _proto = DataConverterPool.prototype;\n\n    /**\n     * Retrieve a data converter instance from the pool\n     *\n     * @param {string} name\n     * @returns {ConverterInterface}\n     */\n    _proto.get = function get(name) {\n      return this.converters[name] !== undefined ? this.converters[name] : null;\n    }\n    /**\n     * Register a new data converter into the pool\n     *\n     * @param {string} name\n     * @param {ConverterInterface} converter\n     */\n    ;\n\n    _proto.register = function register(name, converter) {\n      this.converters[name] = converter;\n    };\n\n    return DataConverterPool;\n  }();\n\n  var _default = new DataConverterPool();\n\n  return _default;\n});\n//# sourceMappingURL=converter-pool.js.map","Magento_PageBuilder/js/mass-converter/background-images.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/image\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _image, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var BackgroundImages = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function BackgroundImages() {}\n\n    var _proto = BackgroundImages.prototype;\n\n    /**\n     * Process data after it's read and converted by element converters\n     *\n     * @param {ConverterDataInterface} data\n     * @param {ConverterConfigInterface} config\n     * @returns {object}\n     */\n    _proto.fromDom = function fromDom(data, config) {\n      var directive = (0, _object.get)(data, config.attribute_name);\n\n      if (directive) {\n        var images = JSON.parse(directive.replace(/\\\\(.)/mg, \"$1\")) || {};\n\n        if (!_underscore.isUndefined(images.desktop_image)) {\n          (0, _object.set)(data, config.desktop_image_variable, (0, _image.decodeUrl)(images.desktop_image));\n        }\n\n        if (!_underscore.isUndefined(images.mobile_image)) {\n          (0, _object.set)(data, config.mobile_image_variable, (0, _image.decodeUrl)(images.mobile_image));\n        }\n\n        delete data[config.attribute_name];\n      }\n\n      return data;\n    }\n    /**\n     * Process data before it's converted by element converters\n     *\n     * @param {ConverterDataInterface} data\n     * @param {ConverterConfigInterface} config\n     * @returns {object}\n     */\n    ;\n\n    _proto.toDom = function toDom(data, config) {\n      var desktopImage = (0, _object.get)(data, config.desktop_image_variable);\n      var mobileImage = (0, _object.get)(data, config.mobile_image_variable);\n      var directiveData = {};\n\n      if (!_underscore.isUndefined(desktopImage) && desktopImage && !_underscore.isUndefined(desktopImage[0])) {\n        directiveData.desktop_image = (0, _image.urlToDirective)(desktopImage[0].url);\n      }\n\n      if (!_underscore.isUndefined(mobileImage) && mobileImage && !_underscore.isUndefined(mobileImage[0])) {\n        directiveData.mobile_image = (0, _image.urlToDirective)(mobileImage[0].url);\n      } // Add the directive data, ensuring we escape double quotes\n\n\n      (0, _object.set)(data, config.attribute_name, JSON.stringify(directiveData).replace(/[\\\\\"']/g, \"\\\\$&\").replace(/\\u0000/g, \"\\\\0\"));\n      return data;\n    };\n\n    return BackgroundImages;\n  }();\n\n  return BackgroundImages;\n});\n//# sourceMappingURL=background-images.js.map","Magento_PageBuilder/js/mass-converter/empty-mobile-image.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var EmptyMobileImage = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function EmptyMobileImage() {}\n\n    var _proto = EmptyMobileImage.prototype;\n\n    /**\n     * Process data after it's read and converted by element converters\n     *\n     * @param {ConverterDataInterface} data\n     * @param {object} config\n     * @returns {object}\n     */\n    _proto.fromDom = function fromDom(data, config) {\n      var desktopImage = (0, _object.get)(data, config.desktop_image_variable);\n      var mobileImage = (0, _object.get)(data, config.mobile_image_variable);\n\n      if (mobileImage && desktopImage && mobileImage[0] !== undefined && desktopImage[0] !== undefined && mobileImage[0].url === desktopImage[0].url) {\n        delete data[config.mobile_image_variable];\n      }\n\n      return data;\n    }\n    /**\n     * Process data before it's converted by element converters\n     *\n     * @param {ConverterDataInterface} data\n     * @param {object} config\n     * @returns {object}\n     */\n    ;\n\n    _proto.toDom = function toDom(data, config) {\n      var mobileImage = (0, _object.get)(data, config.mobile_image_variable);\n\n      if (mobileImage === undefined || mobileImage[0] === undefined) {\n        (0, _object.set)(data, config.mobile_image_variable, (0, _object.get)(data, config.desktop_image_variable));\n      }\n\n      return data;\n    };\n\n    return EmptyMobileImage;\n  }();\n\n  return EmptyMobileImage;\n});\n//# sourceMappingURL=empty-mobile-image.js.map","Magento_PageBuilder/js/mass-converter/converter-interface.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  \"use strict\";\n});\n//# sourceMappingURL=converter-interface.js.map","Magento_PageBuilder/js/panel/menu.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"knockout\"], function (_knockout) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var Menu = /*#__PURE__*/function () {\n    \"use strict\";\n\n    /**\n     * Menu constructor\n     *\n     * @param id\n     * @param menu\n     * @param contentTypes\n     * @param stageId\n     */\n    function Menu(id, menu, contentTypes, stageId) {\n      if (contentTypes === void 0) {\n        contentTypes = [];\n      }\n\n      this.hidden = _knockout.observable(false);\n      this.id = _knockout.observable();\n      this.code = _knockout.observable(\"\");\n      this.label = _knockout.observable(\"\");\n      this.icon = _knockout.observable(\"\");\n      this.sort = _knockout.observable();\n      this.contentTypes = _knockout.observableArray([]);\n      this.active = _knockout.observable(false);\n      this.id(id);\n      this.code(menu.code);\n      this.label(menu.label);\n      this.icon(menu.icon);\n      this.sort(menu.sort);\n      this.contentTypes(contentTypes);\n      this.stageId = stageId;\n    }\n    /**\n     * Toggle the menu\n     */\n\n\n    var _proto = Menu.prototype;\n\n    _proto.toggle = function toggle() {\n      this.active(!this.active());\n    };\n\n    return Menu;\n  }();\n\n  return {\n    Menu: Menu\n  };\n});\n//# sourceMappingURL=menu.js.map","Magento_PageBuilder/js/panel/menu/content-type.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"knockout\", \"Magento_PageBuilder/js/drag-drop/matrix\"], function (_knockout, _matrix) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var ContentType = /*#__PURE__*/function () {\n    \"use strict\";\n\n    /**\n     * @param {string} identifier\n     * @param {ContentTypeConfigInterface} config\n     * @param {string} stageId\n     */\n    function ContentType(identifier, config, stageId) {\n      this.droppable = true;\n      this.icon = _knockout.observable(\"\");\n      this.identifier = _knockout.observable(\"\");\n      this.label = _knockout.observable(\"\");\n      this.config = config;\n      this.identifier(identifier);\n      this.label(config.label);\n      this.icon(config.icon);\n      this.stageId = stageId;\n    }\n    /**\n     * Retrieve the config object\n     *\n     * @returns {ContentTypeConfigInterface}\n     */\n\n\n    var _proto = ContentType.prototype;\n\n    _proto.getConfig = function getConfig() {\n      return this.config;\n    }\n    /**\n     * Only connect to container sortable instances that the current content type is accepted into\n     *\n     * @returns {string}\n     */\n    ;\n\n    _proto.getDraggableOptions = function getDraggableOptions() {\n      return {\n        connectToSortable: (0, _matrix.getAllowedContainersClasses)(this.config.name, this.stageId)\n      };\n    };\n\n    return ContentType;\n  }();\n\n  return {\n    ContentType: ContentType\n  };\n});\n//# sourceMappingURL=content-type.js.map","Magento_PageBuilder/js/grid/columns/actions.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/grid/columns/actions'\n], function (Actions) {\n    'use strict';\n\n    return Actions.extend({\n        defaults: {\n        },\n\n        /**\n         * Callback after click on element.\n         *\n         * @public\n         */\n        applyAction: function () {\n            switch (this.type) {\n                case 'edit-user':\n                    $(this).userEdit(this.options)\n                        .trigger('editUser');\n                    break;\n\n                case 'delete-user':\n                    $(this).userDelete(this.options)\n                        .trigger('deleteUser');\n                    break;\n\n                case 'delete-role':\n                    $(this).roleDelete(this.options)\n                        .trigger('deleteRole');\n                    break;\n\n                default:\n                    return true;\n            }\n        }\n    });\n});\n","Magento_PageBuilder/js/grid/columns/preview-image.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'Magento_Ui/js/grid/columns/column',\n    'jquery',\n    'mage/template',\n    'text!Magento_PageBuilder/template/grid/cells/preview-image/preview.html',\n    'underscore',\n    'Magento_Ui/js/modal/modal',\n    'mage/translate'\n], function (Column, $, mageTemplate, thumbnailPreviewTemplate, _) {\n    'use strict';\n\n    return Column.extend({\n        defaults: {\n            bodyTmpl: 'ui/grid/cells/thumbnail',\n            fieldClass: {\n                'data-grid-preview-image-cell': true\n            }\n        },\n\n        /**\n         * Get image source data per row.\n         *\n         * @param {Object} row\n         * @returns {String}\n         */\n        getSrc: function (row) {\n            return row[this.index + '_src'];\n        },\n\n        /**\n         * Retrieve the original images src to be displayed at full size in the modal\n         *\n         * @param {Object} row\n         * @returns {*}\n         */\n        getOrigSrc: function (row) {\n            return row[this.index + '_orig_src'];\n        },\n\n        /**\n         * Get alternative text data per row.\n         *\n         * @param {Object} row\n         * @returns {String}\n         */\n        getAlt: function (row) {\n            return _.escape(row[this.index + '_alt']);\n        },\n\n        /**\n         * Check if preview available.\n         *\n         * @returns {Boolean}\n         */\n        isPreviewAvailable: function () {\n            return this['has_preview'] || false;\n        },\n\n        /**\n         * Build preview.\n         *\n         * @param {Object} row\n         */\n        preview: function (row) {\n            var modalHtml = mageTemplate(\n                thumbnailPreviewTemplate,\n                {\n                    src: this.getOrigSrc(row),\n                    alt: this.getAlt(row)\n                }\n            ),\n                previewPopup = $('<div/>').html(modalHtml);\n\n            previewPopup.modal({\n                title: this.getAlt(row),\n                innerScroll: true,\n                modalClass: '_image-box',\n                buttons: []\n            }).trigger('openModal');\n        },\n\n        /**\n         * Get field handler per row.\n         *\n         * @param {Object} row\n         * @returns {Function}\n         */\n        getFieldHandler: function (row) {\n            if (this.isPreviewAvailable()) {\n                return this.preview.bind(this, row);\n            }\n        }\n    });\n});\n","Magento_PageBuilder/js/grid/cells/template-apply.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'Magento_Ui/js/grid/columns/multiselect',\n    'Magento_PageBuilder/js/modal/dismissible-confirm',\n    'mage/translate'\n], function (Select, confirm, $t) {\n    'use strict';\n\n    return Select.extend({\n        defaults: {\n            headerTmpl: 'ui/grid/columns/text',\n            bodyTmpl: 'Magento_PageBuilder/grid/cells/template-apply',\n            label: '',\n            lastSelected: null\n        },\n\n        /** @inheritdoc */\n        initObservable: function () {\n            this._super()\n                .observe('lastSelected');\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        isSelected: function () {\n            return false;\n        },\n\n        /** @inheritdoc **/\n        select: function (id) {\n            var self = this,\n                superCall = this._super.bind(this);\n\n            self.lastSelected(null);\n\n            confirm({\n                title: $t('Apply Template'),\n                content: $t('Are you sure you want to apply this template? This will overwrite any existing content.'),\n                dismissKey: 'pagebuilder_template_apply_confirm',\n                dismissible: true,\n                actions: {\n                    /**\n                     * Confirm action\n                     */\n                    confirm: function () {\n                        superCall();\n                        self.lastSelected(id);\n                    }\n                },\n                buttons: [{\n                    text: $t('Cancel'),\n                    class: 'action-secondary action-dismiss action-pagebuilder-cancel',\n\n                    /**\n                     * Close modal and trigger 'cancel' action on click\n                     */\n                    click: function (event) {\n                        this.closeModal(event);\n                    }\n                }, {\n                    text: $t('Apply'),\n                    class: 'action-primary action-accept',\n\n                    /**\n                     * Close modal and trigger 'confirm' action on click\n                     */\n                    click: function (event) {\n                        superCall();\n                        self.lastSelected(id);\n                        this.closeModal(event);\n                    }\n                }]\n            });\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        _setSelection: function () {\n            return this;\n        }\n    });\n});\n","Magento_PageBuilder/js/grid/cells/single-select.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'Magento_Ui/js/grid/columns/multiselect',\n    'underscore'\n], function (Select, _) {\n    'use strict';\n\n    return Select.extend({\n        defaults: {\n            headerTmpl: 'ui/grid/columns/text',\n            bodyTmpl: 'Magento_PageBuilder/grid/cells/single-select',\n            label: '',\n            extendedSelections: [],\n            lastSelected: null,\n            listens: {\n                selected: 'onSelectedChange setExtendedSelections'\n            }\n        },\n\n        /** @inheritdoc */\n        initObservable: function () {\n            this._super()\n                .observe('extendedSelections lastSelected');\n\n            return this;\n        },\n\n        /**\n         * Getter for extended selections.\n         *\n         * @returns {Array}\n         */\n        getExtendedSelections: function () {\n            return this.extendedSelections();\n        },\n\n        /**\n         * Setter for extended selections.\n         *\n         * @param {Array} selected\n         */\n        setExtendedSelections: function (selected) {\n            var item = {},\n                extended = [];\n\n            _.each(selected, function (id) {\n                item[this.indexField] = id;\n                extended.push(_.findWhere(this.rows(), item));\n            }, this);\n\n            this.set('extendedSelections', extended);\n        },\n\n        /** @inheritdoc */\n        isSelected: function (id, isIndex) {\n            id = this.getId(id, isIndex);\n\n            return this.selected()[0] === id;\n        },\n\n        /** @inheritdoc **/\n        select: function (id) {\n            this._super();\n            this.lastSelected(id);\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        _setSelection: function (id, isIndex, select) {\n            var selected = this.selected;\n\n            id = this.getId(id, isIndex);\n\n            if (!select && this.isSelected(id)) {\n                selected([]);\n            } else if (select) {\n                selected([id]);\n            }\n\n            return this;\n        }\n    });\n});\n","Magento_PageBuilder/js/property/margins.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Margins = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Margins() {}\n\n    var _proto = Margins.prototype;\n\n    /**\n     * Read margins from element\n     *\n     * @param {HTMLElement} element\n     * @returns {string | object}\n     */\n    _proto.read = function read(element) {\n      return {\n        margin: {\n          left: element.style.marginLeft,\n          top: element.style.marginTop,\n          right: element.style.marginRight,\n          bottom: element.style.marginBottom\n        }\n      };\n    };\n\n    return Margins;\n  }();\n\n  return Margins;\n});\n//# sourceMappingURL=margins.js.map","Magento_PageBuilder/js/property/property-reader-pool.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var PropertyReaderPool = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function PropertyReaderPool() {\n      this.propertyReaders = {};\n    }\n\n    var _proto = PropertyReaderPool.prototype;\n\n    /**\n     * Retrieve a property reader from the pool\n     *\n     * @param {string} name\n     * @returns {PropertyReaderInterface}\n     */\n    _proto.get = function get(name) {\n      return this.propertyReaders[name] !== undefined ? this.propertyReaders[name] : null;\n    }\n    /**\n     * Register a new property reader into the pool\n     *\n     * @param {string} name\n     * @param {PropertyReaderInterface} property\n     */\n    ;\n\n    _proto.register = function register(name, property) {\n      this.propertyReaders[name] = property;\n    };\n\n    return PropertyReaderPool;\n  }();\n\n  var _default = new PropertyReaderPool();\n\n  return Object.assign(_default, {\n    PropertyReaderPool: PropertyReaderPool\n  });\n});\n//# sourceMappingURL=property-reader-pool.js.map","Magento_PageBuilder/js/property/property-reader-interface.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  \"use strict\";\n});\n//# sourceMappingURL=property-reader-interface.js.map","Magento_PageBuilder/js/property/attribute-reader.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var AttributeReader = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function AttributeReader() {}\n\n    var _proto = AttributeReader.prototype;\n\n    /**\n     * Read attribute from element\n     *\n     * @param {HTMLElement} element\n     * @param {string} source\n     * @returns {string | object}\n     */\n    _proto.read = function read(element, source) {\n      return element.getAttribute(source);\n    };\n\n    return AttributeReader;\n  }();\n\n  return AttributeReader;\n});\n//# sourceMappingURL=attribute-reader.js.map","Magento_PageBuilder/js/property/paddings.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Paddings = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Paddings() {}\n\n    var _proto = Paddings.prototype;\n\n    /**\n     * Read paddings from element\n     *\n     * @param {HTMLElement} element\n     * @returns {string | object}\n     */\n    _proto.read = function read(element) {\n      return {\n        padding: {\n          left: element.style.paddingLeft,\n          top: element.style.paddingTop,\n          right: element.style.paddingRight,\n          bottom: element.style.paddingBottom\n        }\n      };\n    };\n\n    return Paddings;\n  }();\n\n  return Paddings;\n});\n//# sourceMappingURL=paddings.js.map","Magento_PageBuilder/js/property/property-reader-pool-factory.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/loader\", \"Magento_PageBuilder/js/property/property-reader-pool\"], function (_config, _loader, _propertyReaderPool) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Create a new instance of property reader pool\n   */\n  function create(contentType) {\n    var config = _config.getContentTypeConfig(contentType);\n\n    var propertyReaders = [];\n    var appearanceName;\n\n    for (var _i = 0, _Object$keys = Object.keys(config.appearances); _i < _Object$keys.length; _i++) {\n      appearanceName = _Object$keys[_i];\n      var appearance = config.appearances[appearanceName];\n\n      if (appearance !== undefined && appearance.elements !== undefined) {\n        var elementName = void 0;\n\n        for (var _i2 = 0, _Object$keys2 = Object.keys(appearance.elements); _i2 < _Object$keys2.length; _i2++) {\n          elementName = _Object$keys2[_i2];\n          var element = appearance.elements[elementName];\n\n          if (element.style !== undefined) {\n            for (var _iterator = _createForOfIteratorHelperLoose(element.style), _step; !(_step = _iterator()).done;) {\n              var propertyConfig = _step.value;\n\n              if (propertyConfig.reader && propertyReaders.indexOf(propertyConfig.reader) === -1 && !_propertyReaderPool.get(propertyConfig.reader)) {\n                propertyReaders.push(propertyConfig.reader);\n              }\n            }\n          }\n\n          if (element.attributes !== undefined) {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(element.attributes), _step2; !(_step2 = _iterator2()).done;) {\n              var attributeConfig = _step2.value;\n\n              if (attributeConfig.reader && propertyReaders.indexOf(attributeConfig.reader) === -1 && !_propertyReaderPool.get(attributeConfig.reader)) {\n                propertyReaders.push(attributeConfig.reader);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return new Promise(function (resolve) {\n      (0, _loader)(propertyReaders, function () {\n        for (var _len = arguments.length, loadedPropertyReaders = new Array(_len), _key = 0; _key < _len; _key++) {\n          loadedPropertyReaders[_key] = arguments[_key];\n        }\n\n        for (var i = 0; i < propertyReaders.length; i++) {\n          _propertyReaderPool.register(propertyReaders[i], new loadedPropertyReaders[i]());\n        }\n\n        resolve(_propertyReaderPool);\n      });\n    });\n  }\n\n  return create;\n});\n//# sourceMappingURL=property-reader-pool-factory.js.map","Magento_PageBuilder/js/property/style-property-reader.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/string\"], function (_string) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var StylePropertyReader = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function StylePropertyReader() {}\n\n    var _proto = StylePropertyReader.prototype;\n\n    /**\n     * Read style property from element\n     *\n     * @param {HTMLElement} element\n     * @param {string} source\n     * @returns {string | object}\n     */\n    _proto.read = function read(element, source) {\n      var camelCasedSource = (0, _string.fromSnakeToCamelCase)(source);\n      return element.style[camelCasedSource];\n    };\n\n    return StylePropertyReader;\n  }();\n\n  return StylePropertyReader;\n});\n//# sourceMappingURL=style-property-reader.js.map","Magento_PageBuilder/js/property/link.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Link = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Link() {\n      this.regexpByLinkType = {\n        category: new RegExp(/id_path=['\"]category\\/(\\d+)/),\n        product: new RegExp(/id_path=['\"]product\\/(\\d+)/),\n        page: new RegExp(/page_id=['\"](\\d+)/)\n      };\n    }\n\n    var _proto = Link.prototype;\n\n    /**\n     * Read link from element\n     *\n     * @param {HTMLElement} element\n     * @returns {string | object}\n     */\n    _proto.read = function read(element) {\n      var _ref;\n\n      var href = element.getAttribute(\"href\");\n      var attributeLinkType = element.getAttribute(\"data-link-type\");\n\n      if (typeof href === \"string\" && attributeLinkType !== \"default\") {\n        href = this.getIdFromWidgetSyntax(href, this.regexpByLinkType[attributeLinkType]);\n      }\n\n      return _ref = {}, _ref[attributeLinkType] = href, _ref.setting = element.getAttribute(\"target\") === \"_blank\", _ref.type = attributeLinkType, _ref;\n    }\n    /**\n     * Returns link value from widget string\n     *\n     * @param {string} href\n     * @param {RegExp} regexp\n     * @return {string}\n     */\n    ;\n\n    _proto.getIdFromWidgetSyntax = function getIdFromWidgetSyntax(href, regexp) {\n      var attributeIdMatches = href.match(regexp);\n\n      if (!attributeIdMatches) {\n        return href;\n      }\n\n      return attributeIdMatches[1];\n    };\n\n    return Link;\n  }();\n\n  return Link;\n});\n//# sourceMappingURL=link.js.map","Magento_PageBuilder/js/wysiwyg/config-modifier-interface.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  \"use strict\";\n});\n//# sourceMappingURL=config-modifier-interface.js.map","Magento_PageBuilder/js/wysiwyg/tinymce.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\ndefine([\"jquery\", \"mage/adminhtml/wysiwyg/events\", \"mage/adminhtml/wysiwyg/tiny_mce/setup\", \"Magento_PageBuilder/js/events\", \"underscore\", \"Magento_PageBuilder/js/utils/check-stage-full-screen\", \"Magento_PageBuilder/js/utils/delay-until\", \"Magento_PageBuilder/js/utils/pagebuilder-header-height\"], function (_jquery, _events, _setup, _events2, _underscore, _checkStageFullScreen, _delayUntil, _pagebuilderHeaderHeight) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Inline editing wysiwyg component\n   *\n   * @api\n   */\n  var Wysiwyg = /*#__PURE__*/function () {\n    \"use strict\";\n\n    /**\n     * The id of the editor element\n     */\n\n    /**\n     * The supplied wysiwyg configuration\n     */\n\n    /**\n     * Id of content type\n     */\n\n    /**\n     * Id of the stage\n     */\n\n    /**\n     * Wysiwyg adapter instance\n     */\n\n    /**\n     * Content type's data store\n     */\n\n    /**\n     * Field name in data store reflecting value held in wysiwyg\n     */\n\n    /**\n     * Create a debounce to save the content into the data store\n     */\n\n    /**\n     * @param {String} contentTypeId The ID in the registry of the content type.\n     * @param {String} elementId The ID of the editor element in the DOM.\n     * @param {AdditionalDataConfigInterface} config The configuration for the wysiwyg.\n     * @param {DataStore} dataStore The datastore to store the content in.\n     * @param {String} fieldName The key in the provided datastore to set the data.\n     * @param {String} stageId The ID in the registry of the stage containing the content type.\n     */\n    function Wysiwyg(contentTypeId, elementId, config, dataStore, fieldName, stageId) {\n      this.saveContentDebounce = _underscore.debounce(this.saveContentFromWysiwygToDataStore.bind(this), 500);\n      this.contentTypeId = contentTypeId;\n      this.elementId = elementId;\n      this.fieldName = fieldName;\n      this.config = config;\n      this.dataStore = dataStore;\n      this.stageId = stageId;\n\n      if (this.config.adapter_config.mode === \"inline\") {\n        /**\n         * Don't include content_css within the inline mode of TinyMCE, if any stylesheets are included here they're\n         * appended to the head of the main page, and thus cause other styles to be modified.\n         *\n         * The styles for typography in the inline editor are scoped within _typography.less\n         */\n        this.config.adapter.tinymce.content_css = [];\n      }\n\n      var wysiwygSetup = new _setup(this.elementId, this.config.adapter);\n      wysiwygSetup.setup(this.config.adapter_config.mode);\n      this.wysiwygAdapter = wysiwygSetup.wysiwygInstance;\n\n      if (this.config.adapter_config.mode === \"inline\") {\n        this.wysiwygAdapter.eventBus.attachEventHandler(_events.afterFocus, this.onFocus.bind(this));\n        this.wysiwygAdapter.eventBus.attachEventHandler(_events.afterBlur, this.onBlur.bind(this));\n      } // Update content in our data store after our stage preview wysiwyg gets updated\n\n\n      this.wysiwygAdapter.eventBus.attachEventHandler(_events.afterChangeContent, this.onChangeContent.bind(this)); // Update content in our stage preview wysiwyg after its slideout counterpart gets updated\n\n      _events2.on(\"form:\" + this.contentTypeId + \":saveAfter\", this.setContentFromDataStoreToWysiwyg.bind(this));\n\n      _events2.on(\"stage:\" + this.stageId + \":fullScreenModeChangeAfter\", this.toggleFullScreen.bind(this));\n    }\n    /**\n     * Hide TinyMce inline toolbar options after fullscreen exit\n     */\n\n\n    var _proto = Wysiwyg.prototype;\n\n    _proto.toggleFullScreen = function toggleFullScreen() {\n      var _this = this;\n\n      var $editor = (0, _jquery)(\"#\" + this.elementId); // wait for fullscreen to close\n\n      _underscore.defer(function () {\n        if (!(0, _checkStageFullScreen)(_this.stageId) && _this.config.adapter_config.mode === \"inline\" && $editor.hasClass(\"mce-edit-focus\")) {\n          $editor.removeClass(\"mce-edit-focus\");\n\n          _this.onBlur();\n        }\n      });\n    }\n    /**\n     * @returns {WysiwygInstanceInterface}\n     */\n    ;\n\n    _proto.getAdapter = function getAdapter() {\n      return this.wysiwygAdapter;\n    }\n    /**\n     * Called for the onFocus event\n     */\n    ;\n\n    _proto.onFocus = function onFocus() {\n      var _this2 = this;\n\n      this.getFixedToolbarContainer().addClass(\"pagebuilder-toolbar-active\");\n\n      _events2.trigger(\"stage:interactionStart\");\n\n      var element = document.querySelector(\"#\" + this.elementId);\n\n      if (!element) {\n        return;\n      } // Wait for everything else to finish\n\n\n      _underscore.defer(function () {\n        return (0, _delayUntil)(function () {\n          var $inlineToolbar = _this2.getFixedToolbarContainer().find(\".tox-tinymce-inline\");\n\n          var self = _this2;\n          $inlineToolbar.css(\"min-width\", _this2.config.adapter_config.minToolbarWidth + \"px\");\n\n          _this2.invertInlineEditorToAccommodateOffscreenToolbar(); // Update toolbar when the height changes\n\n\n          _this2.toolbarHeight = $inlineToolbar.height();\n\n          if ($inlineToolbar.length) {\n            _this2.resizeObserver = new ResizeObserver(function (entries) {\n              for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\n                var entry = _step.value;\n\n                if (entry.target === $inlineToolbar.get(0) && entry.target.clientHeight !== self.toolbarHeight) {\n                  self.invertInlineEditorToAccommodateOffscreenToolbar();\n                  self.toolbarHeight = entry.target.clientHeight;\n                }\n              }\n            });\n\n            _this2.resizeObserver.observe($inlineToolbar.get(0));\n          }\n\n          var dialogContainer = document.querySelector(\"#\" + _this2.elementId + \" ~ .tox-tinymce-aux\");\n\n          if (!!dialogContainer) {\n            dialogContainer.setAttribute(\"data-editor-aux\", _this2.elementId);\n            document.body.appendChild(dialogContainer);\n          }\n        }, function () {\n          return element.classList.contains(\"mce-edit-focus\");\n        }, 10);\n      });\n    }\n    /**\n     * Called for the onChangeContent event\n     */\n    ;\n\n    _proto.onChangeContent = function onChangeContent() {\n      this.saveContentDebounce();\n      this.invertInlineEditorToAccommodateOffscreenToolbar();\n    }\n    /**\n     * Called for the onBlur events\n     */\n    ;\n\n    _proto.onBlur = function onBlur() {\n      this.getFixedToolbarContainer().removeClass(\"pagebuilder-toolbar-active\").find(\".tox-tinymce-inline\").css(\"top\", \"\");\n\n      if (this.resizeObserver) {\n        this.resizeObserver.unobserve(this.getFixedToolbarContainer().find(\".tox-tinymce-inline\").get(0));\n      }\n\n      this.toolbarHeight = 0;\n      var dialogContainer = document.querySelector(\"[data-editor-aux=\" + this.elementId + \"]\");\n\n      if (!!dialogContainer) {\n        dialogContainer.removeAttribute(\"data-editor-aux\");\n        document.querySelector(\"#\" + this.elementId).parentNode.appendChild(dialogContainer);\n      }\n\n      _events2.trigger(\"stage:interactionStop\");\n    }\n    /**\n     * Update content in our data store after our stage preview wysiwyg gets updated\n     */\n    ;\n\n    _proto.saveContentFromWysiwygToDataStore = function saveContentFromWysiwygToDataStore() {\n      this.dataStore.set(this.fieldName, this.getAdapter().getContent());\n    }\n    /**\n     * Update content in our stage wysiwyg after our data store gets updated\n     */\n    ;\n\n    _proto.setContentFromDataStoreToWysiwyg = function setContentFromDataStoreToWysiwyg() {\n      this.getAdapter().setContent(this.dataStore.get(this.fieldName));\n    }\n    /**\n     * Adjust padding on stage if in fullscreen mode to accommodate inline wysiwyg toolbar overflowing fixed viewport\n     */\n    ;\n\n    _proto.invertInlineEditorToAccommodateOffscreenToolbar = function invertInlineEditorToAccommodateOffscreenToolbar() {\n      if (this.config.adapter_config.mode !== \"inline\") {\n        return;\n      }\n\n      var $inlineToolbar = this.getFixedToolbarContainer().find(\".tox-tinymce-inline\");\n\n      if (!$inlineToolbar.length) {\n        return;\n      }\n\n      var inlineWysiwygClientRectTop = this.getFixedToolbarContainer().get(0).getBoundingClientRect().top - (0, _pagebuilderHeaderHeight)(this.stageId);\n\n      if (!(0, _checkStageFullScreen)(this.stageId) || $inlineToolbar.height() < inlineWysiwygClientRectTop) {\n        var extraHeight = 0;\n\n        if ($inlineToolbar.parents(\".pagebuilder-slide[data-appearance='collage-left']\").length || $inlineToolbar.parents(\".pagebuilder-slide[data-appearance='collage-right']\").length || $inlineToolbar.parents(\".pagebuilder-slide[data-appearance='collage-centered']\").length) {\n          extraHeight = 29;\n        }\n\n        $inlineToolbar.css(\"top\", ($inlineToolbar.height() - extraHeight) * -1);\n        return;\n      }\n\n      $inlineToolbar.css(\"top\", \"\");\n    }\n    /**\n     * Get fixed toolbar container element referenced as selector in wysiwyg adapter settings\n     *\n     * @returns {jQuery}\n     */\n    ;\n\n    _proto.getFixedToolbarContainer = function getFixedToolbarContainer() {\n      return (0, _jquery)(\"#\" + this.elementId).closest(\"\" + this.config.adapter.settings.fixed_toolbar_container);\n    };\n\n    return Wysiwyg;\n  }();\n\n  return Wysiwyg;\n});\n//# sourceMappingURL=tinymce.js.map","Magento_PageBuilder/js/wysiwyg/component-initializer-interface.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  \"use strict\";\n});\n//# sourceMappingURL=component-initializer-interface.js.map","Magento_PageBuilder/js/wysiwyg/wysiwyg-interface.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  \"use strict\";\n});\n//# sourceMappingURL=wysiwyg-interface.js.map","Magento_PageBuilder/js/wysiwyg/factory.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"Magento_PageBuilder/js/utils/loader\"], function (_jquery, _loader) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @param {String} contentTypeId The ID in the registry of the content type.\n   * @param {String} elementId The ID of the editor element in the DOM.\n   * @param {String} contentTypeName The type of content type this editor will be used in. E.g. \"banner\".\n   * @param {AdditionalDataConfigInterface} config The configuration for the wysiwyg.\n   * @param {DataStore} dataStore The datastore to store the content in.\n   * @param {String} fieldName The key in the provided datastore to set the data.\n   * @param {String} stageId The ID in the registry of the stage containing the content type.\n   * @returns {Wysiwyg}\n   */\n  function create(contentTypeId, elementId, contentTypeName, config, dataStore, fieldName, stageId) {\n    config = _jquery.extend(true, {}, config);\n    return new Promise(function (resolve) {\n      (0, _loader)([config.adapter_config.component], function (WysiwygInstance) {\n        new Promise(function (configResolve) {\n          if (config.adapter_config.config_modifiers && config.adapter_config.config_modifiers[contentTypeName]) {\n            (0, _loader)([config.adapter_config.config_modifiers[contentTypeName]], function (ConfigModifierType) {\n              var modifier = new ConfigModifierType(); // Allow dynamic settings to be set before editor is initialized\n\n              modifier.modify(contentTypeId, config);\n              configResolve();\n            });\n          } else {\n            configResolve();\n          }\n        }).then(function () {\n          // Instantiate the component\n          var wysiwyg = new WysiwygInstance(contentTypeId, elementId, config, dataStore, fieldName, stageId);\n\n          if (config.adapter_config.component_initializers && config.adapter_config.component_initializers[contentTypeName]) {\n            (0, _loader)([config.adapter_config.component_initializers[contentTypeName]], function (InitializerType) {\n              var initializer = new InitializerType(); // Allow dynamic bindings from configuration such as events from the editor\n\n              initializer.initialize(wysiwyg);\n              resolve(wysiwyg);\n            });\n          } else {\n            resolve(wysiwyg);\n          }\n        });\n      });\n    });\n  }\n\n  return create;\n});\n//# sourceMappingURL=factory.js.map","Magento_PageBuilder/js/form/form-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'jquery',\n    'Magento_PageBuilder/js/events',\n    'consoleLogger'\n], function (_, $, events, consoleLogger) {\n    'use strict';\n\n    var mixin = {\n        /**\n         * Record instances of Page Builder initialized in the forms namespace\n         */\n        initialize: function () {\n            var self = this;\n\n            this._super();\n\n            if (!this.source.get('pageBuilderInstances')) {\n                this.source.set('pageBuilderInstances', []);\n            }\n\n            events.on('pagebuilder:register', function (data) {\n                var instance;\n\n                if (data.ns === self.ns) {\n                    instance = _.findWhere(self.source.get('pageBuilderInstances'), {id: data.instance.id});\n                    if (!instance) {\n                        self.source.get('pageBuilderInstances').push(data.instance);\n                    }\n                }\n            });\n\n            return this;\n        },\n\n        /**\n         * Intercept save call to ensure any Page Builder rendering is completed before submitting form\n         *\n         * @param {String} redirect\n         * @param {Object} data\n         */\n        save: function (redirect, data) {\n            var submit = this._super.bind(this, redirect, data),\n                timeout,\n                locks;\n\n            if (_.isEmpty(this.source.get('pageBuilderInstances'))) {\n                submit();\n            } else {\n                timeout = setTimeout(function () {\n                    consoleLogger.error('Page Builder was rendering for 5 seconds without releasing locks.');\n                }, 5000);\n\n                $('body').trigger('processStart');\n\n                // Wait for all rendering locks within Page Builder stages to resolve\n                $.when.apply(\n                    null,\n                    this.source.get('pageBuilderInstances').map(function (instance) {\n                        locks = instance.stage.renderingLocks;\n\n                        return locks[locks.length - 1];\n                    })\n                ).then(function () {\n                    $('body').trigger('processStop');\n                    clearTimeout(timeout);\n                    submit();\n                });\n            }\n        }\n    };\n\n    return function (target) {\n        return target.extend(mixin);\n    };\n});\n","Magento_PageBuilder/js/form/map-location-provider.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/provider',\n    'Magento_PageBuilder/js/events'\n], function (Provider, events) {\n    'use strict';\n\n    return Provider.extend({\n        /** @inheritdoc **/\n        initClient: function () {\n            return this;\n        },\n\n        /** @inheritdoc **/\n        save: function () {\n            events.trigger('mapLocation:saveAfter', this.get('data'));\n\n            return this;\n        }\n    });\n});\n","Magento_PageBuilder/js/form/provider.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/provider',\n    'Magento_PageBuilder/js/events'\n], function (Provider, events) {\n    'use strict';\n\n    return Provider.extend({\n        /** @inheritdoc **/\n        initClient: function () {\n            return this;\n        },\n\n        /** @inheritdoc **/\n        save: function () {\n            events.trigger('form:' + this.id + ':saveAfter', this.get('data'));\n\n            return this;\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/dependent-select.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/select'\n], function (Select) {\n    'use strict';\n\n    return Select.extend({\n        defaults: {\n            visible: false\n        },\n\n        /**\n         * Dependently display dropdown component if it contains more than one option\n         *\n         * @returns {Object} Chainable\n         */\n        setOptions: function () {\n            this._super();\n\n            if (this.options().length > 1) {\n                this.setVisible(true);\n            }\n\n            return this;\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/product-totals.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'jquery',\n    'mage/translate',\n    'Magento_PageBuilder/js/form/provider/conditions-data-processor',\n    'Magento_Ui/js/form/element/abstract'\n], function (_, $, $t, conditionsDataProcessor, Abstract) {\n    'use strict';\n\n    return Abstract.extend({\n        defaults: {\n            conditionOption: '',\n            conditionValue: '',\n            formData: {},\n            totalProductCount: 0,\n            totalDisabledProducts: 0,\n            totalNotVisibleProducts: 0,\n            previousConditions: false,\n            listens: {\n                conditionOption: 'updateProductTotals',\n                conditionValue: 'updateProductTotals',\n                '${ $.provider }:data.modalClosed': 'abortRunningRequest'\n            },\n            imports: {\n                formData: '${ $.provider }:data'\n            },\n            links: {\n                value: false\n            },\n            url: null,\n            valuePlaceholder: $t('of %1 total'),\n            disabledPlaceholder: $t('%1 disabled'),\n            notVisiblePlaceholder: $t('%1 not visible'),\n            showSpinner: true,\n            loading: false,\n            jqXHR: null\n        },\n\n        /**\n         * Abort running Ajax request\n         */\n        abortRunningRequest: function () {\n            if (this.jqXHR && this.jqXHR.readyState !== 4) {\n                this.jqXHR.abort();\n            }\n        },\n\n        /** @inheritdoc */\n        initObservable: function () {\n            return this._super()\n                .observe('value totalProductCount totalDisabledProducts totalNotVisibleProducts loading');\n        },\n\n        /**\n         * If we haven't aborted the request, continue and display the error\n         *\n         * @param {Object} jqXHR\n         */\n        callSuperError: function (jqXHR) {\n            // eslint-disable-next-line jquery-no-bind-unbind\n            var superError = $.ajaxSettings.error.bind(window, jqXHR);\n\n            superError();\n        },\n\n        /**\n         * Update product count.\n         */\n        updateProductTotals: _.debounce(function () {\n            var totalText,\n                negativeTotals = [];\n\n            if (!this.conditionOption || _.isEmpty(this.formData)) {\n                return;\n            }\n\n            if (this.conditionOption === 'category_ids' && typeof this.formData['category_ids'] !== 'string') {\n                this.formData['category_ids'] = '';\n            }\n\n            _.extend(this.formData, this.conditionValue);\n            conditionsDataProcessor(this.formData, this.conditionOption + '_source');\n\n            // Store the previous conditions so we don't update the totals when nothing has changed\n            if (this.previousConditions === this.formData['conditions_encoded']) {\n                return;\n            }\n            this.previousConditions = this.formData['conditions_encoded'];\n\n            this.loading(true);\n            this.abortRunningRequest();\n            this.jqXHR = $.ajax({\n                url: this.url,\n                method: 'POST',\n                data: {\n                    conditionValue: this.formData['conditions_encoded']\n                },\n                error: function (jqXHR) {\n                    if (jqXHR.statusText !== 'abort') {\n                        this.callSuperError(jqXHR);\n                    }\n                }.bind(this)\n            }).done(function (response) {\n                this.totalProductCount(parseInt(response.total, 10));\n                this.totalDisabledProducts(parseInt(response.disabled, 10));\n                this.totalNotVisibleProducts(parseInt(response.notVisible, 10));\n                totalText = this.valuePlaceholder\n                    .replace('%1', parseInt(response.total, 10));\n\n                if (parseInt(response.disabled, 10) > 0) {\n                    negativeTotals.push(this.disabledPlaceholder.replace('%1', parseInt(response.disabled, 10)));\n                }\n\n                if (parseInt(response.notVisible, 10) > 0) {\n                    negativeTotals.push(this.notVisiblePlaceholder.replace('%1', parseInt(response.notVisible, 10)));\n                }\n\n                if (negativeTotals.length > 0) {\n                    totalText += ' (' + negativeTotals.join(', ') + ')';\n                }\n\n                this.value(totalText);\n                this.loading(false);\n            }.bind(this)).fail(function () {\n                if (this.jqXHR.statusText !== 'abort') {\n                    this.value($t('An unknown error occurred. Please try again.'));\n                }\n                this.loading(false);\n            }.bind(this));\n        }, 10)\n    });\n});\n","Magento_PageBuilder/js/form/element/conditions-loader.js":"define([\n    'jquery',\n    'Magento_Rule/rules',\n    'uiRegistry',\n    'mage/utils/objects'\n], function ($, RulesForm, uiRegistry, objectUtils) {\n    'use strict';\n\n    return function (config, conditionsFormPlaceholder) {\n        var $conditionsFormPlaceholder = $(conditionsFormPlaceholder),\n            attributeData = uiRegistry.get(config.formNamespace + '.' + config.formNamespace).source.data,\n            conditions = objectUtils.nested(attributeData, config.attribute) || '[]';\n\n        $('body').trigger('processStart');\n\n        $.ajax(config.componentUrl, {\n            method: 'POST',\n            data: {\n                conditions: conditions\n            }\n        })\n        .done(function (response) {\n            $conditionsFormPlaceholder.html(response);\n            window[config.jsObjectName] = new RulesForm(config.jsObjectName, config.childComponentUrl);\n            $('body').trigger('processStop');\n        });\n    };\n});\n","Magento_PageBuilder/js/form/element/conditional-disable-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    var setDisabledSetting = {\n        defaults: {\n            disabledValues: []\n        },\n\n        /**\n         * Set the field as disabled when it's empty or is equal to a value within disabledValues\n         *\n         * @param {Array} value\n         */\n        setDisabled: function (value) {\n            if (_.indexOf(_.values(this.disabledValues), value) !== -1) {\n                this.disable();\n            } else {\n                this.enable();\n            }\n        }\n    };\n\n    return function (target) {\n        return target.extend(setDisabledSetting);\n    };\n});\n","Magento_PageBuilder/js/form/element/visual-select.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'Magento_Ui/js/form/element/select'\n], function (_, Select) {\n    'use strict';\n\n    return Select.extend({\n        defaults: {\n            noticeMessage: '',\n            listens: {\n                value: 'setNoticeMessage'\n            }\n        },\n\n        /**\n         * Initializes observable properties of instance\n         *\n         * @returns {Abstract} Chainable.\n         */\n        initObservable: function () {\n            this._super();\n            this.observe('noticeMessage');\n\n            return this;\n        },\n\n        /**\n         * Parses incoming options, considers options with undefined value property\n         *     as caption\n         *\n         * @param  {Array} nodes\n         * @param {Object} captionValue\n         * @return {Object} captionValue\n         */\n        parseOptions: function (nodes, captionValue) {\n            var caption,\n                value;\n\n            nodes = _.map(nodes, function (node) {\n                value = node.value;\n\n                if ((value === null || value === captionValue) && _.isUndefined(caption)) {\n                    caption = node.label;\n                }\n\n                return node;\n            });\n\n            return {\n                options: _.compact(nodes),\n                caption: _.isString(caption) ? caption : false\n            };\n        },\n\n        /**\n         * Recursively set to object item like value and item.value like key.\n         *\n         * @param {Array} data\n         * @param {Object} result\n         * @returns {Object}\n         */\n        indexOptions: function (data, result) {\n            var value;\n\n            result = result || {};\n\n            data.forEach(function (item) {\n                value = item.value;\n\n                if (Array.isArray(value)) {\n                    this.indexOptions(value, result);\n                } else {\n                    result[value] = item;\n                }\n            });\n\n            return result;\n        },\n\n        /**\n         * Sets 'data' to 'options' observable array, if instance has\n         * 'customEntry' property set to true, calls 'setHidden' method\n         *  passing !options.length as a parameter\n         *\n         * @param {Array} data\n         * @returns {Object} Chainable\n         */\n        setOptions: function (data) {\n            var captionValue = this.captionValue || '',\n                result = this.parseOptions(data, captionValue),\n                isVisible;\n\n            this.indexedOptions = this.indexOptions(result.options);\n\n            this.options(result.options);\n\n            if (!this.caption()) {\n                this.caption(result.caption);\n            }\n\n            if (this.customEntry) {\n                isVisible = !!result.options.length;\n\n                this.setVisible(isVisible);\n                this.toggleInput(!isVisible);\n            }\n\n            return this;\n        },\n\n        /**\n         * Set the notice message on value change\n         *\n         * @param {any} value\n         * @returns {exports}\n         */\n        setNoticeMessage: function (value) {\n            var noticeMessage = '',\n                selectedOption = _.find(this.options(), function (option) {\n                    return option.value === value;\n                });\n\n            if (selectedOption && typeof selectedOption.noticeMessage !== 'undefined') {\n                noticeMessage = selectedOption.noticeMessage;\n            }\n\n            this.noticeMessage(noticeMessage);\n\n            return this;\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/block-chooser.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'uiLayout',\n    'uiElement',\n    'Magento_PageBuilder/js/config',\n    'mage/translate',\n    'mage/utils/objects'\n], function ($, layout, Element, Config, $t, objectUtils) {\n    'use strict';\n\n    return Element.extend({\n        id: null,\n        meta: {},\n        errorMessage: null,\n        displayMetadata: true,\n        messages: {\n            UNKOWN_ERROR: $t('Sorry, there was an error getting requested content. ' +\n                'Please contact the store owner.'),\n            UNKNOWN_SELECTION: $t('The currently selected block does not exist.')\n        },\n        defaults: {\n            template: 'Magento_PageBuilder/form/element/block-chooser',\n            requestParameter: null,\n            dataUrlConfigPath: null,\n            modalName: null,\n            buttonComponentConfig: {\n                title: '${ $.buttonTitle }',\n                component: 'Magento_Ui/js/form/components/button',\n                actions: [{\n                    targetName: '${ $.modalName }',\n                    actionName: 'openModal'\n                }]\n            },\n            requestData: {\n                method: 'POST',\n                data: {\n                    'form_key': window.FORM_KEY\n                }\n            },\n            listens: {\n                id: 'updateFromServer'\n            }\n        },\n\n        /**\n         * @inheritdoc\n         */\n        initObservable: function () {\n            return this._super()\n                .observe('id meta errorMessage displayMetadata');\n        },\n\n        /**\n         * Updates the block data from the server\n         *\n         * @returns void\n         */\n        updateFromServer: function () {\n            var requestData = $.extend(true, {}, this.requestData);\n\n            // The component hasn't be configured yet. Nothing to do.\n            if (!this.id().length || !this.requestParameter || !this.dataUrlConfigPath) {\n                this.meta({});\n\n                return;\n            }\n\n            requestData.data[this.requestParameter] = this.id();\n            $('body').trigger('processStart');\n\n            $.ajax(objectUtils.nested(Config.getConfig(), this.dataUrlConfigPath), requestData)\n                .always(function () {\n                    $('body').trigger('processStop');\n                    this.errorMessage(null);\n                }.bind(this))\n                .done(function (response) {\n                    if (typeof response !== 'object' || response.error) {\n                        this.meta({});\n                        this.errorMessage(this.messages.UNKOWN_ERROR);\n\n                        return;\n                    } else if (Array.isArray(response)) {\n                        this.meta({});\n                        this.errorMessage(this.messages.UNKNOWN_SELECTION);\n\n                        return;\n                    }\n\n                    this.meta(response);\n                }.bind(this))\n                .fail(function () {\n                    this.meta({});\n                    this.errorMessage(this.messages.UNKOWN_ERROR);\n                }.bind(this));\n        },\n\n        /**\n         * Creates the button component for rendering\n         *\n         * @returns {Object} The button component\n         */\n        getButton: function () {\n            var elementConfig = this.buttonComponentConfig;\n\n            elementConfig.name = this.name + '_button';\n            layout([elementConfig]);\n\n            return this.requestModule(elementConfig.name);\n        },\n\n        /**\n         * Determines the status label for the currently loaded block\n         *\n         * @returns {String}\n         */\n        getStatusLabel: function () {\n            return this.meta()['is_active'] === '1' ? $t('Active') : $t('Inactive');\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/condition-options.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_PageBuilder/js/form/element/visual-select'\n], function (Select) {\n    'use strict';\n\n    return Select.extend({\n\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n\n            this.showRelatedElement(this.value());\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        initObservable: function () {\n            this._super();\n\n            this.options().forEach(function (option) {\n                this.observe(option.value + 'Visible');\n            }.bind(this));\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        onUpdate: function (value) {\n            this.showRelatedElement(value);\n\n            return this._super();\n        },\n\n        /**\n         * Sets exported property, linked with visibility of the element, defined as option\n         *\n         * @param {String} value\n         * @returns {Object} Chainable\n         */\n        showRelatedElement: function (value) {\n            this[value + 'Visible'](true);\n            this.options().forEach(function (option) {\n                if (value !== option.value) {\n                    this[option.value + 'Visible'](false);\n                }\n            }.bind(this));\n\n            return this;\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/dependent-value-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([], function () {\n    'use strict';\n\n    var setDependentValuesSetting = {\n        defaults: {\n            dependentValues: {}\n        },\n\n        /**\n         * Change value of component if it present in dependentValues\n         */\n        setDependentValues: function (value) {\n            if (this.dependentValues.hasOwnProperty(value)) {\n                this.previousValue = this.value();\n                this.value(this.dependentValues[value]);\n            } else if (this.hasOwnProperty('previousValue')) {\n                this.value(this.previousValue);\n            }\n        }\n    };\n\n    return function (target) {\n        return target.extend(setDependentValuesSetting);\n    };\n});\n","Magento_PageBuilder/js/form/element/grid-size.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * @api\n */\ndefine([\n    'Magento_Ui/js/form/element/abstract'\n], function (Abstract) {\n    'use strict';\n\n    return Abstract.extend({\n        validate: function () {\n            var externalFormSourceData = this.requestModule('index=' + this.ns)().source.data;\n\n            this.validationParams = {\n                'non_empty_column_count': externalFormSourceData.non_empty_column_count,\n                'max_grid_size': externalFormSourceData.max_grid_size\n            };\n\n            return this._super();\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/dependent-visual-select.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'Magento_PageBuilder/js/form/element/visual-select'\n], function (_, Select) {\n    'use strict';\n\n    return Select.extend({\n        defaults: {\n            visible: false\n        },\n\n        /**\n         * Dependently display dropdown component if it contains more than one option\n         *\n         * @returns {Object} Chainable\n         */\n        setOptions: function () {\n            this._super();\n\n            if (this.options().length > 1) {\n                this.setVisible(true);\n            }\n\n            return this;\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/select-filtered-options.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'Magento_Ui/js/form/element/select'\n], function (_, Select) {\n    'use strict';\n\n    return Select.extend({\n\n        defaults: {\n            excludeOptions: []\n        },\n\n        /** @inheritdoc */\n        onUpdate: function () {\n            if (!this.updatedByFilter) {\n                this.transferredValue = null;\n            } else {\n                this.updatedByFilter = false;\n            }\n\n            return this._super();\n        },\n\n        /**\n         * Excluding options according excludeOptions configuration based on the passed value\n         *\n         * @param {String} value\n         */\n        filter: function (value) {\n            var source = this.initialOptions,\n                initialValue = this.value(),\n                result,\n                excludeOptions =  this.excludeOptions[value],\n                excludedOptionsArray = excludeOptions ? excludeOptions.split(',') : [];\n\n            result = _.filter(source, function (item) {\n                return !excludeOptions || excludedOptionsArray.indexOf(item.value) === -1;\n            });\n\n            this.updatedByFilter = true;\n            this.setOptions(result);\n\n            this.value(this.transferredValue ? this.transferredValue : initialValue);\n\n            if (excludedOptionsArray.indexOf(initialValue) !== -1) {\n                this.transferredValue = initialValue;\n            } else {\n                this.transferredValue = null;\n            }\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/validator-rules-mixin.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'underscore',\n    'Magento_Ui/js/lib/validation/utils'\n], function ($, _, utils) {\n    'use strict';\n\n    /**\n     * Validate the number is between the min and max provided\n     *\n     * @param {Number} value\n     * @param {Number} min\n     * @param {Number} max\n     * @return {Boolean}\n     */\n    function validateNumberBetween(value, min, max) {\n        var numValue;\n\n        if ($.mage.isEmptyNoTrim(value)) {\n            return true;\n        }\n\n        numValue = $.mage.parseNumber(value);\n\n        if (isNaN(numValue)) {\n            return false;\n        }\n\n        return $.mage.isBetween(numValue, min, max);\n    }\n\n    /**\n     * Validate that string is url\n     * @param {String} href\n     * @return {Boolean}\n     */\n    function validateIsUrl(href) {\n        return (/^(http|https|ftp):\\/\\/(([A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))(\\.[A-Z0-9]([A-Z0-9_-]*[A-Z0-9]|))*)(:(\\d+))?(\\/[A-Z0-9~](([A-Z0-9_~-]|\\.)*[A-Z0-9~]|))*\\/?(.*)?$/i).test(href);//eslint-disable-line max-len\n    }\n\n    /**\n     * Validate that string has an anchor tag\n     * @param {String} str\n     * @return {Boolean}\n     */\n    function validateWysiwygHasAnchorTags(str) {\n        return (/<a[\\s]+([^>]+)>|<a>|<\\/a>/igm).test(str);\n    }\n\n    /**\n     * Validate that string has a widget\n     * @param {String} str\n     * @return {Boolean}\n     */\n    function validateWysiwygHasWidget(str) {\n        return (/\\{\\{widget(.*?)\\}\\}/ig).test(str);\n    }\n\n    /**\n     * Validate that string is a proper css-class\n     * @param {String} str\n     * @return {Boolean}\n     */\n    function validateCssClass(str) {\n        return (/^[a-zA-Z _\\-\\d]+$/i).test(str);\n    }\n\n    /**\n     * Validate message field and url field anchor tag is used exclusively by one field\n     * @param {String} message\n     * @param {Object} url\n     * @return {Boolean}\n     */\n    function validateOneAnchorTagField(message, url) {\n        return !(validateWysiwygHasAnchorTags(message) &&\n            ['page', 'product', 'category', 'default'].indexOf(url.type) !== -1 &&\n            url[url.type] &&\n            url[url.type].length > 0);\n    }\n\n    /**\n     * Validate message field and url field html standards, nested widget\n     * @param {String} message\n     * @param {Object} url\n     * @return {Boolean}\n     */\n    function validateNestedWidgetElement(message, url) {\n        return !(validateWysiwygHasWidget(message) &&\n            ['page', 'product', 'category', 'default'].indexOf(url.type) !== -1 &&\n            url[url.type] &&\n            url[url.type].length > 0);\n    }\n\n    /**\n     * Validate a field with an expected data value of type object, like margins_and_padding field\n     * @param {Function} validator\n     * @param {String} ruleName\n     */\n    function validateObjectField(validator, ruleName) {\n        var rule = validator.getRule(ruleName);\n\n        validator.addRule(\n            ruleName,\n            function (value, params) {\n                var allNumbers = true,\n                    handler = rule.handler.bind(this);\n\n                if (typeof value !== 'object') {\n                    return handler(value, params);\n                }\n\n                _.flatten(_.map(value, _.values)).forEach(function (val) {\n                    if (!handler(val, params)) {\n                        allNumbers = false;\n\n                        return allNumbers;\n                    }\n                });\n\n                return allNumbers;\n            },\n            $.mage.__(rule.message)\n        );\n    }\n\n    /**\n     * Validate calc value.\n     *\n     * @param {String} value\n     * @returns {Boolean}\n     */\n    function validateCalc(value) {\n        var el = document.createElement('div'),\n            style = el.style;\n\n        if (!value.trim().length) {\n            return true;\n        }\n\n        style.width = 'calc(' + value + ')';\n\n        return !!style.width.length;\n    }\n\n    return function (validator) {\n        var requiredInputRule = validator.getRule('required-entry');\n\n        validator.addRule(\n            'required-entry-location-name',\n            requiredInputRule.handler,\n            $.mage.__('Please enter the location name.')\n        );\n\n        validator.addRule(\n            'required-entry-latitude',\n            requiredInputRule.handler,\n            $.mage.__('Enter latitude')\n        );\n\n        validator.addRule(\n            'required-entry-longitude',\n            requiredInputRule.handler,\n            $.mage.__('Enter longitude')\n        );\n\n        validator.addRule(\n            'validate-latitude',\n            function (value) {\n                return validateNumberBetween(value, -85, 85);\n            },\n            $.mage.__('Please enter a number between -85 and 85')\n        );\n\n        validator.addRule(\n            'validate-longitude',\n            function (value) {\n                return validateNumberBetween(value, -180, 180);\n            },\n            $.mage.__('Please enter a number between -180 and 180')\n        );\n\n        validator.addRule(\n            'validate-video-url',\n            function (href) {\n                if (utils.isEmptyNoTrim(href)) {\n                    return true;\n                }\n\n                href = (href || '').replace(/^\\s+/, '').replace(/\\s+$/, '');\n\n                return validateIsUrl(href) && (href.match(/youtube\\.com|youtu\\.be/) || href.match(/vimeo\\.com/));\n            },\n            $.mage.__('Please enter a valid video URL.')\n        );\n\n        validator.addRule(\n            'validate-video-source',\n            function (href) {\n                if (utils.isEmptyNoTrim(href)) {\n                    return true;\n                }\n\n                href = (href || '').replace(/^\\s+/, '').replace(/\\s+$/, '');\n\n                return validateIsUrl(href) && (\n                    href.match(/youtube\\.com|youtu\\.be/) ||\n                    href.match(/vimeo\\.com/) ||\n                    href.match(/\\.(mp4|ogv|webm)(?!\\w)/)\n                );\n            },\n            $.mage.__('Please enter a valid video URL. Valid URLs have a video file extension (.mp4, .webm, .ogv) or links to videos on YouTube or Vimeo.')//eslint-disable-line max-len\n        );\n\n        validator.addRule(\n            'validate-css-class',\n            function (value) {\n                if (utils.isEmptyNoTrim(value)) {\n                    return true;\n                }\n\n                return validateCssClass(value);\n            },\n            $.mage.__('Please enter a valid CSS class.')\n        );\n\n        validator.addRule(\n            'required-entry',\n            function (value) {\n                var allFilled;\n\n                // Validation only for margins and paddings\n                if (value !== null && typeof value === 'object' && !!(value.padding || value.margin)) {\n                    allFilled = true;\n\n                    _.flatten(_.map(value, _.values)).forEach(function (val) {\n                        if (utils.isEmpty(val)) {\n                            allFilled = false;\n\n                            return allFilled;\n                        }\n                    });\n\n                    return allFilled;\n                }\n\n                return requiredInputRule.handler(value);\n            },\n            $.mage.__(requiredInputRule.message)\n        );\n\n        validator.addRule(\n            'validate-message-no-link',\n            function (url, message) {\n                return validateOneAnchorTagField(message, url);\n            },\n            $.mage.__('Adding link in both content and outer element is not allowed.')\n        );\n\n        validator.addRule(\n            'validate-no-url',\n            function (message, url) {\n                return validateOneAnchorTagField(message, url);\n            },\n            $.mage.__('Adding link in both content and outer element is not allowed.')\n        );\n\n        validator.addRule(\n            'validate-message-no-widget',\n            function (url, message) {\n                return validateNestedWidgetElement(message, url);\n            },\n            $.mage.__('Adding link in outer element and widget in content is not allowed.')\n        );\n\n        validator.addRule(\n            'validate-no-widget',\n            function (message, url) {\n                return validateNestedWidgetElement(message, url);\n            },\n            $.mage.__('Adding widget in content and link in outer element is not allowed.')\n        );\n\n        validator.addRule(\n            'validate-calc',\n            function (value) {\n                return validateCalc(value);\n            },\n            $.mage.__('Please enter a valid number or calculation: Valid numbers must have an extension (px, %, pt, vh). Calculations must have white space around the + and - operators and cannot divide by zero.')//eslint-disable-line max-len\n        );\n\n        validator.addRule(\n            'validate-grid-size',\n            function (value, params, additionalParams) {\n                if (value < additionalParams.non_empty_column_count) {\n                    return false;\n                }\n\n                return true;\n            },\n            $.mage.__('Grid size cannot be smaller than the current total amount of columns, minus any empty columns.')\n        );\n\n        validator.addRule(\n            'validate-max-grid-size',\n            function (value, params, additionalParams) {\n                if (value > additionalParams.max_grid_size) {\n                    return false;\n                }\n\n                return true;\n            },\n            $.mage.__('Please enter a value less than or equal to the Maximum Column Grid Size configuration.')\n        );\n\n        validateObjectField(validator, 'validate-number');\n        validateObjectField(validator, 'less-than-equals-to');\n        validateObjectField(validator, 'greater-than-equals-to');\n\n        return validator;\n    };\n});\n","Magento_PageBuilder/js/form/element/map.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/*eslint-disable vars-on-top, strict */\n\ndefine([\n    'Magento_Ui/js/form/element/abstract',\n    'Magento_PageBuilder/js/utils/map',\n    'module',\n    'Magento_PageBuilder/js/events'\n], function (AbstractField, GoogleMap, module, events) {\n    'use strict';\n\n    var google = window.google || {};\n\n    return AbstractField.extend({\n        defaults: {\n            elementTmpl: 'Magento_PageBuilder/form/element/map',\n            map: false,\n            marker: false,\n            apiKeyValid: !!module.config().apiKey,\n            apiKeyErrorMessage: module.config().apiKeyErrorMessage\n        },\n\n        /**\n         * Initializes observable properties of instance\n         *\n         * @returns {Abstract} Chainable.\n         */\n        initObservable: function () {\n            this._super();\n\n            this.observe('apiKeyValid');\n\n            return this;\n        },\n\n        /**\n         * Render the map into the field\n         *\n         * @param {HTMLElement} element\n         */\n        renderMap: function (element) {\n            // Get the start value and convert the value into an array\n            var startValue = this.value(),\n                mapOptions,\n                latitudeLongitude;\n\n            if (!this.apiKeyValid()) {\n                return;\n            }\n\n            if (typeof startValue === 'string' && startValue !== '') {\n                startValue = JSON.parse(startValue);\n            }\n\n            mapOptions = {\n                navigationControl: true,\n                navigationControlOptions: {\n                    style: google.maps.NavigationControlStyle.DEFAULT\n                }\n            };\n\n            events.on('googleMaps:authFailure', function () {\n                this.apiKeyValid(false);\n            }.bind(this));\n\n            // Create the map\n            this.mapElement = new GoogleMap(element, [], mapOptions);\n\n            if (!this.mapElement || !this.mapElement.map) {\n                return;\n            }\n\n            // Add marker if there is a start value\n            if (startValue.latitude !== '' && startValue.longitude !== '') {\n                latitudeLongitude = new google.maps.LatLng(\n                    parseFloat(startValue.latitude),\n                    parseFloat(startValue.longitude)\n                );\n\n                this.mapElement.map.setCenter(latitudeLongitude);\n                this.addMarker(startValue.latitude, startValue.longitude);\n            }\n\n            // After click, add and update both Latitude and Longitude.\n            google.maps.event.addListener(this.mapElement.map, 'click', this.onClick.bind(this));\n            google.maps.event.addListener(this.mapElement.map, 'dblclick', this.onDblClick.bind(this));\n            google.maps.event.trigger(this.marker, 'click');\n        },\n\n        /**\n         * Adds a map marker\n         *\n         * @param {String} latitude\n         * @param {String} longitude\n         */\n        addMarker: function (latitude, longitude) {\n            this.marker = new google.maps.Marker({\n                draggable: true,\n                map: this.mapElement.map,\n                position: new google.maps.LatLng(latitude, longitude)\n            });\n            google.maps.event.addListener(this.marker, 'dragend', this.onDragEnd.bind(this));\n        },\n\n        /**\n         * Event for drag end to update value\n         */\n        onDragEnd: function () {\n            this.value(this.exportValue());\n        },\n\n        /**\n         * Event for click to update marker, delayed by 300ms in case of double click\n         *\n         * @param {Event} event\n         */\n        onClick: function (event) {\n            this.clickTimer = setTimeout(function () {\n                if (!this.marker) {\n                    this.addMarker(event.latLng.lat(), event.latLng.lng());\n                }\n                this.value(this.exportValue(event.latLng));\n            }.bind(this), 300);\n        },\n\n        /**\n         * Event for double click to prevent call from single click\n         */\n        onDblClick: function () {\n            clearTimeout(this.clickTimer);\n        },\n\n        /**\n         * Callback after an update to map\n         */\n        onUpdate: function () {\n            if (!this.mapElement) {\n                return;\n            }\n\n            this._super();\n            var content = this.value(),\n                latitudeLongitude;\n\n            if (this.marker && content.latitude === '' && content.longitude === '') {\n                this.marker.setMap(null);\n                delete this.marker;\n\n                return;\n            }\n\n            if (!this.validateCoordinate(content) ||\n                this.mapElement &&\n                !this.mapElement.map ||\n                this.value() === '' ||\n                this.value() === this.exportValue()) {\n                return;\n            }\n\n            if (typeof this.value() === 'string' && this.value() !== '') {\n                content = JSON.parse(this.value());\n            }\n            latitudeLongitude = new google.maps.LatLng(parseFloat(content.latitude), parseFloat(content.longitude));\n\n            if (!this.marker) {\n                this.addMarker(latitudeLongitude.lat(), latitudeLongitude.lng());\n            }\n\n            this.marker.setPosition(latitudeLongitude);\n            this.mapElement.map.setCenter(latitudeLongitude);\n        },\n\n        /**\n         * Coordinate validation\n         *\n         * @param {Object} coordinates\n         * @return {Boolean}\n         */\n        validateCoordinate: function (coordinates) {\n            var valid = true;\n\n            if (coordinates.longitude === '' ||\n                coordinates.latitude === '' ||\n                isNaN(coordinates.longitude) ||\n                isNaN(coordinates.latitude) ||\n                parseFloat(coordinates.longitude) < -180 ||\n                parseFloat(coordinates.longitude) > 180 ||\n                parseFloat(coordinates.latitude) < -90 ||\n                parseFloat(coordinates.latitude) > 90\n            ) {\n                valid = false;\n            }\n\n            return valid;\n        },\n\n        /**\n         * Returns current latitude and longitude as an object\n         *\n         * @param {Object} coordinate\n         * @return {Object}\n         */\n        exportValue: function (coordinate) {\n            var position = this.marker ?\n                this.marker.getPosition() :\n                new google.maps.LatLng(this.mapElement.map.center.lat(), this.mapElement.map.center.lng()),\n                currentCoordinate = coordinate ? coordinate : position;\n\n            return {\n                latitude: currentCoordinate.lat(),\n                longitude: currentCoordinate.lng()\n            };\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/dependent-fieldset.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/components/fieldset'\n], function (Fieldset) {\n    'use strict';\n\n    return Fieldset.extend({\n        defaults: {\n            originalLabelValue: ''\n        },\n\n        /**\n         * Observe label\n         * {@inheritDoc}\n         */\n        initObservable: function () {\n            this._super().observe('label');\n\n            return this;\n        },\n\n        /**\n         * Store original label value\n         * {@inheritDoc}\n         */\n        initConfig: function () {\n            this._super();\n            this.originalLabelValue = this.label;\n        },\n\n        /**\n         * Hide fieldset if number of field options is <= 1 and it is the only element in the group\n         *\n         * @param {Array} options\n         */\n        hideFieldset: function (options) {\n            this.visible(options.length > 1 || this.elems().length > 1);\n        },\n\n        /**\n         * Hide label if number of field options is <= 1\n         *\n         * @param {Array} options\n         */\n        hideLabel: function (options) {\n            this.label(options.length > 1 ? this.originalLabelValue : '');\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/image-uploader.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'underscore',\n    'uiRegistry',\n    'Magento_Ui/js/form/element/image-uploader',\n    'Magento_PageBuilder/js/resource/resize-observer/ResizeObserver',\n    'Magento_PageBuilder/js/events',\n    'mage/translate'\n], function ($, _, uiRegistry, Uploader, ResizeObserver, events, $t) {\n    'use strict';\n\n    var initializedOnce = false;\n\n    return Uploader.extend({\n        defaults: {\n            $uploadArea: null,\n            isShowImageUploadInstructions: true,\n            isShowImageUploadOptions: false,\n            visibleControls: true,\n            classes: {\n                dragging: 'dragging',\n                draggingInside: 'dragging-inside',\n                draggingOutside: 'dragging-outside'\n            },\n            // listed in ascending order\n            elementWidthModifierClasses: {\n                '_micro-ui': {\n                    maxWidth: 130\n                },\n                '_compact-ui': {\n                    minWidth: 131,\n                    maxWidth: 440\n                }\n            },\n            translations: {\n                allowedFileTypes: $t('Allowed file types'),\n                dragImageHere: $t('Drag image here'),\n                dropHere: $t('Drop here'),\n                maximumFileSize: $t('Maximum file size'),\n                selectFromGallery: $t('Select from Gallery'),\n                or: $t('or'),\n                uploadImage: $t('Upload Image'),\n                uploadNewImage: $t('Upload New Image')\n            },\n            tracks: {\n                visibleControls: true\n            }\n        },\n\n        /**\n         * Bind drag events to highlight/unhighlight dropzones\n         * {@inheritDoc}\n         */\n        initialize: function () {\n            var $document = $(document);\n\n            this._super();\n\n            events.on('image:' + this.id + ':assignAfter', this.onAssignedFile.bind(this));\n\n            // bind dropzone highlighting using event delegation only once\n            if (!initializedOnce) {\n                // dropzone highlighting\n                $document.on('dragover', this.highlightDropzone.bind(this));\n\n                // dropzone unhighlighting\n                $document.on('dragend dragleave mouseup', this.unhighlightDropzone.bind(this));\n\n                initializedOnce = true;\n            }\n        },\n\n        /**\n         * {@inheritDoc}\n         */\n        initUploader: function (fileInput) {\n            this._super(fileInput);\n            this.$uploadArea = $('#' + $(fileInput).attr('id')).closest('.pagebuilder-image-empty-preview');\n            if (this.$uploadArea.get(0) !== undefined) {\n                new ResizeObserver(this.updateResponsiveClasses.bind(this)).observe(this.$uploadArea.get(0));\n            }\n        },\n\n        /**\n         * Checks if provided file is allowed to be uploaded.\n         * {@inheritDoc}\n         */\n        isFileAllowed: function () {\n            var result = this._super(),\n                allowedExtensions = this.getAllowedFileExtensionsInCommaDelimitedFormat();\n\n            if (!result.passed && result.rule === 'validate-file-type') {\n                result.message += ' ' + this.translations.allowedFileTypes + ': ' + allowedExtensions + '.';\n            }\n\n            return result;\n        },\n\n        /**\n         * Remove draggable classes from dropzones\n         * {@inheritDoc}\n         */\n        onBeforeFileUpload: function () {\n            this.removeDraggableClassesFromDropzones();\n            this._super();\n        },\n\n        /**\n         * Add/remove CSS classes to $dropzone element to provide UI feedback\n         *\n         * @param {jQuery.event} e\n         */\n        highlightDropzone: function (e) {\n            var $dropzone = $(e.target).closest(this.dropZone),\n                $otherDropzones = $(this.dropZone).not($dropzone),\n                isInsideDropzone = !!$dropzone.length;\n\n            if (isInsideDropzone) {\n                $dropzone\n                    .removeClass(this.classes.draggingOutside)\n                    .addClass([this.classes.dragging, this.classes.draggingInside].join(' '));\n            }\n\n            $otherDropzones\n                .removeClass(this.classes.draggingInside)\n                .addClass([this.classes.dragging, this.classes.draggingOutside].join(' '));\n        },\n\n        /**\n         * Remove all UI styling from dropzone\n         *\n         * @param {jQuery.event} e\n         */\n        unhighlightDropzone: function (e) {\n            var isMouseReleased = e.type === 'mouseup' || e.type === 'dragend',\n                isActuallyLeavingThePage = e.type === 'dragleave' && (e.clientX === 0 || e.clientY === 0);\n\n            if (!isMouseReleased && !isActuallyLeavingThePage) {\n                return;\n            }\n\n            this.removeDraggableClassesFromDropzones();\n        },\n\n        /**\n         * Remove draggable CSS classes from dropzone elements\n         */\n        removeDraggableClassesFromDropzones: function () {\n            var $dropzones = $(this.dropZone);\n\n            $dropzones\n                .removeClass([\n                    this.classes.dragging,\n                    this.classes.draggingInside,\n                    this.classes.draggingOutside\n                ].join(' '));\n        },\n\n        /**\n         * Trigger image:uploadAfter event to be handled by PageBuilder image component\n         * {@inheritDoc}\n         */\n        addFile: function (file) {\n            this._super();\n\n            events.trigger('image:' + this.id + ':uploadAfter', [file]);\n\n            return this;\n        },\n\n        /**\n         * Trigger image:deleteFileAfter event to be handled by PageBuilder image component\n         * {inheritDoc}\n         */\n        clear: function () {\n            this._super();\n\n            events.trigger('image:' + this.id + ':deleteFileAfter');\n\n            return this;\n        },\n\n        /**\n         * Propagate file changes through all image uploaders sharing the same id\n         *\n         * @param {Object} file\n         */\n        onAssignedFile: function (file) {\n            this.value([file]);\n        },\n\n        /**\n         * Adds the appropriate ui state class to the upload control area based on the current rendered size\n         */\n        updateResponsiveClasses: function () {\n            var classesToAdd = [],\n                classConfig,\n                elementWidth = this.$uploadArea.width(),\n                modifierClass;\n\n            if (!this.$uploadArea.is(':visible')) {\n                return;\n            }\n\n            this.$uploadArea.removeClass(Object.keys(this.elementWidthModifierClasses).join(' '));\n\n            for (modifierClass in this.elementWidthModifierClasses) {\n                if (!this.elementWidthModifierClasses.hasOwnProperty(modifierClass)) {\n                    // jscs:disable disallowKeywords\n                    continue;\n                    // jscs:enable disallowKeywords\n                }\n\n                classConfig = this.elementWidthModifierClasses[modifierClass];\n\n                if (classConfig.minWidth && classConfig.maxWidth &&\n                    (classConfig.minWidth <= elementWidth && elementWidth <= classConfig.maxWidth) ||\n                    classConfig.minWidth && !classConfig.maxWidth && classConfig.minWidth <= elementWidth ||\n                    classConfig.maxWidth && !classConfig.minWidth && elementWidth <= classConfig.maxWidth\n                ) {\n                    classesToAdd.push(modifierClass);\n                }\n            }\n\n            if (classesToAdd.length) {\n                this.$uploadArea.addClass(classesToAdd.join(' '));\n            }\n        },\n\n        /**\n         * {@inheritDoc}\n         */\n        hasData: function () {\n            // Some of the components automatically add an empty object if the value is unset.\n            return this._super() && !$.isEmptyObject(this.value()[0]);\n        },\n\n        /**\n         * Stop event to prevent it from reaching any objects other than the current object.\n         *\n         * @param {Object} uploader\n         * @param {Event} event\n         * @returns {Boolean}\n         */\n        stopEvent: function (uploader, event) {\n            event.stopPropagation();\n\n            return true;\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/page-ui-select.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/element/ui-select'\n], function (Select) {\n    'use strict';\n\n    return Select.extend({\n\n        /**\n         * Get path to current option\n         *\n         * @param {Object} data - option data\n         * @returns {String} path\n         */\n        getPath: function (data) {\n            var path = '';\n\n            if (this.renderPath) {\n                path = data.identifier || path;\n            }\n\n            return path;\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/html.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/components/html',\n    'jquery',\n    'underscore'\n], function (Html, $, _) {\n    'use strict';\n\n    return Html.extend({\n        defaults: {\n            inputSelector: '[data-form-part=${ $.ns }]',\n            elements: [],\n            value: {}\n        },\n\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n            this.initInputListener();\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        initObservable: function () {\n            return this._super()\n                .observe('value');\n        },\n\n        /**\n         * Listen for value change on each field that has been added.\n         */\n        initInputListener: function () {\n            $.async({\n                component: this,\n                selector: this.inputSelector\n            }, function (el) {\n                this.elements.push(el);\n                $(el).on('change', this.updateValue.bind(this));\n                $(el).nextAll('.rule-param-apply').on('click', function () {\n                    $(el).trigger('change');\n                });\n                $(el).closest('li').find('.rule-param-remove').on('click', function () {\n                    $(el).val('').trigger('change');\n                });\n                this.updateValue(this);\n            }.bind(this));\n        },\n\n        /**\n         * Collect data and update value.\n         */\n        updateValue: function () {\n            var result = {},\n                name;\n\n            this.elements.forEach(function (item) {\n                switch (item.type) {\n                    case 'checkbox':\n                        result[item.name] = +!!item.checked;\n                        break;\n\n                    case 'radio':\n                        if (item.checked) {\n                            result[item.name] = item.value;\n                        }\n                        break;\n\n                    case 'select-multiple':\n                        name = item.name.substring(0, item.name.length - 2); //remove [] from the name ending\n                        result[name] = _.pluck(item.selectedOptions, 'value');\n                        break;\n\n                    default:\n                        result[item.name] = item.value;\n                }\n            });\n\n            this.value(result);\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/margins-and-padding.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/*eslint-disable vars-on-top, strict */\n\ndefine([\n    'underscore',\n    'ko',\n    'Magento_Ui/js/form/element/abstract'\n], function (_, ko, Abstract) {\n    'use strict';\n\n    var defaultValue = '';\n\n    return Abstract.extend({\n        defaults: {\n            elementTmpl: 'Magento_PageBuilder/form/element/margins-and-padding',\n            marginTop: defaultValue,\n            marginRight: defaultValue,\n            marginBottom: defaultValue,\n            marginLeft: defaultValue,\n            paddingTop: defaultValue,\n            paddingRight: defaultValue,\n            paddingBottom: defaultValue,\n            paddingLeft: defaultValue,\n            listens: {\n                marginTop: 'updateValue',\n                marginRight: 'updateValue',\n                marginBottom: 'updateValue',\n                marginLeft: 'updateValue',\n                paddingTop: 'updateValue',\n                paddingRight: 'updateValue',\n                paddingBottom: 'updateValue',\n                paddingLeft: 'updateValue'\n            }\n        },\n\n        /**\n         * Init observable on our margin & padding properties\n         *\n         * @returns {exports}\n         */\n        initObservable: function () {\n            this._super();\n            this.observe('marginTop marginRight marginBottom marginLeft ' +\n                'paddingTop paddingRight paddingBottom paddingLeft');\n\n            return this;\n        },\n\n        /**\n         * Update the value on individual property changes\n         */\n        updateValue: function () {\n            this.value({\n                margin: {\n                    top: this.marginTop(),\n                    right: this.marginRight(),\n                    bottom: this.marginBottom(),\n                    left: this.marginLeft()\n                },\n                padding: {\n                    top: this.paddingTop(),\n                    right: this.paddingRight(),\n                    bottom: this.paddingBottom(),\n                    left: this.paddingLeft()\n                }\n            });\n        },\n\n        /**\n         * On set of the initial value update our individual observables\n         *\n         * @returns {exports}\n         */\n        setInitialValue: function () {\n            this._super();\n            this._updateObservables(this.initialValue);\n\n            return this;\n        },\n\n        /**\n         * On update of the value property update our individual observables, the data provider can have data\n         * set on it after the initial construction, this ensures we translate our values\n         *\n         * @returns {exports}\n         */\n        onUpdate: function () {\n            this._super();\n            this._updateObservables(this.value());\n\n            return this;\n        },\n\n        /**\n         * Update the observable properties\n         *\n         * @param {Number} value\n         * @private\n         */\n        _updateObservables: function (value) {\n            if (value && _.isString(value)) {\n                value = JSON.parse(value);\n            }\n\n            if (value && _.isObject(value)) {\n                _.each(value, function (attributeData, attributeType) {\n                    _.each(attributeData, function (attributeValue, attributeDirection) {\n                        if (attributeValue !== defaultValue) {\n                            this[attributeType + attributeDirection.capitalize()](attributeValue);\n                        }\n                    }, this);\n                }, this);\n            }\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/wysiwyg.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'underscore',\n    'Magento_Ui/js/form/element/wysiwyg',\n    'mage/translate',\n    'Magento_PageBuilder/js/events',\n    'Magento_Ui/js/lib/view/utils/dom-observer',\n    'Magento_PageBuilder/js/page-builder',\n    'Magento_Ui/js/lib/view/utils/async'\n], function ($, _, Wysiwyg, $t, events, domObserver, PageBuilder) {\n    'use strict';\n\n    /**\n     * Extend the original WYSIWYG with added PageBuilder functionality\n     */\n    return Wysiwyg.extend({\n        defaults: {\n            transition: false,\n            transitionOut: false,\n            elementSelector: '> textarea',\n            stageSelector: '.pagebuilder-stage-wrapper',\n            fieldsetSelector: 'fieldset.admin__fieldset',\n            overlaySelector: '.pagebuilder-wysiwyg-overlay',\n            overlayMouseover: false,\n            pageBuilder: false,\n            visiblePageBuilder: false,\n            isComponentInitialized: false,\n            wysiwygConfigData: {\n                isFullScreen: false\n            },\n            pageBuilderEditButtonText: $t('Edit with Page Builder'),\n            isWithinModal: false,\n            modal: false\n        },\n\n        /**\n         * @inheritdoc\n         */\n        initialize: function () {\n            this._super();\n\n            if (!this.wysiwygConfigData()['pagebuilder_button'] ||\n                this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\n                this.initPageBuilder();\n            }\n\n            return this;\n        },\n\n        /**\n         * @inheritdoc\n         */\n        initObservable: function () {\n            this._super()\n                .observe('isComponentInitialized visiblePageBuilder wysiwygConfigData loading transition ' +\n                    'transitionOut overlayMouseover');\n\n            return this;\n        },\n\n        /**\n         * Handle button click, init the Page Builder application\n         */\n        pageBuilderEditButtonClick: function (context, event) {\n            this.determineIfWithinModal(event.currentTarget);\n            this.transition(false);\n\n            if (!this.isComponentInitialized()) {\n                this.disableDomObserver($(event.currentTarget).parent()[0]);\n            }\n\n            this.initPageBuilder();\n            this.toggleFullScreen();\n        },\n\n        /**\n         * Init Page Builder\n         */\n        initPageBuilder: function () {\n            if (!this.isComponentInitialized()) {\n                this.loading(true);\n                this.pageBuilder = new PageBuilder(\n                  this.wysiwygConfigData(),\n                  this.initialValue\n                );\n                if (!this.source.get('pageBuilderInstances')) {\n                    this.source.set('pageBuilderInstances', []);\n                }\n                // Register PageBuilder instance in the data provider in case the event \"pagebuilder:register\"\n                // is triggered before the subscribers are registered\n                this.source.get('pageBuilderInstances').push(this.pageBuilder);\n                events.trigger('pagebuilder:register', {\n                    ns: this.ns,\n                    instance: this.pageBuilder\n                });\n                this.initPageBuilderListeners();\n                this.isComponentInitialized(true);\n\n                // Disable the domObserver for the entire stage\n                $.async({\n                    component: this,\n                    selector: this.stageSelector\n                }, this.disableDomObserver.bind(this));\n\n                if (!this.wysiwygConfigData()['pagebuilder_button'] ||\n                    this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\n                    this.visiblePageBuilder(true);\n                }\n            }\n        },\n\n        /**\n         * Disable the domObserver on the PageBuilder stage to improve performance\n         *\n         * @param {HTMLElement} node\n         */\n        disableDomObserver: function (node) {\n            this.determineIfWithinModal(node);\n            domObserver.disableNode(node);\n            domObserver.disableNode($(node).parents(this.fieldsetSelector)[0]);\n        },\n\n        /**\n         * Changes tabindex and content editable on stage elements\n         */\n        toggleFocusableElements: function () {\n            var pageBuilderSelector = '#' + this.pageBuilder.id,\n                editable = $(pageBuilderSelector).find('[contenteditable]:not(.mceNonEditable)'),\n                focusableSelector = ' :focusable:not(' + this.overlaySelector + ')',\n                mediaSelector = pageBuilderSelector + ' iframe,' + pageBuilderSelector + ' video',\n                tabIndexValue = this.pageBuilder.isFullScreen() ? '0' : '-1',\n                editableValue = this.pageBuilder.isFullScreen();\n\n            editable.attr('contenteditable', editableValue);\n            if (this.pageBuilder.isFullScreen()) {\n                $(pageBuilderSelector + focusableSelector)\n                    .each(function () {\n                        if ($(this).data('original-tabindex')) {\n                            $(this).attr('tabindex', $(this).data('original-tabindex'));\n                        } else if ($(this).data('original-tabindex') === '') {\n                            $(this).removeAttr('tabindex');\n                        }\n                        $(this).removeData('original-tabindex');\n                    });\n            } else {\n                $(pageBuilderSelector + focusableSelector).each(function () {\n                    if ($(this).attr('tabindex')) {\n                        $(this).data('original-tabindex', $(this).attr('tabindex'));\n                    } else {\n                        $(this).data('original-tabindex', '');\n                    }\n                    $(this).attr('tabindex', '-1');\n                });\n            }\n            $(mediaSelector).attr('tabindex', tabIndexValue);\n        },\n\n        /**\n         * Determine if the current instance is within a modal\n         *\n         * @param {HTMLElement} element\n         */\n        determineIfWithinModal: function (element) {\n            var modalInnerWrap = $(element).parents('.modal-inner-wrap');\n\n            // Determine if the Page Builder instance is within a modal\n            this.isWithinModal = modalInnerWrap.length === 1;\n\n            if (this.isWithinModal) {\n                this.modal = modalInnerWrap;\n            }\n        },\n\n        /**\n         * Press Enter key on Overlay\n         */\n        onOverlayKeyDown: function (context, event) {\n            if (event.which === 13 || event.keyCode === 13) {\n                this.pageBuilderEditButtonClick(context, event);\n            }\n\n            return true;\n        },\n\n        /**\n         * Toggle Page Builder full screen mode\n         */\n        toggleFullScreen: function () {\n            events.trigger('stage:' + this.pageBuilder.id + ':toggleFullscreen', {\n                animate: !!this.wysiwygConfigData()['pagebuilder_content_snapshot']\n            });\n        },\n\n        /**\n         * Init various listeners on the stage\n         */\n        initPageBuilderListeners: function () {\n            var id = this.pageBuilder.id,\n                renderDeferred = $.Deferred(),\n                fullScreenDeferred = $.Deferred(),\n                rendered = false;\n\n            events.on('stage:' + id + ':readyAfter', function () {\n                this.loading(false);\n            }.bind(this));\n\n            events.on('stage:' + id + ':renderAfter', function () {\n                renderDeferred.resolve();\n                rendered = true;\n            });\n\n            events.on('stage:' + id + ':masterFormatRenderAfter', function (args) {\n                this.value(args.value);\n\n                if (this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\n                    this.toggleFocusableElements();\n                }\n            }.bind(this));\n\n            events.on('stage:' + id + ':fullScreenModeChangeAfter', function (args) {\n                if (!args.fullScreen) {\n                    if (this.isWithinModal && this.modal) {\n                        _.delay(function () {\n                            this.modal.css({\n                                transform: '',\n                                transition: ''\n                            });\n                        }.bind(this), 350);\n                    }\n\n                    if (this.wysiwygConfigData()['pagebuilder_button'] &&\n                        !this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\n                        // Force full screen mode whilst the animation occurs\n                        this.transitionOut(true);\n                        // Trigger animation out\n                        this.transition(false);\n\n                        // Reset the transition out class and hide the stage\n                        _.delay(function () {\n                            this.transitionOut(false);\n                            this.visiblePageBuilder(false);\n                        }.bind(this), 185);\n                    }\n                } else if (args.fullScreen) {\n                    if (this.isWithinModal && this.modal) {\n                        this.modal.css({\n                            transform: 'none',\n                            transition: 'none'\n                        });\n                    }\n\n                    if (this.wysiwygConfigData()['pagebuilder_button'] &&\n                        !this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\n                        this.visiblePageBuilder(true);\n\n                        fullScreenDeferred.resolve();\n\n                        /* eslint-disable max-depth */\n                        // If the stage has already rendered once we don't need to wait until animating the stage in\n                        if (rendered) {\n                            _.defer(function () {\n                                this.transition(true);\n                            }.bind(this));\n                        }\n                        /* eslint-enable max-depth */\n                    }\n                }\n\n                if (this.wysiwygConfigData()['pagebuilder_content_snapshot']) {\n                    this.toggleFocusableElements();\n                }\n            }.bind(this));\n\n            // Wait until the stage is rendered and full screen mode is activated\n            $.when(renderDeferred, fullScreenDeferred).done(function () {\n                _.defer(function () {\n                    this.transition(true);\n                }.bind(this));\n            }.bind(this));\n        },\n\n        /** @inheritdoc */\n        destroy: function () {\n            this.pageBuilder && this.pageBuilder.destroy();\n            this._super();\n        }\n    });\n});\n","Magento_PageBuilder/js/form/element/html-code.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/* global MediabrowserUtility, widgetTools, MagentovariablePlugin */\ndefine([\n    'Magento_Ui/js/form/element/textarea',\n    'mage/adminhtml/wysiwyg/widget'\n], function (Textarea) {\n    'use strict';\n\n    var HTML_ID_PLACEHOLDER = 'HTML_ID_PLACEHOLDER';\n\n    return Textarea.extend({\n        defaults: {\n            elementTmpl: 'Magento_PageBuilder/form/element/html-code'\n        },\n\n        /**\n         * Click event for Insert Widget Button\n         */\n        clickInsertWidget: function () {\n            return widgetTools.openDialog(\n                this.widgetUrl.replace(HTML_ID_PLACEHOLDER, this.uid)\n            );\n        },\n\n        /**\n         * Click event for Insert Image Button\n         */\n        clickInsertImage: function () {\n            return MediabrowserUtility.openDialog(\n                this.imageUrl.replace(HTML_ID_PLACEHOLDER, this.uid)\n            );\n        },\n\n        /**\n         * Click event for Insert Variable Button\n         */\n        clickInsertVariable: function () {\n            return MagentovariablePlugin.loadChooser(\n                this.variableUrl,\n                this.uid\n            );\n        }\n    });\n});\n","Magento_PageBuilder/js/form/provider/conditions-data-processor.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore',\n    'mage/utils/objects',\n    'Magento_Rule/conditions-data-normalizer'\n], function (_, objectUtils, ConditionsDataNormalizer) {\n    'use strict';\n\n    var serializer = new ConditionsDataNormalizer();\n\n    return function (data, attribute) {\n        var pairs = {},\n            conditions = '';\n\n        /*\n         * The Condition Rule Tree is not a UI component and doesn't provide good data.\n         * The best solution is to implement the tree as a UI component that can provide good data but\n         * that is outside of the scope of the feature for now.\n         */\n        _.each(data, function (element, key) {\n            // parameters is hardcoded in the Magento\\Rule model that creates the HTML forms.\n            if (key.indexOf('parameters[' + attribute + ']') === 0) {\n                // Remove the bad, un-normalized data.\n                delete data[key];\n                pairs[key] = element;\n            }\n        });\n\n        /*\n         * The Combine Condition rule needs to have children,\n         * if does not have, we cannot parse the rule in the backend.\n         */\n        _.each(pairs, function (element, key) {\n            var keyIds = key.match(/[\\d?-]+/g),\n              combineElement = 'Magento\\\\CatalogWidget\\\\Model\\\\Rule\\\\Condition\\\\Combine',\n              nextPairsFirstKey = 'parameters[condition_source][NEXT_ITEM--1][type]',\n              nextPairsSecondKey = 'parameters[condition_source][NEXT_ITEM--2][type]';\n\n            if (keyIds !== null && element === combineElement) {\n                if (pairs[nextPairsFirstKey.replace('NEXT_ITEM', keyIds[0])] === undefined ||\n                    pairs[nextPairsFirstKey.replace('NEXT_ITEM', keyIds[0])] === combineElement &&\n                    pairs[nextPairsSecondKey.replace('NEXT_ITEM', keyIds[0])] === undefined) {\n                    pairs[key] = '';\n                }\n            }\n        });\n\n        /*\n         * Add pairs in case conditions source is not rules configurator\n         */\n        if (data['condition_option'] !== 'condition') {\n            pairs['parameters[' + attribute + '][1--1][operator]'] =\n                data[data['condition_option'] + '-condition_operator'] ?\n                data[data['condition_option'] + '-condition_operator'] :\n                '==';\n            pairs['parameters[' + attribute + '][1--1][type]'] =\n                'Magento\\\\CatalogWidget\\\\Model\\\\Rule\\\\Condition\\\\Product';\n            pairs['parameters[' + attribute + '][1][aggregator]'] = 'all';\n            pairs['parameters[' + attribute + '][1][new_child]'] = '';\n            pairs['parameters[' + attribute + '][1][type]'] = 'Magento\\\\CatalogWidget\\\\Model\\\\Rule\\\\Condition\\\\Combine';\n            pairs['parameters[' + attribute + '][1][value]'] = '1';\n            pairs['parameters[' + attribute + '][1--1][attribute]'] = data['condition_option'];\n            pairs['parameters[' + attribute + '][1--1][value]'] = _.isString(data[data['condition_option']]) ?\n                data[data['condition_option']].trim() :\n                '';\n        }\n\n        if (!_.isEmpty(pairs)) {\n            conditions = JSON.stringify(serializer.normalize(pairs).parameters[attribute]);\n            data['conditions_encoded'] = conditions;\n            objectUtils.nested(data, attribute, conditions);\n        }\n    };\n});\n","Magento_PageBuilder/js/form/components/map-location-insert-form.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/components/insert-form'\n], function (Insert) {\n    'use strict';\n\n    return Insert.extend({\n        /**\n         * Clear form content and reinsert data in argument\n         * @param {Object} data\n         */\n        edit: function (data) {\n            this.destroyInserted();\n            this.render();\n            this.setData(data);\n        },\n\n        /**\n         * Set data for new form\n         *\n         * @param {Object} data\n         */\n        setData: function (data) {\n            var formQuery = 'index=' + this.ns,\n                dataProviderQuery = 'index=' + this.ns + '_data_source';\n\n            this.providerData = data;\n            this.externalForm = this.requestModule(formQuery);\n            this.externalSource = this.requestModule(dataProviderQuery);\n            this.setLinks({\n                providerData: dataProviderQuery + ':data'\n            }, 'exports');\n        }\n    });\n});\n","Magento_PageBuilder/js/form/components/map-location-dynamic-rows.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/dynamic-rows/dynamic-rows',\n    'Magento_PageBuilder/js/events',\n    'underscore',\n    'jquery'\n], function (dynamicRows, Events, _, $) {\n    'use strict';\n\n    /**\n     * Returns sortable values\n     *\n     * @param {String | Number | Object | Array} value\n     * @return {String | Number}\n     */\n    var sortValueValidator = function (value) {\n        if (typeof value === 'string') {\n            return value.toLowerCase();\n        }\n\n        if (typeof value === 'number') {\n            return value;\n        }\n\n        return '';\n    };\n\n    return dynamicRows.extend({\n        defaults: {\n            modules: {\n                insertForm: '${ $.insertFormProvider }',\n                modal: '${$.modalProvider}'\n            }\n        },\n\n        /** @inheritdoc */\n        initLinks: function () {\n            this._super();\n            Events.on('mapLocation:saveAfter', function (data) {\n                this.modal().closeModal();\n                this.reInitData(data);\n            }.bind(this), this.name);\n\n            return this;\n        },\n\n        /**\n         * Open the location modal and insert form with the data from selected record\n         *\n         * @param {Object} record\n         */\n        edit: function (record) {\n            this.modal().openModal();\n            this.insertForm().edit(record.data());\n        },\n\n        /**\n         * Reinitializing of dynamic row records.\n         *\n         * @param {Object} data\n         */\n        reInitData: function (data) {\n            var recordData = this.recordData().slice(),\n                prop = this.identificationProperty,\n                isExists = false;\n\n            _.each(recordData, function (elem, index) {\n                if (elem[prop] === data[prop]) {\n                    recordData[index] = data;\n                    isExists = true;\n                }\n            }, this);\n\n            if (!isExists) {\n                recordData.push(data);\n            }\n\n            this.recordData(recordData);\n\n            _.each(this.labels(), function (label) {\n                if (label.columnsHeaderClasses) {\n                    this.sortRecord(label.name, label.columnsHeaderClasses === '_ascend');\n                }\n            }.bind(this));\n\n            this.reload();\n        },\n\n        /**\n         * Logic to toggle ascend and descend sorting for headers\n         *\n         * @param {KnockoutObservableArray} property\n         */\n        sortByHeader: function (property) {\n            var ascend,\n                activeLabel,\n                allLabels,\n                placeholder;\n\n            if (property().name === 'actions') {\n                return;\n            }\n\n            if (property().columnsHeaderClasses) {\n                activeLabel = $.extend({}, property());\n                activeLabel.columnsHeaderClasses =\n                    property().columnsHeaderClasses === '_ascend' ? '_descend' : '_ascend';\n                ascend = activeLabel.columnsHeaderClasses === '_ascend';\n                property(activeLabel);\n            } else {\n                allLabels = this.labels().slice();\n                allLabels.forEach(function (label) {\n\n                    if (label.name === property().name) {\n                        label.columnsHeaderClasses = '_ascend';\n                    } else {\n                        label.columnsHeaderClasses = '';\n                    }\n                });\n                ascend = true;\n                this.labels(allLabels);\n            }\n\n            if (this.recordData().length) {\n                placeholder = this.emptyContentPlaceholder;\n\n                this.emptyContentPlaceholder = false;\n                this.sortRecord(property().name, ascend);\n                this.reload();\n                this.emptyContentPlaceholder = placeholder;\n            }\n        },\n\n        /**\n         * Sorting of dynamic row records.\n         *\n         * @param {String} sortBy\n         * @param {Boolean} ascend\n         */\n        sortRecord: function (sortBy, ascend) {\n            this.recordData.sort(function (left, right) {\n                var record1 = ascend ? left : right,\n                    record2 = ascend ? right : left;\n\n                record1 = sortValueValidator(record1[sortBy]);\n                record2 = sortValueValidator(record2[sortBy]);\n\n                return record1 === record2 ? 0 : record1 < record2 ? -1 : 1;\n            });\n        },\n\n        /** @inheritdoc */\n        destroy: function () {\n            this._super();\n            Events.off(this.name);\n        }\n    });\n});\n","Magento_PageBuilder/js/form/components/action-button.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/components/button'\n], function (Button) {\n    'use strict';\n\n    return Button.extend({\n        defaults: {\n            modules: {\n                parent: '${ $.parentName }',\n                insertForm: '${ $.insertFormProvider }',\n                modal: '${ $.modalProvider }'\n            }\n        },\n\n        /**\n         * Edit form with data assigning.\n         */\n        edit: function () {\n            this.modal().openModal();\n            this.insertForm().edit(this.parent().data());\n        },\n\n        /**\n         * Delete record from dynamic row.\n         */\n        deleteRecord: function () {\n            var record = this.parent(),\n                dynamicRow = record.parentComponent(),\n                prop = dynamicRow.identificationProperty,\n                id = record.data()[prop];\n\n            dynamicRow.deleteRecord(record.index, id);\n        }\n    });\n});\n","Magento_PageBuilder/js/form/components/insert-form.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'Magento_Ui/js/form/components/insert-form',\n    'Magento_PageBuilder/js/events',\n    'jquery'\n], function (Insert, events, $) {\n    'use strict';\n\n    return Insert.extend({\n        defaults: {\n            appearanceIndex: '',\n            configs: {},\n            tracks: {\n                id: true\n            },\n            listens: {\n                appearance: 'onAppearanceChange'\n            }\n        },\n\n        /** @inheritdoc */\n        initialize: function () {\n            this._super();\n\n            events.on('form:renderAfter', function (params) {\n                this.render(params);\n            }.bind(this));\n\n            return this;\n        },\n\n        /** @inheritdoc */\n        render: function (params) {\n            this.availableAppearances = params.appearances;\n            this.title = params.title;\n            this.defaultNamespace = params.defaultNamespace;\n            this.destroyInserted();\n            this.setData(params);\n\n            return this._super({\n                namespace: params.namespace,\n                handle: params.namespace\n            });\n        },\n\n        /**\n         * Set data for new form.\n         *\n         * @param {Object} params\n         */\n        setData: function (params) {\n            var formQuery = 'index=' + params.namespace,\n                dataProviderQuery = 'index=' + params.namespace + '_data_source';\n\n            this.providerData = params.data;\n            this.id = params.id;\n            this.externalForm = this.requestModule(formQuery);\n            this.externalSource = this.requestModule(dataProviderQuery);\n            this.setLinks({\n                appearance: 'ns = ' + params.namespace + ', index = ' + this.appearanceIndex + ':value'\n            }, 'imports');\n            this.setLinks({\n                providerData: dataProviderQuery + ':data',\n                prefix: formQuery + ':selectorPrefix',\n                id: dataProviderQuery + ':id'\n            }, 'exports');\n        },\n\n        /** @inheritdoc **/\n        requestData: function (params) {\n            var deffer = $.Deferred(),\n                formConfig = this.configs[params.namespace];\n\n            if (formConfig) {\n                return deffer.resolve(formConfig);\n            }\n\n            return this._super().done(function (data) {\n                this.configs[params.namespace] = data;\n            }.bind(this));\n        },\n\n        /**\n         * Re-render after appearance change\n         *\n         * @param {String} value\n         */\n        onAppearanceChange: function (value) {\n            var namespace = this.availableAppearances[value] && this.availableAppearances[value].form ||\n                this.defaultNamespace;\n\n            if (namespace !== this.previousParams.namespace) {\n                this.render({\n                    namespace: namespace,\n                    id: this.id,\n                    data: this.externalSource().get('data'),\n                    appearances: this.availableAppearances,\n                    title: this.title,\n                    defaultNamespace: this.defaultNamespace\n                });\n            }\n        }\n    });\n});\n","Magento_PageBuilder/js/content-type-menu/hide-show-option.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"mage/translate\", \"Magento_PageBuilder/js/content-type-menu/option\"], function (_translate, _option) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var HideShowOption = /*#__PURE__*/function (_option2) {\n    \"use strict\";\n\n    _inheritsLoose(HideShowOption, _option2);\n\n    /**\n     * @param {OptionConfigInterface} options\n     */\n    function HideShowOption(options) {\n      var _this;\n\n      _this = _option2.call(this, options) || this; // Modify the icon when changes are made to display in the data store\n\n      _this.preview.contentType.dataStore.subscribe(_this.onDisplayChange.bind(_assertThisInitialized(_this)), \"display\");\n\n      return _this;\n    }\n    /**\n     * On display change update the title and icon\n     *\n     * @param {DataObject} state\n     */\n\n\n    var _proto = HideShowOption.prototype;\n\n    _proto.onDisplayChange = function onDisplayChange(state) {\n      var display = !!state.display;\n\n      if (display) {\n        this.icon(HideShowOption.hideIcon);\n        this.title(HideShowOption.hideText);\n      } else {\n        this.icon(HideShowOption.showIcon);\n        this.title(HideShowOption.showText);\n      }\n    };\n\n    return HideShowOption;\n  }(_option);\n\n  HideShowOption.showText = (0, _translate)(\"Show\");\n  HideShowOption.showIcon = \"<i class='icon-pagebuilder-show'></i>\";\n  HideShowOption.hideText = (0, _translate)(\"Hide\");\n  HideShowOption.hideIcon = \"<i class='icon-pagebuilder-hide'></i>\";\n  return HideShowOption;\n});\n//# sourceMappingURL=hide-show-option.js.map","Magento_PageBuilder/js/content-type-menu/option.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\ndefine([\"knockout\"], function (_knockout) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var Option = /*#__PURE__*/function () {\n    \"use strict\";\n\n    /**\n     * @param {OptionConfigInterface} config\n     */\n    function Option(config) {\n      var _this = this;\n\n      this.icon = _knockout.observable(\"\");\n      this.title = _knockout.observable(\"\");\n      this.classes = _knockout.observable({});\n      this.isDisabled = _knockout.observable(false);\n      this.config = config;\n      this.preview = config.preview;\n      this.icon(config.icon);\n      this.title(config.title);\n      this.code = config.code;\n      this.sort = config.sort || 0;\n      this.customTemplate = config.template; // Generate an array of classes for KO to consume\n\n      var koClasses = {};\n\n      if (config.classes && config.classes.length > 0) {\n        config.classes.forEach(function (cssClass) {\n          koClasses[cssClass] = true;\n        });\n      } // Always add a disabled class which tracks whether this option is disabled\n\n\n      koClasses.disabled = this.isDisabled;\n      this.classes(koClasses); // If no action is supplied pass an empty function, this is called within the context of the preview\n\n      var action = config.action ? config.action : function () {\n        return;\n      };\n\n      this.action = function () {\n        if (!_this.isDisabled()) {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          action.apply(_this.preview, args);\n        }\n      };\n    }\n\n    _createClass(Option, [{\n      key: \"template\",\n      get: function get() {\n        return this.customTemplate || null;\n      }\n    }]);\n\n    return Option;\n  }();\n\n  return Option;\n});\n//# sourceMappingURL=option.js.map","Magento_PageBuilder/js/content-type-menu/title-option.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_PageBuilder/js/content-type-menu/option\"], function (_option) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var TitleOption = /*#__PURE__*/function (_option2) {\n    \"use strict\";\n\n    _inheritsLoose(TitleOption, _option2);\n\n    /**\n     * @param {OptionConfigInterface} options\n     */\n    function TitleOption(options) {\n      var _this;\n\n      _this = _option2.call(this, options) || this; // Modify the icon when changes are made to display in the data store\n\n      _this.preview.displayLabel.subscribe(function (label) {\n        _this.title(label);\n      });\n\n      return _this;\n    }\n\n    return TitleOption;\n  }(_option);\n\n  return TitleOption;\n});\n//# sourceMappingURL=title-option.js.map","Magento_PageBuilder/js/content-type-menu/edit.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/events\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\"], function (_events, _mageUtils, _underscore, _config) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var Edit = /*#__PURE__*/function () {\n    \"use strict\";\n\n    /**\n     * @param {ContentTypeInterface} instance\n     * @param {DataStore} dataStore\n     */\n    function Edit(instance, dataStore) {\n      var _this = this;\n\n      this.instance = instance;\n      this.dataStore = dataStore;\n\n      _events.on(\"form:\" + this.instance.id + \":saveAfter\", function (data) {\n        var viewport = _config.getConfig(\"viewport\");\n\n        var defaultViewport = _config.getConfig(\"defaultViewport\"); // set value to dataStore from default viewport if it is empty\n\n\n        if (defaultViewport !== viewport) {\n          _underscore.each(_this.instance.getViewportFields(viewport, data), function (value, key) {\n            var isEmpty = !_underscore.find(_mageUtils.compare(data[key], _this.instance.dataStores[defaultViewport].get(key)).changes, function (change) {\n              return !_underscore.isEmpty(change.oldValue);\n            });\n\n            if (isEmpty) {\n              _this.instance.dataStores[viewport].set(key, data[key]);\n\n              data[key] = _this.instance.dataStores[defaultViewport].get(key);\n            }\n          });\n        }\n\n        _this.dataStore.setState(_this.filterData(data));\n      });\n    }\n    /**\n     * Open the modal\n     */\n\n\n    var _proto = Edit.prototype;\n\n    _proto.open = function open() {\n      var _this2 = this;\n\n      var contentTypeData = this.dataStore.getState();\n\n      var viewport = _config.getConfig(\"viewport\");\n\n      var defaultViewport = _config.getConfig(\"defaultViewport\"); // set empty value if it the same in default viewport\n\n\n      if (defaultViewport !== viewport) {\n        _underscore.each(this.instance.getViewportFields(viewport, contentTypeData), function (value, key) {\n          if (_mageUtils.compare(contentTypeData[key], _this2.instance.dataStores.desktop.get(key)).equal) {\n            contentTypeData[key] = undefined;\n          }\n        });\n      }\n\n      _events.trigger(\"contentType:editBefore\", {\n        contentType: this.instance\n      });\n\n      _events.trigger(\"form:renderAfter\", {\n        data: contentTypeData,\n        appearances: this.instance.config.appearances,\n        defaultNamespace: this.getDefaultNamespaceForm(),\n        id: this.instance.id,\n        namespace: this.getFormNamespace(contentTypeData),\n        title: this.instance.config.label\n      });\n    }\n    /**\n     * Flip flop to JSON and back again to ensure all data received from the form is serializable. Magento by default\n     * adds functions into some basic types which cannot be serialized when calling PostMessage.\n     *\n     * @param {DataObject} data\n     * @returns {DataObject}\n     */\n    ;\n\n    _proto.filterData = function filterData(data) {\n      return JSON.parse(JSON.stringify(data));\n    }\n    /**\n     * Determine the form namespace based on the currently set appearance\n     *\n     * @param {DataObject} contentTypeData\n     * @returns {string}\n     */\n    ;\n\n    _proto.getFormNamespace = function getFormNamespace(contentTypeData) {\n      var viewport = this.instance.preview.viewport();\n      var currentAppearance = this.dataStore.get(\"appearance\");\n      var appearance = this.instance.config.appearances[currentAppearance];\n      var breakpoints = appearance.breakpoints;\n      var formNamespace = this.getDefaultNamespaceForm(); // Use the default form unless a custom one is defined\n\n      if (breakpoints && breakpoints[viewport] && breakpoints[viewport].form) {\n        formNamespace = breakpoints[viewport].form;\n      } else if (!_underscore.isUndefined(appearance.form)) {\n        formNamespace = appearance.form;\n      }\n\n      return formNamespace;\n    }\n    /**\n     * Determine the form default namespace based on the currently set appearance and breakpoint\n     *\n     * @returns {string}\n     */\n    ;\n\n    _proto.getDefaultNamespaceForm = function getDefaultNamespaceForm() {\n      var viewport = this.instance.preview.viewport();\n      var breakpoints = this.instance.config.breakpoints;\n      var formNamespace = this.instance.config.form;\n\n      if (breakpoints && breakpoints[viewport] && breakpoints[viewport].form) {\n        formNamespace = breakpoints[viewport].form;\n      }\n\n      return formNamespace;\n    };\n\n    return Edit;\n  }();\n\n  return Edit;\n});\n//# sourceMappingURL=edit.js.map","Magento_PageBuilder/js/content-type-menu/conditional-remove-option.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\ndefine([\"Magento_PageBuilder/js/content-type-menu/option\"], function (_option) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var ConditionalRemoveOption = /*#__PURE__*/function (_option2) {\n    \"use strict\";\n\n    _inheritsLoose(ConditionalRemoveOption, _option2);\n\n    /**\n     * @param {OptionConfigInterface} config\n     */\n    function ConditionalRemoveOption(config) {\n      var _this;\n\n      _this = _option2.call(this, config) || this;\n      var parentContentType = _this.preview.contentType.parentContentType;\n\n      if (parentContentType.children().length < 2) {\n        _this.isDisabled(true);\n      }\n\n      parentContentType.children.subscribe(function (children) {\n        _this.isDisabled(children.length < 2);\n      });\n      return _this;\n    }\n\n    return ConditionalRemoveOption;\n  }(_option);\n\n  return ConditionalRemoveOption;\n});\n//# sourceMappingURL=conditional-remove-option.js.map","Magento_PageBuilder/js/master-format/read-interface.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  \"use strict\";\n});\n//# sourceMappingURL=read-interface.js.map","Magento_PageBuilder/js/master-format/validator.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/config\"], function (_config) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Validate if content has page builder format by checking for any data-content-type attributes\n   *\n   * @param {string} content\n   * @returns {boolean}\n   */\n  function validate(content) {\n    var stageDocument = new DOMParser().parseFromString(content, \"text/html\");\n    return !!stageDocument.querySelector(\"[\" + _config.getConfig(\"dataContentTypeAttributeName\") + \"]\");\n  }\n\n  return validate;\n});\n//# sourceMappingURL=validator.js.map","Magento_PageBuilder/js/master-format/render.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/master-format/render/serialize\"], function (_jquery, _config, _serialize) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var MasterFormatRenderer = /*#__PURE__*/function () {\n    \"use strict\";\n\n    /**\n     * @param stageId\n     */\n    function MasterFormatRenderer(stageId) {\n      this.ready = false;\n      this.readyDeferred = _jquery.Deferred();\n      this.stageId = stageId;\n    }\n    /**\n     * Render the root container into a string utilising our sandboxed iframe\n     *\n     * @param {ContentTypeCollection} rootContainer\n     * @returns {Promise<string>}\n     */\n\n\n    var _proto = MasterFormatRenderer.prototype;\n\n    _proto.applyBindings = function applyBindings(rootContainer) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        if (!_this.getRenderFrame()) {\n          // If the stage exists we should also have a frame\n          if (document.getElementById(_this.stageId)) {\n            return reject(\"No render frame present for Page Builder instance.\");\n          } // Otherwise the instance of Page Builder has been removed from the DOM and this is an old instance.\n\n\n          return reject();\n        }\n\n        if (_this.ready) {\n          _this.channel.port1.postMessage({\n            type: \"render\",\n            message: {\n              stageId: _this.stageId,\n              tree: (0, _serialize.getSerializedTree)(rootContainer)\n            }\n          });\n\n          _this.channel.port1.onmessage = function (event) {\n            if (event.isTrusted) {\n              if (event.data.type === \"render\") {\n                resolve(event.data.message);\n              }\n\n              if (event.data.type === \"template\") {\n                _this.loadTemplate(event.data.message);\n              }\n            } else {\n              reject(\"Render event was not trusted.\");\n            }\n          };\n        } else {\n          _this.readyDeferred.then(function () {\n            _this.applyBindings(rootContainer).then(function (rendered) {\n              resolve(rendered);\n            }).catch(function (error) {\n              reject(error);\n            });\n          });\n        }\n      });\n    }\n    /**\n     * Create a channel to communicate with our sandboxed iframe. Firstly add a listener to the current window and then\n     * set the src of the iframe. Listening for a specific message event with a predefined term and then hand over the\n     * MessageChannel port to allow communication between the main window and iframe.\n     */\n    ;\n\n    _proto.setupChannel = function setupChannel() {\n      var _this2 = this;\n\n      this.channel = new MessageChannel();\n      var frame = this.getRenderFrame();\n      window.addEventListener(\"message\", function (event) {\n        if (!_this2.ready && event.data.name === \"PB_RENDER_READY\" && _this2.stageId === event.data.stageId) {\n          frame.contentWindow.postMessage(\"PB_RENDER_PORT\", \"*\", [_this2.channel.port2]);\n          _this2.ready = true;\n\n          _this2.readyDeferred.resolve();\n        }\n      });\n      frame.src = _config.getConfig(\"render_url\") + \"?stageId=\" + this.stageId;\n    }\n    /**\n     * Use the text! RequireJS plugin to load a template and send it back to the child render iframe\n     *\n     * @param name\n     */\n    ;\n\n    _proto.loadTemplate = function loadTemplate(name) {\n      var _this3 = this;\n\n      require([\"text!\" + name], function (template) {\n        _this3.channel.port1.postMessage({\n          type: \"template\",\n          message: {\n            name: name,\n            template: template\n          }\n        });\n      });\n    }\n    /**\n     * Retrieve the render frame\n     *\n     * @returns {HTMLIFrameElement}\n     */\n    ;\n\n    _proto.getRenderFrame = function getRenderFrame() {\n      return document.getElementById(\"render_frame_\" + this.stageId);\n    };\n\n    return MasterFormatRenderer;\n  }();\n\n  return MasterFormatRenderer;\n});\n//# sourceMappingURL=render.js.map","Magento_PageBuilder/js/master-format/filter-html.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\"], function (_jquery) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Filter the HTML output to only include necessary attributes & nodes\n   *\n   * @param {JQuery} element\n   * @returns {JQuery}\n   */\n  function filterHtml(element) {\n    var isWhiteSpaceOrComment = function isWhiteSpaceOrComment() {\n      return this.nodeType === Node.COMMENT_NODE || this.nodeType === Node.TEXT_NODE && this.data.match(/^\\s+$/);\n    };\n\n    element.find(\"[data-bind]\").each(function (index, value) {\n      (0, _jquery)(value).removeAttr(\"data-bind\");\n    });\n    element.contents().filter(isWhiteSpaceOrComment).remove();\n    element.find(\"*\").filter(function (index, descendentEl) {\n      // filter out elements that are iframes or have .bypass-html-filter ancestor\n      var isIframe = descendentEl.tagName === \"IFRAME\";\n      var isBeingBypassedByThisFilter = !!(0, _jquery)(descendentEl).closest(\".bypass-html-filter\").length;\n      return !isIframe && !isBeingBypassedByThisFilter;\n    }).each(function (index, descendentEl) {\n      (0, _jquery)(descendentEl).contents().filter(isWhiteSpaceOrComment).remove();\n    });\n    element.find(\"[data-wrapper]\").each(function (index, value) {\n      (0, _jquery)(value).parent().append((0, _jquery)(value).children());\n      (0, _jquery)(value).remove();\n    });\n    element.find(\".bypass-html-filter\").each(function (index, value) {\n      (0, _jquery)(value).removeClass(\"bypass-html-filter\").filter('[class=\"\"]').removeAttr(\"class\");\n    });\n    return element;\n  }\n\n  return filterHtml;\n});\n//# sourceMappingURL=filter-html.js.map","Magento_PageBuilder/js/master-format/render/events.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * The frame does not need to create or observe events, however the app will naturally attempt to. So let's stop that!\n   */\n  var _default = {\n    on: function on() {\n      return this;\n    },\n    off: function off() {\n      return this;\n    },\n    trigger: function trigger() {\n      return this;\n    }\n  };\n  return _default;\n});\n//# sourceMappingURL=events.js.map","Magento_PageBuilder/js/master-format/render/frame.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"csso\", \"jquery\", \"knockout\", \"Magento_Ui/js/lib/knockout/template/engine\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/binding/master-style\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-factory\", \"Magento_PageBuilder/js/content-type/style-registry\", \"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/master-format/filter-html\"], function (_csso, _jquery, _knockout, _engine, _mageUtils, _underscore, _masterStyle, _config, _contentTypeFactory, _styleRegistry, _directives, _filterHtml) {\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var port = null;\n\n  var portDeferred = _jquery.Deferred();\n\n  var deferredTemplates = {};\n  var lastRenderId;\n  /**\n   * Debounce the render call, so we don't render until the final request\n   */\n\n  var debounceRender = _underscore.debounce(function (message, renderId) {\n    render(message, renderId).then(function (output) {\n      // Only post the most recent render back to the parent\n      if (lastRenderId === renderId) {\n        port.postMessage({\n          type: \"render\",\n          message: output\n        });\n      }\n    });\n  }, 50);\n  /**\n   * Listen for requests from the parent window for a render\n   */\n\n\n  function listen(config) {\n    var stageId = window.location.href.split(\"?\")[1].split(\"=\")[1];\n\n    _config.setConfig(config);\n\n    _config.setMode(\"Master\"); // Override assign with extend to prevent deep object overriding.\n\n\n    Object.assign = _mageUtils.extend;\n    /**\n     * Create a listener within our iframe so we can observe messages from the parent, once we receive a port on the\n     * MessageChannel we utilise that for all communication.\n     */\n\n    window.addEventListener(\"message\", function (event) {\n      if (event.ports && event.ports.length) {\n        port = event.ports[0];\n        portDeferred.resolve(port);\n\n        port.onmessage = function (messageEvent) {\n          if (messageEvent.data.type === \"render\") {\n            var renderId = _mageUtils.uniqueid();\n\n            lastRenderId = renderId;\n            debounceRender(messageEvent.data.message, renderId);\n          }\n\n          if (messageEvent.data.type === \"template\") {\n            var message = messageEvent.data.message;\n\n            if (message.name in deferredTemplates) {\n              deferredTemplates[message.name].resolve(message.template);\n              delete deferredTemplates[message.name];\n            }\n          }\n        };\n      }\n    }, false); // Inform the parent iframe that we're ready to receive the port\n\n    window.parent.postMessage({\n      name: \"PB_RENDER_READY\",\n      stageId: stageId\n    }, \"*\");\n  }\n  /**\n   * Use our MessageChannel to load a template from the parent window, this is required as the iframe isn't allowed to\n   * make same origin XHR requests.\n   *\n   * @param name\n   */\n\n\n  function loadTemplate(name) {\n    return new Promise(function (resolve) {\n      if (!(name in deferredTemplates)) {\n        deferredTemplates[name] = _jquery.Deferred();\n      }\n\n      deferredTemplates[name].then(function (template) {\n        resolve(template);\n      });\n\n      if (port) {\n        port.postMessage({\n          type: \"template\",\n          message: name\n        });\n      } else {\n        portDeferred.then(function (messagePort) {\n          messagePort.postMessage({\n            type: \"template\",\n            message: name\n          });\n        });\n      }\n    });\n  }\n  /**\n   * Assert if the render has finished\n   */\n\n\n  var assertRenderFinished = _underscore.debounce(function (element, expectedCount, callback) {\n    if (element.querySelectorAll(\"[data-content-type]\").length === expectedCount) {\n      callback();\n    }\n  }, 50);\n  /**\n   * Iterate over the root container and count all content types\n   *\n   * @param rootContainer\n   * @param count\n   */\n\n\n  function countContentTypes(rootContainer, count) {\n    count = count || 0;\n    rootContainer.getChildren()().forEach(function (child) {\n      ++count;\n\n      if (typeof child.getChildren !== \"undefined\" && child.getChildren()().length > 0) {\n        count = countContentTypes(child, count);\n      }\n    });\n    return count;\n  }\n  /**\n   * Perform a render of the provided data\n   *\n   * @param message\n   * @param renderId\n   */\n\n\n  function render(message, renderId) {\n    var styleRegistries = {};\n\n    _underscore.each(_config.getConfig(\"viewports\"), function (viewport, name) {\n      styleRegistries[name] = new _styleRegistry(name + renderId);\n    });\n\n    return new Promise(function (resolve, reject) {\n      createRenderTree(message.stageId, message.tree).then(function (rootContainer) {\n        var element = document.createElement(\"div\");\n        /**\n         * Setup an event on the element to observe changes and count the expected amount of content types are\n         * present within the content.\n         */\n\n        var renderFinished = _jquery.Deferred();\n\n        var observer = new MutationObserver(function () {\n          assertRenderFinished(element, countContentTypes(rootContainer), renderFinished.resolve);\n        });\n        observer.observe(element, {\n          attributes: true,\n          childList: true,\n          subtree: true\n        }); // Combine this event with our engine waitForRenderFinish to ensure rendering is completed\n\n        _jquery.when(_engine.waitForFinishRender(), renderFinished).then(function () {\n          observer.disconnect();\n\n          _knockout.cleanNode(element);\n\n          var styles = generateMasterCssForViewports(styleRegistries);\n\n          if (styles) {\n            (0, _jquery)(element).append((0, _jquery)(\"<style/>\").html(styles));\n          }\n\n          _underscore.each(styleRegistries, function (value, name) {\n            return (0, _styleRegistry.deleteStyleRegistry)(name + renderId);\n          });\n\n          var filtered = (0, _filterHtml)((0, _jquery)(element));\n          var output = (0, _directives.replaceWithSrc)((0, _directives)(filtered.html()));\n          resolve(output);\n        });\n\n        _knockout.applyBindingsToNode(element, {\n          template: {\n            data: rootContainer.content,\n            name: rootContainer.content.template\n          }\n        }, {\n          id: renderId\n        });\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  }\n  /**\n   * Rebuild the content type tree using their original data and configuration\n   *\n   * @param stageId\n   * @param tree\n   * @param parent\n   */\n\n\n  function createRenderTree(stageId, tree, parent) {\n    if (parent === void 0) {\n      parent = null;\n    }\n\n    return new Promise(function (resolve, reject) {\n      (0, _contentTypeFactory)(_config.getContentTypeConfig(tree.name), parent, stageId, tree.data, parent !== null ? tree.children.length : 0, tree.viewportsData).then(function (contentType) {\n        // Ensure  we retain the original tree ID's\n        contentType.id = tree.id;\n\n        if (tree.children.length > 0) {\n          var childPromises = [];\n          tree.children.forEach(function (child) {\n            childPromises.push(createRenderTree(stageId, child, contentType));\n          });\n          Promise.all(childPromises).then(function (children) {\n            children.forEach(function (child) {\n              contentType.addChild(child);\n            });\n            resolve(contentType);\n          });\n        } else {\n          resolve(contentType);\n        }\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  }\n  /**\n   * Generate the master format CSS\n   *\n   * @param registry\n   */\n\n\n  function generateMasterCss(registry) {\n    var scopes = Object.keys(registry.getAllStyles()).map(function (selector) {\n      return [selector];\n    });\n    return _csso.minify((0, _styleRegistry.generateCss)(registry.getAllStyles()), {\n      usage: {\n        scopes: scopes\n      }\n    }).css;\n  }\n\n  function generateMasterCssForViewports(registries) {\n    var result = \"\";\n\n    _underscore.each(registries, function (registry, name) {\n      var css = generateMasterCss(registry);\n\n      var media = _config.getConfig(\"viewports\")[name].media;\n\n      if (media && css) {\n        result += \"@media \" + media + \" { \" + css + \" }\";\n      } else {\n        result += css;\n      }\n    });\n\n    return result;\n  }\n\n  return Object.assign(listen, {\n    loadTemplate: loadTemplate\n  });\n});\n//# sourceMappingURL=frame.js.map","Magento_PageBuilder/js/master-format/render/serialize.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type-collection\"], function (_config, _contentTypeCollection) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Serialize the tree as a simplified object for rendering\n   *\n   * @param contentType\n   */\n  function buildTree(contentType) {\n    var data = getData(contentType);\n    var viewportsData = getViewportsData(contentType);\n    var tree = {\n      name: contentType.config.name,\n      id: contentType.id,\n      data: data,\n      children: [],\n      viewportsData: viewportsData\n    };\n\n    if (contentType instanceof _contentTypeCollection && contentType.getChildren()().length > 0) {\n      contentType.getChildren()().forEach(function (child) {\n        tree.children.push(buildTree(child));\n      });\n    }\n\n    return tree;\n  }\n  /**\n   * Get a serialized version of the tree\n   *\n   * @param contentType\n   */\n\n\n  function getSerializedTree(contentType) {\n    return buildTree(contentType);\n  }\n  /**\n   * Retrieve the master data from the content types instance\n   *\n   * @param contentType\n   */\n\n\n  function getData(contentType) {\n    /**\n     * Flip flop to JSON and back again to ensure all data is serializable. Magento by default adds functions into\n     * some basic types which cannot be serialized when calling PostMessage.\n     */\n    return JSON.parse(JSON.stringify(contentType.dataStores[_config.getConfig(\"defaultViewport\")].getState())) || {};\n  }\n  /**\n   * Retrieve the master data from the content types instance\n   *\n   * @param contentType\n   */\n\n\n  function getViewportsData(contentType) {\n    /**\n     * Flip flop to JSON and back again to ensure all data is serializable. Magento by default adds functions into\n     * some basic types which cannot be serialized when calling PostMessage.\n     */\n    var result = {};\n    Object.keys(contentType.dataStores).forEach(function (name) {\n      result[name] = JSON.parse(JSON.stringify(contentType.dataStores[name].getState())) || {};\n    });\n    return result;\n  }\n\n  return {\n    buildTree: buildTree,\n    getSerializedTree: getSerializedTree\n  };\n});\n//# sourceMappingURL=serialize.js.map","Magento_PageBuilder/js/master-format/render/requirejs/text.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"mage/requirejs/text\", \"Magento_PageBuilder/js/master-format/render/frame\"], function (_text, _frame) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Within our render frame we override the RequireJS text! plugin, this is originally implemented within\n   * lib/web/mage/requirejs/text.js. The override uses the MessageChannel to communicate with the parent frame to\n   * retrieve any requested HTML knockout template. We do this due to the sandbox restrictions on the iframe disallow\n   * XHR requests to the same origin domain.\n   */\n\n  /**\n   * Load a template\n   *\n   * @param name\n   * @param req\n   * @param onLoad\n   */\n  function load(name, req, onLoad) {\n    (0, _frame.loadTemplate)(name).then(function (template) {\n      onLoad(template);\n    }).catch(function (error) {\n      onLoad.error(error);\n    });\n  }\n  /**\n   * Retrieve a template\n   *\n   * @param url\n   * @param callback\n   * @param fail\n   * @param headers\n   */\n\n\n  function get(url, callback, fail, headers) {\n    _text.get.apply(_text, arguments);\n  }\n\n  return {\n    load: load,\n    get: get\n  };\n});\n//# sourceMappingURL=text.js.map","Magento_PageBuilder/js/master-format/read/configurable.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\ndefine([\"jquery\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/appearance-config\", \"Magento_PageBuilder/js/converter/converter-pool-factory\", \"Magento_PageBuilder/js/mass-converter/converter-pool-factory\", \"Magento_PageBuilder/js/property/property-reader-pool-factory\"], function (_jquery, _mageUtils, _underscore, _config, _appearanceConfig, _converterPoolFactory, _converterPoolFactory2, _propertyReaderPoolFactory) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Configurable = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Configurable() {}\n\n    var _proto = Configurable.prototype;\n\n    /**\n     * Read data from the dom based on configuration\n     *\n     * @param element HTMLElement\n     * @returns {Promise<any>}\n     */\n    _proto.read = function read(element) {\n      var _this = this;\n\n      var role = element.getAttribute(_config.getConfig(\"dataContentTypeAttributeName\"));\n      var config = (0, _appearanceConfig)(role, element.getAttribute(\"data-appearance\"));\n      var componentsPromise = [(0, _propertyReaderPoolFactory)(role), (0, _converterPoolFactory)(role), (0, _converterPoolFactory2)(role)];\n      return new Promise(function (resolve) {\n        Promise.all(componentsPromise).then(function (loadedComponents) {\n          var propertyReaderPool = loadedComponents[0],\n              converterPool = loadedComponents[1],\n              massConverterPool = loadedComponents[2];\n\n          var viewports = _config.getConfig(\"viewports\");\n\n          var data = {};\n\n          _underscore.each(viewports, function (viewport, name) {\n            return data[name] = {};\n          });\n\n          var _loop = function _loop() {\n            var elementName = _Object$keys[_i];\n            var elementConfig = config.elements[elementName];\n\n            var currentElement = _this.findElementByName(element, elementName); // If we cannot locate the current element skip trying to read any attributes from it\n\n\n            if (currentElement === null || currentElement === undefined) {\n              return \"continue\";\n            }\n\n            _underscore.each(viewports, function (viewportObj, viewport) {\n              currentElement.setAttribute(\"style\", currentElement.getAttribute(\"data-\" + viewport + \"-style\"));\n\n              if (elementConfig.style.length) {\n                data[viewport] = _this.readStyle(elementConfig.style, currentElement, data[viewport], propertyReaderPool, converterPool);\n              }\n\n              if (elementConfig.attributes.length) {\n                data[viewport] = _this.readAttributes(elementConfig.attributes, currentElement, data[viewport], propertyReaderPool, converterPool);\n              }\n\n              if (undefined !== elementConfig.html.var) {\n                data[viewport] = _this.readHtml(elementConfig, currentElement, data[viewport], converterPool);\n              }\n\n              if (undefined !== elementConfig.tag.var) {\n                data[viewport] = _this.readHtmlTag(elementConfig, currentElement, data[viewport]);\n              }\n\n              if (undefined !== elementConfig.css.var) {\n                data[viewport] = _this.readCss(elementConfig, currentElement, data[viewport]);\n              }\n            });\n          };\n\n          for (var _i = 0, _Object$keys = Object.keys(config.elements); _i < _Object$keys.length; _i++) {\n            var _ret = _loop();\n\n            if (_ret === \"continue\") continue;\n          }\n\n          _underscore.each(viewports, function (viewportObj, viewport) {\n            data[viewport] = _this.convertData(config, data[viewport], massConverterPool);\n          });\n\n          resolve(data);\n        }).catch(function (error) {\n          console.error(error);\n        });\n      });\n    }\n    /**\n     * Find the element for the current content type by it's name, avoiding searching in other content types by\n     * removing any other element which contains it's own data-content-type.\n     *\n     * @param {HTMLElement} element\n     * @param {string} name\n     * @returns {HTMLElement}\n     */\n    ;\n\n    _proto.findElementByName = function findElementByName(element, name) {\n      // Create a clone of the element to avoid modifying the source\n      var currentElement = (0, _jquery)(element).clone();\n\n      if (currentElement.attr(\"data-element\") === name) {\n        return currentElement[0];\n      } // Attempt to find the element in the children of the data-content-type\n\n\n      var searchInChildren = currentElement.find(\"[data-element=\\\"\" + name + \"\\\"]\"); // Ensure the element is within the current content type\n\n      if (searchInChildren.length > 0 && searchInChildren.closest(\"[data-content-type]\")[0] === currentElement[0]) {\n        return searchInChildren[0];\n      }\n\n      return null;\n    }\n    /**\n     * Read attributes for element\n     *\n     * @param {DataMappingAttributesInterface[]} config\n     * @param {HTMLElement} element\n     * @param {object} data\n     * @param {typeof PropertyReaderPool} propertyReaderPool\n     * @param {typeof ConverterPool} converterPool\n     * @returns {any}\n     */\n    ;\n\n    _proto.readAttributes = function readAttributes(config, element, data, propertyReaderPool, converterPool) {\n      var result = {};\n\n      for (var _iterator = _createForOfIteratorHelperLoose(config), _step; !(_step = _iterator()).done;) {\n        var attributeConfig = _step.value;\n\n        if (\"write\" === attributeConfig.persistence_mode) {\n          continue;\n        }\n\n        var value = !!attributeConfig.static ? attributeConfig.value : propertyReaderPool.get(attributeConfig.reader).read(element, attributeConfig.name);\n\n        if (converterPool.get(attributeConfig.converter)) {\n          value = converterPool.get(attributeConfig.converter).fromDom(value);\n        }\n\n        if (_jquery.type(result[attributeConfig.var]) === \"object\") {\n          var _mageUtils$extend;\n\n          value = _mageUtils.extend((_mageUtils$extend = {}, _mageUtils$extend[attributeConfig.name] = value, _mageUtils$extend), result[attributeConfig.var]);\n        }\n\n        result[attributeConfig.var] = value;\n      }\n\n      return _underscore.extend(data, result);\n    }\n    /**\n     * Read style properties for element\n     *\n     * @param {DataMappingStyleInterface[]} config\n     * @param {HTMLElement} element\n     * @param {object} data\n     * @param {typeof PropertyReaderPool} propertyReaderPool\n     * @param {typeof ConverterPool} converterPool\n     * @returns {{[p: string]: string}}\n     */\n    ;\n\n    _proto.readStyle = function readStyle(config, element, data, propertyReaderPool, converterPool) {\n      var result = _underscore.extend({}, data);\n\n      for (var _iterator2 = _createForOfIteratorHelperLoose(config), _step2; !(_step2 = _iterator2()).done;) {\n        var propertyConfig = _step2.value;\n\n        if (\"write\" === propertyConfig.persistence_mode) {\n          continue;\n        }\n\n        var value = !!propertyConfig.static ? propertyConfig.value : propertyReaderPool.get(propertyConfig.reader).read(element, propertyConfig.name);\n\n        if (converterPool.get(propertyConfig.converter)) {\n          value = converterPool.get(propertyConfig.converter).fromDom(value);\n        }\n\n        if (_jquery.type(result[propertyConfig.var]) === \"object\") {\n          value = _mageUtils.extend(result[propertyConfig.var], value);\n        }\n\n        result[propertyConfig.var] = value;\n      }\n\n      return result;\n    }\n    /**\n     * Read element's tag\n     *\n     * @param {object} config\n     * @param {HTMLElement} element\n     * @param {object} data\n     * @returns {object}\n     */\n    ;\n\n    _proto.readHtmlTag = function readHtmlTag(config, element, data) {\n      var result = {};\n      result[config.tag.var] = element.nodeName.toLowerCase();\n      return _underscore.extend(data, result);\n    }\n    /**\n     * Read element's css\n     *\n     * @param {ContentTypeConfigAppearanceElementInterface} config\n     * @param {HTMLElement} element\n     * @param {object} data\n     * @returns {any}\n     */\n    ;\n\n    _proto.readCss = function readCss(config, element, data) {\n      var result = {};\n      var css = element.getAttribute(\"class\") !== null ? element.getAttribute(\"class\") : \"\";\n\n      if (config.css !== undefined && config.css.filter !== undefined && config.css.filter.length) {\n        for (var _iterator3 = _createForOfIteratorHelperLoose(config.css.filter), _step3; !(_step3 = _iterator3()).done;) {\n          var filterClass = _step3.value;\n          css = css.replace(filterClass, \"\");\n        }\n      }\n\n      result[config.css.var] = css.replace(/\\s{2,}/g, \" \").trim();\n      return _underscore.extend(data, result);\n    }\n    /**\n     * Read element's content\n     *\n     * @param {ContentTypeConfigAppearanceElementInterface} config\n     * @param {HTMLElement} element\n     * @param {object} data\n     * @param {typeof ConverterPool} converterPool\n     * @returns {any}\n     */\n    ;\n\n    _proto.readHtml = function readHtml(config, element, data, converterPool) {\n      var result = {};\n      var value = element.innerHTML;\n\n      if (converterPool.get(config.html.converter)) {\n        value = converterPool.get(config.html.converter).fromDom(value);\n      }\n\n      result[config.html.var] = value;\n      return _underscore.extend(data, result);\n    }\n    /**\n     * Convert data after it's read for all elements\n     *\n     * @param config\n     * @param {object} data\n     * @param {typeof MassConverterPool} massConverterPool\n     * @returns {object}\n     */\n    ;\n\n    _proto.convertData = function convertData(config, data, massConverterPool) {\n      for (var _iterator4 = _createForOfIteratorHelperLoose(config.converters), _step4; !(_step4 = _iterator4()).done;) {\n        var converterConfig = _step4.value;\n\n        if (massConverterPool.get(converterConfig.component)) {\n          data = massConverterPool.get(converterConfig.component).fromDom(data, converterConfig.config);\n        }\n      }\n\n      return data;\n    };\n\n    return Configurable;\n  }();\n\n  return Configurable;\n});\n//# sourceMappingURL=configurable.js.map","Magento_PageBuilder/js/binding/live-edit.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"knockout\", \"Magento_Ui/js/lib/key-codes\", \"underscore\"], function (_jquery, _knockout, _keyCodes, _underscore) {\n  \"use strict\";\n\n  _jquery = _interopRequireDefault(_jquery);\n  _knockout = _interopRequireDefault(_knockout);\n  _keyCodes = _interopRequireDefault(_keyCodes);\n  _underscore = _interopRequireDefault(_underscore);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n\n  /**\n   * Strip HTML and return text\n   *\n   * @param {string} html\n   * @returns {string}\n   */\n  function stripHtml(html) {\n    if (html) {\n      var htmlDocument = new DOMParser().parseFromString(html, \"text/html\");\n      return htmlDocument.body ? htmlDocument.body.textContent : \"\";\n    }\n\n    return html;\n  }\n  /**\n   * Add or remove the placeholder-text class from the element based on its content\n   *\n   * @param {Element} element\n   */\n\n\n  function handlePlaceholderClass(element) {\n    if (stripHtml(element.innerHTML).length === 0) {\n      element.innerHTML = \"\";\n      element.classList.add(\"placeholder-text\");\n    } else {\n      element.classList.remove(\"placeholder-text\");\n    }\n  } // Custom Knockout binding for live editing text inputs\n\n\n  _knockout.default.bindingHandlers.liveEdit = {\n    /**\n     * Init the live edit binding on an element\n     *\n     * @param {HTMLElement} element\n     * @param {() => any} valueAccessor\n     * @param {KnockoutAllBindingsAccessor} allBindings\n     * @param {any} viewModel\n     * @param {KnockoutBindingContext} bindingContext\n     */\n    init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n      var _valueAccessor = valueAccessor(),\n          field = _valueAccessor.field,\n          placeholder = _valueAccessor.placeholder,\n          _valueAccessor$select = _valueAccessor.selectAll,\n          selectAll = _valueAccessor$select === void 0 ? false : _valueAccessor$select;\n\n      var focusedValue = element.innerHTML;\n      var previouslyFocused = false;\n      var blurTimeout;\n      var lastUpdateValue;\n      /**\n       * Record the value on focus, only conduct an update when data changes\n       */\n\n      var onFocus = function onFocus() {\n        clearTimeout(blurTimeout);\n        focusedValue = stripHtml(element.innerHTML);\n        lastUpdateValue = focusedValue;\n\n        if (selectAll && element.innerHTML !== \"\" && !previouslyFocused) {\n          _underscore.default.defer(function () {\n            var selection = window.getSelection();\n            var range = document.createRange();\n            range.selectNodeContents(element);\n            selection.removeAllRanges();\n            selection.addRange(range);\n            previouslyFocused = true;\n          });\n        }\n      };\n      /**\n       * On blur change our timeout for previously focused. We require a flag to track whether the input has been\n       * focused and selected previously due to a bug in Firefox which doesn't handle focus events correctly when\n       * contenteditable is placed within an anchor.\n       */\n\n\n      var onBlur = function onBlur() {\n        blurTimeout = setTimeout(function () {\n          previouslyFocused = false;\n        }, 100);\n      };\n      /**\n       * Mousedown event on element\n       *\n       * @param {Event} event\n       */\n\n\n      var onMouseDown = function onMouseDown(event) {\n        event.stopPropagation();\n      };\n      /**\n       * Key down event on element\n       *\n       * Prevent styling such as bold, italic, and underline using keyboard commands, and prevent multi-line entries\n       *\n       * @param {JQueryEventObject} event\n       */\n\n\n      var onKeyDown = function onKeyDown(event) {\n        var key = _keyCodes.default[event.keyCode]; // command or control\n\n        if (event.metaKey || event.ctrlKey) {\n          if (key === \"bKey\" || key === \"iKey\" || key === \"uKey\") {\n            event.preventDefault();\n          }\n        }\n\n        if (key === \"enterKey\") {\n          event.preventDefault();\n        } // prevent slides from sliding\n\n\n        if (key === \"pageLeftKey\" || key === \"pageRightKey\") {\n          event.stopPropagation();\n        }\n      };\n      /**\n       * On key up update the view model to ensure all changes are saved\n       */\n\n\n      var onKeyUp = function onKeyUp() {\n        var strippedValue = stripHtml(element.innerHTML);\n\n        if (focusedValue !== strippedValue) {\n          lastUpdateValue = strippedValue;\n          viewModel.updateData(field, strippedValue);\n        }\n      };\n      /**\n       * Prevent content from being dropped inside of inline edit area\n       *\n       * @param {DragEvent} event\n       */\n\n\n      var onDrop = function onDrop(event) {\n        event.preventDefault();\n      };\n      /**\n       * Prevent content from being dragged\n       *\n       * @param {DragEvent} event\n       */\n\n\n      var onDragStart = function onDragStart(event) {\n        event.preventDefault();\n      };\n      /**\n       * Input event on element\n       */\n\n\n      var onInput = function onInput() {\n        handlePlaceholderClass(element);\n      };\n      /**\n       * On paste strip any HTML\n       */\n\n\n      var onPaste = function onPaste() {\n        // Record the original caret position so we can ensure we restore it at the correct position\n        var selection = window.getSelection();\n        var originalPositionStart = selection.getRangeAt(0).cloneRange().startOffset;\n        var originalPositionEnd = selection.getRangeAt(0).cloneRange().endOffset;\n        var originalContentLength = stripHtml(element.innerHTML).length; // Allow the paste action to update the content\n\n        _underscore.default.defer(function () {\n          var strippedValue = stripHtml(element.innerHTML);\n          lastUpdateValue = strippedValue;\n          element.textContent = strippedValue;\n          /**\n           * Calculate the position the caret should end up at, the difference in string length + the original\n           * end offset position\n           */\n\n          var restoredPosition = Math.abs(strippedValue.length - originalContentLength) + originalPositionStart; // If part of the text was selected adjust the position for the removed text\n\n          if (originalPositionStart !== originalPositionEnd) {\n            restoredPosition += Math.abs(originalPositionEnd - originalPositionStart);\n          }\n\n          var range = document.createRange();\n          range.setStart(element.childNodes[0], restoredPosition);\n          range.setEnd(element.childNodes[0], restoredPosition);\n          selection.removeAllRanges();\n          selection.addRange(range);\n        });\n      };\n\n      element.setAttribute(\"data-placeholder\", placeholder);\n      element.textContent = viewModel.contentType.dataStore.get(field);\n      element.contentEditable = \"true\";\n      element.addEventListener(\"focus\", onFocus);\n      element.addEventListener(\"blur\", onBlur);\n      element.addEventListener(\"mousedown\", onMouseDown);\n      element.addEventListener(\"keydown\", onKeyDown);\n      element.addEventListener(\"keyup\", onKeyUp);\n      element.addEventListener(\"input\", onInput);\n      element.addEventListener(\"drop\", onDrop);\n      element.addEventListener(\"paste\", onPaste);\n      element.addEventListener(\"dragstart\", onDragStart);\n      (0, _jquery.default)(element).parent().css(\"cursor\", \"text\");\n      handlePlaceholderClass(element); // Create a subscription onto the original data to update the internal value\n\n      viewModel.contentType.dataStore.subscribe(function (data) {\n        // Only update the value if it differs from the last value added within live edit\n        if (lastUpdateValue !== data[field]) {\n          lastUpdateValue = data[field];\n          element.textContent = data[field];\n          handlePlaceholderClass(element);\n        }\n      }, field); // Resolve issues of content editable being within an anchor\n\n      if ((0, _jquery.default)(element).parent().is(\"a\")) {\n        (0, _jquery.default)(element).parent().attr(\"draggable\", \"false\");\n      }\n    },\n\n    /**\n     * Update live edit binding on an element\n     *\n     * @param {any} element\n     * @param {() => any} valueAccessor\n     * @param {KnockoutAllBindingsAccessor} allBindings\n     * @param {any} viewModel\n     * @param {KnockoutBindingContext} bindingContext\n     */\n    update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\n      var _valueAccessor2 = valueAccessor(),\n          field = _valueAccessor2.field;\n\n      element.textContent = viewModel.contentType.dataStore.get(field);\n      handlePlaceholderClass(element);\n    }\n  };\n});\n//# sourceMappingURL=live-edit.js.map","Magento_PageBuilder/js/binding/focus.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"knockout\"], function (_knockout) {\n  \"use strict\";\n\n  _knockout = _interopRequireDefault(_knockout);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  _knockout.default.bindingHandlers.hasFocusNoScroll = {\n    init: _knockout.default.bindingHandlers.hasFocus.init,\n    update: function update(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n      var value = !!_knockout.default.utils.unwrapObservable(valueAccessor());\n      value ? element.focus({\n        preventScroll: true\n      }) : element.blur();\n    }\n  };\n});\n//# sourceMappingURL=focus.js.map","Magento_PageBuilder/js/binding/draggable.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"knockout\"], function (_jquery, _knockout) {\n  \"use strict\";\n\n  _jquery = _interopRequireDefault(_jquery);\n  _knockout = _interopRequireDefault(_knockout);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  // Create a new sortable Knockout binding\n  _knockout.default.bindingHandlers.draggable = {\n    init: function init(element, valueAccessor) {\n      (0, _jquery.default)(element).draggable(valueAccessor());\n    }\n  };\n});\n//# sourceMappingURL=draggable.js.map","Magento_PageBuilder/js/binding/sortable-children.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"knockout\", \"Magento_PageBuilder/js/events\", \"Magento_PageBuilder/js/drag-drop/move-content-type\", \"Magento_PageBuilder/js/utils/array\"], function (_jquery, _knockout, _events, _moveContentType, _array) {\n  \"use strict\";\n\n  _jquery = _interopRequireDefault(_jquery);\n  _knockout = _interopRequireDefault(_knockout);\n  _events = _interopRequireDefault(_events);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var draggedContentType; // Create a new sortable Knockout binding\n\n  _knockout.default.bindingHandlers.sortableChildren = {\n    /**\n     * Init the draggable binding on an element\n     *\n     * @param element\n     * @param valueAccessor\n     * @param allBindingsAccessor\n     * @param data\n     * @param context\n     */\n    init: function init(element, valueAccessor, allBindingsAccessor, data, context) {\n      var instance = context.$data.contentType;\n\n      var options = _knockout.default.unwrap(valueAccessor());\n\n      var originalPosition;\n      (0, _jquery.default)(element).sortable(options).on(\"sortstart\", function (event, ui) {\n        originalPosition = ui.item.index();\n        draggedContentType = instance.children()[originalPosition];\n\n        _events.default.trigger(\"childContentType:sortStart\", {\n          instance: instance,\n          originalPosition: originalPosition,\n          ui: ui\n        });\n      }).on(\"sortstop\", function (event, ui) {\n        _events.default.trigger(\"childContentType:sortStop\", {\n          instance: instance,\n          ui: ui,\n          originalPosition: originalPosition\n        });\n      }).on(\"sortupdate\", function (event, ui) {\n        if (this === ui.item.parent()[0]) {\n          var index = ui.item.index();\n\n          var targetParent = _knockout.default.dataFor(ui.item.parent()[0]).contentType;\n\n          if (targetParent && (originalPosition !== index || draggedContentType.parentContentType !== targetParent)) {\n            ui.item.remove();\n\n            if (draggedContentType.parentContentType === targetParent) {\n              (0, _array.moveArrayItem)(instance.children, originalPosition, index);\n            } else {\n              (0, _moveContentType.moveContentType)(draggedContentType, index, targetParent);\n            }\n\n            _events.default.trigger(\"childContentType:sortUpdate\", {\n              instance: instance,\n              newPosition: index,\n              originalPosition: originalPosition,\n              ui: ui,\n              event: event\n            });\n          }\n        }\n      });\n    }\n  };\n});\n//# sourceMappingURL=sortable-children.js.map","Magento_PageBuilder/js/binding/sortable.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"knockout\", \"underscore\"], function (_jquery, _knockout, _underscore) {\n  \"use strict\";\n\n  _jquery = _interopRequireDefault(_jquery);\n  _knockout = _interopRequireDefault(_knockout);\n  _underscore = _interopRequireDefault(_underscore);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  // Create a new sortable Knockout binding\n  _knockout.default.bindingHandlers.sortable = {\n    init: function init(element, valueAccessor) {\n      // As we can't conditionally apply bindings we block this operation when options are null\n      if (valueAccessor() === null) {\n        return;\n      }\n\n      _underscore.default.defer(function () {\n        (0, _jquery.default)(element).sortable(valueAccessor());\n      });\n    }\n  };\n});\n//# sourceMappingURL=sortable.js.map","Magento_PageBuilder/js/binding/style.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"knockout\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/style-registry\"], function (_knockout, _mageUtils, _underscore, _config, _styleRegistry) {\n  \"use strict\";\n\n  _knockout = _interopRequireDefault(_knockout);\n  _mageUtils = _interopRequireDefault(_mageUtils);\n  _underscore = _interopRequireDefault(_underscore);\n  _config = _interopRequireDefault(_config);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var originalStyle = _knockout.default.bindingHandlers.style;\n\n  var bodyId = _config.default.getConfig(\"bodyId\");\n\n  function isPageBuilderContext(context) {\n    return !!(context.stage && context.stage.pageBuilder);\n  }\n\n  _knockout.default.bindingHandlers.style = {\n    init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n      if (isPageBuilderContext(bindingContext)) {\n        element.setAttribute(_styleRegistry.pbStyleAttribute, _mageUtils.default.uniqueid());\n      }\n    },\n    update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\n      if (isPageBuilderContext(bindingContext)) {\n        var value = _knockout.default.utils.unwrapObservable(valueAccessor() || {});\n\n        var styles = {};\n        var styleId = element.getAttribute(_styleRegistry.pbStyleAttribute);\n        var existedStyleBlock = document.querySelector(\"style[\" + _styleRegistry.styleDataAttribute + \"=\\\"\" + styleId + \"\\\"]\");\n\n        _knockout.default.utils.objectForEach(value, function (styleName, styleValue) {\n          styleValue = _knockout.default.utils.unwrapObservable(styleValue);\n\n          if (styleValue === null || styleValue === undefined || styleValue === false) {\n            styleValue = \"\";\n          }\n\n          if (styleValue) {\n            styles[styleName] = styleValue;\n          }\n        });\n\n        if (existedStyleBlock) {\n          existedStyleBlock.remove();\n        }\n\n        if (!_underscore.default.isEmpty(styles)) {\n          var styleElement = document.createElement(\"style\");\n          styleElement.setAttribute(_styleRegistry.styleDataAttribute, styleId);\n          styleElement.innerHTML = (0, _styleRegistry.generateCssBlock)(\"#\" + bodyId + \" [\" + _styleRegistry.pbStyleAttribute + \"=\\\"\" + styleId + \"\\\"]\", styles);\n          element.parentElement.append(styleElement);\n        }\n      } else {\n        originalStyle.update(element, valueAccessor, allBindings, viewModel, bindingContext);\n      }\n    }\n  };\n});\n//# sourceMappingURL=style.js.map","Magento_PageBuilder/js/binding/master-style.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"knockout\", \"mageUtils\", \"underscore\", \"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/content-type/style-registry\"], function (_knockout, _mageUtils, _underscore, _config, _styleRegistry) {\n  \"use strict\";\n\n  _knockout = _interopRequireDefault(_knockout);\n  _mageUtils = _interopRequireDefault(_mageUtils);\n  _underscore = _interopRequireDefault(_underscore);\n  _config = _interopRequireDefault(_config);\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var bodyId = _config.default.getConfig(\"bodyId\");\n\n  var getStyles = function getStyles(styleObject) {\n    var styles = {};\n\n    _knockout.default.utils.objectForEach(styleObject, function (styleName, styleValue) {\n      styleValue = _knockout.default.utils.unwrapObservable(styleValue);\n\n      if (styleValue === null || styleValue === undefined || styleValue === false) {\n        // Empty string removes the value, whereas null/undefined have no effect\n        styleValue = \"\";\n      }\n\n      if (styleValue) {\n        styles[styleName] = styleValue;\n      }\n    });\n\n    return styles;\n  };\n\n  _knockout.default.bindingHandlers.style = {\n    update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\n      var value = _knockout.default.utils.unwrapObservable(valueAccessor() || {});\n\n      var viewportKeys = _underscore.default.keys(_config.default.getConfig(\"viewports\"));\n\n      var commonStyles = getStyles(_underscore.default.omit(value, viewportKeys));\n      var viewportStyles = {};\n\n      _underscore.default.each(viewportKeys, function (name) {\n        viewportStyles[name] = _underscore.default.extend(getStyles(value[name]), commonStyles);\n      });\n\n      if (_underscore.default.findKey(viewportStyles, function (styles) {\n        return !_underscore.default.isEmpty(styles);\n      })) {\n        var id = _mageUtils.default.uniqueid();\n\n        var selector = \"#\" + bodyId + \" [\" + _styleRegistry.pbStyleAttribute + \"=\\\"\" + id + \"\\\"]\";\n\n        _underscore.default.each(viewportKeys, function (name) {\n          var registry = (0, _styleRegistry.getStyleRegistry)(name + bindingContext.$root.id);\n          registry.setStyles(selector, viewportStyles[name]);\n        });\n\n        element.setAttribute(_styleRegistry.pbStyleAttribute, id);\n      }\n    }\n  };\n});\n//# sourceMappingURL=master-style.js.map","Magento_PageBuilder/js/converter/converter-pool-factory.js":"/*eslint-disable */\n/* jscs:disable */\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/loader\", \"Magento_PageBuilder/js/converter/converter-pool\"], function (_config, _loader, _converterPool) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Create a new instance of converter pool\n   */\n  function create(contentType) {\n    var config = _config.getContentTypeConfig(contentType);\n\n    var converters = [];\n    var appearanceName;\n\n    for (var _i = 0, _Object$keys = Object.keys(config.appearances); _i < _Object$keys.length; _i++) {\n      appearanceName = _Object$keys[_i];\n      var appearance = config.appearances[appearanceName];\n\n      if (appearance !== undefined && appearance.elements !== undefined) {\n        var elementName = void 0;\n\n        for (var _i2 = 0, _Object$keys2 = Object.keys(appearance.elements); _i2 < _Object$keys2.length; _i2++) {\n          elementName = _Object$keys2[_i2];\n\n          if (appearance.elements[elementName].style !== undefined) {\n            for (var _iterator = _createForOfIteratorHelperLoose(appearance.elements[elementName].style), _step; !(_step = _iterator()).done;) {\n              var propertyConfig = _step.value;\n\n              if (!!propertyConfig.converter && converters.indexOf(propertyConfig.converter) === -1 && !_converterPool.get(propertyConfig.converter)) {\n                converters.push(propertyConfig.converter);\n              }\n\n              if (!!propertyConfig.preview_converter && converters.indexOf(propertyConfig.preview_converter) === -1 && !_converterPool.get(propertyConfig.preview_converter)) {\n                converters.push(propertyConfig.preview_converter);\n              }\n            }\n          }\n\n          if (appearance.elements[elementName].attributes !== undefined) {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(appearance.elements[elementName].attributes), _step2; !(_step2 = _iterator2()).done;) {\n              var attributeConfig = _step2.value;\n\n              if (!!attributeConfig.converter && converters.indexOf(attributeConfig.converter) === -1 && !_converterPool.get(attributeConfig.converter)) {\n                converters.push(attributeConfig.converter);\n              }\n\n              if (!!attributeConfig.preview_converter && converters.indexOf(attributeConfig.preview_converter) === -1 && !_converterPool.get(attributeConfig.preview_converter)) {\n                converters.push(attributeConfig.preview_converter);\n              }\n            }\n          }\n\n          if (appearance.elements[elementName].html !== undefined) {\n            var htmlConfig = appearance.elements[elementName].html;\n\n            if (!!htmlConfig.converter && converters.indexOf(htmlConfig.converter) === -1 && !_converterPool.get(htmlConfig.converter)) {\n              converters.push(htmlConfig.converter);\n            }\n\n            if (!!htmlConfig.preview_converter && converters.indexOf(htmlConfig.preview_converter) === -1 && !_converterPool.get(htmlConfig.preview_converter)) {\n              converters.push(htmlConfig.preview_converter);\n            }\n          }\n        }\n      }\n    }\n\n    return new Promise(function (resolve) {\n      (0, _loader)(converters, function () {\n        for (var _len = arguments.length, loadedConverters = new Array(_len), _key = 0; _key < _len; _key++) {\n          loadedConverters[_key] = arguments[_key];\n        }\n\n        for (var i = 0; i < converters.length; i++) {\n          _converterPool.register(converters[i], new loadedConverters[i]());\n        }\n\n        resolve(_converterPool);\n      });\n    });\n  }\n\n  return create;\n});\n//# sourceMappingURL=converter-pool-factory.js.map","Magento_PageBuilder/js/converter/converter-pool.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var ConverterPool = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function ConverterPool() {\n      this.converters = {};\n    }\n\n    var _proto = ConverterPool.prototype;\n\n    /**\n     * Retrieve a converter from the pool\n     *\n     * @param {string} name\n     * @returns {ConverterInterface}\n     */\n    _proto.get = function get(name) {\n      return this.converters[name] !== undefined ? this.converters[name] : null;\n    }\n    /**\n     * Register a new converter into the pool\n     *\n     * @param {string} name\n     * @param {ConverterInterface} converter\n     */\n    ;\n\n    _proto.register = function register(name, converter) {\n      this.converters[name] = converter;\n    };\n\n    return ConverterPool;\n  }();\n\n  var _default = new ConverterPool();\n\n  return _default;\n});\n//# sourceMappingURL=converter-pool.js.map","Magento_PageBuilder/js/converter/converter-interface.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  \"use strict\";\n});\n//# sourceMappingURL=converter-interface.js.map","Magento_PageBuilder/js/converter/attribute/video-overlay-color.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var OverlayColor = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function OverlayColor() {}\n\n    var _proto = OverlayColor.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value === \"transparent\" ? \"\" : value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      if (data.video_overlay_color) {\n        return data.video_overlay_color.toString();\n      }\n\n      return \"\";\n    };\n\n    return OverlayColor;\n  }();\n\n  return OverlayColor;\n});\n//# sourceMappingURL=video-overlay-color.js.map","Magento_PageBuilder/js/converter/attribute/src.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/image\", \"Magento_PageBuilder/js/utils/object\", \"Magento_PageBuilder/js/utils/url\"], function (_config, _image, _object, _url) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Src = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Src() {}\n\n    var _proto = Src.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      if (!value) {\n        return \"\";\n      }\n\n      return (0, _image.decodeUrl)(value);\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (value[0] === undefined || value[0].url === undefined) {\n        return \"\";\n      }\n\n      var imageUrl = value[0].url;\n      var mediaUrl = (0, _url.convertUrlToPathIfOtherUrlIsOnlyAPath)(_config.getConfig(\"media_url\"), imageUrl);\n      var mediaPath = imageUrl.split(mediaUrl);\n      return \"{{media url=\" + mediaPath[1] + \"}}\";\n    };\n\n    return Src;\n  }();\n\n  return Src;\n});\n//# sourceMappingURL=src.js.map","Magento_PageBuilder/js/converter/attribute/link-type.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var CreateValueForLinkType = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function CreateValueForLinkType() {}\n\n    var _proto = CreateValueForLinkType.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n      return value && value.type ? value.type : \"default\";\n    };\n\n    return CreateValueForLinkType;\n  }();\n\n  return CreateValueForLinkType;\n});\n//# sourceMappingURL=link-type.js.map","Magento_PageBuilder/js/converter/attribute/link-href.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var CreateValueForHref = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function CreateValueForHref() {\n      this.widgetParamsByLinkType = {\n        category: {\n          type: \"Magento\\\\Catalog\\\\Block\\\\Category\\\\Widget\\\\Link\",\n          id_path: \"category/:href\",\n          template: \"Magento_PageBuilder::widget/link_href.phtml\",\n          type_name: \"Catalog Category Link\"\n        },\n        product: {\n          type: \"Magento\\\\Catalog\\\\Block\\\\Product\\\\Widget\\\\Link\",\n          id_path: \"product/:href\",\n          template: \"Magento_PageBuilder::widget/link_href.phtml\",\n          type_name: \"Catalog Product Link\"\n        },\n        page: {\n          type: \"Magento\\\\Cms\\\\Block\\\\Widget\\\\Page\\\\Link\",\n          page_id: \":href\",\n          template: \"Magento_PageBuilder::widget/link_href.phtml\",\n          type_name: \"CMS Page Link\"\n        }\n      };\n    }\n\n    var _proto = CreateValueForHref.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var link = (0, _object.get)(data, name);\n      var href = \"\";\n\n      if (!link) {\n        return href;\n      }\n\n      var linkType = link.type;\n      var isHrefId = !isNaN(parseInt(link[linkType], 10));\n\n      if (isHrefId && link) {\n        href = this.convertToWidget(link[linkType], linkType);\n      } else if (typeof link[linkType] === \"string\") {\n        href = link[linkType];\n      }\n\n      return href;\n    }\n    /**\n     * @param {string} href\n     * @param {string} linkType\n     * @returns {string}\n     */\n    ;\n\n    _proto.convertToWidget = function convertToWidget(href, linkType) {\n      if (!href || !this.widgetParamsByLinkType[linkType]) {\n        return href;\n      }\n\n      var attributesString = _underscore.map(this.widgetParamsByLinkType[linkType], function (val, key) {\n        return key + \"='\" + val.replace(\":href\", href) + \"'\";\n      }).join(\" \");\n\n      return \"{{widget \" + attributesString + \" }}\";\n    };\n\n    return CreateValueForHref;\n  }();\n\n  return CreateValueForHref;\n});\n//# sourceMappingURL=link-href.js.map","Magento_PageBuilder/js/converter/attribute/link-target.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var CreateValueForTarget = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function CreateValueForTarget() {}\n\n    var _proto = CreateValueForTarget.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (!value) {\n        return \"\";\n      }\n\n      return value.setting ? \"_blank\" : \"\";\n    };\n\n    return CreateValueForTarget;\n  }();\n\n  return CreateValueForTarget;\n});\n//# sourceMappingURL=link-target.js.map","Magento_PageBuilder/js/converter/attribute/preview/src.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Src = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Src() {}\n\n    var _proto = Src.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (value && typeof value[0] === \"object\") {\n        return value[0].url;\n      }\n\n      return \"\";\n    };\n\n    return Src;\n  }();\n\n  return Src;\n});\n//# sourceMappingURL=src.js.map","Magento_PageBuilder/js/converter/attribute/preview/store-id.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\"], function (_jquery) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var StoreId = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function StoreId() {}\n\n    var _proto = StoreId.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      if (typeof data[name] !== \"string\") {\n        return \"\";\n      }\n\n      var storeId = (0, _jquery)('[data-role=\"store-view-id\"]').val() || \"0\";\n      return data[name].replace(/}}$/, \" store_id=\\\"\" + storeId + \"\\\"}}\");\n    };\n\n    return StoreId;\n  }();\n\n  return StoreId;\n});\n//# sourceMappingURL=store-id.js.map","Magento_PageBuilder/js/converter/style/margins.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Margins = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Margins() {}\n\n    var _proto = Margins.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      if (undefined !== value.margin) {\n        return {\n          margin: {\n            top: value.margin.top.replace(\"px\", \"\"),\n            left: value.margin.left.replace(\"px\", \"\"),\n            right: value.margin.right.replace(\"px\", \"\"),\n            bottom: value.margin.bottom.replace(\"px\", \"\")\n          }\n        };\n      }\n\n      return {};\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var result = {};\n      var value = (0, _object.get)(data, name);\n\n      if (value && _underscore.isString(value)) {\n        value = JSON.parse(value);\n      }\n\n      if (value && undefined !== value.margin) {\n        result.marginLeft = value.margin.left ? value.margin.left + \"px\" : \"\";\n        result.marginTop = value.margin.top ? value.margin.top + \"px\" : \"\";\n        result.marginRight = value.margin.right ? value.margin.right + \"px\" : \"\";\n        result.marginBottom = value.margin.bottom ? value.margin.bottom + \"px\" : \"\";\n      }\n\n      return result;\n    };\n\n    return Margins;\n  }();\n\n  return Margins;\n});\n//# sourceMappingURL=margins.js.map","Magento_PageBuilder/js/converter/style/overlay-border-radius.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Takes difference of border width from border radius to conform snugly to edges of wrapper border\n   *\n   * @api\n   */\n  var OverlayBorderRadius = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function OverlayBorderRadius() {}\n\n    var _proto = OverlayBorderRadius.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var borderRadius = data.border_radius ? parseInt(data.border_radius, 10) : 0;\n      var borderWidth = data.border_width ? parseInt(data.border_width, 10) : 0;\n\n      if (borderRadius <= borderWidth) {\n        return \"0\";\n      }\n\n      return borderRadius - borderWidth + \"px\";\n    };\n\n    return OverlayBorderRadius;\n  }();\n\n  return OverlayBorderRadius;\n});\n//# sourceMappingURL=overlay-border-radius.js.map","Magento_PageBuilder/js/converter/style/paddings.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Paddings = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Paddings() {}\n\n    var _proto = Paddings.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      if (undefined !== value.padding) {\n        return {\n          padding: {\n            top: value.padding.top.replace(\"px\", \"\"),\n            left: value.padding.left.replace(\"px\", \"\"),\n            right: value.padding.right.replace(\"px\", \"\"),\n            bottom: value.padding.bottom.replace(\"px\", \"\")\n          }\n        };\n      }\n\n      return {};\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var result = {};\n      var value = (0, _object.get)(data, name);\n\n      if (value && _underscore.isString(value)) {\n        value = JSON.parse(value);\n      }\n\n      if (value && undefined !== value.padding) {\n        result.paddingLeft = value.padding.left ? value.padding.left + \"px\" : \"\";\n        result.paddingTop = value.padding.top ? value.padding.top + \"px\" : \"\";\n        result.paddingRight = value.padding.right ? value.padding.right + \"px\" : \"\";\n        result.paddingBottom = value.padding.bottom ? value.padding.bottom + \"px\" : \"\";\n      }\n\n      return result;\n    };\n\n    return Paddings;\n  }();\n\n  return Paddings;\n});\n//# sourceMappingURL=paddings.js.map","Magento_PageBuilder/js/converter/style/video-overlay-color.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var VideoOverlayColor = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function VideoOverlayColor() {}\n\n    var _proto = VideoOverlayColor.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (value !== \"\" && value !== undefined) {\n        return value;\n      }\n\n      return \"transparent\";\n    };\n\n    return VideoOverlayColor;\n  }();\n\n  return VideoOverlayColor;\n});\n//# sourceMappingURL=video-overlay-color.js.map","Magento_PageBuilder/js/converter/style/border-width.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var BorderWidth = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function BorderWidth() {}\n\n    var _proto = BorderWidth.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value === \"initial\" ? \"\" : value.replace(\"px\", \"\");\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (value) {\n        return value + \"px\";\n      }\n    };\n\n    return BorderWidth;\n  }();\n\n  return BorderWidth;\n});\n//# sourceMappingURL=border-width.js.map","Magento_PageBuilder/js/converter/style/remove-px.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var RemovePx = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function RemovePx() {}\n\n    var _proto = RemovePx.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value.replace(\"px\", \"\");\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (value) {\n        return value + \"px\";\n      }\n    };\n\n    return RemovePx;\n  }();\n\n  return RemovePx;\n});\n//# sourceMappingURL=remove-px.js.map","Magento_PageBuilder/js/converter/style/min-height.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var MinHeight = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function MinHeight() {}\n\n    var _proto = MinHeight.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value.indexOf(\"calc\") !== -1 ? value.substring(5, value.length - 1) : value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n      return value.split(/\\+|\\-|\\*|\\//).length > 1 ? \"calc(\" + (0, _object.get)(data, name) + \")\" : value;\n    };\n\n    return MinHeight;\n  }();\n\n  return MinHeight;\n});\n//# sourceMappingURL=min-height.js.map","Magento_PageBuilder/js/converter/style/color.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Color = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Color() {}\n\n    var _proto = Color.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      if (value === \"default\" || value === \"initial\" || value === \"\") {\n        value = \"\";\n      } else {\n        var regexp = /(\\d{0,3}),\\s(\\d{0,3}),\\s(\\d{0,3})/;\n        var matches = regexp.exec(value);\n\n        if (matches) {\n          value = \"#\" + this.fromIntToHex(parseInt(matches[1], 10)) + this.fromIntToHex(parseInt(matches[2], 10)) + this.fromIntToHex(parseInt(matches[3], 10));\n        }\n      }\n\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      return (0, _object.get)(data, name, \"\");\n    }\n    /**\n     * Convert from int to hex\n     *\n     * @param {number} value\n     * @returns {string}\n     */\n    ;\n\n    _proto.fromIntToHex = function fromIntToHex(value) {\n      var hex = value.toString(16);\n      return hex.length === 1 ? \"0\" + hex : hex;\n    };\n\n    return Color;\n  }();\n\n  return Color;\n});\n//# sourceMappingURL=color.js.map","Magento_PageBuilder/js/converter/style/background-image.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var BackgroundImage = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function BackgroundImage() {}\n\n    var _proto = BackgroundImage.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return null;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      return null;\n    };\n\n    return BackgroundImage;\n  }();\n\n  return BackgroundImage;\n});\n//# sourceMappingURL=background-image.js.map","Magento_PageBuilder/js/converter/style/display.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Display = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Display() {}\n\n    var _proto = Display.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return !(value === \"none\");\n    }\n    /**\n     * Convert value to knockout format, we only provide a none property if we intend for the content type to be hidden,\n     * otherwise we let the original display property handle the display of the content type.\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (!_underscore.isUndefined(value) && value === false) {\n        return \"none\";\n      }\n\n      return;\n    };\n\n    return Display;\n  }();\n\n  return Display;\n});\n//# sourceMappingURL=display.js.map","Magento_PageBuilder/js/converter/style/width.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Subtract margin from width to ensure adjacent elements do not\n   * move or resize when positive or negative margins are present\n   *\n   * @api\n   */\n  var Width = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Width() {}\n\n    var _proto = Width.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      if (value.indexOf(\"calc\") !== -1) {\n        return value.split(\"%\")[0].split(\"(\")[1] + \"%\";\n      }\n\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string | object}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      if (data[name] && data[name] !== \"\") {\n        var marginsAndPadding = data.margins_and_padding || {};\n        var margins = marginsAndPadding.margin || \"\";\n        var marginLeft = margins.left ? parseInt(margins.left, 10) : 0;\n        var marginRight = margins.right ? parseInt(margins.right, 10) : 0;\n\n        if (marginLeft === 0 && marginRight === 0) {\n          return data[name].toString();\n        }\n\n        return \"calc(\" + data[name].toString() + \" - \" + (marginLeft + marginRight) + \"px)\";\n      }\n    };\n\n    return Width;\n  }();\n\n  return Width;\n});\n//# sourceMappingURL=width.js.map","Magento_PageBuilder/js/converter/style/border-style.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var BorderStyleDefault = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function BorderStyleDefault() {}\n\n    var _proto = BorderStyleDefault.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      if (!value) {\n        return \"_default\";\n      }\n\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {DataObject} data\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (value && value !== \"_default\") {\n        return value;\n      }\n    };\n\n    return BorderStyleDefault;\n  }();\n\n  return BorderStyleDefault;\n});\n//# sourceMappingURL=border-style.js.map","Magento_PageBuilder/js/converter/style/preview/background-image.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/object\"], function (_object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var BackgroundImage = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function BackgroundImage() {}\n\n    var _proto = BackgroundImage.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      var value = (0, _object.get)(data, name);\n\n      if (value && typeof value[0] === \"object\") {\n        return \"url(\" + value[0].url + \")\";\n      }\n\n      return \"\";\n    };\n\n    return BackgroundImage;\n  }();\n\n  return BackgroundImage;\n});\n//# sourceMappingURL=background-image.js.map","Magento_PageBuilder/js/converter/style/preview/display.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Display = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Display() {}\n\n    var _proto = Display.prototype;\n\n    /**\n     * Ensure the display none property doesn't persist to the preview\n     *\n     * @param value string\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return;\n    }\n    /**\n     * Ensure the display none property doesn't persist to the preview\n     *\n     * @param name string\n     * @param data Object\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      return;\n    };\n\n    return Display;\n  }();\n\n  return Display;\n});\n//# sourceMappingURL=display.js.map","Magento_PageBuilder/js/converter/html/directive.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/utils/editor\", \"Magento_PageBuilder/js/utils/object\"], function (_directives, _editor, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Directives = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Directives() {}\n\n    var _proto = Directives.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param {string} value\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      return value;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {Object} data\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      return (0, _editor.encodeContent)((0, _directives.convertMediaDirectivesToUrls)((0, _directives.removeQuotesInMediaDirectives)((0, _object.get)(data, name))));\n    };\n\n    return Directives;\n  }();\n\n  return Directives;\n});\n//# sourceMappingURL=directive.js.map","Magento_PageBuilder/js/converter/html/tag-escaper.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"underscore\", \"Magento_PageBuilder/js/utils/object\"], function (_underscore, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  var TagEscaper = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function TagEscaper() {}\n\n    var _proto = TagEscaper.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param {string} value\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      var result = (0, _underscore.unescape)(value); // Have to do a manual &nbsp; replace since underscore un-escape does not un-escape &nbsp;\n\n      return result.replace(/&nbsp;/g, String.fromCharCode(160));\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {Object} data\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      return (0, _underscore.escape)((0, _object.get)(data, name));\n    };\n\n    return TagEscaper;\n  }();\n\n  return TagEscaper;\n});\n//# sourceMappingURL=tag-escaper.js.map","Magento_PageBuilder/js/converter/html/decode.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/utils/object\"], function (_directives, _object) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * @api\n   */\n  var Decode = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function Decode() {}\n\n    var _proto = Decode.prototype;\n\n    /**\n     * Convert value to internal format\n     *\n     * @param {string} value\n     * @returns {string | object}\n     */\n    _proto.fromDom = function fromDom(value) {\n      // Convert the encoded string back to HTML without executing\n      var html = new DOMParser().parseFromString(value, \"text/html\");\n      return html.body.textContent;\n    }\n    /**\n     * Convert value to knockout format\n     *\n     * @param {string} name\n     * @param {Object} data\n     * @returns {string}\n     */\n    ;\n\n    _proto.toDom = function toDom(name, data) {\n      return (0, _directives.removeQuotesInMediaDirectives)((0, _object.get)(data, name));\n    };\n\n    return Decode;\n  }();\n\n  return Decode;\n});\n//# sourceMappingURL=decode.js.map","Magento_PageBuilder/js/utils/nesting-link-dialog.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"mage/translate\", \"Magento_PageBuilder/js/modal/dismissible-confirm\"], function (_jquery, _translate, _dismissibleConfirm) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Validate inline editor for having nested link\n   * Creates a dialog and removes inline editor link if present\n   *\n   * @param {DataStore} dataStore\n   * @param {WysiwygInterface} wysiwyg\n   * @param {string} inlineMessageField\n   * @param {string} linkUrlField\n   */\n  function nestingLinkDialog(dataStore, wysiwyg, inlineMessageField, linkUrlField) {\n    var dataStoreContent = dataStore.getState();\n    var inlineMessage = dataStoreContent[inlineMessageField];\n    var linkUrl = dataStoreContent[linkUrlField];\n    var aLinkRegex = /(<a[\\s]+[^>]+).+(?=<\\/a>)<\\/a>/igm;\n\n    if (wysiwyg && inlineMessage.match(aLinkRegex) && linkUrl && [\"page\", \"product\", \"category\", \"default\"].indexOf(linkUrl.type) !== -1 && linkUrl[linkUrl.type] && linkUrl[linkUrl.type].length !== 0) {\n      var inlineEditor = (0, _jquery)(\"#\" + wysiwyg.elementId);\n      inlineEditor.trigger(\"blur\");\n      (0, _dismissibleConfirm)({\n        actions: {\n          always: function always() {\n            var anchorLessDataStoreMessage = inlineMessage.replace(aLinkRegex, \"\");\n            var anchorLessInlineMessage = inlineEditor.html().replace(aLinkRegex, \"\");\n            dataStore.set(inlineMessageField, anchorLessDataStoreMessage);\n            inlineEditor.html(anchorLessInlineMessage);\n          }\n        },\n        content: (0, _translate)(\"We are unable to support links within the content field whilst having a link set on the content type. Please remove the content type link if you'd like to set a link within the content. We will automatically remove the links within the content field.\"),\n        // tslint:disable-line:max-line-length\n        title: (0, _translate)(\"Nested links are not allowed\"),\n        haveCancelButton: false\n      });\n    }\n  }\n\n  return nestingLinkDialog;\n});\n//# sourceMappingURL=nesting-link-dialog.js.map","Magento_PageBuilder/js/utils/breakpoints.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    return {\n        /**\n         * Build media query.\n         *\n         * @param {Object} conditions\n         * @returns {String}\n         */\n        buildMedia: function (conditions) {\n            var result = _.map(_.pairs(conditions), function (condition) {\n                return '(' + condition.join(': ') + ')';\n            });\n\n            return result.join(' and ');\n        }\n    };\n});\n","Magento_PageBuilder/js/utils/object.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"object-path\"], function (_objectPath) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Retrieve a value from an object via a path\n   *\n   * @param {object} object\n   * @param {string} path\n   * @param {TResult} defaultValue\n   * @returns {TResult}\n   */\n  function get(object, path, defaultValue) {\n    return _objectPath.get(object, path, defaultValue);\n  }\n  /**\n   * Set a value within an object via a path\n   *\n   * @param {object} object\n   * @param {string} path\n   * @param {TResult} value\n   * @returns {TResult | undefined}\n   */\n\n\n  function set(object, path, value) {\n    return _objectPath.set(object, path, value);\n  }\n\n  return {\n    get: get,\n    set: set\n  };\n});\n//# sourceMappingURL=object.js.map","Magento_PageBuilder/js/utils/editor.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"mage/adminhtml/tools\", \"mage/translate\", \"mageUtils\", \"Magento_PageBuilder/js/config\"], function (_jquery, _tools, _translate, _mageUtils, _config) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Is the inline WYSIWYG supported?\n   */\n  function isWysiwygSupported() {\n    return _config.getConfig(\"can_use_inline_editing_on_stage\");\n  }\n  /**\n   * Encode content for TinyMCE\n   *\n   * @param content\n   */\n\n\n  function encodeContent(content) {\n    if (isWysiwygSupported()) {\n      return convertVariablesToHtmlPreview(convertWidgetsToHtmlPreview(unescapeDoubleQuoteWithinWidgetDirective(removeInvalidPlaceholders(content))));\n    }\n\n    return content;\n  }\n  /**\n   * Prior to parsing the content remove any invalid placeholders within the content\n   *\n   * @param content\n   */\n\n\n  function removeInvalidPlaceholders(content) {\n    if (content.indexOf(\"magento-placeholder\") !== -1) {\n      var html = new DOMParser().parseFromString(content, \"text/html\");\n      var placeholders = html.querySelectorAll(\"span.magento-placeholder\");\n\n      if (placeholders.length > 0) {\n        [].slice.call(placeholders).forEach(function (placeholder) {\n          // If the invalid placeholder contains a directive, let's insert it back where it belongs\n          if (placeholder.innerText.indexOf(\"{{\") !== -1) {\n            placeholder.parentNode.insertBefore(document.createTextNode(placeholder.innerText), placeholder);\n          }\n\n          placeholder.remove();\n        });\n      }\n\n      return html.body.innerHTML;\n    }\n\n    return content;\n  }\n  /**\n   * Convert all variables to their HTML preview counterparts\n   *\n   * Re-implements logic from lib/web/mage/adminhtml/wysiwyg/tiny_mce/plugins/magentovariable/editor_plugin.js to parse\n   * and replace the variables within the content.\n   *\n   * @param content\n   */\n\n\n  function convertVariablesToHtmlPreview(content) {\n    var config = _config.getConfig(\"tinymce\").variables;\n\n    var magentoVariables = JSON.parse(config.placeholders);\n    return content.replace(/{\\{\\s?(?:customVar code=|config path=\\\")([^\\}\\\"]+)[\\\"]?\\s?\\}\\}/ig, function (match, path) {\n      var id = btoa(path).replace(/\\+/g, \":\").replace(/\\//g, \"_\").replace(/=/g, \"-\");\n      var placeholder = (0, _jquery)(\"<span />\").addClass(\"magento-variable\").addClass(\"magento-placeholder\").addClass(\"mceNonEditable\").prop(\"id\", id).prop(\"contentEditable\", \"false\");\n\n      if (magentoVariables[path].variable_type === \"custom\") {\n        placeholder.addClass(\"magento-custom-var\");\n      }\n\n      var variableType = magentoVariables[path].variable_type;\n\n      if (magentoVariables[path] && (variableType === \"default\" || variableType === \"custom\")) {\n        placeholder.text(magentoVariables[path].variable_name);\n      } else {\n        // If we're unable to find the placeholder we need to attach an error class\n        placeholder.addClass(\"magento-placeholder-error\");\n        placeholder.text(variableType === \"custom\" ? path : (0, _translate)(\"Not Found\"));\n      }\n\n      return placeholder[0].outerHTML;\n    });\n  }\n  /**\n   * Convert widgets within content to their HTML counterparts\n   *\n   * @param content\n   */\n\n\n  function convertWidgetsToHtmlPreview(content) {\n    var config = _config.getConfig(\"tinymce\").widgets;\n\n    return content.replace(/\\{\\{widget([\\S\\s]*?)\\}\\}/ig, function (match, widgetBody) {\n      var attributes = parseAttributesString(widgetBody);\n      var imageSrc;\n\n      if (attributes.type) {\n        var placeholder = (0, _jquery)(\"<span />\").addClass(\"magento-placeholder\").addClass(\"magento-widget\").addClass(\"mceNonEditable\").prop(\"id\", _mageUtils.uniqueid()).prop(\"contentEditable\", \"false\");\n        attributes.type = attributes.type.replace(/\\\\\\\\/g, \"\\\\\");\n        imageSrc = config.placeholders[attributes.type];\n\n        if (!imageSrc) {\n          imageSrc = config.error_image_url;\n          placeholder.addClass(\"magento-placeholder-error\");\n        }\n\n        var image = (0, _jquery)(\"<img />\").prop(\"id\", window.Base64.idEncode(match)).prop(\"src\", imageSrc);\n        placeholder.append(image);\n        var widgetType = \"\";\n\n        if (config.types[attributes.type]) {\n          widgetType += config.types[attributes.type];\n        }\n\n        placeholder.append((0, _jquery)(document.createTextNode(widgetType)));\n        return placeholder[0].outerHTML;\n      }\n    });\n  }\n  /**\n   * Parse attributes into a string\n   *\n   * @param attributes\n   */\n\n\n  function parseAttributesString(attributes) {\n    var result = {};\n    attributes.replace(/(\\w+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g, function (match, key, value) {\n      result[key] = value ? value.replace(/&quote;/g, \"\\\"\") : value;\n      return \"\";\n    });\n    return result;\n  }\n  /**\n   * Lock all image sizes before initializing TinyMCE to avoid content jumps\n   *\n   * @param element\n   */\n\n\n  function lockImageSize(element) {\n    [].slice.call(element.querySelectorAll(\"img\")).forEach(function (image) {\n      if (image.style.width.length === 0) {\n        image.style.width = /^\\d+$/.test(image.getAttribute(\"width\")) ? image.getAttribute(\"width\") + \"px\" : image.getAttribute(\"width\");\n        image.setAttribute(\"data-width-locked\", \"true\");\n      }\n\n      if (image.style.height.length === 0) {\n        image.style.height = /^\\d+$/.test(image.getAttribute(\"height\")) ? image.getAttribute(\"height\") + \"px\" : image.getAttribute(\"height\");\n        image.setAttribute(\"data-height-locked\", \"true\");\n      }\n    });\n  }\n  /**\n   * Reverse forced image size after TinyMCE is finished initializing\n   *\n   * @param element\n   */\n\n\n  function unlockImageSize(element) {\n    [].slice.call(element.querySelectorAll(\"img\")).forEach(function (image) {\n      if (image.getAttribute(\"data-width-locked\")) {\n        image.style.width = null;\n        image.removeAttribute(\"data-width-locked\");\n      }\n\n      if (image.getAttribute(\"data-height-locked\")) {\n        image.style.height = null;\n        image.removeAttribute(\"data-height-locked\");\n      }\n    });\n  }\n  /**\n   * Create a bookmark within the content to be restored later\n   */\n\n\n  function createBookmark(event) {\n    var wrapperElement = (0, _jquery)(event.target).parents(\".inline-wysiwyg\");\n    /**\n     * Create an element bookmark\n     *\n     * @param element\n     */\n\n    var createElementBookmark = function createElementBookmark(element) {\n      return {\n        name: element.nodeName,\n        index: findNodeIndex(wrapperElement[0], element.nodeName, element)\n      };\n    }; // Handle direct clicks onto an IMG\n\n\n    if (event.target.nodeName === \"IMG\") {\n      return createElementBookmark(event.target);\n    }\n\n    if (window.getSelection) {\n      var selection = window.getSelection();\n\n      var id = _mageUtils.uniqueid();\n\n      if (selection.getRangeAt && selection.rangeCount) {\n        var range = normalizeTableCellSelection(selection.getRangeAt(0).cloneRange()); // Determine if the current node is an image or span that we want to select instead of text\n\n        var currentNode = range.startContainer;\n\n        if (currentNode.nodeType === Node.ELEMENT_NODE && (currentNode.nodeName === \"IMG\" || currentNode.nodeName === \"SPAN\" && currentNode.classList.contains(\"magento-placeholder\"))) {\n          return createElementBookmark(currentNode);\n        } // Also check if the direct parent is either of these\n\n\n        var parentNode = range.startContainer.parentNode;\n\n        if (parentNode.nodeName === \"IMG\" || parentNode.nodeName === \"SPAN\" && parentNode.classList.contains(\"magento-placeholder\")) {\n          return createElementBookmark(parentNode);\n        }\n\n        if (!range.collapsed) {\n          range.collapse(false);\n          var endBookmarkNode = createBookmarkSpan(id + \"_end\");\n          range.insertNode(endBookmarkNode);\n        }\n\n        var range2 = normalizeTableCellSelection(selection.getRangeAt(0));\n        range2.collapse(true);\n        var startBookmarkNode = createBookmarkSpan(id + \"_start\");\n        range2.insertNode(startBookmarkNode);\n        return {\n          id: id\n        };\n      }\n    }\n\n    return null;\n  }\n  /**\n   * Move the cursor to our new bookmark\n   *\n   * @param bookmark\n   */\n\n\n  function moveToBookmark(bookmark) {\n    window.tinymce.activeEditor.selection.moveToBookmark(bookmark);\n  }\n  /**\n   * Retrieve active editor from TinyMCE\n   */\n\n\n  function getActiveEditor() {\n    return window.tinymce.activeEditor;\n  }\n  /**\n   * Create a bookmark span for the selection\n   *\n   * @param id\n   */\n\n\n  function createBookmarkSpan(id) {\n    var bookmark = document.createElement(\"span\");\n    bookmark.setAttribute(\"data-mce-type\", \"bookmark\");\n    bookmark.id = id;\n    bookmark.style.overflow = \"hidden\";\n    bookmark.style.lineHeight = \"0px\";\n    return bookmark;\n  }\n  /**\n   * Find the index of an element within a wrapper\n   *\n   * @param wrapperElement\n   * @param name\n   * @param element\n   */\n\n\n  function findNodeIndex(wrapperElement, name, element) {\n    var selector = name.toLowerCase() + ':not([data-mce-bogus=\"all\"])'; // If there is no ID on the element add a unique ID so we can efficiently find it\n\n    if (!element.id) {\n      element.id = _mageUtils.uniqueid();\n    }\n\n    return (0, _jquery)(wrapperElement).find(selector).toArray().findIndex(function (node) {\n      return node.id === element.id;\n    });\n  }\n  /**\n   * Get a node by index within a wrapper\n   *\n   * @param wrapperElement\n   * @param name\n   * @param index\n   */\n\n\n  function getNodeByIndex(wrapperElement, name, index) {\n    var selector = name.toLowerCase() + ':not([data-mce-bogus=\"all\"])';\n    return (0, _jquery)(wrapperElement).find(selector).get(index);\n  }\n  /**\n   * Create a double click event that works in all browsers\n   */\n\n\n  function createDoubleClickEvent() {\n    try {\n      return new MouseEvent(\"dblclick\", {\n        view: window,\n        bubbles: true,\n        cancelable: true\n      });\n    } catch (e) {\n      var dblClickEvent = document.createEvent(\"MouseEvent\");\n      dblClickEvent.initMouseEvent(\"dblclick\", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      return dblClickEvent;\n    }\n  }\n  /**\n   * Replace all desktop styles that left unprocessed back to style element to prevent data corruption.\n   */\n\n\n  function processInlineStyles(html) {\n    var name = _config.getConfig(\"defaultViewport\");\n\n    var searchPattern = new RegExp(\"data-\" + name + \"-style=\", \"g\");\n    return html.replace(searchPattern, \"style=\");\n  }\n  /**\n   * Move the end point of a range to handle tables\n   *\n   * @param range\n   * @param start\n   */\n\n\n  function moveEndPoint(range, start) {\n    var container;\n    var offset;\n    var childNodes;\n\n    if (start) {\n      container = range.startContainer;\n      offset = range.startOffset;\n    } else {\n      container = range.endContainer;\n      offset = range.endOffset;\n    }\n\n    if (container.nodeType === Node.ELEMENT_NODE && container.nodeName === \"TR\") {\n      childNodes = container.childNodes;\n      container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n\n      if (container) {\n        offset = start ? 0 : container.childNodes.length;\n\n        if (start) {\n          range.setStart(container, offset);\n        } else {\n          range.setEnd(container, offset);\n        }\n      }\n    }\n  }\n  /**\n   * Normalize the table sell selection within a range to better handle selections being inside of tables\n   *\n   * @param range\n   */\n\n\n  function normalizeTableCellSelection(range) {\n    moveEndPoint(range, true);\n    moveEndPoint(range, false);\n    return range;\n  }\n  /**\n   * Convert HTML encoded double quote to double quote with backslash within widget directives\n   *\n   * @param {string} content\n   * @returns {string}\n   */\n\n\n  function escapeDoubleQuoteWithinWidgetDirective(content) {\n    return content.replace(/\\{\\{widget[\\S\\s]*?\\}\\}/ig, function (match) {\n      return match.replace(/&quot;/g, \"\\\\\\\"\");\n    });\n  }\n  /**\n   * Convert double quote with backslash to HTML encoded double quote within widget directives\n   *\n   * @param {string} content\n   * @returns {string}\n   */\n\n\n  function unescapeDoubleQuoteWithinWidgetDirective(content) {\n    return content.replace(/\\{\\{widget[\\S\\s]*?\\}\\}/ig, function (match) {\n      return match.replace(/\\\\+\"/g, \"&quot;\");\n    });\n  }\n  /**\n   * Convert double quote to single quote within magento variable directives\n   *\n   * @param {string} content\n   * @returns {string}\n   */\n\n\n  function replaceDoubleQuoteWithSingleQuoteWithinVariableDirective(content) {\n    // Find html elements which attributes contain magento variables directives\n    return content.replace(/<([a-z0-9\\-\\_]+)([^>]+?[a-z0-9\\-\\_]+=\"[^\"]*?\\{\\{.+?\\}\\}.*?\".*?)>/gi, function (match1, tag, attributes) {\n      // Replace double quote with single quote within magento variable directive\n      var sanitizedAttributes = attributes.replace(/\\{\\{[^\\{\\}]+\\}\\}/gi, function (match2) {\n        return match2.replace(/\"/g, \"'\");\n      });\n      return \"<\" + tag + sanitizedAttributes + \">\";\n    });\n  }\n  /**\n   * Remove Page Builder reserved html tag attributes from the content\n   *\n   * @param {string} content\n   * @returns {string}\n   */\n\n\n  function removeReservedHtmlAttributes(content) {\n    var attributes = _config.getConfig(\"stage_config\").reserved_html_attributes || {};\n\n    for (var _i = 0, _Object$keys = Object.keys(attributes); _i < _Object$keys.length; _i++) {\n      var attribute = _Object$keys[_i];\n      content = removeHtmlTagAttribute(content, attribute);\n    }\n\n    return content;\n  }\n  /**\n   * Remove attribute from html tags\n   *\n   * @param {string} content\n   * @param {string} name\n   * @returns {string}\n   */\n\n\n  function removeHtmlTagAttribute(content, name) {\n    if (typeof content === \"string\" && content.indexOf(name + \"=\") !== -1) {\n      var html = new DOMParser().parseFromString(content, \"text/html\");\n      html.querySelectorAll(\"[\" + name + \"]\").forEach(function (child) {\n        child.removeAttribute(name);\n      });\n      content = html.body.innerHTML;\n    }\n\n    return content;\n  }\n\n  return {\n    isWysiwygSupported: isWysiwygSupported,\n    encodeContent: encodeContent,\n    parseAttributesString: parseAttributesString,\n    lockImageSize: lockImageSize,\n    unlockImageSize: unlockImageSize,\n    createBookmark: createBookmark,\n    moveToBookmark: moveToBookmark,\n    getActiveEditor: getActiveEditor,\n    findNodeIndex: findNodeIndex,\n    getNodeByIndex: getNodeByIndex,\n    createDoubleClickEvent: createDoubleClickEvent,\n    processInlineStyles: processInlineStyles,\n    escapeDoubleQuoteWithinWidgetDirective: escapeDoubleQuoteWithinWidgetDirective,\n    unescapeDoubleQuoteWithinWidgetDirective: unescapeDoubleQuoteWithinWidgetDirective,\n    replaceDoubleQuoteWithSingleQuoteWithinVariableDirective: replaceDoubleQuoteWithSingleQuoteWithinVariableDirective,\n    removeReservedHtmlAttributes: removeReservedHtmlAttributes\n  };\n});\n//# sourceMappingURL=editor.js.map","Magento_PageBuilder/js/utils/position-sticky.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Determine if the current browser supports position sticky\n   *\n   * @returns {boolean}\n   */\n  function supportsPositionSticky() {\n    if (!window.getComputedStyle) {\n      return false;\n    }\n\n    var testNode = document.createElement(\"div\");\n    return [\"\", \"-webkit-\", \"-moz-\", \"-ms-\"].some(function (prefix) {\n      try {\n        testNode.style.position = prefix + \"sticky\";\n      } catch (e) {// Fail silently\n      }\n\n      return testNode.style.position !== \"\";\n    });\n  }\n\n  return {\n    supportsPositionSticky: supportsPositionSticky\n  };\n});\n//# sourceMappingURL=position-sticky.js.map","Magento_PageBuilder/js/utils/delay-until.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Delay until a condition is met\n   *\n   * @param {() => void} callback\n   * @param {() => boolean} condition\n   * @param {number} interval\n   */\n  function delayUntil(callback, condition, interval) {\n    if (interval === void 0) {\n      interval = 50;\n    }\n\n    var delayInterval = setInterval(function () {\n      if (condition()) {\n        clearInterval(delayInterval);\n        callback();\n      }\n    }, interval);\n  }\n\n  return delayUntil;\n});\n//# sourceMappingURL=delay-until.js.map","Magento_PageBuilder/js/utils/text.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  \"use strict\";\n});\n//# sourceMappingURL=text.js.map","Magento_PageBuilder/js/utils/url.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Check for whether url string contains only a path\n   *\n   * @param {String} url\n   * @returns {Boolean}\n   */\n  function isPathOnly(url) {\n    return url.indexOf(\"/\") === 0;\n  }\n  /**\n   * Get the path from a URL\n   *\n   * @param {String} url\n   * @returns {String}\n   */\n\n\n  function getPathFromUrl(url) {\n    var a = document.createElement(\"a\");\n    a.href = url;\n    return a.pathname;\n  }\n  /**\n   * Convert url to path if other url is only a path\n   *\n   * @param {string} url\n   * @param {string} otherUrl\n   * @returns {string}\n   * @api\n   */\n\n\n  function convertUrlToPathIfOtherUrlIsOnlyAPath(url, otherUrl) {\n    return isPathOnly(otherUrl) ? getPathFromUrl(url) : url;\n  }\n\n  return {\n    convertUrlToPathIfOtherUrlIsOnlyAPath: convertUrlToPathIfOtherUrlIsOnlyAPath\n  };\n});\n//# sourceMappingURL=url.js.map","Magento_PageBuilder/js/utils/map.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/**\n * googleMaps dependency is added within googlemaps.phtml through shim based on API key being set\n *\n * @api\n */\ndefine([\n    'underscore',\n    'module',\n    'Magento_PageBuilder/js/events'\n], function (_, module, events) {\n    'use strict';\n\n    var google = window.google || {},\n\n        /**\n         * Generates a google map usable latitude and longitude object\n         *\n         * @param {Object} position\n         * @return {google.maps.LatLng}\n         */\n        getGoogleLatitudeLongitude = function (position) {\n            return new google.maps.LatLng(position.latitude, position.longitude);\n        },\n        gmAuthFailure = false;\n\n    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n    /**\n     * Google's error listener for map loader failures\n     */\n    window.gm_authFailure = function () {\n        events.trigger('googleMaps:authFailure');\n        gmAuthFailure = true;\n    };\n    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n\n    return function (element, markers, additionalOptions) {\n        var options,\n            style;\n\n        // If we've previously had an API key error, throw the error even again\n        if (gmAuthFailure) {\n            events.trigger('googleMaps:authFailure');\n\n            return;\n        }\n\n        // If Google Maps isn't loaded don't try init the map, it won't work\n        if (typeof google.maps === 'undefined') {\n            return;\n        }\n\n        /**\n         * Just in case of a bad JSON that bypassed validation\n         */\n        try {\n            style = module.config().style ? JSON.parse(module.config().style) : [];\n        }\n        catch (error) {\n            style = [];\n        }\n        options = _.extend({\n            zoom: 8,\n            center: getGoogleLatitudeLongitude({\n                latitude: 30.2672,\n                longitude: -97.7431\n            }),\n            scrollwheel: false,\n            disableDoubleClickZoom: false,\n            disableDefaultUI: false,\n            mapTypeControl: true,\n            mapTypeControlOptions: {\n                style: google.maps.MapTypeControlStyle.DEFAULT\n            },\n            styles: style\n        }, additionalOptions);\n\n        /* Create the map */\n        this.map = new google.maps.Map(element, options);\n        this.markers = [];\n\n        /**\n         * Callback function on map config update\n         * @param {Array} newMarkers\n         * @param {Object} updateOptions\n         */\n        this.onUpdate = function (newMarkers, updateOptions) {\n            this.map.setOptions(updateOptions);\n            this.setMarkers(newMarkers);\n        };\n\n        /**\n         * Sets the markers to selected map\n         * @param {Object} newMarkers\n         */\n        this.setMarkers = function (newMarkers) {\n            var activeInfoWindow,\n                latitudeLongitudeBounds = new google.maps.LatLngBounds();\n\n            this.markers.forEach(function (marker) {\n                marker.setMap(null);\n            }, this);\n\n            this.markers = [];\n            this.bounds = [];\n\n            /**\n             * Creates and set listener for markers\n             */\n            if (newMarkers && newMarkers.length) {\n                newMarkers.forEach(function (newMarker) {\n                    var location = _.escape(newMarker['location_name']) || '',\n                    comment = newMarker.comment ?\n                        '<p>' + _.escape(newMarker.comment).replace(/(?:\\r\\n|\\r|\\n)/g, '<br/>') + '</p>'\n                        : '',\n                    phone = newMarker.phone ? '<p>Phone: ' + _.escape(newMarker.phone) + '</p>' : '',\n                    address = newMarker.address ? _.escape(newMarker.address) + '<br/>' : '',\n                    city = _.escape(newMarker.city) || '',\n                    country = newMarker.country ? _.escape(newMarker.country) : '',\n                    state = newMarker.state ? _.escape(newMarker.state) + ' ' : '',\n                    zipCode = newMarker.zipcode ? _.escape(newMarker.zipcode) : '',\n                    cityComma = city !== '' && (zipCode !== '' || state !== '') ? ', ' : '',\n                    lineBreak = city !== '' || zipCode !== '' ? '<br/>' : '',\n                    contentString =\n                        '<div>' +\n                        '<h3><b>' + location + '</b></h3>' +\n                        comment +\n                        phone +\n                        '<p><span>' + address +\n                        city + cityComma + state + zipCode + lineBreak +\n                        country + '</span></p>' +\n                        '</div>',\n                    infowindow = new google.maps.InfoWindow({\n                        content: contentString,\n                        maxWidth: 350\n                    }),\n                    newCreatedMarker = new google.maps.Marker({\n                        map: this.map,\n                        position: getGoogleLatitudeLongitude(newMarker.position),\n                        title: location\n                    });\n\n                    if (location) {\n                        newCreatedMarker.addListener('click', function () {\n                            if (activeInfoWindow) {\n                                activeInfoWindow.close();\n                            }\n\n                            infowindow.open(this.map, newCreatedMarker);\n                            activeInfoWindow = infowindow;\n                        }, this);\n                    }\n\n                    this.markers.push(newCreatedMarker);\n                    this.bounds.push(getGoogleLatitudeLongitude(newMarker.position));\n                }, this);\n            }\n\n            /**\n             * This sets the bounds of the map for multiple locations\n             */\n            if (this.bounds.length > 1) {\n                this.bounds.forEach(function (bound) {\n                    latitudeLongitudeBounds.extend(bound);\n                });\n                this.map.fitBounds(latitudeLongitudeBounds);\n            }\n\n            /**\n             * Zoom to 8 if there is only a single location\n             */\n            if (this.bounds.length === 1) {\n                this.map.setCenter(this.bounds[0]);\n                this.map.setZoom(8);\n            }\n        };\n\n        this.setMarkers(markers);\n    };\n});\n","Magento_PageBuilder/js/utils/create-stylesheet.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Create a stylesheet DOM object from a style block declaration\n   *\n   * @param {StyleBlocks} blocks\n   * @returns {HTMLStyleElement}\n   * @api\n   */\n  function createStyleSheet(blocks) {\n    var style = document.createElement(\"style\");\n    var text = Object.keys(blocks).map(function (selector) {\n      return selector + (\" {\\n\" + processDeclarationBlock(blocks[selector]) + \"\\n}\");\n    }).join(\"\\n\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.appendChild(document.createTextNode(text));\n    return style;\n  }\n  /**\n   * Process a declaration block from the rule set\n   *\n   * @param {StyleBlock} block\n   * @returns {string}\n   */\n\n\n  function processDeclarationBlock(block) {\n    return Object.keys(block).map(function (property) {\n      return processDeclaration(property, block[property]);\n    }).join(\"\\n\");\n  }\n  /**\n   * Process a declaration, creating the property: value syntax\n   *\n   * @param {string} property\n   * @param {string | number} value\n   * @returns {string}\n   */\n\n\n  function processDeclaration(property, value) {\n    return hyphenate(property) + (\": \" + value + \";\");\n  }\n  /**\n   * Hyphenate style property, from textAlign to text-align\n   *\n   * @param {string} property\n   * @returns {string}\n   */\n\n\n  function hyphenate(property) {\n    return property.replace(/[A-Z]/g, function (match) {\n      return \"-\" + match.toLowerCase();\n    });\n  }\n\n  return {\n    createStyleSheet: createStyleSheet\n  };\n});\n//# sourceMappingURL=create-stylesheet.js.map","Magento_PageBuilder/js/utils/pagebuilder-header-height.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\"], function (_jquery) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Checks if PageBuilder has header and returns it's height\n   *\n   * @param {string} stageId\n   * @param {string} stageWrapper\n   * @param {string} pageBuilderHeader\n   * @returns {number}\n   */\n  function pageBuilderHeaderHeight(stageId, stageWrapper, pageBuilderHeader) {\n    if (stageWrapper === void 0) {\n      stageWrapper = \".pagebuilder-stage-wrapper\";\n    }\n\n    if (pageBuilderHeader === void 0) {\n      pageBuilderHeader = \".pagebuilder-header\";\n    }\n\n    var $stageWrapper = (0, _jquery)(\"#\" + stageId).closest(stageWrapper);\n    var $pageBuilderHeader = $stageWrapper.find(pageBuilderHeader);\n    return !!$pageBuilderHeader.length ? $pageBuilderHeader.height() : 0;\n  }\n\n  return pageBuilderHeaderHeight;\n});\n//# sourceMappingURL=pagebuilder-header-height.js.map","Magento_PageBuilder/js/utils/directives.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/config\"], function (_config) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * MIME type to use in place of the image\n   *\n   * @type {string}\n   */\n  var mimeType = \"text/magento-directive\";\n  /**\n   * Determine if a URL is a directive of our type\n   *\n   * @param {string} url\n   * @returns {boolean}\n   * @api\n   */\n\n  function isDirectiveDataUrl(url) {\n    return url.indexOf(\"data:\" + mimeType) === 0;\n  }\n  /**\n   * Convert a directive into our data URI\n   *\n   * @param {string} directive\n   * @returns {string}\n   * @api\n   */\n\n\n  function toDataUrl(directive) {\n    return \"data:\" + mimeType + \",\" + encodeURIComponent(directive);\n  }\n  /**\n   * Convert a URI to it's directive equivalent\n   *\n   * @param {string} url\n   * @returns {string}\n   * @api\n   */\n\n\n  function fromDataUrl(url) {\n    if (!isDirectiveDataUrl(url)) {\n      throw Error(url + \" is not a magento directive data url\");\n    }\n\n    return decodeURIComponent(url.split(mimeType + \",\")[1]);\n  }\n  /**\n   * Decode all data URIs present in a string\n   *\n   * @param {string} str\n   * @returns {string}\n   * @api\n   */\n\n\n  function decodeAllDataUrlsInString(str) {\n    return str.replace(new RegExp(\"url\\\\s*\\\\(\\\\s*(?:&quot;|\\'|\\\")?(data:\" + mimeType + \",.+?)(?:&quot;|\\'|\\\")?\\\\s*\\\\)\", \"g\"), function (match, url) {\n      return \"url(\\'\" + fromDataUrl(url) + \"\\')\";\n    });\n  }\n  /**\n   * Retrieve the image URL with directive\n   *\n   * @param {Array} image\n   * @returns {string}\n   * @api\n   */\n\n\n  function getImageUrl(image) {\n    var imageUrl = image[0].url;\n    var mediaPath = imageUrl.split(_config.getConfig(\"media_url\"));\n    return \"{{media url=\" + mediaPath[1] + \"}}\";\n  }\n  /**\n   * Remove quotes in media directives, {{media url=\"wysiwyg/image.png\"}} convert to {{media url=wysiwyg/image.png}}\n   *\n   * @param {string} html\n   * @returns {string}\n   * @api\n   */\n\n\n  function removeQuotesInMediaDirectives(html) {\n    if (!html) {\n      return \"\";\n    }\n\n    var mediaDirectiveRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*(.*?)\\s*\\}\\}/g;\n    var urlRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*(.*)\\s*\\}\\}/;\n    var mediaDirectiveMatches = html.match(mediaDirectiveRegExp);\n\n    if (mediaDirectiveMatches) {\n      mediaDirectiveMatches.forEach(function (mediaDirective) {\n        var urlMatches = mediaDirective.match(urlRegExp);\n\n        if (urlMatches && urlMatches[1] !== undefined) {\n          var directiveWithOutQuotes = \"{{media url=\" + urlMatches[1].replace(/(\"|&quot;|\\s)/g, \"\") + \"}}\";\n          html = html.replace(mediaDirective, directiveWithOutQuotes);\n        }\n      });\n    }\n\n    return html;\n  }\n  /**\n   * Replace media directives with actual media URLs\n   *\n   * @param {string} html\n   * @returns {string}\n   * @api\n   */\n\n\n  function convertMediaDirectivesToUrls(html) {\n    if (!html) {\n      return \"\";\n    }\n\n    var mediaDirectiveRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*\"?[^\"\\s\\}]+\"?\\s*\\}\\}/g;\n    var mediaDirectiveMatches = html.match(mediaDirectiveRegExp);\n\n    if (mediaDirectiveMatches) {\n      mediaDirectiveMatches.forEach(function (mediaDirective) {\n        var urlRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*(?:\"|&quot;)?(.+)(?=}})\\s*\\}\\}/;\n        var urlMatches = mediaDirective.match(urlRegExp);\n\n        if (urlMatches && typeof urlMatches[1] !== \"undefined\") {\n          html = html.replace(mediaDirective, _config.getConfig(\"media_url\") + urlMatches[1].replace(/\"$/, \"\").replace(/&quot;$/, \"\"));\n        }\n      });\n    }\n\n    return html;\n  }\n  /**\n   * Replace data-src attribute with src.\n   *\n   * @param {string} html\n   * @returns {string}\n   */\n\n\n  function replaceWithSrc(html) {\n    return html.replace(new RegExp(\"data-tmp-src=\\\"\\{\\{\", \"g\"), \"src=\\\"{{\");\n  }\n  /**\n   * Replace src attribute with data-tmp-src.\n   *\n   * @param {string} html\n   * @returns {string}\n   */\n\n\n  function replaceWithDataSrc(html) {\n    return html.replace(new RegExp(\"src=\\\"\\{\\{\", \"g\"), \"data-tmp-src=\\\"{{\");\n  }\n\n  return Object.assign(decodeAllDataUrlsInString, {\n    toDataUrl: toDataUrl,\n    fromDataUrl: fromDataUrl,\n    getImageUrl: getImageUrl,\n    removeQuotesInMediaDirectives: removeQuotesInMediaDirectives,\n    convertMediaDirectivesToUrls: convertMediaDirectivesToUrls,\n    replaceWithSrc: replaceWithSrc,\n    replaceWithDataSrc: replaceWithDataSrc\n  });\n});\n//# sourceMappingURL=directives.js.map","Magento_PageBuilder/js/utils/image.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"Magento_PageBuilder/js/config\", \"Magento_PageBuilder/js/utils/directives\", \"Magento_PageBuilder/js/utils/url\"], function (_config, _directives, _url) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Decode image background URL to object\n   *\n   * @param value\n   * @returns {Object}\n   * @api\n   */\n  function decodeUrl(value) {\n    var result = \"\";\n    value = decodeURIComponent(value.replace(window.location.href, \"\"));\n    var regexp = /{{.*\\s*url=\"?(.*\\.([a-z|A-Z]*))\"?\\s*}}/;\n\n    if (regexp.test(value)) {\n      var _regexp$exec = regexp.exec(value),\n          url = _regexp$exec[1],\n          type = _regexp$exec[2];\n\n      var image = {\n        name: url.split(\"/\").pop(),\n        size: 0,\n        type: \"image/\" + type,\n        url: _config.getConfig(\"media_url\") + url\n      };\n      result = [image];\n    }\n\n    return result;\n  }\n  /**\n   * Convert a URL to an image directive\n   *\n   * @param {string} imageUrl\n   * @returns {string}\n   */\n\n\n  function urlToDirective(imageUrl) {\n    var mediaUrl = (0, _url.convertUrlToPathIfOtherUrlIsOnlyAPath)(_config.getConfig(\"media_url\"), imageUrl);\n    var mediaPath = imageUrl.split(mediaUrl);\n    return \"{{media url=\" + mediaPath[1] + \"}}\";\n  }\n  /**\n   * Convert an image URL to a background image data uri\n   *\n   * @param {string} imageUrl\n   * @returns {string}\n   */\n\n\n  function imageToBackgroundImageDataUrl(imageUrl) {\n    return \"url(\\'\" + (0, _directives.toDataUrl)(urlToDirective(imageUrl)) + \"\\')\";\n  }\n\n  return {\n    decodeUrl: decodeUrl,\n    urlToDirective: urlToDirective,\n    imageToBackgroundImageDataUrl: imageToBackgroundImageDataUrl\n  };\n});\n//# sourceMappingURL=image.js.map","Magento_PageBuilder/js/utils/nesting-widget-dialog.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\", \"mage/translate\", \"Magento_PageBuilder/js/modal/dismissible-confirm\"], function (_jquery, _translate, _dismissibleConfirm) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Validate inline editor for having nested widget\n   * Creates a dialog and removes inline editor widget if present\n   *\n   * @param {DataStore} dataStore\n   * @param {WysiwygInterface} wysiwyg\n   * @param {string} inlineMessageField\n   * @param {string} linkUrlField\n   */\n  function nestingWidgetDialog(dataStore, wysiwyg, inlineMessageField, linkUrlField) {\n    var dataStoreContent = dataStore.getState();\n    var inlineMessage = dataStoreContent[inlineMessageField];\n    var linkUrl = dataStoreContent[linkUrlField];\n    var widgetRegex = /\\{\\{widget([\\S\\s]*?)\\}\\}/ig;\n    var widgetPlaceholderRegex = /<span.*(class=)(\\\"|\\').*((magento-placeholder).*(magento-widget)|(magento-widget).*(magento-placeholder)).*<\\/span>/igm;\n\n    if (wysiwyg && inlineMessage.match(widgetRegex) && linkUrl && [\"page\", \"product\", \"category\", \"default\"].indexOf(linkUrl.type) !== -1 && linkUrl[linkUrl.type] && linkUrl[linkUrl.type].length !== 0) {\n      var inlineEditor = (0, _jquery)(\"#\" + wysiwyg.elementId);\n      inlineEditor.trigger(\"blur\");\n      (0, _dismissibleConfirm)({\n        actions: {\n          always: function always() {\n            var widgetLessDataStoreMessage = inlineMessage.replace(widgetRegex, \"\");\n            var widgetLessInlineMessage = inlineEditor.html().replace(widgetPlaceholderRegex, \"\");\n            dataStore.set(inlineMessageField, widgetLessDataStoreMessage);\n            inlineEditor.html(widgetLessInlineMessage);\n          }\n        },\n        content: (0, _translate)(\"We are unable to support widget within the content field whilst having a link set on the content type. Please remove the content type link if you'd like to set a widget within the content. We will automatically remove the widget within the content field.\"),\n        // tslint:disable-line:max-line-length\n        title: (0, _translate)(\"Nested widgets are not allowed\"),\n        haveCancelButton: false\n      });\n    }\n  }\n\n  return nestingWidgetDialog;\n});\n//# sourceMappingURL=nesting-widget-dialog.js.map","Magento_PageBuilder/js/utils/array.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Move an array item within the current array\n   *\n   * @param array\n   * @param fromIndex\n   * @param toIndex\n   * @returns {Array<any>}\n   */\n  function moveArrayItem(array, fromIndex, toIndex) {\n    array.splice(toIndex, 0, array.splice(fromIndex, 1)[0]);\n    return array;\n  }\n  /**\n   * Move an array item from one array into another\n   *\n   * @param item\n   * @param array\n   * @param toIndex\n   * @returns {Array<any>}\n   */\n\n\n  function moveArrayItemIntoArray(item, array, toIndex) {\n    array.splice(toIndex, 0, item);\n    return array;\n  }\n  /**\n   * Remove an array item\n   *\n   * @param array\n   * @param item\n   * @returns {Array<any>}\n   */\n\n\n  function removeArrayItem(array, item) {\n    var index = array.indexOf(item);\n\n    if (index > -1) {\n      array.splice(index, 1);\n    }\n\n    return array;\n  }\n  /**\n   * Search outwards from an array item until a callback matches\n   *\n   * @author https://github.com/thejameskyle/outward-search\n   *\n   * @param {any[]} items\n   * @param {number} start\n   * @param {(item: any, index: number) => boolean} callback\n   * @returns {any}\n   * @api\n   */\n\n\n  function outwardSearch(items, start, callback) {\n    if (!items.length) {\n      return null;\n    }\n\n    if (start < 0 || start > items.length - 1) {\n      throw new TypeError(\"starting index must be within bounds of array\");\n    }\n\n    var max = items.length - 1;\n    var low = start;\n    var high = start + 1;\n\n    while (true) {\n      var hitMin = low < 0;\n      var hitMax = high > max;\n\n      if (hitMin && hitMax) {\n        break;\n      }\n\n      if (!hitMin) {\n        var _item = items[low];\n        var result = callback(_item, low);\n\n        if (!!result) {\n          return _item;\n        }\n\n        low--;\n      }\n\n      if (!hitMax) {\n        var _item2 = items[high];\n\n        var _result = callback(_item2, high);\n\n        if (!!_result) {\n          return _item2;\n        }\n\n        high++;\n      }\n    }\n\n    return null;\n  }\n\n  return {\n    moveArrayItem: moveArrayItem,\n    moveArrayItemIntoArray: moveArrayItemIntoArray,\n    removeArrayItem: removeArrayItem,\n    outwardSearch: outwardSearch\n  };\n});\n//# sourceMappingURL=array.js.map","Magento_PageBuilder/js/utils/string.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Convert from snake case to camel case\n   *\n   * @param {string} currentString\n   * @returns {string}\n   * @api\n   */\n  function fromSnakeToCamelCase(currentString) {\n    var parts = currentString.split(/[_-]/);\n    var newString = \"\";\n\n    for (var i = 1; i < parts.length; i++) {\n      newString += parts[i].charAt(0).toUpperCase() + parts[i].slice(1);\n    }\n\n    return parts[0] + newString;\n  }\n  /**\n   * Convert a camel case string to snake case\n   *\n   * @param currentString\n   */\n\n\n  function fromCamelCaseToDash(currentString) {\n    return currentString.replace(/[A-Z]/g, function (m) {\n      return \"-\" + m.toLowerCase();\n    });\n  }\n\n  return {\n    fromSnakeToCamelCase: fromSnakeToCamelCase,\n    fromCamelCaseToDash: fromCamelCaseToDash\n  };\n});\n//# sourceMappingURL=string.js.map","Magento_PageBuilder/js/utils/loader.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n  function load(dependencies, factory, onError) {\n    require(dependencies, factory, onError);\n  }\n\n  return load;\n});\n//# sourceMappingURL=loader.js.map","Magento_PageBuilder/js/utils/check-stage-full-screen.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([\"jquery\"], function (_jquery) {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Check if stage full screen mode is active\n   *\n   * @param {string} stageId\n   * @returns {boolean}\n   */\n  function checkStageFullScreen(stageId) {\n    var $stage = (0, _jquery)(\"#\" + stageId);\n    var $fullScreenStageWrapper = $stage.closest(\".stage-full-screen\");\n    return !!$fullScreenStageWrapper.length;\n  }\n\n  return checkStageFullScreen;\n});\n//# sourceMappingURL=check-stage-full-screen.js.map","Magento_PageBuilder/js/utils/promise-deferred.js":"/*eslint-disable */\n/* jscs:disable */\ndefine([], function () {\n  /**\n   * Copyright \u00a9 Magento, Inc. All rights reserved.\n   * See COPYING.txt for license details.\n   */\n\n  /**\n   * Returns a deferred promise\n   *\n   * @returns {DeferredInterface}\n   * @api\n   */\n  function deferred() {\n    var resolve;\n    var reject;\n    var promise = new Promise(function (promiseResolve, promiseReject) {\n      resolve = promiseResolve;\n      reject = promiseReject;\n    });\n    return {\n      resolve: resolve,\n      reject: reject,\n      promise: promise\n    };\n  }\n\n  return deferred;\n});\n//# sourceMappingURL=promise-deferred.js.map","Magento_PageBuilder/js/resource/object-path.js":"(function (root, factory){\n    'use strict';\n\n    /*istanbul ignore next:cant test*/\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else {\n        // Browser globals\n        root.objectPath = factory();\n    }\n})(this, function(){\n    'use strict';\n\n    var toStr = Object.prototype.toString;\n    function hasOwnProperty(obj, prop) {\n        if(obj == null) {\n            return false\n        }\n        //to handle objects with null prototypes (too edge case?)\n        return Object.prototype.hasOwnProperty.call(obj, prop)\n    }\n\n    function isEmpty(value){\n        if (!value) {\n            return true;\n        }\n        if (isArray(value) && value.length === 0) {\n            return true;\n        } else if (typeof value !== 'string') {\n            for (var i in value) {\n                if (hasOwnProperty(value, i)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n\n    function toString(type){\n        return toStr.call(type);\n    }\n\n    function isObject(obj){\n        return typeof obj === 'object' && toString(obj) === \"[object Object]\";\n    }\n\n    var isArray = Array.isArray || function(obj){\n        /*istanbul ignore next:cant test*/\n        return toStr.call(obj) === '[object Array]';\n    }\n\n    function isBoolean(obj){\n        return typeof obj === 'boolean' || toString(obj) === '[object Boolean]';\n    }\n\n    function getKey(key){\n        var intKey = parseInt(key);\n        if (intKey.toString() === key) {\n            return intKey;\n        }\n        return key;\n    }\n\n    function factory(options) {\n        options = options || {}\n\n        var objectPath = function(obj) {\n            return Object.keys(objectPath).reduce(function(proxy, prop) {\n                if(prop === 'create') {\n                    return proxy;\n                }\n\n                /*istanbul ignore else*/\n                if (typeof objectPath[prop] === 'function') {\n                    proxy[prop] = objectPath[prop].bind(objectPath, obj);\n                }\n\n                return proxy;\n            }, {});\n        };\n\n        var hasShallowProperty\n        if (options.includeInheritedProps) {\n            hasShallowProperty = function () {\n                return true\n            }\n        } else {\n            hasShallowProperty = function (obj, prop) {\n                return (typeof prop === 'number' && Array.isArray(obj)) || hasOwnProperty(obj, prop)\n            }\n        }\n\n        function getShallowProperty(obj, prop) {\n            if (hasShallowProperty(obj, prop)) {\n                return obj[prop];\n            }\n        }\n\n        function set(obj, path, value, doNotReplace){\n            if (typeof path === 'number') {\n                path = [path];\n            }\n            if (!path || path.length === 0) {\n                return obj;\n            }\n            if (typeof path === 'string') {\n                return set(obj, path.split('.').map(getKey), value, doNotReplace);\n            }\n            var currentPath = path[0];\n            var currentValue = getShallowProperty(obj, currentPath);\n            if (options.includeInheritedProps && (currentPath === '__proto__' ||\n                (currentPath === 'constructor' && typeof currentValue === 'function'))) {\n                throw new Error('For security reasons, object\\'s magic properties cannot be set')\n            }\n            if (path.length === 1) {\n                if (currentValue === void 0 || !doNotReplace) {\n                    obj[currentPath] = value;\n                }\n                return currentValue;\n            }\n\n            if (currentValue === void 0) {\n                //check if we assume an array\n                if(typeof path[1] === 'number') {\n                    obj[currentPath] = [];\n                } else {\n                    obj[currentPath] = {};\n                }\n            }\n\n            return set(obj[currentPath], path.slice(1), value, doNotReplace);\n        }\n\n        objectPath.has = function (obj, path) {\n            if (typeof path === 'number') {\n                path = [path];\n            } else if (typeof path === 'string') {\n                path = path.split('.');\n            }\n\n            if (!path || path.length === 0) {\n                return !!obj;\n            }\n\n            for (var i = 0; i < path.length; i++) {\n                var j = getKey(path[i]);\n\n                if((typeof j === 'number' && isArray(obj) && j < obj.length) ||\n                    (options.includeInheritedProps ? (j in Object(obj)) : hasOwnProperty(obj, j))) {\n                    obj = obj[j];\n                } else {\n                    return false;\n                }\n            }\n\n            return true;\n        };\n\n        objectPath.ensureExists = function (obj, path, value){\n            return set(obj, path, value, true);\n        };\n\n        objectPath.set = function (obj, path, value, doNotReplace){\n            return set(obj, path, value, doNotReplace);\n        };\n\n        objectPath.insert = function (obj, path, value, at){\n            var arr = objectPath.get(obj, path);\n            at = ~~at;\n            if (!isArray(arr)) {\n                arr = [];\n                objectPath.set(obj, path, arr);\n            }\n            arr.splice(at, 0, value);\n        };\n\n        objectPath.empty = function(obj, path) {\n            if (isEmpty(path)) {\n                return void 0;\n            }\n            if (obj == null) {\n                return void 0;\n            }\n\n            var value, i;\n            if (!(value = objectPath.get(obj, path))) {\n                return void 0;\n            }\n\n            if (typeof value === 'string') {\n                return objectPath.set(obj, path, '');\n            } else if (isBoolean(value)) {\n                return objectPath.set(obj, path, false);\n            } else if (typeof value === 'number') {\n                return objectPath.set(obj, path, 0);\n            } else if (isArray(value)) {\n                value.length = 0;\n            } else if (isObject(value)) {\n                for (i in value) {\n                    if (hasShallowProperty(value, i)) {\n                        delete value[i];\n                    }\n                }\n            } else {\n                return objectPath.set(obj, path, null);\n            }\n        };\n\n        objectPath.push = function (obj, path /*, values */){\n            var arr = objectPath.get(obj, path);\n            if (!isArray(arr)) {\n                arr = [];\n                objectPath.set(obj, path, arr);\n            }\n\n            arr.push.apply(arr, Array.prototype.slice.call(arguments, 2));\n        };\n\n        objectPath.coalesce = function (obj, paths, defaultValue) {\n            var value;\n\n            for (var i = 0, len = paths.length; i < len; i++) {\n                if ((value = objectPath.get(obj, paths[i])) !== void 0) {\n                    return value;\n                }\n            }\n\n            return defaultValue;\n        };\n\n        objectPath.get = function (obj, path, defaultValue){\n            if (typeof path === 'number') {\n                path = [path];\n            }\n            if (!path || path.length === 0) {\n                return obj;\n            }\n            if (obj == null) {\n                return defaultValue;\n            }\n            if (typeof path === 'string') {\n                return objectPath.get(obj, path.split('.'), defaultValue);\n            }\n\n            var currentPath = getKey(path[0]);\n            var nextObj = getShallowProperty(obj, currentPath)\n            if (nextObj === void 0) {\n                return defaultValue;\n            }\n\n            if (path.length === 1) {\n                return nextObj;\n            }\n\n            return objectPath.get(obj[currentPath], path.slice(1), defaultValue);\n        };\n\n        objectPath.del = function del(obj, path) {\n            if (typeof path === 'number') {\n                path = [path];\n            }\n\n            if (obj == null) {\n                return obj;\n            }\n\n            if (isEmpty(path)) {\n                return obj;\n            }\n            if(typeof path === 'string') {\n                return objectPath.del(obj, path.split('.'));\n            }\n\n            var currentPath = getKey(path[0]);\n            if (!hasShallowProperty(obj, currentPath)) {\n                return obj;\n            }\n\n            if(path.length === 1) {\n                if (isArray(obj)) {\n                    obj.splice(currentPath, 1);\n                } else {\n                    delete obj[currentPath];\n                }\n            } else {\n                return objectPath.del(obj[currentPath], path.slice(1));\n            }\n\n            return obj;\n        }\n\n        return objectPath;\n    }\n\n    var mod = factory();\n    mod.create = factory;\n    mod.withInheritedProps = factory({includeInheritedProps: true})\n    return mod;\n});","Magento_PageBuilder/js/resource/jquery/ui/jquery.ui.touch-punch.js":"/*!\n * jQuery UI Touch Punch 0.2.3\n *\n * Copyright 2011\u20132014, Dave Furfero\n * Dual licensed under the MIT or GPL Version 2 licenses.\n *\n * Depends:\n *  jquery.ui.widget.js\n *  jquery.ui.mouse.js\n */\n(function ($) {\n\n    // Detect touch support\n    $.support.touch = 'ontouchend' in document;\n\n    // Ignore browsers without touch support\n    if (!$.support.touch) {\n        return;\n    }\n\n    var mouseProto = $.ui.mouse.prototype,\n        _mouseInit = mouseProto._mouseInit,\n        _mouseDestroy = mouseProto._mouseDestroy,\n        touchHandled;\n\n    /**\n     * Simulate a mouse event based on a corresponding touch event\n     * @param {Object} event A touch event\n     * @param {String} simulatedType The corresponding mouse event\n     */\n    function simulateMouseEvent (event, simulatedType) {\n\n        // Ignore multi-touch events\n        if (event.originalEvent.touches.length > 1) {\n            return;\n        }\n\n        event.preventDefault();\n\n        var touch = event.originalEvent.changedTouches[0],\n            simulatedEvent = document.createEvent('MouseEvents');\n\n        // Initialize the simulated mouse event using the touch event's coordinates\n        simulatedEvent.initMouseEvent(\n            simulatedType,    // type\n            true,             // bubbles\n            true,             // cancelable\n            window,           // view\n            1,                // detail\n            touch.screenX,    // screenX\n            touch.screenY,    // screenY\n            touch.clientX,    // clientX\n            touch.clientY,    // clientY\n            false,            // ctrlKey\n            false,            // altKey\n            false,            // shiftKey\n            false,            // metaKey\n            0,                // button\n            null              // relatedTarget\n        );\n\n        // Dispatch the simulated event to the target element\n        event.target.dispatchEvent(simulatedEvent);\n    }\n\n    /**\n     * Handle the jQuery UI widget's touchstart events\n     * @param {Object} event The widget element's touchstart event\n     */\n    mouseProto._touchStart = function (event) {\n\n        var self = this;\n\n        // Ignore the event if another widget is already being handled\n        if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {\n            return;\n        }\n\n        // Set the flag to prevent other widgets from inheriting the touch event\n        touchHandled = true;\n\n        // Track movement to determine if interaction was a click\n        self._touchMoved = false;\n\n        // Simulate the mouseover event\n        simulateMouseEvent(event, 'mouseover');\n\n        // Simulate the mousemove event\n        simulateMouseEvent(event, 'mousemove');\n\n        // Simulate the mousedown event\n        simulateMouseEvent(event, 'mousedown');\n    };\n\n    /**\n     * Handle the jQuery UI widget's touchmove events\n     * @param {Object} event The document's touchmove event\n     */\n    mouseProto._touchMove = function (event) {\n\n        // Ignore event if not handled\n        if (!touchHandled) {\n            return;\n        }\n\n        // Interaction was not a click\n        this._touchMoved = true;\n\n        // Simulate the mousemove event\n        simulateMouseEvent(event, 'mousemove');\n    };\n\n    /**\n     * Handle the jQuery UI widget's touchend events\n     * @param {Object} event The document's touchend event\n     */\n    mouseProto._touchEnd = function (event) {\n\n        // Ignore event if not handled\n        if (!touchHandled) {\n            return;\n        }\n\n        // Simulate the mouseup event\n        simulateMouseEvent(event, 'mouseup');\n\n        // Simulate the mouseout event\n        simulateMouseEvent(event, 'mouseout');\n\n        // If the touch interaction did not move, it should trigger a click\n        if (!this._touchMoved) {\n\n            // Simulate the click event\n            simulateMouseEvent(event, 'click');\n        }\n\n        // Unset the flag to allow other widgets to inherit the touch event\n        touchHandled = false;\n    };\n\n    /**\n     * A duck punch of the $.ui.mouse _mouseInit method to support touch events.\n     * This method extends the widget with bound touch event handlers that\n     * translate touch events to mouse events and pass them to the widget's\n     * original mouse event handling methods.\n     */\n    mouseProto._mouseInit = function () {\n\n        var self = this;\n\n        // Delegate the touch handlers to the widget's element\n        self.element.bind({\n            touchstart: $.proxy(self, '_touchStart'),\n            touchmove: $.proxy(self, '_touchMove'),\n            touchend: $.proxy(self, '_touchEnd')\n        });\n\n        // Call the original $.ui.mouse init method\n        _mouseInit.call(self);\n    };\n\n    /**\n     * Remove the touch event handlers\n     */\n    mouseProto._mouseDestroy = function () {\n\n        var self = this;\n\n        // Delegate the touch handlers to the widget's element\n        self.element.unbind({\n            touchstart: $.proxy(self, '_touchStart'),\n            touchmove: $.proxy(self, '_touchMove'),\n            touchend: $.proxy(self, '_touchEnd')\n        });\n\n        // Call the original $.ui.mouse destroy method\n        _mouseDestroy.call(self);\n    };\n\n})(jQuery);","Magento_PageBuilder/js/resource/jquery/ui/jquery.ui.touch-punch.min.js":"/*!\n * jQuery UI Touch Punch 0.2.3\n *\n * Copyright 2011\u20132014, Dave Furfero\n * Dual licensed under the MIT or GPL Version 2 licenses.\n *\n * Depends:\n *  jquery.ui.widget.js\n *  jquery.ui.mouse.js\n */\n!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent(\"MouseEvents\");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch=\"ontouchend\"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,\"mouseover\"),f(a,\"mousemove\"),f(a,\"mousedown\"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,\"mousemove\"))},b._touchEnd=function(a){e&&(f(a,\"mouseup\"),f(a,\"mouseout\"),this._touchMoved||f(a,\"click\"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,\"_touchStart\"),touchmove:a.proxy(b,\"_touchMove\"),touchend:a.proxy(b,\"_touchEnd\")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,\"_touchStart\"),touchmove:a.proxy(b,\"_touchMove\"),touchend:a.proxy(b,\"_touchEnd\")}),d.call(b)}}}(jQuery);\n","Magento_PageBuilder/js/resource/csso/csso.js":"(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n        typeof define === 'function' && define.amd ? define(['exports'], factory) :\n            (global = global || self, factory(global.csso = {}));\n}(this, (function (exports) { 'use strict';\n\n    //\n    //                              list\n    //                            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    //             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500head \u2502\n    //             \u2502              \u2502 tail\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    //             \u2502              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2502\n    //             \u25bc                                    \u25bc\n    //            item        item        item        item\n    //          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    //  null \u25c0\u2500\u2500\u253c\u2500prev \u2502\u25c0\u2500\u2500\u2500\u253c\u2500prev \u2502\u25c0\u2500\u2500\u2500\u253c\u2500prev \u2502\u25c0\u2500\u2500\u2500\u253c\u2500prev \u2502\n    //          \u2502 next\u2500\u253c\u2500\u2500\u2500\u25b6\u2502 next\u2500\u253c\u2500\u2500\u2500\u25b6\u2502 next\u2500\u253c\u2500\u2500\u2500\u25b6\u2502 next\u2500\u253c\u2500\u2500\u25b6 null\n    //          \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2524    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2524    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2524    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n    //          \u2502 data \u2502    \u2502 data \u2502    \u2502 data \u2502    \u2502 data \u2502\n    //          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    //\n\n    function createItem(data) {\n        return {\n            prev: null,\n            next: null,\n            data: data\n        };\n    }\n\n    function allocateCursor(node, prev, next) {\n        var cursor;\n\n        if (cursors !== null) {\n            cursor = cursors;\n            cursors = cursors.cursor;\n            cursor.prev = prev;\n            cursor.next = next;\n            cursor.cursor = node.cursor;\n        } else {\n            cursor = {\n                prev: prev,\n                next: next,\n                cursor: node.cursor\n            };\n        }\n\n        node.cursor = cursor;\n\n        return cursor;\n    }\n\n    function releaseCursor(node) {\n        var cursor = node.cursor;\n\n        node.cursor = cursor.cursor;\n        cursor.prev = null;\n        cursor.next = null;\n        cursor.cursor = cursors;\n        cursors = cursor;\n    }\n\n    var cursors = null;\n    var List = function() {\n        this.cursor = null;\n        this.head = null;\n        this.tail = null;\n    };\n\n    List.createItem = createItem;\n    List.prototype.createItem = createItem;\n\n    List.prototype.updateCursors = function(prevOld, prevNew, nextOld, nextNew) {\n        var cursor = this.cursor;\n\n        while (cursor !== null) {\n            if (cursor.prev === prevOld) {\n                cursor.prev = prevNew;\n            }\n\n            if (cursor.next === nextOld) {\n                cursor.next = nextNew;\n            }\n\n            cursor = cursor.cursor;\n        }\n    };\n\n    List.prototype.getSize = function() {\n        var size = 0;\n        var cursor = this.head;\n\n        while (cursor) {\n            size++;\n            cursor = cursor.next;\n        }\n\n        return size;\n    };\n\n    List.prototype.fromArray = function(array) {\n        var cursor = null;\n\n        this.head = null;\n\n        for (var i = 0; i < array.length; i++) {\n            var item = createItem(array[i]);\n\n            if (cursor !== null) {\n                cursor.next = item;\n            } else {\n                this.head = item;\n            }\n\n            item.prev = cursor;\n            cursor = item;\n        }\n\n        this.tail = cursor;\n\n        return this;\n    };\n\n    List.prototype.toArray = function() {\n        var cursor = this.head;\n        var result = [];\n\n        while (cursor) {\n            result.push(cursor.data);\n            cursor = cursor.next;\n        }\n\n        return result;\n    };\n\n    List.prototype.toJSON = List.prototype.toArray;\n\n    List.prototype.isEmpty = function() {\n        return this.head === null;\n    };\n\n    List.prototype.first = function() {\n        return this.head && this.head.data;\n    };\n\n    List.prototype.last = function() {\n        return this.tail && this.tail.data;\n    };\n\n    List.prototype.each = function(fn, context) {\n        var item;\n\n        if (context === undefined) {\n            context = this;\n        }\n\n        // push cursor\n        var cursor = allocateCursor(this, null, this.head);\n\n        while (cursor.next !== null) {\n            item = cursor.next;\n            cursor.next = item.next;\n\n            fn.call(context, item.data, item, this);\n        }\n\n        // pop cursor\n        releaseCursor(this);\n    };\n\n    List.prototype.forEach = List.prototype.each;\n\n    List.prototype.eachRight = function(fn, context) {\n        var item;\n\n        if (context === undefined) {\n            context = this;\n        }\n\n        // push cursor\n        var cursor = allocateCursor(this, this.tail, null);\n\n        while (cursor.prev !== null) {\n            item = cursor.prev;\n            cursor.prev = item.prev;\n\n            fn.call(context, item.data, item, this);\n        }\n\n        // pop cursor\n        releaseCursor(this);\n    };\n\n    List.prototype.forEachRight = List.prototype.eachRight;\n\n    List.prototype.nextUntil = function(start, fn, context) {\n        if (start === null) {\n            return;\n        }\n\n        var item;\n\n        if (context === undefined) {\n            context = this;\n        }\n\n        // push cursor\n        var cursor = allocateCursor(this, null, start);\n\n        while (cursor.next !== null) {\n            item = cursor.next;\n            cursor.next = item.next;\n\n            if (fn.call(context, item.data, item, this)) {\n                break;\n            }\n        }\n\n        // pop cursor\n        releaseCursor(this);\n    };\n\n    List.prototype.prevUntil = function(start, fn, context) {\n        if (start === null) {\n            return;\n        }\n\n        var item;\n\n        if (context === undefined) {\n            context = this;\n        }\n\n        // push cursor\n        var cursor = allocateCursor(this, start, null);\n\n        while (cursor.prev !== null) {\n            item = cursor.prev;\n            cursor.prev = item.prev;\n\n            if (fn.call(context, item.data, item, this)) {\n                break;\n            }\n        }\n\n        // pop cursor\n        releaseCursor(this);\n    };\n\n    List.prototype.some = function(fn, context) {\n        var cursor = this.head;\n\n        if (context === undefined) {\n            context = this;\n        }\n\n        while (cursor !== null) {\n            if (fn.call(context, cursor.data, cursor, this)) {\n                return true;\n            }\n\n            cursor = cursor.next;\n        }\n\n        return false;\n    };\n\n    List.prototype.map = function(fn, context) {\n        var result = new List();\n        var cursor = this.head;\n\n        if (context === undefined) {\n            context = this;\n        }\n\n        while (cursor !== null) {\n            result.appendData(fn.call(context, cursor.data, cursor, this));\n            cursor = cursor.next;\n        }\n\n        return result;\n    };\n\n    List.prototype.filter = function(fn, context) {\n        var result = new List();\n        var cursor = this.head;\n\n        if (context === undefined) {\n            context = this;\n        }\n\n        while (cursor !== null) {\n            if (fn.call(context, cursor.data, cursor, this)) {\n                result.appendData(cursor.data);\n            }\n            cursor = cursor.next;\n        }\n\n        return result;\n    };\n\n    List.prototype.clear = function() {\n        this.head = null;\n        this.tail = null;\n    };\n\n    List.prototype.copy = function() {\n        var result = new List();\n        var cursor = this.head;\n\n        while (cursor !== null) {\n            result.insert(createItem(cursor.data));\n            cursor = cursor.next;\n        }\n\n        return result;\n    };\n\n    List.prototype.prepend = function(item) {\n        //      head\n        //    ^\n        // item\n        this.updateCursors(null, item, this.head, item);\n\n        // insert to the beginning of the list\n        if (this.head !== null) {\n            // new item <- first item\n            this.head.prev = item;\n\n            // new item -> first item\n            item.next = this.head;\n        } else {\n            // if list has no head, then it also has no tail\n            // in this case tail points to the new item\n            this.tail = item;\n        }\n\n        // head always points to new item\n        this.head = item;\n\n        return this;\n    };\n\n    List.prototype.prependData = function(data) {\n        return this.prepend(createItem(data));\n    };\n\n    List.prototype.append = function(item) {\n        return this.insert(item);\n    };\n\n    List.prototype.appendData = function(data) {\n        return this.insert(createItem(data));\n    };\n\n    List.prototype.insert = function(item, before) {\n        if (before !== undefined && before !== null) {\n            // prev   before\n            //      ^\n            //     item\n            this.updateCursors(before.prev, item, before, item);\n\n            if (before.prev === null) {\n                // insert to the beginning of list\n                if (this.head !== before) {\n                    throw new Error('before doesn\\'t belong to list');\n                }\n\n                // since head points to before therefore list doesn't empty\n                // no need to check tail\n                this.head = item;\n                before.prev = item;\n                item.next = before;\n\n                this.updateCursors(null, item);\n            } else {\n\n                // insert between two items\n                before.prev.next = item;\n                item.prev = before.prev;\n\n                before.prev = item;\n                item.next = before;\n            }\n        } else {\n            // tail\n            //      ^\n            //      item\n            this.updateCursors(this.tail, item, null, item);\n\n            // insert to the ending of the list\n            if (this.tail !== null) {\n                // last item -> new item\n                this.tail.next = item;\n\n                // last item <- new item\n                item.prev = this.tail;\n            } else {\n                // if list has no tail, then it also has no head\n                // in this case head points to new item\n                this.head = item;\n            }\n\n            // tail always points to new item\n            this.tail = item;\n        }\n\n        return this;\n    };\n\n    List.prototype.insertData = function(data, before) {\n        return this.insert(createItem(data), before);\n    };\n\n    List.prototype.remove = function(item) {\n        //      item\n        //       ^\n        // prev     next\n        this.updateCursors(item, item.prev, item, item.next);\n\n        if (item.prev !== null) {\n            item.prev.next = item.next;\n        } else {\n            if (this.head !== item) {\n                throw new Error('item doesn\\'t belong to list');\n            }\n\n            this.head = item.next;\n        }\n\n        if (item.next !== null) {\n            item.next.prev = item.prev;\n        } else {\n            if (this.tail !== item) {\n                throw new Error('item doesn\\'t belong to list');\n            }\n\n            this.tail = item.prev;\n        }\n\n        item.prev = null;\n        item.next = null;\n\n        return item;\n    };\n\n    List.prototype.push = function(data) {\n        this.insert(createItem(data));\n    };\n\n    List.prototype.pop = function() {\n        if (this.tail !== null) {\n            return this.remove(this.tail);\n        }\n    };\n\n    List.prototype.unshift = function(data) {\n        this.prepend(createItem(data));\n    };\n\n    List.prototype.shift = function() {\n        if (this.head !== null) {\n            return this.remove(this.head);\n        }\n    };\n\n    List.prototype.prependList = function(list) {\n        return this.insertList(list, this.head);\n    };\n\n    List.prototype.appendList = function(list) {\n        return this.insertList(list);\n    };\n\n    List.prototype.insertList = function(list, before) {\n        // ignore empty lists\n        if (list.head === null) {\n            return this;\n        }\n\n        if (before !== undefined && before !== null) {\n            this.updateCursors(before.prev, list.tail, before, list.head);\n\n            // insert in the middle of dist list\n            if (before.prev !== null) {\n                // before.prev <-> list.head\n                before.prev.next = list.head;\n                list.head.prev = before.prev;\n            } else {\n                this.head = list.head;\n            }\n\n            before.prev = list.tail;\n            list.tail.next = before;\n        } else {\n            this.updateCursors(this.tail, list.tail, null, list.head);\n\n            // insert to end of the list\n            if (this.tail !== null) {\n                // if destination list has a tail, then it also has a head,\n                // but head doesn't change\n\n                // dest tail -> source head\n                this.tail.next = list.head;\n\n                // dest tail <- source head\n                list.head.prev = this.tail;\n            } else {\n                // if list has no a tail, then it also has no a head\n                // in this case points head to new item\n                this.head = list.head;\n            }\n\n            // tail always start point to new item\n            this.tail = list.tail;\n        }\n\n        list.head = null;\n        list.tail = null;\n\n        return this;\n    };\n\n    List.prototype.replace = function(oldItem, newItemOrList) {\n        if ('head' in newItemOrList) {\n            this.insertList(newItemOrList, oldItem);\n        } else {\n            this.insert(newItemOrList, oldItem);\n        }\n\n        this.remove(oldItem);\n    };\n\n    var List_1 = List;\n\n    var createCustomError = function createCustomError(name, message) {\n        // use Object.create(), because some VMs prevent setting line/column otherwise\n        // (iOS Safari 10 even throws an exception)\n        var error = Object.create(SyntaxError.prototype);\n        var errorStack = new Error();\n\n        error.name = name;\n        error.message = message;\n\n        Object.defineProperty(error, 'stack', {\n            get: function() {\n                return (errorStack.stack || '').replace(/^(.+\\n){1,3}/, name + ': ' + message + '\\n');\n            }\n        });\n\n        return error;\n    };\n\n    var MAX_LINE_LENGTH = 100;\n    var OFFSET_CORRECTION = 60;\n    var TAB_REPLACEMENT = '    ';\n\n    function sourceFragment(error, extraLines) {\n        function processLines(start, end) {\n            return lines.slice(start, end).map(function(line, idx) {\n                var num = String(start + idx + 1);\n\n                while (num.length < maxNumLength) {\n                    num = ' ' + num;\n                }\n\n                return num + ' |' + line;\n            }).join('\\n');\n        }\n\n        var lines = error.source.split(/\\r\\n?|\\n|\\f/);\n        var line = error.line;\n        var column = error.column;\n        var startLine = Math.max(1, line - extraLines) - 1;\n        var endLine = Math.min(line + extraLines, lines.length + 1);\n        var maxNumLength = Math.max(4, String(endLine).length) + 1;\n        var cutLeft = 0;\n\n        // column correction according to replaced tab before column\n        column += (TAB_REPLACEMENT.length - 1) * (lines[line - 1].substr(0, column - 1).match(/\\t/g) || []).length;\n\n        if (column > MAX_LINE_LENGTH) {\n            cutLeft = column - OFFSET_CORRECTION + 3;\n            column = OFFSET_CORRECTION - 2;\n        }\n\n        for (var i = startLine; i <= endLine; i++) {\n            if (i >= 0 && i < lines.length) {\n                lines[i] = lines[i].replace(/\\t/g, TAB_REPLACEMENT);\n                lines[i] =\n                    (cutLeft > 0 && lines[i].length > cutLeft ? '\\u2026' : '') +\n                    lines[i].substr(cutLeft, MAX_LINE_LENGTH - 2) +\n                    (lines[i].length > cutLeft + MAX_LINE_LENGTH - 1 ? '\\u2026' : '');\n            }\n        }\n\n        return [\n            processLines(startLine, line),\n            new Array(column + maxNumLength + 2).join('-') + '^',\n            processLines(line, endLine)\n        ].filter(Boolean).join('\\n');\n    }\n\n    var SyntaxError$1 = function(message, source, offset, line, column) {\n        var error = createCustomError('SyntaxError', message);\n\n        error.source = source;\n        error.offset = offset;\n        error.line = line;\n        error.column = column;\n\n        error.sourceFragment = function(extraLines) {\n            return sourceFragment(error, isNaN(extraLines) ? 0 : extraLines);\n        };\n        Object.defineProperty(error, 'formattedMessage', {\n            get: function() {\n                return (\n                    'Parse error: ' + error.message + '\\n' +\n                    sourceFragment(error, 2)\n                );\n            }\n        });\n\n        // for backward capability\n        error.parseError = {\n            offset: offset,\n            line: line,\n            column: column\n        };\n\n        return error;\n    };\n\n    var _SyntaxError = SyntaxError$1;\n\n    // CSS Syntax Module Level 3\n    // https://www.w3.org/TR/css-syntax-3/\n    var TYPE = {\n        EOF: 0,                 // <EOF-token>\n        Ident: 1,               // <ident-token>\n        Function: 2,            // <function-token>\n        AtKeyword: 3,           // <at-keyword-token>\n        Hash: 4,                // <hash-token>\n        String: 5,              // <string-token>\n        BadString: 6,           // <bad-string-token>\n        Url: 7,                 // <url-token>\n        BadUrl: 8,              // <bad-url-token>\n        Delim: 9,               // <delim-token>\n        Number: 10,             // <number-token>\n        Percentage: 11,         // <percentage-token>\n        Dimension: 12,          // <dimension-token>\n        WhiteSpace: 13,         // <whitespace-token>\n        CDO: 14,                // <CDO-token>\n        CDC: 15,                // <CDC-token>\n        Colon: 16,              // <colon-token>     :\n        Semicolon: 17,          // <semicolon-token> ;\n        Comma: 18,              // <comma-token>     ,\n        LeftSquareBracket: 19,  // <[-token>\n        RightSquareBracket: 20, // <]-token>\n        LeftParenthesis: 21,    // <(-token>\n        RightParenthesis: 22,   // <)-token>\n        LeftCurlyBracket: 23,   // <{-token>\n        RightCurlyBracket: 24,  // <}-token>\n        Comment: 25\n    };\n\n    var NAME = Object.keys(TYPE).reduce(function(result, key) {\n        result[TYPE[key]] = key;\n        return result;\n    }, {});\n\n    var _const = {\n        TYPE: TYPE,\n        NAME: NAME\n    };\n\n    var EOF = 0;\n\n    // https://drafts.csswg.org/css-syntax-3/\n    // \u00a7 4.2. Definitions\n\n    // digit\n    // A code point between U+0030 DIGIT ZERO (0) and U+0039 DIGIT NINE (9).\n    function isDigit(code) {\n        return code >= 0x0030 && code <= 0x0039;\n    }\n\n    // hex digit\n    // A digit, or a code point between U+0041 LATIN CAPITAL LETTER A (A) and U+0046 LATIN CAPITAL LETTER F (F),\n    // or a code point between U+0061 LATIN SMALL LETTER A (a) and U+0066 LATIN SMALL LETTER F (f).\n    function isHexDigit(code) {\n        return (\n            isDigit(code) || // 0 .. 9\n            (code >= 0x0041 && code <= 0x0046) || // A .. F\n            (code >= 0x0061 && code <= 0x0066)    // a .. f\n        );\n    }\n\n    // uppercase letter\n    // A code point between U+0041 LATIN CAPITAL LETTER A (A) and U+005A LATIN CAPITAL LETTER Z (Z).\n    function isUppercaseLetter(code) {\n        return code >= 0x0041 && code <= 0x005A;\n    }\n\n    // lowercase letter\n    // A code point between U+0061 LATIN SMALL LETTER A (a) and U+007A LATIN SMALL LETTER Z (z).\n    function isLowercaseLetter(code) {\n        return code >= 0x0061 && code <= 0x007A;\n    }\n\n    // letter\n    // An uppercase letter or a lowercase letter.\n    function isLetter(code) {\n        return isUppercaseLetter(code) || isLowercaseLetter(code);\n    }\n\n    // non-ASCII code point\n    // A code point with a value equal to or greater than U+0080 <control>.\n    function isNonAscii(code) {\n        return code >= 0x0080;\n    }\n\n    // name-start code point\n    // A letter, a non-ASCII code point, or U+005F LOW LINE (_).\n    function isNameStart(code) {\n        return isLetter(code) || isNonAscii(code) || code === 0x005F;\n    }\n\n    // name code point\n    // A name-start code point, a digit, or U+002D HYPHEN-MINUS (-).\n    function isName(code) {\n        return isNameStart(code) || isDigit(code) || code === 0x002D;\n    }\n\n    // non-printable code point\n    // A code point between U+0000 NULL and U+0008 BACKSPACE, or U+000B LINE TABULATION,\n    // or a code point between U+000E SHIFT OUT and U+001F INFORMATION SEPARATOR ONE, or U+007F DELETE.\n    function isNonPrintable(code) {\n        return (\n            (code >= 0x0000 && code <= 0x0008) ||\n            (code === 0x000B) ||\n            (code >= 0x000E && code <= 0x001F) ||\n            (code === 0x007F)\n        );\n    }\n\n    // newline\n    // U+000A LINE FEED. Note that U+000D CARRIAGE RETURN and U+000C FORM FEED are not included in this definition,\n    // as they are converted to U+000A LINE FEED during preprocessing.\n    // TODO: we doesn't do a preprocessing, so check a code point for U+000D CARRIAGE RETURN and U+000C FORM FEED\n    function isNewline(code) {\n        return code === 0x000A || code === 0x000D || code === 0x000C;\n    }\n\n    // whitespace\n    // A newline, U+0009 CHARACTER TABULATION, or U+0020 SPACE.\n    function isWhiteSpace(code) {\n        return isNewline(code) || code === 0x0020 || code === 0x0009;\n    }\n\n    // \u00a7 4.3.8. Check if two code points are a valid escape\n    function isValidEscape(first, second) {\n        // If the first code point is not U+005C REVERSE SOLIDUS (\\), return false.\n        if (first !== 0x005C) {\n            return false;\n        }\n\n        // Otherwise, if the second code point is a newline or EOF, return false.\n        if (isNewline(second) || second === EOF) {\n            return false;\n        }\n\n        // Otherwise, return true.\n        return true;\n    }\n\n    // \u00a7 4.3.9. Check if three code points would start an identifier\n    function isIdentifierStart(first, second, third) {\n        // Look at the first code point:\n\n        // U+002D HYPHEN-MINUS\n        if (first === 0x002D) {\n            // If the second code point is a name-start code point or a U+002D HYPHEN-MINUS,\n            // or the second and third code points are a valid escape, return true. Otherwise, return false.\n            return (\n                isNameStart(second) ||\n                second === 0x002D ||\n                isValidEscape(second, third)\n            );\n        }\n\n        // name-start code point\n        if (isNameStart(first)) {\n            // Return true.\n            return true;\n        }\n\n        // U+005C REVERSE SOLIDUS (\\)\n        if (first === 0x005C) {\n            // If the first and second code points are a valid escape, return true. Otherwise, return false.\n            return isValidEscape(first, second);\n        }\n\n        // anything else\n        // Return false.\n        return false;\n    }\n\n    // \u00a7 4.3.10. Check if three code points would start a number\n    function isNumberStart(first, second, third) {\n        // Look at the first code point:\n\n        // U+002B PLUS SIGN (+)\n        // U+002D HYPHEN-MINUS (-)\n        if (first === 0x002B || first === 0x002D) {\n            // If the second code point is a digit, return true.\n            if (isDigit(second)) {\n                return 2;\n            }\n\n            // Otherwise, if the second code point is a U+002E FULL STOP (.)\n            // and the third code point is a digit, return true.\n            // Otherwise, return false.\n            return second === 0x002E && isDigit(third) ? 3 : 0;\n        }\n\n        // U+002E FULL STOP (.)\n        if (first === 0x002E) {\n            // If the second code point is a digit, return true. Otherwise, return false.\n            return isDigit(second) ? 2 : 0;\n        }\n\n        // digit\n        if (isDigit(first)) {\n            // Return true.\n            return 1;\n        }\n\n        // anything else\n        // Return false.\n        return 0;\n    }\n\n    //\n    // Misc\n    //\n\n    // detect BOM (https://en.wikipedia.org/wiki/Byte_order_mark)\n    function isBOM(code) {\n        // UTF-16BE\n        if (code === 0xFEFF) {\n            return 1;\n        }\n\n        // UTF-16LE\n        if (code === 0xFFFE) {\n            return 1;\n        }\n\n        return 0;\n    }\n\n    // Fast code category\n    //\n    // https://drafts.csswg.org/css-syntax/#tokenizer-definitions\n    // > non-ASCII code point\n    // >   A code point with a value equal to or greater than U+0080 <control>\n    // > name-start code point\n    // >   A letter, a non-ASCII code point, or U+005F LOW LINE (_).\n    // > name code point\n    // >   A name-start code point, a digit, or U+002D HYPHEN-MINUS (-)\n    // That means only ASCII code points has a special meaning and we define a maps for 0..127 codes only\n    var CATEGORY = new Array(0x80);\n    charCodeCategory.Eof = 0x80;\n    charCodeCategory.WhiteSpace = 0x82;\n    charCodeCategory.Digit = 0x83;\n    charCodeCategory.NameStart = 0x84;\n    charCodeCategory.NonPrintable = 0x85;\n\n    for (var i = 0; i < CATEGORY.length; i++) {\n        switch (true) {\n            case isWhiteSpace(i):\n                CATEGORY[i] = charCodeCategory.WhiteSpace;\n                break;\n\n            case isDigit(i):\n                CATEGORY[i] = charCodeCategory.Digit;\n                break;\n\n            case isNameStart(i):\n                CATEGORY[i] = charCodeCategory.NameStart;\n                break;\n\n            case isNonPrintable(i):\n                CATEGORY[i] = charCodeCategory.NonPrintable;\n                break;\n\n            default:\n                CATEGORY[i] = i || charCodeCategory.Eof;\n        }\n    }\n\n    function charCodeCategory(code) {\n        return code < 0x80 ? CATEGORY[code] : charCodeCategory.NameStart;\n    }\n    var charCodeDefinitions = {\n        isDigit: isDigit,\n        isHexDigit: isHexDigit,\n        isUppercaseLetter: isUppercaseLetter,\n        isLowercaseLetter: isLowercaseLetter,\n        isLetter: isLetter,\n        isNonAscii: isNonAscii,\n        isNameStart: isNameStart,\n        isName: isName,\n        isNonPrintable: isNonPrintable,\n        isNewline: isNewline,\n        isWhiteSpace: isWhiteSpace,\n        isValidEscape: isValidEscape,\n        isIdentifierStart: isIdentifierStart,\n        isNumberStart: isNumberStart,\n\n        isBOM: isBOM,\n        charCodeCategory: charCodeCategory\n    };\n\n    var isDigit$1 = charCodeDefinitions.isDigit;\n    var isHexDigit$1 = charCodeDefinitions.isHexDigit;\n    var isUppercaseLetter$1 = charCodeDefinitions.isUppercaseLetter;\n    var isName$1 = charCodeDefinitions.isName;\n    var isWhiteSpace$1 = charCodeDefinitions.isWhiteSpace;\n    var isValidEscape$1 = charCodeDefinitions.isValidEscape;\n\n    function getCharCode(source, offset) {\n        return offset < source.length ? source.charCodeAt(offset) : 0;\n    }\n\n    function getNewlineLength(source, offset, code) {\n        if (code === 13 /* \\r */ && getCharCode(source, offset + 1) === 10 /* \\n */) {\n            return 2;\n        }\n\n        return 1;\n    }\n\n    function cmpChar(testStr, offset, referenceCode) {\n        var code = testStr.charCodeAt(offset);\n\n        // code.toLowerCase() for A..Z\n        if (isUppercaseLetter$1(code)) {\n            code = code | 32;\n        }\n\n        return code === referenceCode;\n    }\n\n    function cmpStr(testStr, start, end, referenceStr) {\n        if (end - start !== referenceStr.length) {\n            return false;\n        }\n\n        if (start < 0 || end > testStr.length) {\n            return false;\n        }\n\n        for (var i = start; i < end; i++) {\n            var testCode = testStr.charCodeAt(i);\n            var referenceCode = referenceStr.charCodeAt(i - start);\n\n            // testCode.toLowerCase() for A..Z\n            if (isUppercaseLetter$1(testCode)) {\n                testCode = testCode | 32;\n            }\n\n            if (testCode !== referenceCode) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function findWhiteSpaceStart(source, offset) {\n        for (; offset >= 0; offset--) {\n            if (!isWhiteSpace$1(source.charCodeAt(offset))) {\n                break;\n            }\n        }\n\n        return offset + 1;\n    }\n\n    function findWhiteSpaceEnd(source, offset) {\n        for (; offset < source.length; offset++) {\n            if (!isWhiteSpace$1(source.charCodeAt(offset))) {\n                break;\n            }\n        }\n\n        return offset;\n    }\n\n    function findDecimalNumberEnd(source, offset) {\n        for (; offset < source.length; offset++) {\n            if (!isDigit$1(source.charCodeAt(offset))) {\n                break;\n            }\n        }\n\n        return offset;\n    }\n\n    // \u00a7 4.3.7. Consume an escaped code point\n    function consumeEscaped(source, offset) {\n        // It assumes that the U+005C REVERSE SOLIDUS (\\) has already been consumed and\n        // that the next input code point has already been verified to be part of a valid escape.\n        offset += 2;\n\n        // hex digit\n        if (isHexDigit$1(getCharCode(source, offset - 1))) {\n            // Consume as many hex digits as possible, but no more than 5.\n            // Note that this means 1-6 hex digits have been consumed in total.\n            for (var maxOffset = Math.min(source.length, offset + 5); offset < maxOffset; offset++) {\n                if (!isHexDigit$1(getCharCode(source, offset))) {\n                    break;\n                }\n            }\n\n            // If the next input code point is whitespace, consume it as well.\n            var code = getCharCode(source, offset);\n            if (isWhiteSpace$1(code)) {\n                offset += getNewlineLength(source, offset, code);\n            }\n        }\n\n        return offset;\n    }\n\n    // \u00a74.3.11. Consume a name\n    // Note: This algorithm does not do the verification of the first few code points that are necessary\n    // to ensure the returned code points would constitute an <ident-token>. If that is the intended use,\n    // ensure that the stream starts with an identifier before calling this algorithm.\n    function consumeName(source, offset) {\n        // Let result initially be an empty string.\n        // Repeatedly consume the next input code point from the stream:\n        for (; offset < source.length; offset++) {\n            var code = source.charCodeAt(offset);\n\n            // name code point\n            if (isName$1(code)) {\n                // Append the code point to result.\n                continue;\n            }\n\n            // the stream starts with a valid escape\n            if (isValidEscape$1(code, getCharCode(source, offset + 1))) {\n                // Consume an escaped code point. Append the returned code point to result.\n                offset = consumeEscaped(source, offset) - 1;\n                continue;\n            }\n\n            // anything else\n            // Reconsume the current input code point. Return result.\n            break;\n        }\n\n        return offset;\n    }\n\n    // \u00a74.3.12. Consume a number\n    function consumeNumber(source, offset) {\n        var code = source.charCodeAt(offset);\n\n        // 2. If the next input code point is U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-),\n        // consume it and append it to repr.\n        if (code === 0x002B || code === 0x002D) {\n            code = source.charCodeAt(offset += 1);\n        }\n\n        // 3. While the next input code point is a digit, consume it and append it to repr.\n        if (isDigit$1(code)) {\n            offset = findDecimalNumberEnd(source, offset + 1);\n            code = source.charCodeAt(offset);\n        }\n\n        // 4. If the next 2 input code points are U+002E FULL STOP (.) followed by a digit, then:\n        if (code === 0x002E && isDigit$1(source.charCodeAt(offset + 1))) {\n            // 4.1 Consume them.\n            // 4.2 Append them to repr.\n            code = source.charCodeAt(offset += 2);\n\n            // 4.3 Set type to \"number\".\n            // TODO\n\n            // 4.4 While the next input code point is a digit, consume it and append it to repr.\n\n            offset = findDecimalNumberEnd(source, offset);\n        }\n\n        // 5. If the next 2 or 3 input code points are U+0045 LATIN CAPITAL LETTER E (E)\n        // or U+0065 LATIN SMALL LETTER E (e), ... , followed by a digit, then:\n        if (cmpChar(source, offset, 101 /* e */)) {\n            var sign = 0;\n            code = source.charCodeAt(offset + 1);\n\n            // ... optionally followed by U+002D HYPHEN-MINUS (-) or U+002B PLUS SIGN (+) ...\n            if (code === 0x002D || code === 0x002B) {\n                sign = 1;\n                code = source.charCodeAt(offset + 2);\n            }\n\n            // ... followed by a digit\n            if (isDigit$1(code)) {\n                // 5.1 Consume them.\n                // 5.2 Append them to repr.\n\n                // 5.3 Set type to \"number\".\n                // TODO\n\n                // 5.4 While the next input code point is a digit, consume it and append it to repr.\n                offset = findDecimalNumberEnd(source, offset + 1 + sign + 1);\n            }\n        }\n\n        return offset;\n    }\n\n    // \u00a7 4.3.14. Consume the remnants of a bad url\n    // ... its sole use is to consume enough of the input stream to reach a recovery point\n    // where normal tokenizing can resume.\n    function consumeBadUrlRemnants(source, offset) {\n        // Repeatedly consume the next input code point from the stream:\n        for (; offset < source.length; offset++) {\n            var code = source.charCodeAt(offset);\n\n            // U+0029 RIGHT PARENTHESIS ())\n            // EOF\n            if (code === 0x0029) {\n                // Return.\n                offset++;\n                break;\n            }\n\n            if (isValidEscape$1(code, getCharCode(source, offset + 1))) {\n                // Consume an escaped code point.\n                // Note: This allows an escaped right parenthesis (\"\\)\") to be encountered\n                // without ending the <bad-url-token>. This is otherwise identical to\n                // the \"anything else\" clause.\n                offset = consumeEscaped(source, offset);\n            }\n        }\n\n        return offset;\n    }\n\n    var utils = {\n        consumeEscaped: consumeEscaped,\n        consumeName: consumeName,\n        consumeNumber: consumeNumber,\n        consumeBadUrlRemnants: consumeBadUrlRemnants,\n\n        cmpChar: cmpChar,\n        cmpStr: cmpStr,\n\n        getNewlineLength: getNewlineLength,\n        findWhiteSpaceStart: findWhiteSpaceStart,\n        findWhiteSpaceEnd: findWhiteSpaceEnd\n    };\n\n    var TYPE$1 = _const.TYPE;\n    var NAME$1 = _const.NAME;\n\n\n    var cmpStr$1 = utils.cmpStr;\n\n    var EOF$1 = TYPE$1.EOF;\n    var WHITESPACE = TYPE$1.WhiteSpace;\n    var COMMENT = TYPE$1.Comment;\n\n    var OFFSET_MASK = 0x00FFFFFF;\n    var TYPE_SHIFT = 24;\n\n    var TokenStream = function() {\n        this.offsetAndType = null;\n        this.balance = null;\n\n        this.reset();\n    };\n\n    TokenStream.prototype = {\n        reset: function() {\n            this.eof = false;\n            this.tokenIndex = -1;\n            this.tokenType = 0;\n            this.tokenStart = this.firstCharOffset;\n            this.tokenEnd = this.firstCharOffset;\n        },\n\n        lookupType: function(offset) {\n            offset += this.tokenIndex;\n\n            if (offset < this.tokenCount) {\n                return this.offsetAndType[offset] >> TYPE_SHIFT;\n            }\n\n            return EOF$1;\n        },\n        lookupOffset: function(offset) {\n            offset += this.tokenIndex;\n\n            if (offset < this.tokenCount) {\n                return this.offsetAndType[offset - 1] & OFFSET_MASK;\n            }\n\n            return this.source.length;\n        },\n        lookupValue: function(offset, referenceStr) {\n            offset += this.tokenIndex;\n\n            if (offset < this.tokenCount) {\n                return cmpStr$1(\n                    this.source,\n                    this.offsetAndType[offset - 1] & OFFSET_MASK,\n                    this.offsetAndType[offset] & OFFSET_MASK,\n                    referenceStr\n                );\n            }\n\n            return false;\n        },\n        getTokenStart: function(tokenIndex) {\n            if (tokenIndex === this.tokenIndex) {\n                return this.tokenStart;\n            }\n\n            if (tokenIndex > 0) {\n                return tokenIndex < this.tokenCount\n                    ? this.offsetAndType[tokenIndex - 1] & OFFSET_MASK\n                    : this.offsetAndType[this.tokenCount] & OFFSET_MASK;\n            }\n\n            return this.firstCharOffset;\n        },\n\n        // TODO: -> skipUntilBalanced\n        getRawLength: function(startToken, mode) {\n            var cursor = startToken;\n            var balanceEnd;\n            var offset = this.offsetAndType[Math.max(cursor - 1, 0)] & OFFSET_MASK;\n            var type;\n\n            loop:\n                for (; cursor < this.tokenCount; cursor++) {\n                    balanceEnd = this.balance[cursor];\n\n                    // stop scanning on balance edge that points to offset before start token\n                    if (balanceEnd < startToken) {\n                        break loop;\n                    }\n\n                    type = this.offsetAndType[cursor] >> TYPE_SHIFT;\n\n                    // check token is stop type\n                    switch (mode(type, this.source, offset)) {\n                        case 1:\n                            break loop;\n\n                        case 2:\n                            cursor++;\n                            break loop;\n\n                        default:\n                            offset = this.offsetAndType[cursor] & OFFSET_MASK;\n\n                            // fast forward to the end of balanced block\n                            if (this.balance[balanceEnd] === cursor) {\n                                cursor = balanceEnd;\n                            }\n                    }\n                }\n\n            return cursor - this.tokenIndex;\n        },\n        isBalanceEdge: function(pos) {\n            return this.balance[this.tokenIndex] < pos;\n        },\n        isDelim: function(code, offset) {\n            if (offset) {\n                return (\n                    this.lookupType(offset) === TYPE$1.Delim &&\n                    this.source.charCodeAt(this.lookupOffset(offset)) === code\n                );\n            }\n\n            return (\n                this.tokenType === TYPE$1.Delim &&\n                this.source.charCodeAt(this.tokenStart) === code\n            );\n        },\n\n        getTokenValue: function() {\n            return this.source.substring(this.tokenStart, this.tokenEnd);\n        },\n        getTokenLength: function() {\n            return this.tokenEnd - this.tokenStart;\n        },\n        substrToCursor: function(start) {\n            return this.source.substring(start, this.tokenStart);\n        },\n\n        skipWS: function() {\n            for (var i = this.tokenIndex, skipTokenCount = 0; i < this.tokenCount; i++, skipTokenCount++) {\n                if ((this.offsetAndType[i] >> TYPE_SHIFT) !== WHITESPACE) {\n                    break;\n                }\n            }\n\n            if (skipTokenCount > 0) {\n                this.skip(skipTokenCount);\n            }\n        },\n        skipSC: function() {\n            while (this.tokenType === WHITESPACE || this.tokenType === COMMENT) {\n                this.next();\n            }\n        },\n        skip: function(tokenCount) {\n            var next = this.tokenIndex + tokenCount;\n\n            if (next < this.tokenCount) {\n                this.tokenIndex = next;\n                this.tokenStart = this.offsetAndType[next - 1] & OFFSET_MASK;\n                next = this.offsetAndType[next];\n                this.tokenType = next >> TYPE_SHIFT;\n                this.tokenEnd = next & OFFSET_MASK;\n            } else {\n                this.tokenIndex = this.tokenCount;\n                this.next();\n            }\n        },\n        next: function() {\n            var next = this.tokenIndex + 1;\n\n            if (next < this.tokenCount) {\n                this.tokenIndex = next;\n                this.tokenStart = this.tokenEnd;\n                next = this.offsetAndType[next];\n                this.tokenType = next >> TYPE_SHIFT;\n                this.tokenEnd = next & OFFSET_MASK;\n            } else {\n                this.tokenIndex = this.tokenCount;\n                this.eof = true;\n                this.tokenType = EOF$1;\n                this.tokenStart = this.tokenEnd = this.source.length;\n            }\n        },\n\n        dump: function() {\n            var offset = this.firstCharOffset;\n\n            return Array.prototype.slice.call(this.offsetAndType, 0, this.tokenCount).map(function(item, idx) {\n                var start = offset;\n                var end = item & OFFSET_MASK;\n\n                offset = end;\n\n                return {\n                    idx: idx,\n                    type: NAME$1[item >> TYPE_SHIFT],\n                    chunk: this.source.substring(start, end),\n                    balance: this.balance[idx]\n                };\n            }, this);\n        }\n    };\n\n    var TokenStream_1 = TokenStream;\n\n    function noop(value) {\n        return value;\n    }\n\n    function generateMultiplier(multiplier) {\n        if (multiplier.min === 0 && multiplier.max === 0) {\n            return '*';\n        }\n\n        if (multiplier.min === 0 && multiplier.max === 1) {\n            return '?';\n        }\n\n        if (multiplier.min === 1 && multiplier.max === 0) {\n            return multiplier.comma ? '#' : '+';\n        }\n\n        if (multiplier.min === 1 && multiplier.max === 1) {\n            return '';\n        }\n\n        return (\n            (multiplier.comma ? '#' : '') +\n            (multiplier.min === multiplier.max\n                    ? '{' + multiplier.min + '}'\n                    : '{' + multiplier.min + ',' + (multiplier.max !== 0 ? multiplier.max : '') + '}'\n            )\n        );\n    }\n\n    function generateTypeOpts(node) {\n        switch (node.type) {\n            case 'Range':\n                return (\n                    ' [' +\n                    (node.min === null ? '-\u221e' : node.min) +\n                    ',' +\n                    (node.max === null ? '\u221e' : node.max) +\n                    ']'\n                );\n\n            default:\n                throw new Error('Unknown node type `' + node.type + '`');\n        }\n    }\n\n    function generateSequence(node, decorate, forceBraces, compact) {\n        var combinator = node.combinator === ' ' || compact ? node.combinator : ' ' + node.combinator + ' ';\n        var result = node.terms.map(function(term) {\n            return generate(term, decorate, forceBraces, compact);\n        }).join(combinator);\n\n        if (node.explicit || forceBraces) {\n            result = (compact || result[0] === ',' ? '[' : '[ ') + result + (compact ? ']' : ' ]');\n        }\n\n        return result;\n    }\n\n    function generate(node, decorate, forceBraces, compact) {\n        var result;\n\n        switch (node.type) {\n            case 'Group':\n                result =\n                    generateSequence(node, decorate, forceBraces, compact) +\n                    (node.disallowEmpty ? '!' : '');\n                break;\n\n            case 'Multiplier':\n                // return since node is a composition\n                return (\n                    generate(node.term, decorate, forceBraces, compact) +\n                    decorate(generateMultiplier(node), node)\n                );\n\n            case 'Type':\n                result = '<' + node.name + (node.opts ? decorate(generateTypeOpts(node.opts), node.opts) : '') + '>';\n                break;\n\n            case 'Property':\n                result = '<\\'' + node.name + '\\'>';\n                break;\n\n            case 'Keyword':\n                result = node.name;\n                break;\n\n            case 'AtKeyword':\n                result = '@' + node.name;\n                break;\n\n            case 'Function':\n                result = node.name + '(';\n                break;\n\n            case 'String':\n            case 'Token':\n                result = node.value;\n                break;\n\n            case 'Comma':\n                result = ',';\n                break;\n\n            default:\n                throw new Error('Unknown node type `' + node.type + '`');\n        }\n\n        return decorate(result, node);\n    }\n\n    var generate_1 = function(node, options) {\n        var decorate = noop;\n        var forceBraces = false;\n        var compact = false;\n\n        if (typeof options === 'function') {\n            decorate = options;\n        } else if (options) {\n            forceBraces = Boolean(options.forceBraces);\n            compact = Boolean(options.compact);\n            if (typeof options.decorate === 'function') {\n                decorate = options.decorate;\n            }\n        }\n\n        return generate(node, decorate, forceBraces, compact);\n    };\n\n    function fromMatchResult(matchResult) {\n        var tokens = matchResult.tokens;\n        var longestMatch = matchResult.longestMatch;\n        var node = longestMatch < tokens.length ? tokens[longestMatch].node : null;\n        var mismatchOffset = -1;\n        var entries = 0;\n        var css = '';\n\n        for (var i = 0; i < tokens.length; i++) {\n            if (i === longestMatch) {\n                mismatchOffset = css.length;\n            }\n\n            if (node !== null && tokens[i].node === node) {\n                if (i <= longestMatch) {\n                    entries++;\n                } else {\n                    entries = 0;\n                }\n            }\n\n            css += tokens[i].value;\n        }\n\n        return {\n            node: node,\n            css: css,\n            mismatchOffset: mismatchOffset === -1 ? css.length : mismatchOffset,\n            last: node === null || entries > 1\n        };\n    }\n\n    function getLocation(node, point) {\n        var loc = node && node.loc && node.loc[point];\n\n        if (loc) {\n            return {\n                offset: loc.offset,\n                line: loc.line,\n                column: loc.column\n            };\n        }\n\n        return null;\n    }\n\n    var SyntaxReferenceError = function(type, referenceName) {\n        var error = createCustomError(\n            'SyntaxReferenceError',\n            type + (referenceName ? ' `' + referenceName + '`' : '')\n        );\n\n        error.reference = referenceName;\n\n        return error;\n    };\n\n    var MatchError = function(message, syntax, node, matchResult) {\n        var error = createCustomError('SyntaxMatchError', message);\n        var details = fromMatchResult(matchResult);\n        var mismatchOffset = details.mismatchOffset || 0;\n        var badNode = details.node || node;\n        var end = getLocation(badNode, 'end');\n        var start = details.last ? end : getLocation(badNode, 'start');\n        var css = details.css;\n\n        error.rawMessage = message;\n        error.syntax = syntax ? generate_1(syntax) : '<generic>';\n        error.css = css;\n        error.mismatchOffset = mismatchOffset;\n        error.loc = {\n            source: (badNode && badNode.loc && badNode.loc.source) || '<unknown>',\n            start: start,\n            end: end\n        };\n        error.line = start ? start.line : undefined;\n        error.column = start ? start.column : undefined;\n        error.offset = start ? start.offset : undefined;\n        error.message = message + '\\n' +\n            '  syntax: ' + error.syntax + '\\n' +\n            '   value: ' + (error.css || '<empty string>') + '\\n' +\n            '  --------' + new Array(error.mismatchOffset + 1).join('-') + '^';\n\n        return error;\n    };\n\n    var error = {\n        SyntaxReferenceError: SyntaxReferenceError,\n        MatchError: MatchError\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var keywords = Object.create(null);\n    var properties = Object.create(null);\n    var HYPHENMINUS = 45; // '-'.charCodeAt()\n\n    function isCustomProperty(str, offset) {\n        offset = offset || 0;\n\n        return str.length - offset >= 2 &&\n            str.charCodeAt(offset) === HYPHENMINUS &&\n            str.charCodeAt(offset + 1) === HYPHENMINUS;\n    }\n\n    function getVendorPrefix(str, offset) {\n        offset = offset || 0;\n\n        // verdor prefix should be at least 3 chars length\n        if (str.length - offset >= 3) {\n            // vendor prefix starts with hyper minus following non-hyper minus\n            if (str.charCodeAt(offset) === HYPHENMINUS &&\n                str.charCodeAt(offset + 1) !== HYPHENMINUS) {\n                // vendor prefix should contain a hyper minus at the ending\n                var secondDashIndex = str.indexOf('-', offset + 2);\n\n                if (secondDashIndex !== -1) {\n                    return str.substring(offset, secondDashIndex + 1);\n                }\n            }\n        }\n\n        return '';\n    }\n\n    function getKeywordDescriptor(keyword) {\n        if (hasOwnProperty.call(keywords, keyword)) {\n            return keywords[keyword];\n        }\n\n        var name = keyword.toLowerCase();\n\n        if (hasOwnProperty.call(keywords, name)) {\n            return keywords[keyword] = keywords[name];\n        }\n\n        var custom = isCustomProperty(name, 0);\n        var vendor = !custom ? getVendorPrefix(name, 0) : '';\n\n        return keywords[keyword] = Object.freeze({\n            basename: name.substr(vendor.length),\n            name: name,\n            vendor: vendor,\n            prefix: vendor,\n            custom: custom\n        });\n    }\n\n    function getPropertyDescriptor(property) {\n        if (hasOwnProperty.call(properties, property)) {\n            return properties[property];\n        }\n\n        var name = property;\n        var hack = property[0];\n\n        if (hack === '/') {\n            hack = property[1] === '/' ? '//' : '/';\n        } else if (hack !== '_' &&\n            hack !== '*' &&\n            hack !== '$' &&\n            hack !== '#' &&\n            hack !== '+' &&\n            hack !== '&') {\n            hack = '';\n        }\n\n        var custom = isCustomProperty(name, hack.length);\n\n        // re-use result when possible (the same as for lower case)\n        if (!custom) {\n            name = name.toLowerCase();\n            if (hasOwnProperty.call(properties, name)) {\n                return properties[property] = properties[name];\n            }\n        }\n\n        var vendor = !custom ? getVendorPrefix(name, hack.length) : '';\n        var prefix = name.substr(0, hack.length + vendor.length);\n\n        return properties[property] = Object.freeze({\n            basename: name.substr(prefix.length),\n            name: name.substr(hack.length),\n            hack: hack,\n            vendor: vendor,\n            prefix: prefix,\n            custom: custom\n        });\n    }\n\n    var names = {\n        keyword: getKeywordDescriptor,\n        property: getPropertyDescriptor,\n        isCustomProperty: isCustomProperty,\n        vendorPrefix: getVendorPrefix\n    };\n\n    var MIN_SIZE = 16 * 1024;\n    var SafeUint32Array = typeof Uint32Array !== 'undefined' ? Uint32Array : Array; // fallback on Array when TypedArray is not supported\n\n    var adoptBuffer = function adoptBuffer(buffer, size) {\n        if (buffer === null || buffer.length < size) {\n            return new SafeUint32Array(Math.max(size + 1024, MIN_SIZE));\n        }\n\n        return buffer;\n    };\n\n    var TYPE$2 = _const.TYPE;\n\n\n    var isNewline$1 = charCodeDefinitions.isNewline;\n    var isName$2 = charCodeDefinitions.isName;\n    var isValidEscape$2 = charCodeDefinitions.isValidEscape;\n    var isNumberStart$1 = charCodeDefinitions.isNumberStart;\n    var isIdentifierStart$1 = charCodeDefinitions.isIdentifierStart;\n    var charCodeCategory$1 = charCodeDefinitions.charCodeCategory;\n    var isBOM$1 = charCodeDefinitions.isBOM;\n\n\n    var cmpStr$2 = utils.cmpStr;\n    var getNewlineLength$1 = utils.getNewlineLength;\n    var findWhiteSpaceEnd$1 = utils.findWhiteSpaceEnd;\n    var consumeEscaped$1 = utils.consumeEscaped;\n    var consumeName$1 = utils.consumeName;\n    var consumeNumber$1 = utils.consumeNumber;\n    var consumeBadUrlRemnants$1 = utils.consumeBadUrlRemnants;\n\n    var OFFSET_MASK$1 = 0x00FFFFFF;\n    var TYPE_SHIFT$1 = 24;\n\n    function tokenize(source, stream) {\n        function getCharCode(offset) {\n            return offset < sourceLength ? source.charCodeAt(offset) : 0;\n        }\n\n        // \u00a7 4.3.3. Consume a numeric token\n        function consumeNumericToken() {\n            // Consume a number and let number be the result.\n            offset = consumeNumber$1(source, offset);\n\n            // If the next 3 input code points would start an identifier, then:\n            if (isIdentifierStart$1(getCharCode(offset), getCharCode(offset + 1), getCharCode(offset + 2))) {\n                // Create a <dimension-token> with the same value and type flag as number, and a unit set initially to the empty string.\n                // Consume a name. Set the <dimension-token>\u2019s unit to the returned value.\n                // Return the <dimension-token>.\n                type = TYPE$2.Dimension;\n                offset = consumeName$1(source, offset);\n                return;\n            }\n\n            // Otherwise, if the next input code point is U+0025 PERCENTAGE SIGN (%), consume it.\n            if (getCharCode(offset) === 0x0025) {\n                // Create a <percentage-token> with the same value as number, and return it.\n                type = TYPE$2.Percentage;\n                offset++;\n                return;\n            }\n\n            // Otherwise, create a <number-token> with the same value and type flag as number, and return it.\n            type = TYPE$2.Number;\n        }\n\n        // \u00a7 4.3.4. Consume an ident-like token\n        function consumeIdentLikeToken() {\n            const nameStartOffset = offset;\n\n            // Consume a name, and let string be the result.\n            offset = consumeName$1(source, offset);\n\n            // If string\u2019s value is an ASCII case-insensitive match for \"url\",\n            // and the next input code point is U+0028 LEFT PARENTHESIS ((), consume it.\n            if (cmpStr$2(source, nameStartOffset, offset, 'url') && getCharCode(offset) === 0x0028) {\n                // While the next two input code points are whitespace, consume the next input code point.\n                offset = findWhiteSpaceEnd$1(source, offset + 1);\n\n                // If the next one or two input code points are U+0022 QUOTATION MARK (\"), U+0027 APOSTROPHE ('),\n                // or whitespace followed by U+0022 QUOTATION MARK (\") or U+0027 APOSTROPHE ('),\n                // then create a <function-token> with its value set to string and return it.\n                if (getCharCode(offset) === 0x0022 ||\n                    getCharCode(offset) === 0x0027) {\n                    type = TYPE$2.Function;\n                    offset = nameStartOffset + 4;\n                    return;\n                }\n\n                // Otherwise, consume a url token, and return it.\n                consumeUrlToken();\n                return;\n            }\n\n            // Otherwise, if the next input code point is U+0028 LEFT PARENTHESIS ((), consume it.\n            // Create a <function-token> with its value set to string and return it.\n            if (getCharCode(offset) === 0x0028) {\n                type = TYPE$2.Function;\n                offset++;\n                return;\n            }\n\n            // Otherwise, create an <ident-token> with its value set to string and return it.\n            type = TYPE$2.Ident;\n        }\n\n        // \u00a7 4.3.5. Consume a string token\n        function consumeStringToken(endingCodePoint) {\n            // This algorithm may be called with an ending code point, which denotes the code point\n            // that ends the string. If an ending code point is not specified,\n            // the current input code point is used.\n            if (!endingCodePoint) {\n                endingCodePoint = getCharCode(offset++);\n            }\n\n            // Initially create a <string-token> with its value set to the empty string.\n            type = TYPE$2.String;\n\n            // Repeatedly consume the next input code point from the stream:\n            for (; offset < source.length; offset++) {\n                var code = source.charCodeAt(offset);\n\n                switch (charCodeCategory$1(code)) {\n                    // ending code point\n                    case endingCodePoint:\n                        // Return the <string-token>.\n                        offset++;\n                        return;\n\n                    // EOF\n                    case charCodeCategory$1.Eof:\n                        // This is a parse error. Return the <string-token>.\n                        return;\n\n                    // newline\n                    case charCodeCategory$1.WhiteSpace:\n                        if (isNewline$1(code)) {\n                            // This is a parse error. Reconsume the current input code point,\n                            // create a <bad-string-token>, and return it.\n                            offset += getNewlineLength$1(source, offset, code);\n                            type = TYPE$2.BadString;\n                            return;\n                        }\n                        break;\n\n                    // U+005C REVERSE SOLIDUS (\\)\n                    case 0x005C:\n                        // If the next input code point is EOF, do nothing.\n                        if (offset === source.length - 1) {\n                            break;\n                        }\n\n                        var nextCode = getCharCode(offset + 1);\n\n                        // Otherwise, if the next input code point is a newline, consume it.\n                        if (isNewline$1(nextCode)) {\n                            offset += getNewlineLength$1(source, offset + 1, nextCode);\n                        } else if (isValidEscape$2(code, nextCode)) {\n                            // Otherwise, (the stream starts with a valid escape) consume\n                            // an escaped code point and append the returned code point to\n                            // the <string-token>\u2019s value.\n                            offset = consumeEscaped$1(source, offset) - 1;\n                        }\n                        break;\n\n                    // anything else\n                    // Append the current input code point to the <string-token>\u2019s value.\n                }\n            }\n        }\n\n        // \u00a7 4.3.6. Consume a url token\n        // Note: This algorithm assumes that the initial \"url(\" has already been consumed.\n        // This algorithm also assumes that it\u2019s being called to consume an \"unquoted\" value, like url(foo).\n        // A quoted value, like url(\"foo\"), is parsed as a <function-token>. Consume an ident-like token\n        // automatically handles this distinction; this algorithm shouldn\u2019t be called directly otherwise.\n        function consumeUrlToken() {\n            // Initially create a <url-token> with its value set to the empty string.\n            type = TYPE$2.Url;\n\n            // Consume as much whitespace as possible.\n            offset = findWhiteSpaceEnd$1(source, offset);\n\n            // Repeatedly consume the next input code point from the stream:\n            for (; offset < source.length; offset++) {\n                var code = source.charCodeAt(offset);\n\n                switch (charCodeCategory$1(code)) {\n                    // U+0029 RIGHT PARENTHESIS ())\n                    case 0x0029:\n                        // Return the <url-token>.\n                        offset++;\n                        return;\n\n                    // EOF\n                    case charCodeCategory$1.Eof:\n                        // This is a parse error. Return the <url-token>.\n                        return;\n\n                    // whitespace\n                    case charCodeCategory$1.WhiteSpace:\n                        // Consume as much whitespace as possible.\n                        offset = findWhiteSpaceEnd$1(source, offset);\n\n                        // If the next input code point is U+0029 RIGHT PARENTHESIS ()) or EOF,\n                        // consume it and return the <url-token>\n                        // (if EOF was encountered, this is a parse error);\n                        if (getCharCode(offset) === 0x0029 || offset >= source.length) {\n                            if (offset < source.length) {\n                                offset++;\n                            }\n                            return;\n                        }\n\n                        // otherwise, consume the remnants of a bad url, create a <bad-url-token>,\n                        // and return it.\n                        offset = consumeBadUrlRemnants$1(source, offset);\n                        type = TYPE$2.BadUrl;\n                        return;\n\n                    // U+0022 QUOTATION MARK (\")\n                    // U+0027 APOSTROPHE (')\n                    // U+0028 LEFT PARENTHESIS (()\n                    // non-printable code point\n                    case 0x0022:\n                    case 0x0027:\n                    case 0x0028:\n                    case charCodeCategory$1.NonPrintable:\n                        // This is a parse error. Consume the remnants of a bad url,\n                        // create a <bad-url-token>, and return it.\n                        offset = consumeBadUrlRemnants$1(source, offset);\n                        type = TYPE$2.BadUrl;\n                        return;\n\n                    // U+005C REVERSE SOLIDUS (\\)\n                    case 0x005C:\n                        // If the stream starts with a valid escape, consume an escaped code point and\n                        // append the returned code point to the <url-token>\u2019s value.\n                        if (isValidEscape$2(code, getCharCode(offset + 1))) {\n                            offset = consumeEscaped$1(source, offset) - 1;\n                            break;\n                        }\n\n                        // Otherwise, this is a parse error. Consume the remnants of a bad url,\n                        // create a <bad-url-token>, and return it.\n                        offset = consumeBadUrlRemnants$1(source, offset);\n                        type = TYPE$2.BadUrl;\n                        return;\n\n                    // anything else\n                    // Append the current input code point to the <url-token>\u2019s value.\n                }\n            }\n        }\n\n        if (!stream) {\n            stream = new TokenStream_1();\n        }\n\n        // ensure source is a string\n        source = String(source || '');\n\n        var sourceLength = source.length;\n        var offsetAndType = adoptBuffer(stream.offsetAndType, sourceLength + 1); // +1 because of eof-token\n        var balance = adoptBuffer(stream.balance, sourceLength + 1);\n        var tokenCount = 0;\n        var start = isBOM$1(getCharCode(0));\n        var offset = start;\n        var balanceCloseType = 0;\n        var balanceStart = 0;\n        var balancePrev = 0;\n\n        // https://drafts.csswg.org/css-syntax-3/#consume-token\n        // \u00a7 4.3.1. Consume a token\n        while (offset < sourceLength) {\n            var code = source.charCodeAt(offset);\n            var type = 0;\n\n            balance[tokenCount] = sourceLength;\n\n            switch (charCodeCategory$1(code)) {\n                // whitespace\n                case charCodeCategory$1.WhiteSpace:\n                    // Consume as much whitespace as possible. Return a <whitespace-token>.\n                    type = TYPE$2.WhiteSpace;\n                    offset = findWhiteSpaceEnd$1(source, offset + 1);\n                    break;\n\n                // U+0022 QUOTATION MARK (\")\n                case 0x0022:\n                    // Consume a string token and return it.\n                    consumeStringToken();\n                    break;\n\n                // U+0023 NUMBER SIGN (#)\n                case 0x0023:\n                    // If the next input code point is a name code point or the next two input code points are a valid escape, then:\n                    if (isName$2(getCharCode(offset + 1)) || isValidEscape$2(getCharCode(offset + 1), getCharCode(offset + 2))) {\n                        // Create a <hash-token>.\n                        type = TYPE$2.Hash;\n\n                        // If the next 3 input code points would start an identifier, set the <hash-token>\u2019s type flag to \"id\".\n                        // if (isIdentifierStart(getCharCode(offset + 1), getCharCode(offset + 2), getCharCode(offset + 3))) {\n                        //     // TODO: set id flag\n                        // }\n\n                        // Consume a name, and set the <hash-token>\u2019s value to the returned string.\n                        offset = consumeName$1(source, offset + 1);\n\n                        // Return the <hash-token>.\n                    } else {\n                        // Otherwise, return a <delim-token> with its value set to the current input code point.\n                        type = TYPE$2.Delim;\n                        offset++;\n                    }\n\n                    break;\n\n                // U+0027 APOSTROPHE (')\n                case 0x0027:\n                    // Consume a string token and return it.\n                    consumeStringToken();\n                    break;\n\n                // U+0028 LEFT PARENTHESIS (()\n                case 0x0028:\n                    // Return a <(-token>.\n                    type = TYPE$2.LeftParenthesis;\n                    offset++;\n                    break;\n\n                // U+0029 RIGHT PARENTHESIS ())\n                case 0x0029:\n                    // Return a <)-token>.\n                    type = TYPE$2.RightParenthesis;\n                    offset++;\n                    break;\n\n                // U+002B PLUS SIGN (+)\n                case 0x002B:\n                    // If the input stream starts with a number, ...\n                    if (isNumberStart$1(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                        // ... reconsume the current input code point, consume a numeric token, and return it.\n                        consumeNumericToken();\n                    } else {\n                        // Otherwise, return a <delim-token> with its value set to the current input code point.\n                        type = TYPE$2.Delim;\n                        offset++;\n                    }\n                    break;\n\n                // U+002C COMMA (,)\n                case 0x002C:\n                    // Return a <comma-token>.\n                    type = TYPE$2.Comma;\n                    offset++;\n                    break;\n\n                // U+002D HYPHEN-MINUS (-)\n                case 0x002D:\n                    // If the input stream starts with a number, reconsume the current input code point, consume a numeric token, and return it.\n                    if (isNumberStart$1(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                        consumeNumericToken();\n                    } else {\n                        // Otherwise, if the next 2 input code points are U+002D HYPHEN-MINUS U+003E GREATER-THAN SIGN (->), consume them and return a <CDC-token>.\n                        if (getCharCode(offset + 1) === 0x002D &&\n                            getCharCode(offset + 2) === 0x003E) {\n                            type = TYPE$2.CDC;\n                            offset = offset + 3;\n                        } else {\n                            // Otherwise, if the input stream starts with an identifier, ...\n                            if (isIdentifierStart$1(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                                // ... reconsume the current input code point, consume an ident-like token, and return it.\n                                consumeIdentLikeToken();\n                            } else {\n                                // Otherwise, return a <delim-token> with its value set to the current input code point.\n                                type = TYPE$2.Delim;\n                                offset++;\n                            }\n                        }\n                    }\n                    break;\n\n                // U+002E FULL STOP (.)\n                case 0x002E:\n                    // If the input stream starts with a number, ...\n                    if (isNumberStart$1(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                        // ... reconsume the current input code point, consume a numeric token, and return it.\n                        consumeNumericToken();\n                    } else {\n                        // Otherwise, return a <delim-token> with its value set to the current input code point.\n                        type = TYPE$2.Delim;\n                        offset++;\n                    }\n\n                    break;\n\n                // U+002F SOLIDUS (/)\n                case 0x002F:\n                    // If the next two input code point are U+002F SOLIDUS (/) followed by a U+002A ASTERISK (*),\n                    if (getCharCode(offset + 1) === 0x002A) {\n                        // ... consume them and all following code points up to and including the first U+002A ASTERISK (*)\n                        // followed by a U+002F SOLIDUS (/), or up to an EOF code point.\n                        type = TYPE$2.Comment;\n                        offset = source.indexOf('*/', offset + 2) + 2;\n                        if (offset === 1) {\n                            offset = source.length;\n                        }\n                    } else {\n                        type = TYPE$2.Delim;\n                        offset++;\n                    }\n                    break;\n\n                // U+003A COLON (:)\n                case 0x003A:\n                    // Return a <colon-token>.\n                    type = TYPE$2.Colon;\n                    offset++;\n                    break;\n\n                // U+003B SEMICOLON (;)\n                case 0x003B:\n                    // Return a <semicolon-token>.\n                    type = TYPE$2.Semicolon;\n                    offset++;\n                    break;\n\n                // U+003C LESS-THAN SIGN (<)\n                case 0x003C:\n                    // If the next 3 input code points are U+0021 EXCLAMATION MARK U+002D HYPHEN-MINUS U+002D HYPHEN-MINUS (!--), ...\n                    if (getCharCode(offset + 1) === 0x0021 &&\n                        getCharCode(offset + 2) === 0x002D &&\n                        getCharCode(offset + 3) === 0x002D) {\n                        // ... consume them and return a <CDO-token>.\n                        type = TYPE$2.CDO;\n                        offset = offset + 4;\n                    } else {\n                        // Otherwise, return a <delim-token> with its value set to the current input code point.\n                        type = TYPE$2.Delim;\n                        offset++;\n                    }\n\n                    break;\n\n                // U+0040 COMMERCIAL AT (@)\n                case 0x0040:\n                    // If the next 3 input code points would start an identifier, ...\n                    if (isIdentifierStart$1(getCharCode(offset + 1), getCharCode(offset + 2), getCharCode(offset + 3))) {\n                        // ... consume a name, create an <at-keyword-token> with its value set to the returned value, and return it.\n                        type = TYPE$2.AtKeyword;\n                        offset = consumeName$1(source, offset + 1);\n                    } else {\n                        // Otherwise, return a <delim-token> with its value set to the current input code point.\n                        type = TYPE$2.Delim;\n                        offset++;\n                    }\n\n                    break;\n\n                // U+005B LEFT SQUARE BRACKET ([)\n                case 0x005B:\n                    // Return a <[-token>.\n                    type = TYPE$2.LeftSquareBracket;\n                    offset++;\n                    break;\n\n                // U+005C REVERSE SOLIDUS (\\)\n                case 0x005C:\n                    // If the input stream starts with a valid escape, ...\n                    if (isValidEscape$2(code, getCharCode(offset + 1))) {\n                        // ... reconsume the current input code point, consume an ident-like token, and return it.\n                        consumeIdentLikeToken();\n                    } else {\n                        // Otherwise, this is a parse error. Return a <delim-token> with its value set to the current input code point.\n                        type = TYPE$2.Delim;\n                        offset++;\n                    }\n                    break;\n\n                // U+005D RIGHT SQUARE BRACKET (])\n                case 0x005D:\n                    // Return a <]-token>.\n                    type = TYPE$2.RightSquareBracket;\n                    offset++;\n                    break;\n\n                // U+007B LEFT CURLY BRACKET ({)\n                case 0x007B:\n                    // Return a <{-token>.\n                    type = TYPE$2.LeftCurlyBracket;\n                    offset++;\n                    break;\n\n                // U+007D RIGHT CURLY BRACKET (})\n                case 0x007D:\n                    // Return a <}-token>.\n                    type = TYPE$2.RightCurlyBracket;\n                    offset++;\n                    break;\n\n                // digit\n                case charCodeCategory$1.Digit:\n                    // Reconsume the current input code point, consume a numeric token, and return it.\n                    consumeNumericToken();\n                    break;\n\n                // name-start code point\n                case charCodeCategory$1.NameStart:\n                    // Reconsume the current input code point, consume an ident-like token, and return it.\n                    consumeIdentLikeToken();\n                    break;\n\n                // EOF\n                case charCodeCategory$1.Eof:\n                    // Return an <EOF-token>.\n                    break;\n\n                // anything else\n                default:\n                    // Return a <delim-token> with its value set to the current input code point.\n                    type = TYPE$2.Delim;\n                    offset++;\n            }\n\n            switch (type) {\n                case balanceCloseType:\n                    balancePrev = balanceStart & OFFSET_MASK$1;\n                    balanceStart = balance[balancePrev];\n                    balanceCloseType = balanceStart >> TYPE_SHIFT$1;\n                    balance[tokenCount] = balancePrev;\n                    balance[balancePrev++] = tokenCount;\n                    for (; balancePrev < tokenCount; balancePrev++) {\n                        if (balance[balancePrev] === sourceLength) {\n                            balance[balancePrev] = tokenCount;\n                        }\n                    }\n                    break;\n\n                case TYPE$2.LeftParenthesis:\n                case TYPE$2.Function:\n                    balance[tokenCount] = balanceStart;\n                    balanceCloseType = TYPE$2.RightParenthesis;\n                    balanceStart = (balanceCloseType << TYPE_SHIFT$1) | tokenCount;\n                    break;\n\n                case TYPE$2.LeftSquareBracket:\n                    balance[tokenCount] = balanceStart;\n                    balanceCloseType = TYPE$2.RightSquareBracket;\n                    balanceStart = (balanceCloseType << TYPE_SHIFT$1) | tokenCount;\n                    break;\n\n                case TYPE$2.LeftCurlyBracket:\n                    balance[tokenCount] = balanceStart;\n                    balanceCloseType = TYPE$2.RightCurlyBracket;\n                    balanceStart = (balanceCloseType << TYPE_SHIFT$1) | tokenCount;\n                    break;\n            }\n\n            offsetAndType[tokenCount++] = (type << TYPE_SHIFT$1) | offset;\n        }\n\n        // finalize buffers\n        offsetAndType[tokenCount] = (TYPE$2.EOF << TYPE_SHIFT$1) | offset; // <EOF-token>\n        balance[tokenCount] = sourceLength;\n        balance[sourceLength] = sourceLength; // prevents false positive balance match with any token\n        while (balanceStart !== 0) {\n            balancePrev = balanceStart & OFFSET_MASK$1;\n            balanceStart = balance[balancePrev];\n            balance[balancePrev] = sourceLength;\n        }\n\n        // update stream\n        stream.source = source;\n        stream.firstCharOffset = start;\n        stream.offsetAndType = offsetAndType;\n        stream.tokenCount = tokenCount;\n        stream.balance = balance;\n        stream.reset();\n        stream.next();\n\n        return stream;\n    }\n\n    // extend tokenizer with constants\n    Object.keys(_const).forEach(function(key) {\n        tokenize[key] = _const[key];\n    });\n\n    // extend tokenizer with static methods from utils\n    Object.keys(charCodeDefinitions).forEach(function(key) {\n        tokenize[key] = charCodeDefinitions[key];\n    });\n    Object.keys(utils).forEach(function(key) {\n        tokenize[key] = utils[key];\n    });\n\n    var tokenizer = tokenize;\n\n    var isDigit$2 = tokenizer.isDigit;\n    var cmpChar$1 = tokenizer.cmpChar;\n    var TYPE$3 = tokenizer.TYPE;\n\n    var DELIM = TYPE$3.Delim;\n    var WHITESPACE$1 = TYPE$3.WhiteSpace;\n    var COMMENT$1 = TYPE$3.Comment;\n    var IDENT = TYPE$3.Ident;\n    var NUMBER = TYPE$3.Number;\n    var DIMENSION = TYPE$3.Dimension;\n    var PLUSSIGN = 0x002B;    // U+002B PLUS SIGN (+)\n    var HYPHENMINUS$1 = 0x002D; // U+002D HYPHEN-MINUS (-)\n    var N = 0x006E;           // U+006E LATIN SMALL LETTER N (n)\n    var DISALLOW_SIGN = true;\n    var ALLOW_SIGN = false;\n\n    function isDelim(token, code) {\n        return token !== null && token.type === DELIM && token.value.charCodeAt(0) === code;\n    }\n\n    function skipSC(token, offset, getNextToken) {\n        while (token !== null && (token.type === WHITESPACE$1 || token.type === COMMENT$1)) {\n            token = getNextToken(++offset);\n        }\n\n        return offset;\n    }\n\n    function checkInteger(token, valueOffset, disallowSign, offset) {\n        if (!token) {\n            return 0;\n        }\n\n        var code = token.value.charCodeAt(valueOffset);\n\n        if (code === PLUSSIGN || code === HYPHENMINUS$1) {\n            if (disallowSign) {\n                // Number sign is not allowed\n                return 0;\n            }\n            valueOffset++;\n        }\n\n        for (; valueOffset < token.value.length; valueOffset++) {\n            if (!isDigit$2(token.value.charCodeAt(valueOffset))) {\n                // Integer is expected\n                return 0;\n            }\n        }\n\n        return offset + 1;\n    }\n\n    // ... <signed-integer>\n    // ... ['+' | '-'] <signless-integer>\n    function consumeB(token, offset_, getNextToken) {\n        var sign = false;\n        var offset = skipSC(token, offset_, getNextToken);\n\n        token = getNextToken(offset);\n\n        if (token === null) {\n            return offset_;\n        }\n\n        if (token.type !== NUMBER) {\n            if (isDelim(token, PLUSSIGN) || isDelim(token, HYPHENMINUS$1)) {\n                sign = true;\n                offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                token = getNextToken(offset);\n\n                if (token === null && token.type !== NUMBER) {\n                    return 0;\n                }\n            } else {\n                return offset_;\n            }\n        }\n\n        if (!sign) {\n            var code = token.value.charCodeAt(0);\n            if (code !== PLUSSIGN && code !== HYPHENMINUS$1) {\n                // Number sign is expected\n                return 0;\n            }\n        }\n\n        return checkInteger(token, sign ? 0 : 1, sign, offset);\n    }\n\n    // An+B microsyntax https://www.w3.org/TR/css-syntax-3/#anb\n    var genericAnPlusB = function anPlusB(token, getNextToken) {\n        /* eslint-disable brace-style*/\n        var offset = 0;\n\n        if (!token) {\n            return 0;\n        }\n\n        // <integer>\n        if (token.type === NUMBER) {\n            return checkInteger(token, 0, ALLOW_SIGN, offset); // b\n        }\n\n            // -n\n            // -n <signed-integer>\n            // -n ['+' | '-'] <signless-integer>\n            // -n- <signless-integer>\n        // <dashndashdigit-ident>\n        else if (token.type === IDENT && token.value.charCodeAt(0) === HYPHENMINUS$1) {\n            // expect 1st char is N\n            if (!cmpChar$1(token.value, 1, N)) {\n                return 0;\n            }\n\n            switch (token.value.length) {\n                // -n\n                // -n <signed-integer>\n                // -n ['+' | '-'] <signless-integer>\n                case 2:\n                    return consumeB(getNextToken(++offset), offset, getNextToken);\n\n                // -n- <signless-integer>\n                case 3:\n                    if (token.value.charCodeAt(2) !== HYPHENMINUS$1) {\n                        return 0;\n                    }\n\n                    offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                    token = getNextToken(offset);\n\n                    return checkInteger(token, 0, DISALLOW_SIGN, offset);\n\n                // <dashndashdigit-ident>\n                default:\n                    if (token.value.charCodeAt(2) !== HYPHENMINUS$1) {\n                        return 0;\n                    }\n\n                    return checkInteger(token, 3, DISALLOW_SIGN, offset);\n            }\n        }\n\n            // '+'? n\n            // '+'? n <signed-integer>\n            // '+'? n ['+' | '-'] <signless-integer>\n            // '+'? n- <signless-integer>\n        // '+'? <ndashdigit-ident>\n        else if (token.type === IDENT || (isDelim(token, PLUSSIGN) && getNextToken(offset + 1).type === IDENT)) {\n            // just ignore a plus\n            if (token.type !== IDENT) {\n                token = getNextToken(++offset);\n            }\n\n            if (token === null || !cmpChar$1(token.value, 0, N)) {\n                return 0;\n            }\n\n            switch (token.value.length) {\n                // '+'? n\n                // '+'? n <signed-integer>\n                // '+'? n ['+' | '-'] <signless-integer>\n                case 1:\n                    return consumeB(getNextToken(++offset), offset, getNextToken);\n\n                // '+'? n- <signless-integer>\n                case 2:\n                    if (token.value.charCodeAt(1) !== HYPHENMINUS$1) {\n                        return 0;\n                    }\n\n                    offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                    token = getNextToken(offset);\n\n                    return checkInteger(token, 0, DISALLOW_SIGN, offset);\n\n                // '+'? <ndashdigit-ident>\n                default:\n                    if (token.value.charCodeAt(1) !== HYPHENMINUS$1) {\n                        return 0;\n                    }\n\n                    return checkInteger(token, 2, DISALLOW_SIGN, offset);\n            }\n        }\n\n            // <ndashdigit-dimension>\n            // <ndash-dimension> <signless-integer>\n            // <n-dimension>\n            // <n-dimension> <signed-integer>\n        // <n-dimension> ['+' | '-'] <signless-integer>\n        else if (token.type === DIMENSION) {\n            var code = token.value.charCodeAt(0);\n            var sign = code === PLUSSIGN || code === HYPHENMINUS$1 ? 1 : 0;\n\n            for (var i = sign; i < token.value.length; i++) {\n                if (!isDigit$2(token.value.charCodeAt(i))) {\n                    break;\n                }\n            }\n\n            if (i === sign) {\n                // Integer is expected\n                return 0;\n            }\n\n            if (!cmpChar$1(token.value, i, N)) {\n                return 0;\n            }\n\n            // <n-dimension>\n            // <n-dimension> <signed-integer>\n            // <n-dimension> ['+' | '-'] <signless-integer>\n            if (i + 1 === token.value.length) {\n                return consumeB(getNextToken(++offset), offset, getNextToken);\n            } else {\n                if (token.value.charCodeAt(i + 1) !== HYPHENMINUS$1) {\n                    return 0;\n                }\n\n                // <ndash-dimension> <signless-integer>\n                if (i + 2 === token.value.length) {\n                    offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                    token = getNextToken(offset);\n\n                    return checkInteger(token, 0, DISALLOW_SIGN, offset);\n                }\n                // <ndashdigit-dimension>\n                else {\n                    return checkInteger(token, i + 2, DISALLOW_SIGN, offset);\n                }\n            }\n        }\n\n        return 0;\n    };\n\n    var isHexDigit$2 = tokenizer.isHexDigit;\n    var cmpChar$2 = tokenizer.cmpChar;\n    var TYPE$4 = tokenizer.TYPE;\n\n    var IDENT$1 = TYPE$4.Ident;\n    var DELIM$1 = TYPE$4.Delim;\n    var NUMBER$1 = TYPE$4.Number;\n    var DIMENSION$1 = TYPE$4.Dimension;\n    var PLUSSIGN$1 = 0x002B;     // U+002B PLUS SIGN (+)\n    var HYPHENMINUS$2 = 0x002D;  // U+002D HYPHEN-MINUS (-)\n    var QUESTIONMARK = 0x003F; // U+003F QUESTION MARK (?)\n    var U = 0x0075;            // U+0075 LATIN SMALL LETTER U (u)\n\n    function isDelim$1(token, code) {\n        return token !== null && token.type === DELIM$1 && token.value.charCodeAt(0) === code;\n    }\n\n    function startsWith(token, code) {\n        return token.value.charCodeAt(0) === code;\n    }\n\n    function hexSequence(token, offset, allowDash) {\n        for (var pos = offset, hexlen = 0; pos < token.value.length; pos++) {\n            var code = token.value.charCodeAt(pos);\n\n            if (code === HYPHENMINUS$2 && allowDash && hexlen !== 0) {\n                if (hexSequence(token, offset + hexlen + 1, false) > 0) {\n                    return 6; // dissallow following question marks\n                }\n\n                return 0; // dash at the ending of a hex sequence is not allowed\n            }\n\n            if (!isHexDigit$2(code)) {\n                return 0; // not a hex digit\n            }\n\n            if (++hexlen > 6) {\n                return 0; // too many hex digits\n            }    }\n\n        return hexlen;\n    }\n\n    function withQuestionMarkSequence(consumed, length, getNextToken) {\n        if (!consumed) {\n            return 0; // nothing consumed\n        }\n\n        while (isDelim$1(getNextToken(length), QUESTIONMARK)) {\n            if (++consumed > 6) {\n                return 0; // too many question marks\n            }\n\n            length++;\n        }\n\n        return length;\n    }\n\n    // https://drafts.csswg.org/css-syntax/#urange\n    // Informally, the <urange> production has three forms:\n    // U+0001\n    //      Defines a range consisting of a single code point, in this case the code point \"1\".\n    // U+0001-00ff\n    //      Defines a range of codepoints between the first and the second value, in this case\n    //      the range between \"1\" and \"ff\" (255 in decimal) inclusive.\n    // U+00??\n    //      Defines a range of codepoints where the \"?\" characters range over all hex digits,\n    //      in this case defining the same as the value U+0000-00ff.\n    // In each form, a maximum of 6 digits is allowed for each hexadecimal number (if you treat \"?\" as a hexadecimal digit).\n    //\n    // <urange> =\n    //   u '+' <ident-token> '?'* |\n    //   u <dimension-token> '?'* |\n    //   u <number-token> '?'* |\n    //   u <number-token> <dimension-token> |\n    //   u <number-token> <number-token> |\n    //   u '+' '?'+\n    var genericUrange = function urange(token, getNextToken) {\n        var length = 0;\n\n        // should start with `u` or `U`\n        if (token === null || token.type !== IDENT$1 || !cmpChar$2(token.value, 0, U)) {\n            return 0;\n        }\n\n        token = getNextToken(++length);\n        if (token === null) {\n            return 0;\n        }\n\n        // u '+' <ident-token> '?'*\n        // u '+' '?'+\n        if (isDelim$1(token, PLUSSIGN$1)) {\n            token = getNextToken(++length);\n            if (token === null) {\n                return 0;\n            }\n\n            if (token.type === IDENT$1) {\n                // u '+' <ident-token> '?'*\n                return withQuestionMarkSequence(hexSequence(token, 0, true), ++length, getNextToken);\n            }\n\n            if (isDelim$1(token, QUESTIONMARK)) {\n                // u '+' '?'+\n                return withQuestionMarkSequence(1, ++length, getNextToken);\n            }\n\n            // Hex digit or question mark is expected\n            return 0;\n        }\n\n        // u <number-token> '?'*\n        // u <number-token> <dimension-token>\n        // u <number-token> <number-token>\n        if (token.type === NUMBER$1) {\n            if (!startsWith(token, PLUSSIGN$1)) {\n                return 0;\n            }\n\n            var consumedHexLength = hexSequence(token, 1, true);\n            if (consumedHexLength === 0) {\n                return 0;\n            }\n\n            token = getNextToken(++length);\n            if (token === null) {\n                // u <number-token> <eof>\n                return length;\n            }\n\n            if (token.type === DIMENSION$1 || token.type === NUMBER$1) {\n                // u <number-token> <dimension-token>\n                // u <number-token> <number-token>\n                if (!startsWith(token, HYPHENMINUS$2) || !hexSequence(token, 1, false)) {\n                    return 0;\n                }\n\n                return length + 1;\n            }\n\n            // u <number-token> '?'*\n            return withQuestionMarkSequence(consumedHexLength, length, getNextToken);\n        }\n\n        // u <dimension-token> '?'*\n        if (token.type === DIMENSION$1) {\n            if (!startsWith(token, PLUSSIGN$1)) {\n                return 0;\n            }\n\n            return withQuestionMarkSequence(hexSequence(token, 1, true), ++length, getNextToken);\n        }\n\n        return 0;\n    };\n\n    var isIdentifierStart$2 = tokenizer.isIdentifierStart;\n    var isHexDigit$3 = tokenizer.isHexDigit;\n    var isDigit$3 = tokenizer.isDigit;\n    var cmpStr$3 = tokenizer.cmpStr;\n    var consumeNumber$2 = tokenizer.consumeNumber;\n    var TYPE$5 = tokenizer.TYPE;\n\n\n\n    var cssWideKeywords = ['unset', 'initial', 'inherit'];\n    var calcFunctionNames = ['calc(', '-moz-calc(', '-webkit-calc('];\n\n    // https://www.w3.org/TR/css-values-3/#lengths\n    var LENGTH = {\n        // absolute length units\n        'px': true,\n        'mm': true,\n        'cm': true,\n        'in': true,\n        'pt': true,\n        'pc': true,\n        'q': true,\n\n        // relative length units\n        'em': true,\n        'ex': true,\n        'ch': true,\n        'rem': true,\n\n        // viewport-percentage lengths\n        'vh': true,\n        'vw': true,\n        'vmin': true,\n        'vmax': true,\n        'vm': true\n    };\n\n    var ANGLE = {\n        'deg': true,\n        'grad': true,\n        'rad': true,\n        'turn': true\n    };\n\n    var TIME = {\n        's': true,\n        'ms': true\n    };\n\n    var FREQUENCY = {\n        'hz': true,\n        'khz': true\n    };\n\n    // https://www.w3.org/TR/css-values-3/#resolution (https://drafts.csswg.org/css-values/#resolution)\n    var RESOLUTION = {\n        'dpi': true,\n        'dpcm': true,\n        'dppx': true,\n        'x': true      // https://github.com/w3c/csswg-drafts/issues/461\n    };\n\n    // https://drafts.csswg.org/css-grid/#fr-unit\n    var FLEX = {\n        'fr': true\n    };\n\n    // https://www.w3.org/TR/css3-speech/#mixing-props-voice-volume\n    var DECIBEL = {\n        'db': true\n    };\n\n    // https://www.w3.org/TR/css3-speech/#voice-props-voice-pitch\n    var SEMITONES = {\n        'st': true\n    };\n\n    // safe char code getter\n    function charCode(str, index) {\n        return index < str.length ? str.charCodeAt(index) : 0;\n    }\n\n    function eqStr(actual, expected) {\n        return cmpStr$3(actual, 0, actual.length, expected);\n    }\n\n    function eqStrAny(actual, expected) {\n        for (var i = 0; i < expected.length; i++) {\n            if (eqStr(actual, expected[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    // IE postfix hack, i.e. 123\\0 or 123px\\9\n    function isPostfixIeHack(str, offset) {\n        if (offset !== str.length - 2) {\n            return false;\n        }\n\n        return (\n            str.charCodeAt(offset) === 0x005C &&  // U+005C REVERSE SOLIDUS (\\)\n            isDigit$3(str.charCodeAt(offset + 1))\n        );\n    }\n\n    function outOfRange(opts, value, numEnd) {\n        if (opts && opts.type === 'Range') {\n            var num = Number(\n                numEnd !== undefined && numEnd !== value.length\n                    ? value.substr(0, numEnd)\n                    : value\n            );\n\n            if (isNaN(num)) {\n                return true;\n            }\n\n            if (opts.min !== null && num < opts.min) {\n                return true;\n            }\n\n            if (opts.max !== null && num > opts.max) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function consumeFunction(token, getNextToken) {\n        var startIdx = token.index;\n        var length = 0;\n\n        // balanced token consuming\n        do {\n            length++;\n\n            if (token.balance <= startIdx) {\n                break;\n            }\n        } while (token = getNextToken(length));\n\n        return length;\n    }\n\n    // TODO: implement\n    // can be used wherever <length>, <frequency>, <angle>, <time>, <percentage>, <number>, or <integer> values are allowed\n    // https://drafts.csswg.org/css-values/#calc-notation\n    function calc(next) {\n        return function(token, getNextToken, opts) {\n            if (token === null) {\n                return 0;\n            }\n\n            if (token.type === TYPE$5.Function && eqStrAny(token.value, calcFunctionNames)) {\n                return consumeFunction(token, getNextToken);\n            }\n\n            return next(token, getNextToken, opts);\n        };\n    }\n\n    function tokenType(expectedTokenType) {\n        return function(token) {\n            if (token === null || token.type !== expectedTokenType) {\n                return 0;\n            }\n\n            return 1;\n        };\n    }\n\n    function func(name) {\n        name = name + '(';\n\n        return function(token, getNextToken) {\n            if (token !== null && eqStr(token.value, name)) {\n                return consumeFunction(token, getNextToken);\n            }\n\n            return 0;\n        };\n    }\n\n    // =========================\n    // Complex types\n    //\n\n    // https://drafts.csswg.org/css-values-4/#custom-idents\n    // 4.2. Author-defined Identifiers: the <custom-ident> type\n    // Some properties accept arbitrary author-defined identifiers as a component value.\n    // This generic data type is denoted by <custom-ident>, and represents any valid CSS identifier\n    // that would not be misinterpreted as a pre-defined keyword in that property\u2019s value definition.\n    //\n    // See also: https://developer.mozilla.org/en-US/docs/Web/CSS/custom-ident\n    function customIdent(token) {\n        if (token === null || token.type !== TYPE$5.Ident) {\n            return 0;\n        }\n\n        var name = token.value.toLowerCase();\n\n        // The CSS-wide keywords are not valid <custom-ident>s\n        if (eqStrAny(name, cssWideKeywords)) {\n            return 0;\n        }\n\n        // The default keyword is reserved and is also not a valid <custom-ident>\n        if (eqStr(name, 'default')) {\n            return 0;\n        }\n\n        // TODO: ignore property specific keywords (as described https://developer.mozilla.org/en-US/docs/Web/CSS/custom-ident)\n        // Specifications using <custom-ident> must specify clearly what other keywords\n        // are excluded from <custom-ident>, if any\u2014for example by saying that any pre-defined keywords\n        // in that property\u2019s value definition are excluded. Excluded keywords are excluded\n        // in all ASCII case permutations.\n\n        return 1;\n    }\n\n    // https://drafts.csswg.org/css-variables/#typedef-custom-property-name\n    // A custom property is any property whose name starts with two dashes (U+002D HYPHEN-MINUS), like --foo.\n    // The <custom-property-name> production corresponds to this: it\u2019s defined as any valid identifier\n    // that starts with two dashes, except -- itself, which is reserved for future use by CSS.\n    // NOTE: Current implementation treat `--` as a valid name since most (all?) major browsers treat it as valid.\n    function customPropertyName(token) {\n        // ... defined as any valid identifier\n        if (token === null || token.type !== TYPE$5.Ident) {\n            return 0;\n        }\n\n        // ... that starts with two dashes (U+002D HYPHEN-MINUS)\n        if (charCode(token.value, 0) !== 0x002D || charCode(token.value, 1) !== 0x002D) {\n            return 0;\n        }\n\n        return 1;\n    }\n\n    // https://drafts.csswg.org/css-color-4/#hex-notation\n    // The syntax of a <hex-color> is a <hash-token> token whose value consists of 3, 4, 6, or 8 hexadecimal digits.\n    // In other words, a hex color is written as a hash character, \"#\", followed by some number of digits 0-9 or\n    // letters a-f (the case of the letters doesn\u2019t matter - #00ff00 is identical to #00FF00).\n    function hexColor(token) {\n        if (token === null || token.type !== TYPE$5.Hash) {\n            return 0;\n        }\n\n        var length = token.value.length;\n\n        // valid values (length): #rgb (4), #rgba (5), #rrggbb (7), #rrggbbaa (9)\n        if (length !== 4 && length !== 5 && length !== 7 && length !== 9) {\n            return 0;\n        }\n\n        for (var i = 1; i < length; i++) {\n            if (!isHexDigit$3(token.value.charCodeAt(i))) {\n                return 0;\n            }\n        }\n\n        return 1;\n    }\n\n    function idSelector(token) {\n        if (token === null || token.type !== TYPE$5.Hash) {\n            return 0;\n        }\n\n        if (!isIdentifierStart$2(charCode(token.value, 1), charCode(token.value, 2), charCode(token.value, 3))) {\n            return 0;\n        }\n\n        return 1;\n    }\n\n    // https://drafts.csswg.org/css-syntax/#any-value\n    // It represents the entirety of what a valid declaration can have as its value.\n    function declarationValue(token, getNextToken) {\n        if (!token) {\n            return 0;\n        }\n\n        var length = 0;\n        var level = 0;\n        var startIdx = token.index;\n\n        // The <declaration-value> production matches any sequence of one or more tokens,\n        // so long as the sequence ...\n        scan:\n            do {\n                switch (token.type) {\n                    // ... does not contain <bad-string-token>, <bad-url-token>,\n                    case TYPE$5.BadString:\n                    case TYPE$5.BadUrl:\n                        break scan;\n\n                    // ... unmatched <)-token>, <]-token>, or <}-token>,\n                    case TYPE$5.RightCurlyBracket:\n                    case TYPE$5.RightParenthesis:\n                    case TYPE$5.RightSquareBracket:\n                        if (token.balance > token.index || token.balance < startIdx) {\n                            break scan;\n                        }\n\n                        level--;\n                        break;\n\n                    // ... or top-level <semicolon-token> tokens\n                    case TYPE$5.Semicolon:\n                        if (level === 0) {\n                            break scan;\n                        }\n\n                        break;\n\n                    // ... or <delim-token> tokens with a value of \"!\"\n                    case TYPE$5.Delim:\n                        if (token.value === '!' && level === 0) {\n                            break scan;\n                        }\n\n                        break;\n\n                    case TYPE$5.Function:\n                    case TYPE$5.LeftParenthesis:\n                    case TYPE$5.LeftSquareBracket:\n                    case TYPE$5.LeftCurlyBracket:\n                        level++;\n                        break;\n                }\n\n                length++;\n\n                // until balance closing\n                if (token.balance <= startIdx) {\n                    break;\n                }\n            } while (token = getNextToken(length));\n\n        return length;\n    }\n\n    // https://drafts.csswg.org/css-syntax/#any-value\n    // The <any-value> production is identical to <declaration-value>, but also\n    // allows top-level <semicolon-token> tokens and <delim-token> tokens\n    // with a value of \"!\". It represents the entirety of what valid CSS can be in any context.\n    function anyValue(token, getNextToken) {\n        if (!token) {\n            return 0;\n        }\n\n        var startIdx = token.index;\n        var length = 0;\n\n        // The <any-value> production matches any sequence of one or more tokens,\n        // so long as the sequence ...\n        scan:\n            do {\n                switch (token.type) {\n                    // ... does not contain <bad-string-token>, <bad-url-token>,\n                    case TYPE$5.BadString:\n                    case TYPE$5.BadUrl:\n                        break scan;\n\n                    // ... unmatched <)-token>, <]-token>, or <}-token>,\n                    case TYPE$5.RightCurlyBracket:\n                    case TYPE$5.RightParenthesis:\n                    case TYPE$5.RightSquareBracket:\n                        if (token.balance > token.index || token.balance < startIdx) {\n                            break scan;\n                        }\n\n                        break;\n                }\n\n                length++;\n\n                // until balance closing\n                if (token.balance <= startIdx) {\n                    break;\n                }\n            } while (token = getNextToken(length));\n\n        return length;\n    }\n\n    // =========================\n    // Dimensions\n    //\n\n    function dimension(type) {\n        return function(token, getNextToken, opts) {\n            if (token === null || token.type !== TYPE$5.Dimension) {\n                return 0;\n            }\n\n            var numberEnd = consumeNumber$2(token.value, 0);\n\n            // check unit\n            if (type !== null) {\n                // check for IE postfix hack, i.e. 123px\\0 or 123px\\9\n                var reverseSolidusOffset = token.value.indexOf('\\\\', numberEnd);\n                var unit = reverseSolidusOffset === -1 || !isPostfixIeHack(token.value, reverseSolidusOffset)\n                    ? token.value.substr(numberEnd)\n                    : token.value.substring(numberEnd, reverseSolidusOffset);\n\n                if (type.hasOwnProperty(unit.toLowerCase()) === false) {\n                    return 0;\n                }\n            }\n\n            // check range if specified\n            if (outOfRange(opts, token.value, numberEnd)) {\n                return 0;\n            }\n\n            return 1;\n        };\n    }\n\n    // =========================\n    // Percentage\n    //\n\n    // \u00a75.5. Percentages: the <percentage> type\n    // https://drafts.csswg.org/css-values-4/#percentages\n    function percentage(token, getNextToken, opts) {\n        // ... corresponds to the <percentage-token> production\n        if (token === null || token.type !== TYPE$5.Percentage) {\n            return 0;\n        }\n\n        // check range if specified\n        if (outOfRange(opts, token.value, token.value.length - 1)) {\n            return 0;\n        }\n\n        return 1;\n    }\n\n    // =========================\n    // Numeric\n    //\n\n    // https://drafts.csswg.org/css-values-4/#numbers\n    // The value <zero> represents a literal number with the value 0. Expressions that merely\n    // evaluate to a <number> with the value 0 (for example, calc(0)) do not match <zero>;\n    // only literal <number-token>s do.\n    function zero(next) {\n        if (typeof next !== 'function') {\n            next = function() {\n                return 0;\n            };\n        }\n\n        return function(token, getNextToken, opts) {\n            if (token !== null && token.type === TYPE$5.Number) {\n                if (Number(token.value) === 0) {\n                    return 1;\n                }\n            }\n\n            return next(token, getNextToken, opts);\n        };\n    }\n\n    // \u00a7 5.3. Real Numbers: the <number> type\n    // https://drafts.csswg.org/css-values-4/#numbers\n    // Number values are denoted by <number>, and represent real numbers, possibly with a fractional component.\n    // ... It corresponds to the <number-token> production\n    function number(token, getNextToken, opts) {\n        if (token === null) {\n            return 0;\n        }\n\n        var numberEnd = consumeNumber$2(token.value, 0);\n        var isNumber = numberEnd === token.value.length;\n        if (!isNumber && !isPostfixIeHack(token.value, numberEnd)) {\n            return 0;\n        }\n\n        // check range if specified\n        if (outOfRange(opts, token.value, numberEnd)) {\n            return 0;\n        }\n\n        return 1;\n    }\n\n    // \u00a75.2. Integers: the <integer> type\n    // https://drafts.csswg.org/css-values-4/#integers\n    function integer(token, getNextToken, opts) {\n        // ... corresponds to a subset of the <number-token> production\n        if (token === null || token.type !== TYPE$5.Number) {\n            return 0;\n        }\n\n        // The first digit of an integer may be immediately preceded by `-` or `+` to indicate the integer\u2019s sign.\n        var i = token.value.charCodeAt(0) === 0x002B ||       // U+002B PLUS SIGN (+)\n        token.value.charCodeAt(0) === 0x002D ? 1 : 0; // U+002D HYPHEN-MINUS (-)\n\n        // When written literally, an integer is one or more decimal digits 0 through 9 ...\n        for (; i < token.value.length; i++) {\n            if (!isDigit$3(token.value.charCodeAt(i))) {\n                return 0;\n            }\n        }\n\n        // check range if specified\n        if (outOfRange(opts, token.value, i)) {\n            return 0;\n        }\n\n        return 1;\n    }\n\n    var generic = {\n        // token types\n        'ident-token': tokenType(TYPE$5.Ident),\n        'function-token': tokenType(TYPE$5.Function),\n        'at-keyword-token': tokenType(TYPE$5.AtKeyword),\n        'hash-token': tokenType(TYPE$5.Hash),\n        'string-token': tokenType(TYPE$5.String),\n        'bad-string-token': tokenType(TYPE$5.BadString),\n        'url-token': tokenType(TYPE$5.Url),\n        'bad-url-token': tokenType(TYPE$5.BadUrl),\n        'delim-token': tokenType(TYPE$5.Delim),\n        'number-token': tokenType(TYPE$5.Number),\n        'percentage-token': tokenType(TYPE$5.Percentage),\n        'dimension-token': tokenType(TYPE$5.Dimension),\n        'whitespace-token': tokenType(TYPE$5.WhiteSpace),\n        'CDO-token': tokenType(TYPE$5.CDO),\n        'CDC-token': tokenType(TYPE$5.CDC),\n        'colon-token': tokenType(TYPE$5.Colon),\n        'semicolon-token': tokenType(TYPE$5.Semicolon),\n        'comma-token': tokenType(TYPE$5.Comma),\n        '[-token': tokenType(TYPE$5.LeftSquareBracket),\n        ']-token': tokenType(TYPE$5.RightSquareBracket),\n        '(-token': tokenType(TYPE$5.LeftParenthesis),\n        ')-token': tokenType(TYPE$5.RightParenthesis),\n        '{-token': tokenType(TYPE$5.LeftCurlyBracket),\n        '}-token': tokenType(TYPE$5.RightCurlyBracket),\n\n        // token type aliases\n        'string': tokenType(TYPE$5.String),\n        'ident': tokenType(TYPE$5.Ident),\n\n        // complex types\n        'custom-ident': customIdent,\n        'custom-property-name': customPropertyName,\n        'hex-color': hexColor,\n        'id-selector': idSelector, // element( <id-selector> )\n        'an-plus-b': genericAnPlusB,\n        'urange': genericUrange,\n        'declaration-value': declarationValue,\n        'any-value': anyValue,\n\n        // dimensions\n        'dimension': calc(dimension(null)),\n        'angle': calc(dimension(ANGLE)),\n        'decibel': calc(dimension(DECIBEL)),\n        'frequency': calc(dimension(FREQUENCY)),\n        'flex': calc(dimension(FLEX)),\n        'length': calc(zero(dimension(LENGTH))),\n        'resolution': calc(dimension(RESOLUTION)),\n        'semitones': calc(dimension(SEMITONES)),\n        'time': calc(dimension(TIME)),\n\n        // percentage\n        'percentage': calc(percentage),\n\n        // numeric\n        'zero': zero(),\n        'number': calc(number),\n        'integer': calc(integer),\n\n        // old IE stuff\n        '-ms-legacy-expression': func('expression')\n    };\n\n    var _SyntaxError$1 = function SyntaxError(message, input, offset) {\n        var error = createCustomError('SyntaxError', message);\n\n        error.input = input;\n        error.offset = offset;\n        error.rawMessage = message;\n        error.message = error.rawMessage + '\\n' +\n            '  ' + error.input + '\\n' +\n            '--' + new Array((error.offset || error.input.length) + 1).join('-') + '^';\n\n        return error;\n    };\n\n    var TAB = 9;\n    var N$1 = 10;\n    var F = 12;\n    var R = 13;\n    var SPACE = 32;\n\n    var Tokenizer = function(str) {\n        this.str = str;\n        this.pos = 0;\n    };\n\n    Tokenizer.prototype = {\n        charCodeAt: function(pos) {\n            return pos < this.str.length ? this.str.charCodeAt(pos) : 0;\n        },\n        charCode: function() {\n            return this.charCodeAt(this.pos);\n        },\n        nextCharCode: function() {\n            return this.charCodeAt(this.pos + 1);\n        },\n        nextNonWsCode: function(pos) {\n            return this.charCodeAt(this.findWsEnd(pos));\n        },\n        findWsEnd: function(pos) {\n            for (; pos < this.str.length; pos++) {\n                var code = this.str.charCodeAt(pos);\n                if (code !== R && code !== N$1 && code !== F && code !== SPACE && code !== TAB) {\n                    break;\n                }\n            }\n\n            return pos;\n        },\n        substringToPos: function(end) {\n            return this.str.substring(this.pos, this.pos = end);\n        },\n        eat: function(code) {\n            if (this.charCode() !== code) {\n                this.error('Expect `' + String.fromCharCode(code) + '`');\n            }\n\n            this.pos++;\n        },\n        peek: function() {\n            return this.pos < this.str.length ? this.str.charAt(this.pos++) : '';\n        },\n        error: function(message) {\n            throw new _SyntaxError$1(message, this.str, this.pos);\n        }\n    };\n\n    var tokenizer$1 = Tokenizer;\n\n    var TAB$1 = 9;\n    var N$2 = 10;\n    var F$1 = 12;\n    var R$1 = 13;\n    var SPACE$1 = 32;\n    var EXCLAMATIONMARK = 33;    // !\n    var NUMBERSIGN = 35;         // #\n    var AMPERSAND = 38;          // &\n    var APOSTROPHE = 39;         // '\n    var LEFTPARENTHESIS = 40;    // (\n    var RIGHTPARENTHESIS = 41;   // )\n    var ASTERISK = 42;           // *\n    var PLUSSIGN$2 = 43;           // +\n    var COMMA = 44;              // ,\n    var HYPERMINUS = 45;         // -\n    var LESSTHANSIGN = 60;       // <\n    var GREATERTHANSIGN = 62;    // >\n    var QUESTIONMARK$1 = 63;       // ?\n    var COMMERCIALAT = 64;       // @\n    var LEFTSQUAREBRACKET = 91;  // [\n    var RIGHTSQUAREBRACKET = 93; // ]\n    var LEFTCURLYBRACKET = 123;  // {\n    var VERTICALLINE = 124;      // |\n    var RIGHTCURLYBRACKET = 125; // }\n    var INFINITY = 8734;         // \u221e\n    var NAME_CHAR = createCharMap(function(ch) {\n        return /[a-zA-Z0-9\\-]/.test(ch);\n    });\n    var COMBINATOR_PRECEDENCE = {\n        ' ': 1,\n        '&&': 2,\n        '||': 3,\n        '|': 4\n    };\n\n    function createCharMap(fn) {\n        var array = typeof Uint32Array === 'function' ? new Uint32Array(128) : new Array(128);\n        for (var i = 0; i < 128; i++) {\n            array[i] = fn(String.fromCharCode(i)) ? 1 : 0;\n        }\n        return array;\n    }\n\n    function scanSpaces(tokenizer) {\n        return tokenizer.substringToPos(\n            tokenizer.findWsEnd(tokenizer.pos)\n        );\n    }\n\n    function scanWord(tokenizer) {\n        var end = tokenizer.pos;\n\n        for (; end < tokenizer.str.length; end++) {\n            var code = tokenizer.str.charCodeAt(end);\n            if (code >= 128 || NAME_CHAR[code] === 0) {\n                break;\n            }\n        }\n\n        if (tokenizer.pos === end) {\n            tokenizer.error('Expect a keyword');\n        }\n\n        return tokenizer.substringToPos(end);\n    }\n\n    function scanNumber(tokenizer) {\n        var end = tokenizer.pos;\n\n        for (; end < tokenizer.str.length; end++) {\n            var code = tokenizer.str.charCodeAt(end);\n            if (code < 48 || code > 57) {\n                break;\n            }\n        }\n\n        if (tokenizer.pos === end) {\n            tokenizer.error('Expect a number');\n        }\n\n        return tokenizer.substringToPos(end);\n    }\n\n    function scanString(tokenizer) {\n        var end = tokenizer.str.indexOf('\\'', tokenizer.pos + 1);\n\n        if (end === -1) {\n            tokenizer.pos = tokenizer.str.length;\n            tokenizer.error('Expect an apostrophe');\n        }\n\n        return tokenizer.substringToPos(end + 1);\n    }\n\n    function readMultiplierRange(tokenizer) {\n        var min = null;\n        var max = null;\n\n        tokenizer.eat(LEFTCURLYBRACKET);\n\n        min = scanNumber(tokenizer);\n\n        if (tokenizer.charCode() === COMMA) {\n            tokenizer.pos++;\n            if (tokenizer.charCode() !== RIGHTCURLYBRACKET) {\n                max = scanNumber(tokenizer);\n            }\n        } else {\n            max = min;\n        }\n\n        tokenizer.eat(RIGHTCURLYBRACKET);\n\n        return {\n            min: Number(min),\n            max: max ? Number(max) : 0\n        };\n    }\n\n    function readMultiplier(tokenizer) {\n        var range = null;\n        var comma = false;\n\n        switch (tokenizer.charCode()) {\n            case ASTERISK:\n                tokenizer.pos++;\n\n                range = {\n                    min: 0,\n                    max: 0\n                };\n\n                break;\n\n            case PLUSSIGN$2:\n                tokenizer.pos++;\n\n                range = {\n                    min: 1,\n                    max: 0\n                };\n\n                break;\n\n            case QUESTIONMARK$1:\n                tokenizer.pos++;\n\n                range = {\n                    min: 0,\n                    max: 1\n                };\n\n                break;\n\n            case NUMBERSIGN:\n                tokenizer.pos++;\n\n                comma = true;\n\n                if (tokenizer.charCode() === LEFTCURLYBRACKET) {\n                    range = readMultiplierRange(tokenizer);\n                } else {\n                    range = {\n                        min: 1,\n                        max: 0\n                    };\n                }\n\n                break;\n\n            case LEFTCURLYBRACKET:\n                range = readMultiplierRange(tokenizer);\n                break;\n\n            default:\n                return null;\n        }\n\n        return {\n            type: 'Multiplier',\n            comma: comma,\n            min: range.min,\n            max: range.max,\n            term: null\n        };\n    }\n\n    function maybeMultiplied(tokenizer, node) {\n        var multiplier = readMultiplier(tokenizer);\n\n        if (multiplier !== null) {\n            multiplier.term = node;\n            return multiplier;\n        }\n\n        return node;\n    }\n\n    function maybeToken(tokenizer) {\n        var ch = tokenizer.peek();\n\n        if (ch === '') {\n            return null;\n        }\n\n        return {\n            type: 'Token',\n            value: ch\n        };\n    }\n\n    function readProperty(tokenizer) {\n        var name;\n\n        tokenizer.eat(LESSTHANSIGN);\n        tokenizer.eat(APOSTROPHE);\n\n        name = scanWord(tokenizer);\n\n        tokenizer.eat(APOSTROPHE);\n        tokenizer.eat(GREATERTHANSIGN);\n\n        return maybeMultiplied(tokenizer, {\n            type: 'Property',\n            name: name\n        });\n    }\n\n    // https://drafts.csswg.org/css-values-3/#numeric-ranges\n    // 4.1. Range Restrictions and Range Definition Notation\n    //\n    // Range restrictions can be annotated in the numeric type notation using CSS bracketed\n    // range notation\u2014[min,max]\u2014within the angle brackets, after the identifying keyword,\n    // indicating a closed range between (and including) min and max.\n    // For example, <integer [0, 10]> indicates an integer between 0 and 10, inclusive.\n    function readTypeRange(tokenizer) {\n        // use null for Infinity to make AST format JSON serializable/deserializable\n        var min = null; // -Infinity\n        var max = null; // Infinity\n        var sign = 1;\n\n        tokenizer.eat(LEFTSQUAREBRACKET);\n\n        if (tokenizer.charCode() === HYPERMINUS) {\n            tokenizer.peek();\n            sign = -1;\n        }\n\n        if (sign == -1 && tokenizer.charCode() === INFINITY) {\n            tokenizer.peek();\n        } else {\n            min = sign * Number(scanNumber(tokenizer));\n        }\n\n        scanSpaces(tokenizer);\n        tokenizer.eat(COMMA);\n        scanSpaces(tokenizer);\n\n        if (tokenizer.charCode() === INFINITY) {\n            tokenizer.peek();\n        } else {\n            sign = 1;\n\n            if (tokenizer.charCode() === HYPERMINUS) {\n                tokenizer.peek();\n                sign = -1;\n            }\n\n            max = sign * Number(scanNumber(tokenizer));\n        }\n\n        tokenizer.eat(RIGHTSQUAREBRACKET);\n\n        // If no range is indicated, either by using the bracketed range notation\n        // or in the property description, then [\u2212\u221e,\u221e] is assumed.\n        if (min === null && max === null) {\n            return null;\n        }\n\n        return {\n            type: 'Range',\n            min: min,\n            max: max\n        };\n    }\n\n    function readType(tokenizer) {\n        var name;\n        var opts = null;\n\n        tokenizer.eat(LESSTHANSIGN);\n        name = scanWord(tokenizer);\n\n        if (tokenizer.charCode() === LEFTPARENTHESIS &&\n            tokenizer.nextCharCode() === RIGHTPARENTHESIS) {\n            tokenizer.pos += 2;\n            name += '()';\n        }\n\n        if (tokenizer.charCodeAt(tokenizer.findWsEnd(tokenizer.pos)) === LEFTSQUAREBRACKET) {\n            scanSpaces(tokenizer);\n            opts = readTypeRange(tokenizer);\n        }\n\n        tokenizer.eat(GREATERTHANSIGN);\n\n        return maybeMultiplied(tokenizer, {\n            type: 'Type',\n            name: name,\n            opts: opts\n        });\n    }\n\n    function readKeywordOrFunction(tokenizer) {\n        var name;\n\n        name = scanWord(tokenizer);\n\n        if (tokenizer.charCode() === LEFTPARENTHESIS) {\n            tokenizer.pos++;\n\n            return {\n                type: 'Function',\n                name: name\n            };\n        }\n\n        return maybeMultiplied(tokenizer, {\n            type: 'Keyword',\n            name: name\n        });\n    }\n\n    function regroupTerms(terms, combinators) {\n        function createGroup(terms, combinator) {\n            return {\n                type: 'Group',\n                terms: terms,\n                combinator: combinator,\n                disallowEmpty: false,\n                explicit: false\n            };\n        }\n\n        combinators = Object.keys(combinators).sort(function(a, b) {\n            return COMBINATOR_PRECEDENCE[a] - COMBINATOR_PRECEDENCE[b];\n        });\n\n        while (combinators.length > 0) {\n            var combinator = combinators.shift();\n            for (var i = 0, subgroupStart = 0; i < terms.length; i++) {\n                var term = terms[i];\n                if (term.type === 'Combinator') {\n                    if (term.value === combinator) {\n                        if (subgroupStart === -1) {\n                            subgroupStart = i - 1;\n                        }\n                        terms.splice(i, 1);\n                        i--;\n                    } else {\n                        if (subgroupStart !== -1 && i - subgroupStart > 1) {\n                            terms.splice(\n                                subgroupStart,\n                                i - subgroupStart,\n                                createGroup(terms.slice(subgroupStart, i), combinator)\n                            );\n                            i = subgroupStart + 1;\n                        }\n                        subgroupStart = -1;\n                    }\n                }\n            }\n\n            if (subgroupStart !== -1 && combinators.length) {\n                terms.splice(\n                    subgroupStart,\n                    i - subgroupStart,\n                    createGroup(terms.slice(subgroupStart, i), combinator)\n                );\n            }\n        }\n\n        return combinator;\n    }\n\n    function readImplicitGroup(tokenizer) {\n        var terms = [];\n        var combinators = {};\n        var token;\n        var prevToken = null;\n        var prevTokenPos = tokenizer.pos;\n\n        while (token = peek(tokenizer)) {\n            if (token.type !== 'Spaces') {\n                if (token.type === 'Combinator') {\n                    // check for combinator in group beginning and double combinator sequence\n                    if (prevToken === null || prevToken.type === 'Combinator') {\n                        tokenizer.pos = prevTokenPos;\n                        tokenizer.error('Unexpected combinator');\n                    }\n\n                    combinators[token.value] = true;\n                } else if (prevToken !== null && prevToken.type !== 'Combinator') {\n                    combinators[' '] = true;  // a b\n                    terms.push({\n                        type: 'Combinator',\n                        value: ' '\n                    });\n                }\n\n                terms.push(token);\n                prevToken = token;\n                prevTokenPos = tokenizer.pos;\n            }\n        }\n\n        // check for combinator in group ending\n        if (prevToken !== null && prevToken.type === 'Combinator') {\n            tokenizer.pos -= prevTokenPos;\n            tokenizer.error('Unexpected combinator');\n        }\n\n        return {\n            type: 'Group',\n            terms: terms,\n            combinator: regroupTerms(terms, combinators) || ' ',\n            disallowEmpty: false,\n            explicit: false\n        };\n    }\n\n    function readGroup(tokenizer) {\n        var result;\n\n        tokenizer.eat(LEFTSQUAREBRACKET);\n        result = readImplicitGroup(tokenizer);\n        tokenizer.eat(RIGHTSQUAREBRACKET);\n\n        result.explicit = true;\n\n        if (tokenizer.charCode() === EXCLAMATIONMARK) {\n            tokenizer.pos++;\n            result.disallowEmpty = true;\n        }\n\n        return result;\n    }\n\n    function peek(tokenizer) {\n        var code = tokenizer.charCode();\n\n        if (code < 128 && NAME_CHAR[code] === 1) {\n            return readKeywordOrFunction(tokenizer);\n        }\n\n        switch (code) {\n            case RIGHTSQUAREBRACKET:\n                // don't eat, stop scan a group\n                break;\n\n            case LEFTSQUAREBRACKET:\n                return maybeMultiplied(tokenizer, readGroup(tokenizer));\n\n            case LESSTHANSIGN:\n                return tokenizer.nextCharCode() === APOSTROPHE\n                    ? readProperty(tokenizer)\n                    : readType(tokenizer);\n\n            case VERTICALLINE:\n                return {\n                    type: 'Combinator',\n                    value: tokenizer.substringToPos(\n                        tokenizer.nextCharCode() === VERTICALLINE\n                            ? tokenizer.pos + 2\n                            : tokenizer.pos + 1\n                    )\n                };\n\n            case AMPERSAND:\n                tokenizer.pos++;\n                tokenizer.eat(AMPERSAND);\n\n                return {\n                    type: 'Combinator',\n                    value: '&&'\n                };\n\n            case COMMA:\n                tokenizer.pos++;\n                return {\n                    type: 'Comma'\n                };\n\n            case APOSTROPHE:\n                return maybeMultiplied(tokenizer, {\n                    type: 'String',\n                    value: scanString(tokenizer)\n                });\n\n            case SPACE$1:\n            case TAB$1:\n            case N$2:\n            case R$1:\n            case F$1:\n                return {\n                    type: 'Spaces',\n                    value: scanSpaces(tokenizer)\n                };\n\n            case COMMERCIALAT:\n                code = tokenizer.nextCharCode();\n\n                if (code < 128 && NAME_CHAR[code] === 1) {\n                    tokenizer.pos++;\n                    return {\n                        type: 'AtKeyword',\n                        name: scanWord(tokenizer)\n                    };\n                }\n\n                return maybeToken(tokenizer);\n\n            case ASTERISK:\n            case PLUSSIGN$2:\n            case QUESTIONMARK$1:\n            case NUMBERSIGN:\n            case EXCLAMATIONMARK:\n                // prohibited tokens (used as a multiplier start)\n                break;\n\n            case LEFTCURLYBRACKET:\n                // LEFTCURLYBRACKET is allowed since mdn/data uses it w/o quoting\n                // check next char isn't a number, because it's likely a disjoined multiplier\n                code = tokenizer.nextCharCode();\n\n                if (code < 48 || code > 57) {\n                    return maybeToken(tokenizer);\n                }\n\n                break;\n\n            default:\n                return maybeToken(tokenizer);\n        }\n    }\n\n    function parse(source) {\n        var tokenizer = new tokenizer$1(source);\n        var result = readImplicitGroup(tokenizer);\n\n        if (tokenizer.pos !== source.length) {\n            tokenizer.error('Unexpected input');\n        }\n\n        // reduce redundant groups with single group term\n        if (result.terms.length === 1 && result.terms[0].type === 'Group') {\n            result = result.terms[0];\n        }\n\n        return result;\n    }\n\n    // warm up parse to elimitate code branches that never execute\n    // fix soft deoptimizations (insufficient type feedback)\n    parse('[a&&<b>#|<\\'c\\'>*||e() f{2} /,(% g#{1,2} h{2,})]!');\n\n    var parse_1 = parse;\n\n    var noop$1 = function() {};\n\n    function ensureFunction(value) {\n        return typeof value === 'function' ? value : noop$1;\n    }\n\n    var walk = function(node, options, context) {\n        function walk(node) {\n            enter.call(context, node);\n\n            switch (node.type) {\n                case 'Group':\n                    node.terms.forEach(walk);\n                    break;\n\n                case 'Multiplier':\n                    walk(node.term);\n                    break;\n\n                case 'Type':\n                case 'Property':\n                case 'Keyword':\n                case 'AtKeyword':\n                case 'Function':\n                case 'String':\n                case 'Token':\n                case 'Comma':\n                    break;\n\n                default:\n                    throw new Error('Unknown type: ' + node.type);\n            }\n\n            leave.call(context, node);\n        }\n\n        var enter = noop$1;\n        var leave = noop$1;\n\n        if (typeof options === 'function') {\n            enter = options;\n        } else if (options) {\n            enter = ensureFunction(options.enter);\n            leave = ensureFunction(options.leave);\n        }\n\n        if (enter === noop$1 && leave === noop$1) {\n            throw new Error('Neither `enter` nor `leave` walker handler is set or both aren\\'t a function');\n        }\n\n        walk(node);\n    };\n\n    var tokenStream = new TokenStream_1();\n    var astToTokens = {\n        decorator: function(handlers) {\n            var curNode = null;\n            var prev = { len: 0, node: null };\n            var nodes = [prev];\n            var buffer = '';\n\n            return {\n                children: handlers.children,\n                node: function(node) {\n                    var tmp = curNode;\n                    curNode = node;\n                    handlers.node.call(this, node);\n                    curNode = tmp;\n                },\n                chunk: function(chunk) {\n                    buffer += chunk;\n                    if (prev.node !== curNode) {\n                        nodes.push({\n                            len: chunk.length,\n                            node: curNode\n                        });\n                    } else {\n                        prev.len += chunk.length;\n                    }\n                },\n                result: function() {\n                    return prepareTokens(buffer, nodes);\n                }\n            };\n        }\n    };\n\n    function prepareTokens(str, nodes) {\n        var tokens = [];\n        var nodesOffset = 0;\n        var nodesIndex = 0;\n        var currentNode = nodes ? nodes[nodesIndex].node : null;\n\n        tokenizer(str, tokenStream);\n\n        while (!tokenStream.eof) {\n            if (nodes) {\n                while (nodesIndex < nodes.length && nodesOffset + nodes[nodesIndex].len <= tokenStream.tokenStart) {\n                    nodesOffset += nodes[nodesIndex++].len;\n                    currentNode = nodes[nodesIndex].node;\n                }\n            }\n\n            tokens.push({\n                type: tokenStream.tokenType,\n                value: tokenStream.getTokenValue(),\n                index: tokenStream.tokenIndex, // TODO: remove it, temporary solution\n                balance: tokenStream.balance[tokenStream.tokenIndex], // TODO: remove it, temporary solution\n                node: currentNode\n            });\n            tokenStream.next();\n            // console.log({ ...tokens[tokens.length - 1], node: undefined });\n        }\n\n        return tokens;\n    }\n\n    var prepareTokens_1 = function(value, syntax) {\n        if (typeof value === 'string') {\n            return prepareTokens(value, null);\n        }\n\n        return syntax.generate(value, astToTokens);\n    };\n\n    var MATCH = { type: 'Match' };\n    var MISMATCH = { type: 'Mismatch' };\n    var DISALLOW_EMPTY = { type: 'DisallowEmpty' };\n    var LEFTPARENTHESIS$1 = 40;  // (\n    var RIGHTPARENTHESIS$1 = 41; // )\n\n    function createCondition(match, thenBranch, elseBranch) {\n        // reduce node count\n        if (thenBranch === MATCH && elseBranch === MISMATCH) {\n            return match;\n        }\n\n        if (match === MATCH && thenBranch === MATCH && elseBranch === MATCH) {\n            return match;\n        }\n\n        if (match.type === 'If' && match.else === MISMATCH && thenBranch === MATCH) {\n            thenBranch = match.then;\n            match = match.match;\n        }\n\n        return {\n            type: 'If',\n            match: match,\n            then: thenBranch,\n            else: elseBranch\n        };\n    }\n\n    function isFunctionType(name) {\n        return (\n            name.length > 2 &&\n            name.charCodeAt(name.length - 2) === LEFTPARENTHESIS$1 &&\n            name.charCodeAt(name.length - 1) === RIGHTPARENTHESIS$1\n        );\n    }\n\n    function isEnumCapatible(term) {\n        return (\n            term.type === 'Keyword' ||\n            term.type === 'AtKeyword' ||\n            term.type === 'Function' ||\n            term.type === 'Type' && isFunctionType(term.name)\n        );\n    }\n\n    function buildGroupMatchGraph(combinator, terms, atLeastOneTermMatched) {\n        switch (combinator) {\n            case ' ':\n                // Juxtaposing components means that all of them must occur, in the given order.\n                //\n                // a b c\n                // =\n                // match a\n                //   then match b\n                //     then match c\n                //       then MATCH\n                //       else MISMATCH\n                //     else MISMATCH\n                //   else MISMATCH\n                var result = MATCH;\n\n                for (var i = terms.length - 1; i >= 0; i--) {\n                    var term = terms[i];\n\n                    result = createCondition(\n                        term,\n                        result,\n                        MISMATCH\n                    );\n                }\n                return result;\n\n            case '|':\n                // A bar (|) separates two or more alternatives: exactly one of them must occur.\n                //\n                // a | b | c\n                // =\n                // match a\n                //   then MATCH\n                //   else match b\n                //     then MATCH\n                //     else match c\n                //       then MATCH\n                //       else MISMATCH\n\n                var result = MISMATCH;\n                var map = null;\n\n                for (var i = terms.length - 1; i >= 0; i--) {\n                    var term = terms[i];\n\n                    // reduce sequence of keywords into a Enum\n                    if (isEnumCapatible(term)) {\n                        if (map === null && i > 0 && isEnumCapatible(terms[i - 1])) {\n                            map = Object.create(null);\n                            result = createCondition(\n                                {\n                                    type: 'Enum',\n                                    map: map\n                                },\n                                MATCH,\n                                result\n                            );\n                        }\n\n                        if (map !== null) {\n                            var key = (isFunctionType(term.name) ? term.name.slice(0, -1) : term.name).toLowerCase();\n                            if (key in map === false) {\n                                map[key] = term;\n                                continue;\n                            }\n                        }\n                    }\n\n                    map = null;\n\n                    // create a new conditonal node\n                    result = createCondition(\n                        term,\n                        MATCH,\n                        result\n                    );\n                }\n                return result;\n\n            case '&&':\n                // A double ampersand (&&) separates two or more components,\n                // all of which must occur, in any order.\n\n                // Use MatchOnce for groups with a large number of terms,\n                // since &&-groups produces at least N!-node trees\n                if (terms.length > 5) {\n                    return {\n                        type: 'MatchOnce',\n                        terms: terms,\n                        all: true\n                    };\n                }\n\n                // Use a combination tree for groups with small number of terms\n                //\n                // a && b && c\n                // =\n                // match a\n                //   then [b && c]\n                //   else match b\n                //     then [a && c]\n                //     else match c\n                //       then [a && b]\n                //       else MISMATCH\n                //\n                // a && b\n                // =\n                // match a\n                //   then match b\n                //     then MATCH\n                //     else MISMATCH\n                //   else match b\n                //     then match a\n                //       then MATCH\n                //       else MISMATCH\n                //     else MISMATCH\n                var result = MISMATCH;\n\n                for (var i = terms.length - 1; i >= 0; i--) {\n                    var term = terms[i];\n                    var thenClause;\n\n                    if (terms.length > 1) {\n                        thenClause = buildGroupMatchGraph(\n                            combinator,\n                            terms.filter(function(newGroupTerm) {\n                                return newGroupTerm !== term;\n                            }),\n                            false\n                        );\n                    } else {\n                        thenClause = MATCH;\n                    }\n\n                    result = createCondition(\n                        term,\n                        thenClause,\n                        result\n                    );\n                }\n                return result;\n\n            case '||':\n                // A double bar (||) separates two or more options:\n                // one or more of them must occur, in any order.\n\n                // Use MatchOnce for groups with a large number of terms,\n                // since ||-groups produces at least N!-node trees\n                if (terms.length > 5) {\n                    return {\n                        type: 'MatchOnce',\n                        terms: terms,\n                        all: false\n                    };\n                }\n\n                // Use a combination tree for groups with small number of terms\n                //\n                // a || b || c\n                // =\n                // match a\n                //   then [b || c]\n                //   else match b\n                //     then [a || c]\n                //     else match c\n                //       then [a || b]\n                //       else MISMATCH\n                //\n                // a || b\n                // =\n                // match a\n                //   then match b\n                //     then MATCH\n                //     else MATCH\n                //   else match b\n                //     then match a\n                //       then MATCH\n                //       else MATCH\n                //     else MISMATCH\n                var result = atLeastOneTermMatched ? MATCH : MISMATCH;\n\n                for (var i = terms.length - 1; i >= 0; i--) {\n                    var term = terms[i];\n                    var thenClause;\n\n                    if (terms.length > 1) {\n                        thenClause = buildGroupMatchGraph(\n                            combinator,\n                            terms.filter(function(newGroupTerm) {\n                                return newGroupTerm !== term;\n                            }),\n                            true\n                        );\n                    } else {\n                        thenClause = MATCH;\n                    }\n\n                    result = createCondition(\n                        term,\n                        thenClause,\n                        result\n                    );\n                }\n                return result;\n        }\n    }\n\n    function buildMultiplierMatchGraph(node) {\n        var result = MATCH;\n        var matchTerm = buildMatchGraph(node.term);\n\n        if (node.max === 0) {\n            // disable repeating of empty match to prevent infinite loop\n            matchTerm = createCondition(\n                matchTerm,\n                DISALLOW_EMPTY,\n                MISMATCH\n            );\n\n            // an occurrence count is not limited, make a cycle;\n            // to collect more terms on each following matching mismatch\n            result = createCondition(\n                matchTerm,\n                null, // will be a loop\n                MISMATCH\n            );\n\n            result.then = createCondition(\n                MATCH,\n                MATCH,\n                result // make a loop\n            );\n\n            if (node.comma) {\n                result.then.else = createCondition(\n                    { type: 'Comma', syntax: node },\n                    result,\n                    MISMATCH\n                );\n            }\n        } else {\n            // create a match node chain for [min .. max] interval with optional matches\n            for (var i = node.min || 1; i <= node.max; i++) {\n                if (node.comma && result !== MATCH) {\n                    result = createCondition(\n                        { type: 'Comma', syntax: node },\n                        result,\n                        MISMATCH\n                    );\n                }\n\n                result = createCondition(\n                    matchTerm,\n                    createCondition(\n                        MATCH,\n                        MATCH,\n                        result\n                    ),\n                    MISMATCH\n                );\n            }\n        }\n\n        if (node.min === 0) {\n            // allow zero match\n            result = createCondition(\n                MATCH,\n                MATCH,\n                result\n            );\n        } else {\n            // create a match node chain to collect [0 ... min - 1] required matches\n            for (var i = 0; i < node.min - 1; i++) {\n                if (node.comma && result !== MATCH) {\n                    result = createCondition(\n                        { type: 'Comma', syntax: node },\n                        result,\n                        MISMATCH\n                    );\n                }\n\n                result = createCondition(\n                    matchTerm,\n                    result,\n                    MISMATCH\n                );\n            }\n        }\n\n        return result;\n    }\n\n    function buildMatchGraph(node) {\n        if (typeof node === 'function') {\n            return {\n                type: 'Generic',\n                fn: node\n            };\n        }\n\n        switch (node.type) {\n            case 'Group':\n                var result = buildGroupMatchGraph(\n                    node.combinator,\n                    node.terms.map(buildMatchGraph),\n                    false\n                );\n\n                if (node.disallowEmpty) {\n                    result = createCondition(\n                        result,\n                        DISALLOW_EMPTY,\n                        MISMATCH\n                    );\n                }\n\n                return result;\n\n            case 'Multiplier':\n                return buildMultiplierMatchGraph(node);\n\n            case 'Type':\n            case 'Property':\n                return {\n                    type: node.type,\n                    name: node.name,\n                    syntax: node\n                };\n\n            case 'Keyword':\n                return {\n                    type: node.type,\n                    name: node.name.toLowerCase(),\n                    syntax: node\n                };\n\n            case 'AtKeyword':\n                return {\n                    type: node.type,\n                    name: '@' + node.name.toLowerCase(),\n                    syntax: node\n                };\n\n            case 'Function':\n                return {\n                    type: node.type,\n                    name: node.name.toLowerCase() + '(',\n                    syntax: node\n                };\n\n            case 'String':\n                // convert a one char length String to a Token\n                if (node.value.length === 3) {\n                    return {\n                        type: 'Token',\n                        value: node.value.charAt(1),\n                        syntax: node\n                    };\n                }\n\n                // otherwise use it as is\n                return {\n                    type: node.type,\n                    value: node.value.substr(1, node.value.length - 2).replace(/\\\\'/g, '\\''),\n                    syntax: node\n                };\n\n            case 'Token':\n                return {\n                    type: node.type,\n                    value: node.value,\n                    syntax: node\n                };\n\n            case 'Comma':\n                return {\n                    type: node.type,\n                    syntax: node\n                };\n\n            default:\n                throw new Error('Unknown node type:', node.type);\n        }\n    }\n\n    var matchGraph = {\n        MATCH: MATCH,\n        MISMATCH: MISMATCH,\n        DISALLOW_EMPTY: DISALLOW_EMPTY,\n        buildMatchGraph: function(syntaxTree, ref) {\n            if (typeof syntaxTree === 'string') {\n                syntaxTree = parse_1(syntaxTree);\n            }\n\n            return {\n                type: 'MatchGraph',\n                match: buildMatchGraph(syntaxTree),\n                syntax: ref || null,\n                source: syntaxTree\n            };\n        }\n    };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\n    var MATCH$1 = matchGraph.MATCH;\n    var MISMATCH$1 = matchGraph.MISMATCH;\n    var DISALLOW_EMPTY$1 = matchGraph.DISALLOW_EMPTY;\n    var TYPE$6 = _const.TYPE;\n\n    var STUB = 0;\n    var TOKEN = 1;\n    var OPEN_SYNTAX = 2;\n    var CLOSE_SYNTAX = 3;\n\n    var EXIT_REASON_MATCH = 'Match';\n    var EXIT_REASON_MISMATCH = 'Mismatch';\n    var EXIT_REASON_ITERATION_LIMIT = 'Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)';\n\n    var ITERATION_LIMIT = 15000;\n    var totalIterationCount = 0;\n\n    function reverseList(list) {\n        var prev = null;\n        var next = null;\n        var item = list;\n\n        while (item !== null) {\n            next = item.prev;\n            item.prev = prev;\n            prev = item;\n            item = next;\n        }\n\n        return prev;\n    }\n\n    function areStringsEqualCaseInsensitive(testStr, referenceStr) {\n        if (testStr.length !== referenceStr.length) {\n            return false;\n        }\n\n        for (var i = 0; i < testStr.length; i++) {\n            var testCode = testStr.charCodeAt(i);\n            var referenceCode = referenceStr.charCodeAt(i);\n\n            // testCode.toLowerCase() for U+0041 LATIN CAPITAL LETTER A (A) .. U+005A LATIN CAPITAL LETTER Z (Z).\n            if (testCode >= 0x0041 && testCode <= 0x005A) {\n                testCode = testCode | 32;\n            }\n\n            if (testCode !== referenceCode) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function isCommaContextStart(token) {\n        if (token === null) {\n            return true;\n        }\n\n        return (\n            token.type === TYPE$6.Comma ||\n            token.type === TYPE$6.Function ||\n            token.type === TYPE$6.LeftParenthesis ||\n            token.type === TYPE$6.LeftSquareBracket ||\n            token.type === TYPE$6.LeftCurlyBracket ||\n            token.type === TYPE$6.Delim\n        );\n    }\n\n    function isCommaContextEnd(token) {\n        if (token === null) {\n            return true;\n        }\n\n        return (\n            token.type === TYPE$6.RightParenthesis ||\n            token.type === TYPE$6.RightSquareBracket ||\n            token.type === TYPE$6.RightCurlyBracket ||\n            token.type === TYPE$6.Delim\n        );\n    }\n\n    function internalMatch(tokens, state, syntaxes) {\n        function moveToNextToken() {\n            do {\n                tokenIndex++;\n                token = tokenIndex < tokens.length ? tokens[tokenIndex] : null;\n            } while (token !== null && (token.type === TYPE$6.WhiteSpace || token.type === TYPE$6.Comment));\n        }\n\n        function getNextToken(offset) {\n            var nextIndex = tokenIndex + offset;\n\n            return nextIndex < tokens.length ? tokens[nextIndex] : null;\n        }\n\n        function stateSnapshotFromSyntax(nextState, prev) {\n            return {\n                nextState: nextState,\n                matchStack: matchStack,\n                syntaxStack: syntaxStack,\n                thenStack: thenStack,\n                tokenIndex: tokenIndex,\n                prev: prev\n            };\n        }\n\n        function pushThenStack(nextState) {\n            thenStack = {\n                nextState: nextState,\n                matchStack: matchStack,\n                syntaxStack: syntaxStack,\n                prev: thenStack\n            };\n        }\n\n        function pushElseStack(nextState) {\n            elseStack = stateSnapshotFromSyntax(nextState, elseStack);\n        }\n\n        function addTokenToMatch() {\n            matchStack = {\n                type: TOKEN,\n                syntax: state.syntax,\n                token: token,\n                prev: matchStack\n            };\n\n            moveToNextToken();\n            syntaxStash = null;\n\n            if (tokenIndex > longestMatch) {\n                longestMatch = tokenIndex;\n            }\n        }\n\n        function openSyntax() {\n            syntaxStack = {\n                syntax: state.syntax,\n                opts: state.syntax.opts || (syntaxStack !== null && syntaxStack.opts) || null,\n                prev: syntaxStack\n            };\n\n            matchStack = {\n                type: OPEN_SYNTAX,\n                syntax: state.syntax,\n                token: matchStack.token,\n                prev: matchStack\n            };\n        }\n\n        function closeSyntax() {\n            if (matchStack.type === OPEN_SYNTAX) {\n                matchStack = matchStack.prev;\n            } else {\n                matchStack = {\n                    type: CLOSE_SYNTAX,\n                    syntax: syntaxStack.syntax,\n                    token: matchStack.token,\n                    prev: matchStack\n                };\n            }\n\n            syntaxStack = syntaxStack.prev;\n        }\n\n        var syntaxStack = null;\n        var thenStack = null;\n        var elseStack = null;\n\n        // null \u2013 stashing allowed, nothing stashed\n        // false \u2013 stashing disabled, nothing stashed\n        // anithing else \u2013 fail stashable syntaxes, some syntax stashed\n        var syntaxStash = null;\n\n        var iterationCount = 0; // count iterations and prevent infinite loop\n        var exitReason = null;\n\n        var token = null;\n        var tokenIndex = -1;\n        var longestMatch = 0;\n        var matchStack = {\n            type: STUB,\n            syntax: null,\n            token: null,\n            prev: null\n        };\n\n        moveToNextToken();\n\n        while (exitReason === null && ++iterationCount < ITERATION_LIMIT) {\n            // function mapList(list, fn) {\n            //     var result = [];\n            //     while (list) {\n            //         result.unshift(fn(list));\n            //         list = list.prev;\n            //     }\n            //     return result;\n            // }\n            // console.log('--\\n',\n            //     '#' + iterationCount,\n            //     require('util').inspect({\n            //         match: mapList(matchStack, x => x.type === TOKEN ? x.token && x.token.value : x.syntax ? ({ [OPEN_SYNTAX]: '<', [CLOSE_SYNTAX]: '</' }[x.type] || x.type) + '!' + x.syntax.name : null),\n            //         token: token && token.value,\n            //         tokenIndex,\n            //         syntax: syntax.type + (syntax.id ? ' #' + syntax.id : '')\n            //     }, { depth: null })\n            // );\n            switch (state.type) {\n                case 'Match':\n                    if (thenStack === null) {\n                        // turn to MISMATCH when some tokens left unmatched\n                        if (token !== null) {\n                            // doesn't mismatch if just one token left and it's an IE hack\n                            if (tokenIndex !== tokens.length - 1 || (token.value !== '\\\\0' && token.value !== '\\\\9')) {\n                                state = MISMATCH$1;\n                                break;\n                            }\n                        }\n\n                        // break the main loop, return a result - MATCH\n                        exitReason = EXIT_REASON_MATCH;\n                        break;\n                    }\n\n                    // go to next syntax (`then` branch)\n                    state = thenStack.nextState;\n\n                    // check match is not empty\n                    if (state === DISALLOW_EMPTY$1) {\n                        if (thenStack.matchStack === matchStack) {\n                            state = MISMATCH$1;\n                            break;\n                        } else {\n                            state = MATCH$1;\n                        }\n                    }\n\n                    // close syntax if needed\n                    while (thenStack.syntaxStack !== syntaxStack) {\n                        closeSyntax();\n                    }\n\n                    // pop stack\n                    thenStack = thenStack.prev;\n                    break;\n\n                case 'Mismatch':\n                    // when some syntax is stashed\n                    if (syntaxStash !== null && syntaxStash !== false) {\n                        // there is no else branches or a branch reduce match stack\n                        if (elseStack === null || tokenIndex > elseStack.tokenIndex) {\n                            // restore state from the stash\n                            elseStack = syntaxStash;\n                            syntaxStash = false; // disable stashing\n                        }\n                    } else if (elseStack === null) {\n                        // no else branches -> break the main loop\n                        // return a result - MISMATCH\n                        exitReason = EXIT_REASON_MISMATCH;\n                        break;\n                    }\n\n                    // go to next syntax (`else` branch)\n                    state = elseStack.nextState;\n\n                    // restore all the rest stack states\n                    thenStack = elseStack.thenStack;\n                    syntaxStack = elseStack.syntaxStack;\n                    matchStack = elseStack.matchStack;\n                    tokenIndex = elseStack.tokenIndex;\n                    token = tokenIndex < tokens.length ? tokens[tokenIndex] : null;\n\n                    // pop stack\n                    elseStack = elseStack.prev;\n                    break;\n\n                case 'MatchGraph':\n                    state = state.match;\n                    break;\n\n                case 'If':\n                    // IMPORTANT: else stack push must go first,\n                    // since it stores the state of thenStack before changes\n                    if (state.else !== MISMATCH$1) {\n                        pushElseStack(state.else);\n                    }\n\n                    if (state.then !== MATCH$1) {\n                        pushThenStack(state.then);\n                    }\n\n                    state = state.match;\n                    break;\n\n                case 'MatchOnce':\n                    state = {\n                        type: 'MatchOnceBuffer',\n                        syntax: state,\n                        index: 0,\n                        mask: 0\n                    };\n                    break;\n\n                case 'MatchOnceBuffer':\n                    var terms = state.syntax.terms;\n\n                    if (state.index === terms.length) {\n                        // no matches at all or it's required all terms to be matched\n                        if (state.mask === 0 || state.syntax.all) {\n                            state = MISMATCH$1;\n                            break;\n                        }\n\n                        // a partial match is ok\n                        state = MATCH$1;\n                        break;\n                    }\n\n                    // all terms are matched\n                    if (state.mask === (1 << terms.length) - 1) {\n                        state = MATCH$1;\n                        break;\n                    }\n\n                    for (; state.index < terms.length; state.index++) {\n                        var matchFlag = 1 << state.index;\n\n                        if ((state.mask & matchFlag) === 0) {\n                            // IMPORTANT: else stack push must go first,\n                            // since it stores the state of thenStack before changes\n                            pushElseStack(state);\n                            pushThenStack({\n                                type: 'AddMatchOnce',\n                                syntax: state.syntax,\n                                mask: state.mask | matchFlag\n                            });\n\n                            // match\n                            state = terms[state.index++];\n                            break;\n                        }\n                    }\n                    break;\n\n                case 'AddMatchOnce':\n                    state = {\n                        type: 'MatchOnceBuffer',\n                        syntax: state.syntax,\n                        index: 0,\n                        mask: state.mask\n                    };\n                    break;\n\n                case 'Enum':\n                    if (token !== null) {\n                        var name = token.value.toLowerCase();\n\n                        // drop \\0 and \\9 hack from keyword name\n                        if (name.indexOf('\\\\') !== -1) {\n                            name = name.replace(/\\\\[09].*$/, '');\n                        }\n\n                        if (hasOwnProperty$1.call(state.map, name)) {\n                            state = state.map[name];\n                            break;\n                        }\n                    }\n\n                    state = MISMATCH$1;\n                    break;\n\n                case 'Generic':\n                    var opts = syntaxStack !== null ? syntaxStack.opts : null;\n                    var lastTokenIndex = tokenIndex + Math.floor(state.fn(token, getNextToken, opts));\n\n                    if (!isNaN(lastTokenIndex) && lastTokenIndex > tokenIndex) {\n                        while (tokenIndex < lastTokenIndex) {\n                            addTokenToMatch();\n                        }\n\n                        state = MATCH$1;\n                    } else {\n                        state = MISMATCH$1;\n                    }\n\n                    break;\n\n                case 'Type':\n                case 'Property':\n                    var syntaxDict = state.type === 'Type' ? 'types' : 'properties';\n                    var dictSyntax = hasOwnProperty$1.call(syntaxes, syntaxDict) ? syntaxes[syntaxDict][state.name] : null;\n\n                    if (!dictSyntax || !dictSyntax.match) {\n                        throw new Error(\n                            'Bad syntax reference: ' +\n                            (state.type === 'Type'\n                                ? '<' + state.name + '>'\n                                : '<\\'' + state.name + '\\'>')\n                        );\n                    }\n\n                    // stash a syntax for types with low priority\n                    if (syntaxStash !== false && token !== null && state.type === 'Type') {\n                        var lowPriorityMatching =\n                            // https://drafts.csswg.org/css-values-4/#custom-idents\n                            // When parsing positionally-ambiguous keywords in a property value, a <custom-ident> production\n                            // can only claim the keyword if no other unfulfilled production can claim it.\n                            (state.name === 'custom-ident' && token.type === TYPE$6.Ident) ||\n\n                            // https://drafts.csswg.org/css-values-4/#lengths\n                            // ... if a `0` could be parsed as either a <number> or a <length> in a property (such as line-height),\n                            // it must parse as a <number>\n                            (state.name === 'length' && token.value === '0');\n\n                        if (lowPriorityMatching) {\n                            if (syntaxStash === null) {\n                                syntaxStash = stateSnapshotFromSyntax(state, elseStack);\n                            }\n\n                            state = MISMATCH$1;\n                            break;\n                        }\n                    }\n\n                    openSyntax();\n                    state = dictSyntax.match;\n                    break;\n\n                case 'Keyword':\n                    var name = state.name;\n\n                    if (token !== null) {\n                        var keywordName = token.value;\n\n                        // drop \\0 and \\9 hack from keyword name\n                        if (keywordName.indexOf('\\\\') !== -1) {\n                            keywordName = keywordName.replace(/\\\\[09].*$/, '');\n                        }\n\n                        if (areStringsEqualCaseInsensitive(keywordName, name)) {\n                            addTokenToMatch();\n                            state = MATCH$1;\n                            break;\n                        }\n                    }\n\n                    state = MISMATCH$1;\n                    break;\n\n                case 'AtKeyword':\n                case 'Function':\n                    if (token !== null && areStringsEqualCaseInsensitive(token.value, state.name)) {\n                        addTokenToMatch();\n                        state = MATCH$1;\n                        break;\n                    }\n\n                    state = MISMATCH$1;\n                    break;\n\n                case 'Token':\n                    if (token !== null && token.value === state.value) {\n                        addTokenToMatch();\n                        state = MATCH$1;\n                        break;\n                    }\n\n                    state = MISMATCH$1;\n                    break;\n\n                case 'Comma':\n                    if (token !== null && token.type === TYPE$6.Comma) {\n                        if (isCommaContextStart(matchStack.token)) {\n                            state = MISMATCH$1;\n                        } else {\n                            addTokenToMatch();\n                            state = isCommaContextEnd(token) ? MISMATCH$1 : MATCH$1;\n                        }\n                    } else {\n                        state = isCommaContextStart(matchStack.token) || isCommaContextEnd(token) ? MATCH$1 : MISMATCH$1;\n                    }\n\n                    break;\n\n                case 'String':\n                    var string = '';\n\n                    for (var lastTokenIndex = tokenIndex; lastTokenIndex < tokens.length && string.length < state.value.length; lastTokenIndex++) {\n                        string += tokens[lastTokenIndex].value;\n                    }\n\n                    if (areStringsEqualCaseInsensitive(string, state.value)) {\n                        while (tokenIndex < lastTokenIndex) {\n                            addTokenToMatch();\n                        }\n\n                        state = MATCH$1;\n                    } else {\n                        state = MISMATCH$1;\n                    }\n\n                    break;\n\n                default:\n                    throw new Error('Unknown node type: ' + state.type);\n            }\n        }\n\n        totalIterationCount += iterationCount;\n\n        switch (exitReason) {\n            case null:\n                console.warn('[csstree-match] BREAK after ' + ITERATION_LIMIT + ' iterations');\n                exitReason = EXIT_REASON_ITERATION_LIMIT;\n                matchStack = null;\n                break;\n\n            case EXIT_REASON_MATCH:\n                while (syntaxStack !== null) {\n                    closeSyntax();\n                }\n                break;\n\n            default:\n                matchStack = null;\n        }\n\n        return {\n            tokens: tokens,\n            reason: exitReason,\n            iterations: iterationCount,\n            match: matchStack,\n            longestMatch: longestMatch\n        };\n    }\n\n    function matchAsList(tokens, matchGraph, syntaxes) {\n        var matchResult = internalMatch(tokens, matchGraph, syntaxes || {});\n\n        if (matchResult.match !== null) {\n            var item = reverseList(matchResult.match).prev;\n\n            matchResult.match = [];\n\n            while (item !== null) {\n                switch (item.type) {\n                    case STUB:\n                        break;\n\n                    case OPEN_SYNTAX:\n                    case CLOSE_SYNTAX:\n                        matchResult.match.push({\n                            type: item.type,\n                            syntax: item.syntax\n                        });\n                        break;\n\n                    default:\n                        matchResult.match.push({\n                            token: item.token.value,\n                            node: item.token.node\n                        });\n                        break;\n                }\n\n                item = item.prev;\n            }\n        }\n\n        return matchResult;\n    }\n\n    function matchAsTree(tokens, matchGraph, syntaxes) {\n        var matchResult = internalMatch(tokens, matchGraph, syntaxes || {});\n\n        if (matchResult.match === null) {\n            return matchResult;\n        }\n\n        var item = matchResult.match;\n        var host = matchResult.match = {\n            syntax: matchGraph.syntax || null,\n            match: []\n        };\n        var hostStack = [host];\n\n        // revert a list and start with 2nd item since 1st is a stub item\n        item = reverseList(item).prev;\n\n        // build a tree\n        while (item !== null) {\n            switch (item.type) {\n                case OPEN_SYNTAX:\n                    host.match.push(host = {\n                        syntax: item.syntax,\n                        match: []\n                    });\n                    hostStack.push(host);\n                    break;\n\n                case CLOSE_SYNTAX:\n                    hostStack.pop();\n                    host = hostStack[hostStack.length - 1];\n                    break;\n\n                default:\n                    host.match.push({\n                        syntax: item.syntax || null,\n                        token: item.token.value,\n                        node: item.token.node\n                    });\n            }\n\n            item = item.prev;\n        }\n\n        return matchResult;\n    }\n\n    var match = {\n        matchAsList: matchAsList,\n        matchAsTree: matchAsTree,\n        getTotalIterationCount: function() {\n            return totalIterationCount;\n        }\n    };\n\n    function getTrace(node) {\n        function shouldPutToTrace(syntax) {\n            if (syntax === null) {\n                return false;\n            }\n\n            return (\n                syntax.type === 'Type' ||\n                syntax.type === 'Property' ||\n                syntax.type === 'Keyword'\n            );\n        }\n\n        function hasMatch(matchNode) {\n            if (Array.isArray(matchNode.match)) {\n                // use for-loop for better perfomance\n                for (var i = 0; i < matchNode.match.length; i++) {\n                    if (hasMatch(matchNode.match[i])) {\n                        if (shouldPutToTrace(matchNode.syntax)) {\n                            result.unshift(matchNode.syntax);\n                        }\n\n                        return true;\n                    }\n                }\n            } else if (matchNode.node === node) {\n                result = shouldPutToTrace(matchNode.syntax)\n                    ? [matchNode.syntax]\n                    : [];\n\n                return true;\n            }\n\n            return false;\n        }\n\n        var result = null;\n\n        if (this.matched !== null) {\n            hasMatch(this.matched);\n        }\n\n        return result;\n    }\n\n    function testNode(match, node, fn) {\n        var trace = getTrace.call(match, node);\n\n        if (trace === null) {\n            return false;\n        }\n\n        return trace.some(fn);\n    }\n\n    function isType(node, type) {\n        return testNode(this, node, function(matchNode) {\n            return matchNode.type === 'Type' && matchNode.name === type;\n        });\n    }\n\n    function isProperty(node, property) {\n        return testNode(this, node, function(matchNode) {\n            return matchNode.type === 'Property' && matchNode.name === property;\n        });\n    }\n\n    function isKeyword(node) {\n        return testNode(this, node, function(matchNode) {\n            return matchNode.type === 'Keyword';\n        });\n    }\n\n    var trace = {\n        getTrace: getTrace,\n        isType: isType,\n        isProperty: isProperty,\n        isKeyword: isKeyword\n    };\n\n    function getFirstMatchNode(matchNode) {\n        if ('node' in matchNode) {\n            return matchNode.node;\n        }\n\n        return getFirstMatchNode(matchNode.match[0]);\n    }\n\n    function getLastMatchNode(matchNode) {\n        if ('node' in matchNode) {\n            return matchNode.node;\n        }\n\n        return getLastMatchNode(matchNode.match[matchNode.match.length - 1]);\n    }\n\n    function matchFragments(lexer, ast, match, type, name) {\n        function findFragments(matchNode) {\n            if (matchNode.syntax !== null &&\n                matchNode.syntax.type === type &&\n                matchNode.syntax.name === name) {\n                var start = getFirstMatchNode(matchNode);\n                var end = getLastMatchNode(matchNode);\n\n                lexer.syntax.walk(ast, function(node, item, list) {\n                    if (node === start) {\n                        var nodes = new List_1();\n\n                        do {\n                            nodes.appendData(item.data);\n\n                            if (item.data === end) {\n                                break;\n                            }\n\n                            item = item.next;\n                        } while (item !== null);\n\n                        fragments.push({\n                            parent: list,\n                            nodes: nodes\n                        });\n                    }\n                });\n            }\n\n            if (Array.isArray(matchNode.match)) {\n                matchNode.match.forEach(findFragments);\n            }\n        }\n\n        var fragments = [];\n\n        if (match.matched !== null) {\n            findFragments(match.matched);\n        }\n\n        return fragments;\n    }\n\n    var search = {\n        matchFragments: matchFragments\n    };\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n\n    function isValidNumber(value) {\n        // Number.isInteger(value) && value >= 0\n        return (\n            typeof value === 'number' &&\n            isFinite(value) &&\n            Math.floor(value) === value &&\n            value >= 0\n        );\n    }\n\n    function isValidLocation(loc) {\n        return (\n            Boolean(loc) &&\n            isValidNumber(loc.offset) &&\n            isValidNumber(loc.line) &&\n            isValidNumber(loc.column)\n        );\n    }\n\n    function createNodeStructureChecker(type, fields) {\n        return function checkNode(node, warn) {\n            if (!node || node.constructor !== Object) {\n                return warn(node, 'Type of node should be an Object');\n            }\n\n            for (var key in node) {\n                var valid = true;\n\n                if (hasOwnProperty$2.call(node, key) === false) {\n                    continue;\n                }\n\n                if (key === 'type') {\n                    if (node.type !== type) {\n                        warn(node, 'Wrong node type `' + node.type + '`, expected `' + type + '`');\n                    }\n                } else if (key === 'loc') {\n                    if (node.loc === null) {\n                        continue;\n                    } else if (node.loc && node.loc.constructor === Object) {\n                        if (typeof node.loc.source !== 'string') {\n                            key += '.source';\n                        } else if (!isValidLocation(node.loc.start)) {\n                            key += '.start';\n                        } else if (!isValidLocation(node.loc.end)) {\n                            key += '.end';\n                        } else {\n                            continue;\n                        }\n                    }\n\n                    valid = false;\n                } else if (fields.hasOwnProperty(key)) {\n                    for (var i = 0, valid = false; !valid && i < fields[key].length; i++) {\n                        var fieldType = fields[key][i];\n\n                        switch (fieldType) {\n                            case String:\n                                valid = typeof node[key] === 'string';\n                                break;\n\n                            case Boolean:\n                                valid = typeof node[key] === 'boolean';\n                                break;\n\n                            case null:\n                                valid = node[key] === null;\n                                break;\n\n                            default:\n                                if (typeof fieldType === 'string') {\n                                    valid = node[key] && node[key].type === fieldType;\n                                } else if (Array.isArray(fieldType)) {\n                                    valid = node[key] instanceof List_1;\n                                }\n                        }\n                    }\n                } else {\n                    warn(node, 'Unknown field `' + key + '` for ' + type + ' node type');\n                }\n\n                if (!valid) {\n                    warn(node, 'Bad value for `' + type + '.' + key + '`');\n                }\n            }\n\n            for (var key in fields) {\n                if (hasOwnProperty$2.call(fields, key) &&\n                    hasOwnProperty$2.call(node, key) === false) {\n                    warn(node, 'Field `' + type + '.' + key + '` is missed');\n                }\n            }\n        };\n    }\n\n    function processStructure(name, nodeType) {\n        var structure = nodeType.structure;\n        var fields = {\n            type: String,\n            loc: true\n        };\n        var docs = {\n            type: '\"' + name + '\"'\n        };\n\n        for (var key in structure) {\n            if (hasOwnProperty$2.call(structure, key) === false) {\n                continue;\n            }\n\n            var docsTypes = [];\n            var fieldTypes = fields[key] = Array.isArray(structure[key])\n                ? structure[key].slice()\n                : [structure[key]];\n\n            for (var i = 0; i < fieldTypes.length; i++) {\n                var fieldType = fieldTypes[i];\n                if (fieldType === String || fieldType === Boolean) {\n                    docsTypes.push(fieldType.name);\n                } else if (fieldType === null) {\n                    docsTypes.push('null');\n                } else if (typeof fieldType === 'string') {\n                    docsTypes.push('<' + fieldType + '>');\n                } else if (Array.isArray(fieldType)) {\n                    docsTypes.push('List'); // TODO: use type enum\n                } else {\n                    throw new Error('Wrong value `' + fieldType + '` in `' + name + '.' + key + '` structure definition');\n                }\n            }\n\n            docs[key] = docsTypes.join(' | ');\n        }\n\n        return {\n            docs: docs,\n            check: createNodeStructureChecker(name, fields)\n        };\n    }\n\n    var structure = {\n        getStructureFromConfig: function(config) {\n            var structure = {};\n\n            if (config.node) {\n                for (var name in config.node) {\n                    if (hasOwnProperty$2.call(config.node, name)) {\n                        var nodeType = config.node[name];\n\n                        if (nodeType.structure) {\n                            structure[name] = processStructure(name, nodeType);\n                        } else {\n                            throw new Error('Missed `structure` field in `' + name + '` node type definition');\n                        }\n                    }\n                }\n            }\n\n            return structure;\n        }\n    };\n\n    var SyntaxReferenceError$1 = error.SyntaxReferenceError;\n    var MatchError$1 = error.MatchError;\n\n\n\n\n\n\n    var buildMatchGraph$1 = matchGraph.buildMatchGraph;\n    var matchAsTree$1 = match.matchAsTree;\n\n\n    var getStructureFromConfig = structure.getStructureFromConfig;\n    var cssWideKeywords$1 = buildMatchGraph$1('inherit | initial | unset');\n    var cssWideKeywordsWithExpression = buildMatchGraph$1('inherit | initial | unset | <-ms-legacy-expression>');\n\n    function dumpMapSyntax(map, compact, syntaxAsAst) {\n        var result = {};\n\n        for (var name in map) {\n            if (map[name].syntax) {\n                result[name] = syntaxAsAst\n                    ? map[name].syntax\n                    : generate_1(map[name].syntax, { compact: compact });\n            }\n        }\n\n        return result;\n    }\n\n    function valueHasVar(tokens) {\n        for (var i = 0; i < tokens.length; i++) {\n            if (tokens[i].value.toLowerCase() === 'var(') {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function buildMatchResult(match, error, iterations) {\n        return {\n            matched: match,\n            iterations: iterations,\n            error: error,\n            getTrace: trace.getTrace,\n            isType: trace.isType,\n            isProperty: trace.isProperty,\n            isKeyword: trace.isKeyword\n        };\n    }\n\n    function matchSyntax(lexer, syntax, value, useCommon) {\n        var tokens = prepareTokens_1(value, lexer.syntax);\n        var result;\n\n        if (valueHasVar(tokens)) {\n            return buildMatchResult(null, new Error('Matching for a tree with var() is not supported'));\n        }\n\n        if (useCommon) {\n            result = matchAsTree$1(tokens, lexer.valueCommonSyntax, lexer);\n        }\n\n        if (!useCommon || !result.match) {\n            result = matchAsTree$1(tokens, syntax.match, lexer);\n            if (!result.match) {\n                return buildMatchResult(\n                    null,\n                    new MatchError$1(result.reason, syntax.syntax, value, result),\n                    result.iterations\n                );\n            }\n        }\n\n        return buildMatchResult(result.match, null, result.iterations);\n    }\n\n    var Lexer = function(config, syntax, structure) {\n        this.valueCommonSyntax = cssWideKeywords$1;\n        this.syntax = syntax;\n        this.generic = false;\n        this.atrules = {};\n        this.properties = {};\n        this.types = {};\n        this.structure = structure || getStructureFromConfig(config);\n\n        if (config) {\n            if (config.types) {\n                for (var name in config.types) {\n                    this.addType_(name, config.types[name]);\n                }\n            }\n\n            if (config.generic) {\n                this.generic = true;\n                for (var name in generic) {\n                    this.addType_(name, generic[name]);\n                }\n            }\n\n            if (config.atrules) {\n                for (var name in config.atrules) {\n                    this.addAtrule_(name, config.atrules[name]);\n                }\n            }\n\n            if (config.properties) {\n                for (var name in config.properties) {\n                    this.addProperty_(name, config.properties[name]);\n                }\n            }\n        }\n    };\n\n    Lexer.prototype = {\n        structure: {},\n        checkStructure: function(ast) {\n            function collectWarning(node, message) {\n                warns.push({\n                    node: node,\n                    message: message\n                });\n            }\n\n            var structure = this.structure;\n            var warns = [];\n\n            this.syntax.walk(ast, function(node) {\n                if (structure.hasOwnProperty(node.type)) {\n                    structure[node.type].check(node, collectWarning);\n                } else {\n                    collectWarning(node, 'Unknown node type `' + node.type + '`');\n                }\n            });\n\n            return warns.length ? warns : false;\n        },\n\n        createDescriptor: function(syntax, type, name) {\n            var ref = {\n                type: type,\n                name: name\n            };\n            var descriptor = {\n                type: type,\n                name: name,\n                syntax: null,\n                match: null\n            };\n\n            if (typeof syntax === 'function') {\n                descriptor.match = buildMatchGraph$1(syntax, ref);\n            } else {\n                if (typeof syntax === 'string') {\n                    // lazy parsing on first access\n                    Object.defineProperty(descriptor, 'syntax', {\n                        get: function() {\n                            Object.defineProperty(descriptor, 'syntax', {\n                                value: parse_1(syntax)\n                            });\n\n                            return descriptor.syntax;\n                        }\n                    });\n                } else {\n                    descriptor.syntax = syntax;\n                }\n\n                // lazy graph build on first access\n                Object.defineProperty(descriptor, 'match', {\n                    get: function() {\n                        Object.defineProperty(descriptor, 'match', {\n                            value: buildMatchGraph$1(descriptor.syntax, ref)\n                        });\n\n                        return descriptor.match;\n                    }\n                });\n            }\n\n            return descriptor;\n        },\n        addAtrule_: function(name, syntax) {\n            this.atrules[name] = {\n                prelude: syntax.prelude ? this.createDescriptor(syntax.prelude, 'AtrulePrelude', name) : null,\n                descriptors: syntax.descriptors\n                    ? Object.keys(syntax.descriptors).reduce((res, name) => {\n                        res[name] = this.createDescriptor(syntax.descriptors[name], 'AtruleDescriptor', name);\n                        return res;\n                    }, {})\n                    : null\n            };\n        },\n        addProperty_: function(name, syntax) {\n            this.properties[name] = this.createDescriptor(syntax, 'Property', name);\n        },\n        addType_: function(name, syntax) {\n            this.types[name] = this.createDescriptor(syntax, 'Type', name);\n\n            if (syntax === generic['-ms-legacy-expression']) {\n                this.valueCommonSyntax = cssWideKeywordsWithExpression;\n            }\n        },\n\n        matchAtrulePrelude: function(atruleName, prelude) {\n            var atrule = names.keyword(atruleName);\n\n            var atrulePreludeSyntax = atrule.vendor\n                ? this.getAtrulePrelude(atrule.name) || this.getAtrulePrelude(atrule.basename)\n                : this.getAtrulePrelude(atrule.name);\n\n            if (!atrulePreludeSyntax) {\n                if (atrule.basename in this.atrules) {\n                    return buildMatchResult(null, new Error('At-rule `' + atruleName + '` should not contain a prelude'));\n                }\n\n                return buildMatchResult(null, new SyntaxReferenceError$1('Unknown at-rule', atruleName));\n            }\n\n            return matchSyntax(this, atrulePreludeSyntax, prelude, true);\n        },\n        matchAtruleDescriptor: function(atruleName, descriptorName, value) {\n            var atrule = names.keyword(atruleName);\n            var descriptor = names.keyword(descriptorName);\n\n            var atruleEntry = atrule.vendor\n                ? this.atrules[atrule.name] || this.atrules[atrule.basename]\n                : this.atrules[atrule.name];\n\n            if (!atruleEntry) {\n                return buildMatchResult(null, new SyntaxReferenceError$1('Unknown at-rule', atruleName));\n            }\n\n            if (!atruleEntry.descriptors) {\n                return buildMatchResult(null, new Error('At-rule `' + atruleName + '` has no known descriptors'));\n            }\n\n            var atruleDescriptorSyntax = descriptor.vendor\n                ? atruleEntry.descriptors[descriptor.name] || atruleEntry.descriptors[descriptor.basename]\n                : atruleEntry.descriptors[descriptor.name];\n\n            if (!atruleDescriptorSyntax) {\n                return buildMatchResult(null, new SyntaxReferenceError$1('Unknown at-rule descriptor', descriptorName));\n            }\n\n            return matchSyntax(this, atruleDescriptorSyntax, value, true);\n        },\n        matchDeclaration: function(node) {\n            if (node.type !== 'Declaration') {\n                return buildMatchResult(null, new Error('Not a Declaration node'));\n            }\n\n            return this.matchProperty(node.property, node.value);\n        },\n        matchProperty: function(propertyName, value) {\n            var property = names.property(propertyName);\n\n            // don't match syntax for a custom property\n            if (property.custom) {\n                return buildMatchResult(null, new Error('Lexer matching doesn\\'t applicable for custom properties'));\n            }\n\n            var propertySyntax = property.vendor\n                ? this.getProperty(property.name) || this.getProperty(property.basename)\n                : this.getProperty(property.name);\n\n            if (!propertySyntax) {\n                return buildMatchResult(null, new SyntaxReferenceError$1('Unknown property', propertyName));\n            }\n\n            return matchSyntax(this, propertySyntax, value, true);\n        },\n        matchType: function(typeName, value) {\n            var typeSyntax = this.getType(typeName);\n\n            if (!typeSyntax) {\n                return buildMatchResult(null, new SyntaxReferenceError$1('Unknown type', typeName));\n            }\n\n            return matchSyntax(this, typeSyntax, value, false);\n        },\n        match: function(syntax, value) {\n            if (typeof syntax !== 'string' && (!syntax || !syntax.type)) {\n                return buildMatchResult(null, new SyntaxReferenceError$1('Bad syntax'));\n            }\n\n            if (typeof syntax === 'string' || !syntax.match) {\n                syntax = this.createDescriptor(syntax, 'Type', 'anonymous');\n            }\n\n            return matchSyntax(this, syntax, value, false);\n        },\n\n        findValueFragments: function(propertyName, value, type, name) {\n            return search.matchFragments(this, value, this.matchProperty(propertyName, value), type, name);\n        },\n        findDeclarationValueFragments: function(declaration, type, name) {\n            return search.matchFragments(this, declaration.value, this.matchDeclaration(declaration), type, name);\n        },\n        findAllFragments: function(ast, type, name) {\n            var result = [];\n\n            this.syntax.walk(ast, {\n                visit: 'Declaration',\n                enter: function(declaration) {\n                    result.push.apply(result, this.findDeclarationValueFragments(declaration, type, name));\n                }.bind(this)\n            });\n\n            return result;\n        },\n\n        getAtrulePrelude: function(atruleName) {\n            return this.atrules.hasOwnProperty(atruleName) ? this.atrules[atruleName].prelude : null;\n        },\n        getAtruleDescriptor: function(atruleName, name) {\n            return this.atrules.hasOwnProperty(atruleName) && this.atrules.declarators\n                ? this.atrules[atruleName].declarators[name] || null\n                : null;\n        },\n        getProperty: function(name) {\n            return this.properties.hasOwnProperty(name) ? this.properties[name] : null;\n        },\n        getType: function(name) {\n            return this.types.hasOwnProperty(name) ? this.types[name] : null;\n        },\n\n        validate: function() {\n            function validate(syntax, name, broken, descriptor) {\n                if (broken.hasOwnProperty(name)) {\n                    return broken[name];\n                }\n\n                broken[name] = false;\n                if (descriptor.syntax !== null) {\n                    walk(descriptor.syntax, function(node) {\n                        if (node.type !== 'Type' && node.type !== 'Property') {\n                            return;\n                        }\n\n                        var map = node.type === 'Type' ? syntax.types : syntax.properties;\n                        var brokenMap = node.type === 'Type' ? brokenTypes : brokenProperties;\n\n                        if (!map.hasOwnProperty(node.name) || validate(syntax, node.name, brokenMap, map[node.name])) {\n                            broken[name] = true;\n                        }\n                    }, this);\n                }\n            }\n\n            var brokenTypes = {};\n            var brokenProperties = {};\n\n            for (var key in this.types) {\n                validate(this, key, brokenTypes, this.types[key]);\n            }\n\n            for (var key in this.properties) {\n                validate(this, key, brokenProperties, this.properties[key]);\n            }\n\n            brokenTypes = Object.keys(brokenTypes).filter(function(name) {\n                return brokenTypes[name];\n            });\n            brokenProperties = Object.keys(brokenProperties).filter(function(name) {\n                return brokenProperties[name];\n            });\n\n            if (brokenTypes.length || brokenProperties.length) {\n                return {\n                    types: brokenTypes,\n                    properties: brokenProperties\n                };\n            }\n\n            return null;\n        },\n        dump: function(syntaxAsAst, pretty) {\n            return {\n                generic: this.generic,\n                types: dumpMapSyntax(this.types, !pretty, syntaxAsAst),\n                properties: dumpMapSyntax(this.properties, !pretty, syntaxAsAst)\n            };\n        },\n        toString: function() {\n            return JSON.stringify(this.dump());\n        }\n    };\n\n    var Lexer_1 = Lexer;\n\n    var definitionSyntax = {\n        SyntaxError: _SyntaxError$1,\n        parse: parse_1,\n        generate: generate_1,\n        walk: walk\n    };\n\n    var isBOM$2 = tokenizer.isBOM;\n\n    var N$3 = 10;\n    var F$2 = 12;\n    var R$2 = 13;\n\n    function computeLinesAndColumns(host, source) {\n        var sourceLength = source.length;\n        var lines = adoptBuffer(host.lines, sourceLength); // +1\n        var line = host.startLine;\n        var columns = adoptBuffer(host.columns, sourceLength);\n        var column = host.startColumn;\n        var startOffset = source.length > 0 ? isBOM$2(source.charCodeAt(0)) : 0;\n\n        for (var i = startOffset; i < sourceLength; i++) { // -1\n            var code = source.charCodeAt(i);\n\n            lines[i] = line;\n            columns[i] = column++;\n\n            if (code === N$3 || code === R$2 || code === F$2) {\n                if (code === R$2 && i + 1 < sourceLength && source.charCodeAt(i + 1) === N$3) {\n                    i++;\n                    lines[i] = line;\n                    columns[i] = column;\n                }\n\n                line++;\n                column = 1;\n            }\n        }\n\n        lines[i] = line;\n        columns[i] = column;\n\n        host.lines = lines;\n        host.columns = columns;\n    }\n\n    var OffsetToLocation = function() {\n        this.lines = null;\n        this.columns = null;\n        this.linesAndColumnsComputed = false;\n    };\n\n    OffsetToLocation.prototype = {\n        setSource: function(source, startOffset, startLine, startColumn) {\n            this.source = source;\n            this.startOffset = typeof startOffset === 'undefined' ? 0 : startOffset;\n            this.startLine = typeof startLine === 'undefined' ? 1 : startLine;\n            this.startColumn = typeof startColumn === 'undefined' ? 1 : startColumn;\n            this.linesAndColumnsComputed = false;\n        },\n\n        ensureLinesAndColumnsComputed: function() {\n            if (!this.linesAndColumnsComputed) {\n                computeLinesAndColumns(this, this.source);\n                this.linesAndColumnsComputed = true;\n            }\n        },\n        getLocation: function(offset, filename) {\n            this.ensureLinesAndColumnsComputed();\n\n            return {\n                source: filename,\n                offset: this.startOffset + offset,\n                line: this.lines[offset],\n                column: this.columns[offset]\n            };\n        },\n        getLocationRange: function(start, end, filename) {\n            this.ensureLinesAndColumnsComputed();\n\n            return {\n                source: filename,\n                start: {\n                    offset: this.startOffset + start,\n                    line: this.lines[start],\n                    column: this.columns[start]\n                },\n                end: {\n                    offset: this.startOffset + end,\n                    line: this.lines[end],\n                    column: this.columns[end]\n                }\n            };\n        }\n    };\n\n    var OffsetToLocation_1 = OffsetToLocation;\n\n    var TYPE$7 = tokenizer.TYPE;\n    var WHITESPACE$2 = TYPE$7.WhiteSpace;\n    var COMMENT$2 = TYPE$7.Comment;\n\n    var sequence = function readSequence(recognizer) {\n        var children = this.createList();\n        var child = null;\n        var context = {\n            recognizer: recognizer,\n            space: null,\n            ignoreWS: false,\n            ignoreWSAfter: false\n        };\n\n        this.scanner.skipSC();\n\n        while (!this.scanner.eof) {\n            switch (this.scanner.tokenType) {\n                case COMMENT$2:\n                    this.scanner.next();\n                    continue;\n\n                case WHITESPACE$2:\n                    if (context.ignoreWS) {\n                        this.scanner.next();\n                    } else {\n                        context.space = this.WhiteSpace();\n                    }\n                    continue;\n            }\n\n            child = recognizer.getNode.call(this, context);\n\n            if (child === undefined) {\n                break;\n            }\n\n            if (context.space !== null) {\n                children.push(context.space);\n                context.space = null;\n            }\n\n            children.push(child);\n\n            if (context.ignoreWSAfter) {\n                context.ignoreWSAfter = false;\n                context.ignoreWS = true;\n            } else {\n                context.ignoreWS = false;\n            }\n        }\n\n        return children;\n    };\n\n    var findWhiteSpaceStart$1 = utils.findWhiteSpaceStart;\n\n    var noop$2 = function() {};\n\n    var TYPE$8 = _const.TYPE;\n    var NAME$2 = _const.NAME;\n    var WHITESPACE$3 = TYPE$8.WhiteSpace;\n    var IDENT$2 = TYPE$8.Ident;\n    var FUNCTION = TYPE$8.Function;\n    var URL = TYPE$8.Url;\n    var HASH = TYPE$8.Hash;\n    var PERCENTAGE = TYPE$8.Percentage;\n    var NUMBER$2 = TYPE$8.Number;\n    var NUMBERSIGN$1 = 0x0023; // U+0023 NUMBER SIGN (#)\n    var NULL = 0;\n\n    function createParseContext(name) {\n        return function() {\n            return this[name]();\n        };\n    }\n\n    function processConfig(config) {\n        var parserConfig = {\n            context: {},\n            scope: {},\n            atrule: {},\n            pseudo: {}\n        };\n\n        if (config.parseContext) {\n            for (var name in config.parseContext) {\n                switch (typeof config.parseContext[name]) {\n                    case 'function':\n                        parserConfig.context[name] = config.parseContext[name];\n                        break;\n\n                    case 'string':\n                        parserConfig.context[name] = createParseContext(config.parseContext[name]);\n                        break;\n                }\n            }\n        }\n\n        if (config.scope) {\n            for (var name in config.scope) {\n                parserConfig.scope[name] = config.scope[name];\n            }\n        }\n\n        if (config.atrule) {\n            for (var name in config.atrule) {\n                var atrule = config.atrule[name];\n\n                if (atrule.parse) {\n                    parserConfig.atrule[name] = atrule.parse;\n                }\n            }\n        }\n\n        if (config.pseudo) {\n            for (var name in config.pseudo) {\n                var pseudo = config.pseudo[name];\n\n                if (pseudo.parse) {\n                    parserConfig.pseudo[name] = pseudo.parse;\n                }\n            }\n        }\n\n        if (config.node) {\n            for (var name in config.node) {\n                parserConfig[name] = config.node[name].parse;\n            }\n        }\n\n        return parserConfig;\n    }\n\n    var create = function createParser(config) {\n        var parser = {\n            scanner: new TokenStream_1(),\n            locationMap: new OffsetToLocation_1(),\n\n            filename: '<unknown>',\n            needPositions: false,\n            onParseError: noop$2,\n            onParseErrorThrow: false,\n            parseAtrulePrelude: true,\n            parseRulePrelude: true,\n            parseValue: true,\n            parseCustomProperty: false,\n\n            readSequence: sequence,\n\n            createList: function() {\n                return new List_1();\n            },\n            createSingleNodeList: function(node) {\n                return new List_1().appendData(node);\n            },\n            getFirstListNode: function(list) {\n                return list && list.first();\n            },\n            getLastListNode: function(list) {\n                return list.last();\n            },\n\n            parseWithFallback: function(consumer, fallback) {\n                var startToken = this.scanner.tokenIndex;\n\n                try {\n                    return consumer.call(this);\n                } catch (e) {\n                    if (this.onParseErrorThrow) {\n                        throw e;\n                    }\n\n                    var fallbackNode = fallback.call(this, startToken);\n\n                    this.onParseErrorThrow = true;\n                    this.onParseError(e, fallbackNode);\n                    this.onParseErrorThrow = false;\n\n                    return fallbackNode;\n                }\n            },\n\n            lookupNonWSType: function(offset) {\n                do {\n                    var type = this.scanner.lookupType(offset++);\n                    if (type !== WHITESPACE$3) {\n                        return type;\n                    }\n                } while (type !== NULL);\n\n                return NULL;\n            },\n\n            eat: function(tokenType) {\n                if (this.scanner.tokenType !== tokenType) {\n                    var offset = this.scanner.tokenStart;\n                    var message = NAME$2[tokenType] + ' is expected';\n\n                    // tweak message and offset\n                    switch (tokenType) {\n                        case IDENT$2:\n                            // when identifier is expected but there is a function or url\n                            if (this.scanner.tokenType === FUNCTION || this.scanner.tokenType === URL) {\n                                offset = this.scanner.tokenEnd - 1;\n                                message = 'Identifier is expected but function found';\n                            } else {\n                                message = 'Identifier is expected';\n                            }\n                            break;\n\n                        case HASH:\n                            if (this.scanner.isDelim(NUMBERSIGN$1)) {\n                                this.scanner.next();\n                                offset++;\n                                message = 'Name is expected';\n                            }\n                            break;\n\n                        case PERCENTAGE:\n                            if (this.scanner.tokenType === NUMBER$2) {\n                                offset = this.scanner.tokenEnd;\n                                message = 'Percent sign is expected';\n                            }\n                            break;\n\n                        default:\n                            // when test type is part of another token show error for current position + 1\n                            // e.g. eat(HYPHENMINUS) will fail on \"-foo\", but pointing on \"-\" is odd\n                            if (this.scanner.source.charCodeAt(this.scanner.tokenStart) === tokenType) {\n                                offset = offset + 1;\n                            }\n                    }\n\n                    this.error(message, offset);\n                }\n\n                this.scanner.next();\n            },\n\n            consume: function(tokenType) {\n                var value = this.scanner.getTokenValue();\n\n                this.eat(tokenType);\n\n                return value;\n            },\n            consumeFunctionName: function() {\n                var name = this.scanner.source.substring(this.scanner.tokenStart, this.scanner.tokenEnd - 1);\n\n                this.eat(FUNCTION);\n\n                return name;\n            },\n\n            getLocation: function(start, end) {\n                if (this.needPositions) {\n                    return this.locationMap.getLocationRange(\n                        start,\n                        end,\n                        this.filename\n                    );\n                }\n\n                return null;\n            },\n            getLocationFromList: function(list) {\n                if (this.needPositions) {\n                    var head = this.getFirstListNode(list);\n                    var tail = this.getLastListNode(list);\n                    return this.locationMap.getLocationRange(\n                        head !== null ? head.loc.start.offset - this.locationMap.startOffset : this.scanner.tokenStart,\n                        tail !== null ? tail.loc.end.offset - this.locationMap.startOffset : this.scanner.tokenStart,\n                        this.filename\n                    );\n                }\n\n                return null;\n            },\n\n            error: function(message, offset) {\n                var location = typeof offset !== 'undefined' && offset < this.scanner.source.length\n                    ? this.locationMap.getLocation(offset)\n                    : this.scanner.eof\n                        ? this.locationMap.getLocation(findWhiteSpaceStart$1(this.scanner.source, this.scanner.source.length - 1))\n                        : this.locationMap.getLocation(this.scanner.tokenStart);\n\n                throw new _SyntaxError(\n                    message || 'Unexpected input',\n                    this.scanner.source,\n                    location.offset,\n                    location.line,\n                    location.column\n                );\n            }\n        };\n\n        config = processConfig(config || {});\n        for (var key in config) {\n            parser[key] = config[key];\n        }\n\n        return function(source, options) {\n            options = options || {};\n\n            var context = options.context || 'default';\n            var ast;\n\n            tokenizer(source, parser.scanner);\n            parser.locationMap.setSource(\n                source,\n                options.offset,\n                options.line,\n                options.column\n            );\n\n            parser.filename = options.filename || '<unknown>';\n            parser.needPositions = Boolean(options.positions);\n            parser.onParseError = typeof options.onParseError === 'function' ? options.onParseError : noop$2;\n            parser.onParseErrorThrow = false;\n            parser.parseAtrulePrelude = 'parseAtrulePrelude' in options ? Boolean(options.parseAtrulePrelude) : true;\n            parser.parseRulePrelude = 'parseRulePrelude' in options ? Boolean(options.parseRulePrelude) : true;\n            parser.parseValue = 'parseValue' in options ? Boolean(options.parseValue) : true;\n            parser.parseCustomProperty = 'parseCustomProperty' in options ? Boolean(options.parseCustomProperty) : false;\n\n            if (!parser.context.hasOwnProperty(context)) {\n                throw new Error('Unknown context `' + context + '`');\n            }\n\n            ast = parser.context[context].call(parser, options);\n\n            if (!parser.scanner.eof) {\n                parser.error();\n            }\n\n            return ast;\n        };\n    };\n\n    /* -*- Mode: js; js-indent-level: 2; -*- */\n    /*\n     * Copyright 2011 Mozilla Foundation and contributors\n     * Licensed under the New BSD license. See LICENSE or:\n     * http://opensource.org/licenses/BSD-3-Clause\n     */\n\n    var intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n    /**\n     * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n     */\n    var encode = function (number) {\n        if (0 <= number && number < intToCharMap.length) {\n            return intToCharMap[number];\n        }\n        throw new TypeError(\"Must be between 0 and 63: \" + number);\n    };\n\n    /**\n     * Decode a single base 64 character code digit to an integer. Returns -1 on\n     * failure.\n     */\n    var decode = function (charCode) {\n        var bigA = 65;     // 'A'\n        var bigZ = 90;     // 'Z'\n\n        var littleA = 97;  // 'a'\n        var littleZ = 122; // 'z'\n\n        var zero = 48;     // '0'\n        var nine = 57;     // '9'\n\n        var plus = 43;     // '+'\n        var slash = 47;    // '/'\n\n        var littleOffset = 26;\n        var numberOffset = 52;\n\n        // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n        if (bigA <= charCode && charCode <= bigZ) {\n            return (charCode - bigA);\n        }\n\n        // 26 - 51: abcdefghijklmnopqrstuvwxyz\n        if (littleA <= charCode && charCode <= littleZ) {\n            return (charCode - littleA + littleOffset);\n        }\n\n        // 52 - 61: 0123456789\n        if (zero <= charCode && charCode <= nine) {\n            return (charCode - zero + numberOffset);\n        }\n\n        // 62: +\n        if (charCode == plus) {\n            return 62;\n        }\n\n        // 63: /\n        if (charCode == slash) {\n            return 63;\n        }\n\n        // Invalid base64 digit.\n        return -1;\n    };\n\n    var base64 = {\n        encode: encode,\n        decode: decode\n    };\n\n    /* -*- Mode: js; js-indent-level: 2; -*- */\n    /*\n     * Copyright 2011 Mozilla Foundation and contributors\n     * Licensed under the New BSD license. See LICENSE or:\n     * http://opensource.org/licenses/BSD-3-Clause\n     *\n     * Based on the Base 64 VLQ implementation in Closure Compiler:\n     * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n     *\n     * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n     * Redistribution and use in source and binary forms, with or without\n     * modification, are permitted provided that the following conditions are\n     * met:\n     *\n     *  * Redistributions of source code must retain the above copyright\n     *    notice, this list of conditions and the following disclaimer.\n     *  * Redistributions in binary form must reproduce the above\n     *    copyright notice, this list of conditions and the following\n     *    disclaimer in the documentation and/or other materials provided\n     *    with the distribution.\n     *  * Neither the name of Google Inc. nor the names of its\n     *    contributors may be used to endorse or promote products derived\n     *    from this software without specific prior written permission.\n     *\n     * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n     * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n     * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n     * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n     * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n     * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n     * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n     * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n     * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n     * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n     * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n     */\n\n\n\n    // A single base 64 digit can contain 6 bits of data. For the base 64 variable\n    // length quantities we use in the source map spec, the first bit is the sign,\n    // the next four bits are the actual value, and the 6th bit is the\n    // continuation bit. The continuation bit tells us whether there are more\n    // digits in this value following this digit.\n    //\n    //   Continuation\n    //   |    Sign\n    //   |    |\n    //   V    V\n    //   101011\n\n    var VLQ_BASE_SHIFT = 5;\n\n    // binary: 100000\n    var VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n    // binary: 011111\n    var VLQ_BASE_MASK = VLQ_BASE - 1;\n\n    // binary: 100000\n    var VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n    /**\n     * Converts from a two-complement value to a value where the sign bit is\n     * placed in the least significant bit.  For example, as decimals:\n     *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n     *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n     */\n    function toVLQSigned(aValue) {\n        return aValue < 0\n            ? ((-aValue) << 1) + 1\n            : (aValue << 1) + 0;\n    }\n\n    /**\n     * Converts to a two-complement value from a value where the sign bit is\n     * placed in the least significant bit.  For example, as decimals:\n     *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n     *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n     */\n    function fromVLQSigned(aValue) {\n        var isNegative = (aValue & 1) === 1;\n        var shifted = aValue >> 1;\n        return isNegative\n            ? -shifted\n            : shifted;\n    }\n\n    /**\n     * Returns the base 64 VLQ encoded value.\n     */\n    var encode$1 = function base64VLQ_encode(aValue) {\n        var encoded = \"\";\n        var digit;\n\n        var vlq = toVLQSigned(aValue);\n\n        do {\n            digit = vlq & VLQ_BASE_MASK;\n            vlq >>>= VLQ_BASE_SHIFT;\n            if (vlq > 0) {\n                // There are still more digits in this value, so we must make sure the\n                // continuation bit is marked.\n                digit |= VLQ_CONTINUATION_BIT;\n            }\n            encoded += base64.encode(digit);\n        } while (vlq > 0);\n\n        return encoded;\n    };\n\n    /**\n     * Decodes the next base 64 VLQ value from the given string and returns the\n     * value and the rest of the string via the out parameter.\n     */\n    var decode$1 = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n        var strLen = aStr.length;\n        var result = 0;\n        var shift = 0;\n        var continuation, digit;\n\n        do {\n            if (aIndex >= strLen) {\n                throw new Error(\"Expected more digits in base 64 VLQ value.\");\n            }\n\n            digit = base64.decode(aStr.charCodeAt(aIndex++));\n            if (digit === -1) {\n                throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n            }\n\n            continuation = !!(digit & VLQ_CONTINUATION_BIT);\n            digit &= VLQ_BASE_MASK;\n            result = result + (digit << shift);\n            shift += VLQ_BASE_SHIFT;\n        } while (continuation);\n\n        aOutParam.value = fromVLQSigned(result);\n        aOutParam.rest = aIndex;\n    };\n\n    var base64Vlq = {\n        encode: encode$1,\n        decode: decode$1\n    };\n\n    function createCommonjsModule(fn, module) {\n        return module = { exports: {} }, fn(module, module.exports), module.exports;\n    }\n\n    function getCjsExportFromNamespace (n) {\n        return n && n['default'] || n;\n    }\n\n    var util = createCommonjsModule(function (module, exports) {\n        /* -*- Mode: js; js-indent-level: 2; -*- */\n        /*\n         * Copyright 2011 Mozilla Foundation and contributors\n         * Licensed under the New BSD license. See LICENSE or:\n         * http://opensource.org/licenses/BSD-3-Clause\n         */\n\n        /**\n         * This is a helper function for getting values from parameter/options\n         * objects.\n         *\n         * @param args The object we are extracting values from\n         * @param name The name of the property we are getting.\n         * @param defaultValue An optional value to return if the property is missing\n         * from the object. If this is not specified and the property is missing, an\n         * error will be thrown.\n         */\n        function getArg(aArgs, aName, aDefaultValue) {\n            if (aName in aArgs) {\n                return aArgs[aName];\n            } else if (arguments.length === 3) {\n                return aDefaultValue;\n            } else {\n                throw new Error('\"' + aName + '\" is a required argument.');\n            }\n        }\n        exports.getArg = getArg;\n\n        var urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.-]*)(?::(\\d+))?(.*)$/;\n        var dataUrlRegexp = /^data:.+\\,.+$/;\n\n        function urlParse(aUrl) {\n            var match = aUrl.match(urlRegexp);\n            if (!match) {\n                return null;\n            }\n            return {\n                scheme: match[1],\n                auth: match[2],\n                host: match[3],\n                port: match[4],\n                path: match[5]\n            };\n        }\n        exports.urlParse = urlParse;\n\n        function urlGenerate(aParsedUrl) {\n            var url = '';\n            if (aParsedUrl.scheme) {\n                url += aParsedUrl.scheme + ':';\n            }\n            url += '//';\n            if (aParsedUrl.auth) {\n                url += aParsedUrl.auth + '@';\n            }\n            if (aParsedUrl.host) {\n                url += aParsedUrl.host;\n            }\n            if (aParsedUrl.port) {\n                url += \":\" + aParsedUrl.port;\n            }\n            if (aParsedUrl.path) {\n                url += aParsedUrl.path;\n            }\n            return url;\n        }\n        exports.urlGenerate = urlGenerate;\n\n        /**\n         * Normalizes a path, or the path portion of a URL:\n         *\n         * - Replaces consecutive slashes with one slash.\n         * - Removes unnecessary '.' parts.\n         * - Removes unnecessary '<dir>/..' parts.\n         *\n         * Based on code in the Node.js 'path' core module.\n         *\n         * @param aPath The path or url to normalize.\n         */\n        function normalize(aPath) {\n            var path = aPath;\n            var url = urlParse(aPath);\n            if (url) {\n                if (!url.path) {\n                    return aPath;\n                }\n                path = url.path;\n            }\n            var isAbsolute = exports.isAbsolute(path);\n\n            var parts = path.split(/\\/+/);\n            for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n                part = parts[i];\n                if (part === '.') {\n                    parts.splice(i, 1);\n                } else if (part === '..') {\n                    up++;\n                } else if (up > 0) {\n                    if (part === '') {\n                        // The first part is blank if the path is absolute. Trying to go\n                        // above the root is a no-op. Therefore we can remove all '..' parts\n                        // directly after the root.\n                        parts.splice(i + 1, up);\n                        up = 0;\n                    } else {\n                        parts.splice(i, 2);\n                        up--;\n                    }\n                }\n            }\n            path = parts.join('/');\n\n            if (path === '') {\n                path = isAbsolute ? '/' : '.';\n            }\n\n            if (url) {\n                url.path = path;\n                return urlGenerate(url);\n            }\n            return path;\n        }\n        exports.normalize = normalize;\n\n        /**\n         * Joins two paths/URLs.\n         *\n         * @param aRoot The root path or URL.\n         * @param aPath The path or URL to be joined with the root.\n         *\n         * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n         *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n         *   first.\n         * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n         *   is updated with the result and aRoot is returned. Otherwise the result\n         *   is returned.\n         *   - If aPath is absolute, the result is aPath.\n         *   - Otherwise the two paths are joined with a slash.\n         * - Joining for example 'http://' and 'www.example.com' is also supported.\n         */\n        function join(aRoot, aPath) {\n            if (aRoot === \"\") {\n                aRoot = \".\";\n            }\n            if (aPath === \"\") {\n                aPath = \".\";\n            }\n            var aPathUrl = urlParse(aPath);\n            var aRootUrl = urlParse(aRoot);\n            if (aRootUrl) {\n                aRoot = aRootUrl.path || '/';\n            }\n\n            // `join(foo, '//www.example.org')`\n            if (aPathUrl && !aPathUrl.scheme) {\n                if (aRootUrl) {\n                    aPathUrl.scheme = aRootUrl.scheme;\n                }\n                return urlGenerate(aPathUrl);\n            }\n\n            if (aPathUrl || aPath.match(dataUrlRegexp)) {\n                return aPath;\n            }\n\n            // `join('http://', 'www.example.com')`\n            if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n                aRootUrl.host = aPath;\n                return urlGenerate(aRootUrl);\n            }\n\n            var joined = aPath.charAt(0) === '/'\n                ? aPath\n                : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n            if (aRootUrl) {\n                aRootUrl.path = joined;\n                return urlGenerate(aRootUrl);\n            }\n            return joined;\n        }\n        exports.join = join;\n\n        exports.isAbsolute = function (aPath) {\n            return aPath.charAt(0) === '/' || urlRegexp.test(aPath);\n        };\n\n        /**\n         * Make a path relative to a URL or another path.\n         *\n         * @param aRoot The root path or URL.\n         * @param aPath The path or URL to be made relative to aRoot.\n         */\n        function relative(aRoot, aPath) {\n            if (aRoot === \"\") {\n                aRoot = \".\";\n            }\n\n            aRoot = aRoot.replace(/\\/$/, '');\n\n            // It is possible for the path to be above the root. In this case, simply\n            // checking whether the root is a prefix of the path won't work. Instead, we\n            // need to remove components from the root one by one, until either we find\n            // a prefix that fits, or we run out of components to remove.\n            var level = 0;\n            while (aPath.indexOf(aRoot + '/') !== 0) {\n                var index = aRoot.lastIndexOf(\"/\");\n                if (index < 0) {\n                    return aPath;\n                }\n\n                // If the only part of the root that is left is the scheme (i.e. http://,\n                // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n                // have exhausted all components, so the path is not relative to the root.\n                aRoot = aRoot.slice(0, index);\n                if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n                    return aPath;\n                }\n\n                ++level;\n            }\n\n            // Make sure we add a \"../\" for each component we removed from the root.\n            return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n        }\n        exports.relative = relative;\n\n        var supportsNullProto = (function () {\n            var obj = Object.create(null);\n            return !('__proto__' in obj);\n        }());\n\n        function identity (s) {\n            return s;\n        }\n\n        /**\n         * Because behavior goes wacky when you set `__proto__` on objects, we\n         * have to prefix all the strings in our set with an arbitrary character.\n         *\n         * See https://github.com/mozilla/source-map/pull/31 and\n         * https://github.com/mozilla/source-map/issues/30\n         *\n         * @param String aStr\n         */\n        function toSetString(aStr) {\n            if (isProtoString(aStr)) {\n                return '$' + aStr;\n            }\n\n            return aStr;\n        }\n        exports.toSetString = supportsNullProto ? identity : toSetString;\n\n        function fromSetString(aStr) {\n            if (isProtoString(aStr)) {\n                return aStr.slice(1);\n            }\n\n            return aStr;\n        }\n        exports.fromSetString = supportsNullProto ? identity : fromSetString;\n\n        function isProtoString(s) {\n            if (!s) {\n                return false;\n            }\n\n            var length = s.length;\n\n            if (length < 9 /* \"__proto__\".length */) {\n                return false;\n            }\n\n            if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n                s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n                s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n                s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n                s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n                s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n                s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n                s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n                s.charCodeAt(length - 9) !== 95  /* '_' */) {\n                return false;\n            }\n\n            for (var i = length - 10; i >= 0; i--) {\n                if (s.charCodeAt(i) !== 36 /* '$' */) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        /**\n         * Comparator between two mappings where the original positions are compared.\n         *\n         * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n         * mappings with the same original source/line/column, but different generated\n         * line and column the same. Useful when searching for a mapping with a\n         * stubbed out mapping.\n         */\n        function compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n            var cmp = strcmp(mappingA.source, mappingB.source);\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = mappingA.originalLine - mappingB.originalLine;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = mappingA.originalColumn - mappingB.originalColumn;\n            if (cmp !== 0 || onlyCompareOriginal) {\n                return cmp;\n            }\n\n            cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = mappingA.generatedLine - mappingB.generatedLine;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            return strcmp(mappingA.name, mappingB.name);\n        }\n        exports.compareByOriginalPositions = compareByOriginalPositions;\n\n        /**\n         * Comparator between two mappings with deflated source and name indices where\n         * the generated positions are compared.\n         *\n         * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n         * mappings with the same generated line and column, but different\n         * source/name/original line and column the same. Useful when searching for a\n         * mapping with a stubbed out mapping.\n         */\n        function compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n            var cmp = mappingA.generatedLine - mappingB.generatedLine;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n            if (cmp !== 0 || onlyCompareGenerated) {\n                return cmp;\n            }\n\n            cmp = strcmp(mappingA.source, mappingB.source);\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = mappingA.originalLine - mappingB.originalLine;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = mappingA.originalColumn - mappingB.originalColumn;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            return strcmp(mappingA.name, mappingB.name);\n        }\n        exports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\n        function strcmp(aStr1, aStr2) {\n            if (aStr1 === aStr2) {\n                return 0;\n            }\n\n            if (aStr1 === null) {\n                return 1; // aStr2 !== null\n            }\n\n            if (aStr2 === null) {\n                return -1; // aStr1 !== null\n            }\n\n            if (aStr1 > aStr2) {\n                return 1;\n            }\n\n            return -1;\n        }\n\n        /**\n         * Comparator between two mappings with inflated source and name strings where\n         * the generated positions are compared.\n         */\n        function compareByGeneratedPositionsInflated(mappingA, mappingB) {\n            var cmp = mappingA.generatedLine - mappingB.generatedLine;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = strcmp(mappingA.source, mappingB.source);\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = mappingA.originalLine - mappingB.originalLine;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            cmp = mappingA.originalColumn - mappingB.originalColumn;\n            if (cmp !== 0) {\n                return cmp;\n            }\n\n            return strcmp(mappingA.name, mappingB.name);\n        }\n        exports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n\n        /**\n         * Strip any JSON XSSI avoidance prefix from the string (as documented\n         * in the source maps specification), and then parse the string as\n         * JSON.\n         */\n        function parseSourceMapInput(str) {\n            return JSON.parse(str.replace(/^\\)]}'[^\\n]*\\n/, ''));\n        }\n        exports.parseSourceMapInput = parseSourceMapInput;\n\n        /**\n         * Compute the URL of a source given the the source root, the source's\n         * URL, and the source map's URL.\n         */\n        function computeSourceURL(sourceRoot, sourceURL, sourceMapURL) {\n            sourceURL = sourceURL || '';\n\n            if (sourceRoot) {\n                // This follows what Chrome does.\n                if (sourceRoot[sourceRoot.length - 1] !== '/' && sourceURL[0] !== '/') {\n                    sourceRoot += '/';\n                }\n                // The spec says:\n                //   Line 4: An optional source root, useful for relocating source\n                //   files on a server or removing repeated values in the\n                //   \u201csources\u201d entry.  This value is prepended to the individual\n                //   entries in the \u201csource\u201d field.\n                sourceURL = sourceRoot + sourceURL;\n            }\n\n            // Historically, SourceMapConsumer did not take the sourceMapURL as\n            // a parameter.  This mode is still somewhat supported, which is why\n            // this code block is conditional.  However, it's preferable to pass\n            // the source map URL to SourceMapConsumer, so that this function\n            // can implement the source URL resolution algorithm as outlined in\n            // the spec.  This block is basically the equivalent of:\n            //    new URL(sourceURL, sourceMapURL).toString()\n            // ... except it avoids using URL, which wasn't available in the\n            // older releases of node still supported by this library.\n            //\n            // The spec says:\n            //   If the sources are not absolute URLs after prepending of the\n            //   \u201csourceRoot\u201d, the sources are resolved relative to the\n            //   SourceMap (like resolving script src in a html document).\n            if (sourceMapURL) {\n                var parsed = urlParse(sourceMapURL);\n                if (!parsed) {\n                    throw new Error(\"sourceMapURL could not be parsed\");\n                }\n                if (parsed.path) {\n                    // Strip the last path component, but keep the \"/\".\n                    var index = parsed.path.lastIndexOf('/');\n                    if (index >= 0) {\n                        parsed.path = parsed.path.substring(0, index + 1);\n                    }\n                }\n                sourceURL = join(urlGenerate(parsed), sourceURL);\n            }\n\n            return normalize(sourceURL);\n        }\n        exports.computeSourceURL = computeSourceURL;\n    });\n    var util_1 = util.getArg;\n    var util_2 = util.urlParse;\n    var util_3 = util.urlGenerate;\n    var util_4 = util.normalize;\n    var util_5 = util.join;\n    var util_6 = util.isAbsolute;\n    var util_7 = util.relative;\n    var util_8 = util.toSetString;\n    var util_9 = util.fromSetString;\n    var util_10 = util.compareByOriginalPositions;\n    var util_11 = util.compareByGeneratedPositionsDeflated;\n    var util_12 = util.compareByGeneratedPositionsInflated;\n    var util_13 = util.parseSourceMapInput;\n    var util_14 = util.computeSourceURL;\n\n    /* -*- Mode: js; js-indent-level: 2; -*- */\n    /*\n     * Copyright 2011 Mozilla Foundation and contributors\n     * Licensed under the New BSD license. See LICENSE or:\n     * http://opensource.org/licenses/BSD-3-Clause\n     */\n\n\n    var has = Object.prototype.hasOwnProperty;\n    var hasNativeMap = typeof Map !== \"undefined\";\n\n    /**\n     * A data structure which is a combination of an array and a set. Adding a new\n     * member is O(1), testing for membership is O(1), and finding the index of an\n     * element is O(1). Removing elements from the set is not supported. Only\n     * strings are supported for membership.\n     */\n    function ArraySet() {\n        this._array = [];\n        this._set = hasNativeMap ? new Map() : Object.create(null);\n    }\n\n    /**\n     * Static method for creating ArraySet instances from an existing array.\n     */\n    ArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n        var set = new ArraySet();\n        for (var i = 0, len = aArray.length; i < len; i++) {\n            set.add(aArray[i], aAllowDuplicates);\n        }\n        return set;\n    };\n\n    /**\n     * Return how many unique items are in this ArraySet. If duplicates have been\n     * added, than those do not count towards the size.\n     *\n     * @returns Number\n     */\n    ArraySet.prototype.size = function ArraySet_size() {\n        return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n    };\n\n    /**\n     * Add the given string to this set.\n     *\n     * @param String aStr\n     */\n    ArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n        var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n        var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n        var idx = this._array.length;\n        if (!isDuplicate || aAllowDuplicates) {\n            this._array.push(aStr);\n        }\n        if (!isDuplicate) {\n            if (hasNativeMap) {\n                this._set.set(aStr, idx);\n            } else {\n                this._set[sStr] = idx;\n            }\n        }\n    };\n\n    /**\n     * Is the given string a member of this set?\n     *\n     * @param String aStr\n     */\n    ArraySet.prototype.has = function ArraySet_has(aStr) {\n        if (hasNativeMap) {\n            return this._set.has(aStr);\n        } else {\n            var sStr = util.toSetString(aStr);\n            return has.call(this._set, sStr);\n        }\n    };\n\n    /**\n     * What is the index of the given string in the array?\n     *\n     * @param String aStr\n     */\n    ArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n        if (hasNativeMap) {\n            var idx = this._set.get(aStr);\n            if (idx >= 0) {\n                return idx;\n            }\n        } else {\n            var sStr = util.toSetString(aStr);\n            if (has.call(this._set, sStr)) {\n                return this._set[sStr];\n            }\n        }\n\n        throw new Error('\"' + aStr + '\" is not in the set.');\n    };\n\n    /**\n     * What is the element at the given index?\n     *\n     * @param Number aIdx\n     */\n    ArraySet.prototype.at = function ArraySet_at(aIdx) {\n        if (aIdx >= 0 && aIdx < this._array.length) {\n            return this._array[aIdx];\n        }\n        throw new Error('No element indexed by ' + aIdx);\n    };\n\n    /**\n     * Returns the array representation of this set (which has the proper indices\n     * indicated by indexOf). Note that this is a copy of the internal array used\n     * for storing the members so that no one can mess with internal state.\n     */\n    ArraySet.prototype.toArray = function ArraySet_toArray() {\n        return this._array.slice();\n    };\n\n    var ArraySet_1 = ArraySet;\n\n    var arraySet = {\n        ArraySet: ArraySet_1\n    };\n\n    /* -*- Mode: js; js-indent-level: 2; -*- */\n    /*\n     * Copyright 2014 Mozilla Foundation and contributors\n     * Licensed under the New BSD license. See LICENSE or:\n     * http://opensource.org/licenses/BSD-3-Clause\n     */\n\n\n\n    /**\n     * Determine whether mappingB is after mappingA with respect to generated\n     * position.\n     */\n    function generatedPositionAfter(mappingA, mappingB) {\n        // Optimized for most common case\n        var lineA = mappingA.generatedLine;\n        var lineB = mappingB.generatedLine;\n        var columnA = mappingA.generatedColumn;\n        var columnB = mappingB.generatedColumn;\n        return lineB > lineA || lineB == lineA && columnB >= columnA ||\n            util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n    }\n\n    /**\n     * A data structure to provide a sorted view of accumulated mappings in a\n     * performance conscious manner. It trades a neglibable overhead in general\n     * case for a large speedup in case of mappings being added in order.\n     */\n    function MappingList() {\n        this._array = [];\n        this._sorted = true;\n        // Serves as infimum\n        this._last = {generatedLine: -1, generatedColumn: 0};\n    }\n\n    /**\n     * Iterate through internal items. This method takes the same arguments that\n     * `Array.prototype.forEach` takes.\n     *\n     * NOTE: The order of the mappings is NOT guaranteed.\n     */\n    MappingList.prototype.unsortedForEach =\n        function MappingList_forEach(aCallback, aThisArg) {\n            this._array.forEach(aCallback, aThisArg);\n        };\n\n    /**\n     * Add the given source mapping.\n     *\n     * @param Object aMapping\n     */\n    MappingList.prototype.add = function MappingList_add(aMapping) {\n        if (generatedPositionAfter(this._last, aMapping)) {\n            this._last = aMapping;\n            this._array.push(aMapping);\n        } else {\n            this._sorted = false;\n            this._array.push(aMapping);\n        }\n    };\n\n    /**\n     * Returns the flat, sorted array of mappings. The mappings are sorted by\n     * generated position.\n     *\n     * WARNING: This method returns internal data without copying, for\n     * performance. The return value must NOT be mutated, and should be treated as\n     * an immutable borrow. If you want to take ownership, you must make your own\n     * copy.\n     */\n    MappingList.prototype.toArray = function MappingList_toArray() {\n        if (!this._sorted) {\n            this._array.sort(util.compareByGeneratedPositionsInflated);\n            this._sorted = true;\n        }\n        return this._array;\n    };\n\n    var MappingList_1 = MappingList;\n\n    var mappingList = {\n        MappingList: MappingList_1\n    };\n\n    /* -*- Mode: js; js-indent-level: 2; -*- */\n    /*\n     * Copyright 2011 Mozilla Foundation and contributors\n     * Licensed under the New BSD license. See LICENSE or:\n     * http://opensource.org/licenses/BSD-3-Clause\n     */\n\n\n\n    var ArraySet$1 = arraySet.ArraySet;\n    var MappingList$1 = mappingList.MappingList;\n\n    /**\n     * An instance of the SourceMapGenerator represents a source map which is\n     * being built incrementally. You may pass an object with the following\n     * properties:\n     *\n     *   - file: The filename of the generated source.\n     *   - sourceRoot: A root for all relative URLs in this source map.\n     */\n    function SourceMapGenerator(aArgs) {\n        if (!aArgs) {\n            aArgs = {};\n        }\n        this._file = util.getArg(aArgs, 'file', null);\n        this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n        this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n        this._sources = new ArraySet$1();\n        this._names = new ArraySet$1();\n        this._mappings = new MappingList$1();\n        this._sourcesContents = null;\n    }\n\n    SourceMapGenerator.prototype._version = 3;\n\n    /**\n     * Creates a new SourceMapGenerator based on a SourceMapConsumer\n     *\n     * @param aSourceMapConsumer The SourceMap.\n     */\n    SourceMapGenerator.fromSourceMap =\n        function SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\n            var sourceRoot = aSourceMapConsumer.sourceRoot;\n            var generator = new SourceMapGenerator({\n                file: aSourceMapConsumer.file,\n                sourceRoot: sourceRoot\n            });\n            aSourceMapConsumer.eachMapping(function (mapping) {\n                var newMapping = {\n                    generated: {\n                        line: mapping.generatedLine,\n                        column: mapping.generatedColumn\n                    }\n                };\n\n                if (mapping.source != null) {\n                    newMapping.source = mapping.source;\n                    if (sourceRoot != null) {\n                        newMapping.source = util.relative(sourceRoot, newMapping.source);\n                    }\n\n                    newMapping.original = {\n                        line: mapping.originalLine,\n                        column: mapping.originalColumn\n                    };\n\n                    if (mapping.name != null) {\n                        newMapping.name = mapping.name;\n                    }\n                }\n\n                generator.addMapping(newMapping);\n            });\n            aSourceMapConsumer.sources.forEach(function (sourceFile) {\n                var sourceRelative = sourceFile;\n                if (sourceRoot !== null) {\n                    sourceRelative = util.relative(sourceRoot, sourceFile);\n                }\n\n                if (!generator._sources.has(sourceRelative)) {\n                    generator._sources.add(sourceRelative);\n                }\n\n                var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n                if (content != null) {\n                    generator.setSourceContent(sourceFile, content);\n                }\n            });\n            return generator;\n        };\n\n    /**\n     * Add a single mapping from original source line and column to the generated\n     * source's line and column for this source map being created. The mapping\n     * object should have the following properties:\n     *\n     *   - generated: An object with the generated line and column positions.\n     *   - original: An object with the original line and column positions.\n     *   - source: The original source file (relative to the sourceRoot).\n     *   - name: An optional original token name for this mapping.\n     */\n    SourceMapGenerator.prototype.addMapping =\n        function SourceMapGenerator_addMapping(aArgs) {\n            var generated = util.getArg(aArgs, 'generated');\n            var original = util.getArg(aArgs, 'original', null);\n            var source = util.getArg(aArgs, 'source', null);\n            var name = util.getArg(aArgs, 'name', null);\n\n            if (!this._skipValidation) {\n                this._validateMapping(generated, original, source, name);\n            }\n\n            if (source != null) {\n                source = String(source);\n                if (!this._sources.has(source)) {\n                    this._sources.add(source);\n                }\n            }\n\n            if (name != null) {\n                name = String(name);\n                if (!this._names.has(name)) {\n                    this._names.add(name);\n                }\n            }\n\n            this._mappings.add({\n                generatedLine: generated.line,\n                generatedColumn: generated.column,\n                originalLine: original != null && original.line,\n                originalColumn: original != null && original.column,\n                source: source,\n                name: name\n            });\n        };\n\n    /**\n     * Set the source content for a source file.\n     */\n    SourceMapGenerator.prototype.setSourceContent =\n        function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n            var source = aSourceFile;\n            if (this._sourceRoot != null) {\n                source = util.relative(this._sourceRoot, source);\n            }\n\n            if (aSourceContent != null) {\n                // Add the source content to the _sourcesContents map.\n                // Create a new _sourcesContents map if the property is null.\n                if (!this._sourcesContents) {\n                    this._sourcesContents = Object.create(null);\n                }\n                this._sourcesContents[util.toSetString(source)] = aSourceContent;\n            } else if (this._sourcesContents) {\n                // Remove the source file from the _sourcesContents map.\n                // If the _sourcesContents map is empty, set the property to null.\n                delete this._sourcesContents[util.toSetString(source)];\n                if (Object.keys(this._sourcesContents).length === 0) {\n                    this._sourcesContents = null;\n                }\n            }\n        };\n\n    /**\n     * Applies the mappings of a sub-source-map for a specific source file to the\n     * source map being generated. Each mapping to the supplied source file is\n     * rewritten using the supplied source map. Note: The resolution for the\n     * resulting mappings is the minimium of this map and the supplied map.\n     *\n     * @param aSourceMapConsumer The source map to be applied.\n     * @param aSourceFile Optional. The filename of the source file.\n     *        If omitted, SourceMapConsumer's file property will be used.\n     * @param aSourceMapPath Optional. The dirname of the path to the source map\n     *        to be applied. If relative, it is relative to the SourceMapConsumer.\n     *        This parameter is needed when the two source maps aren't in the same\n     *        directory, and the source map to be applied contains relative source\n     *        paths. If so, those relative source paths need to be rewritten\n     *        relative to the SourceMapGenerator.\n     */\n    SourceMapGenerator.prototype.applySourceMap =\n        function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n            var sourceFile = aSourceFile;\n            // If aSourceFile is omitted, we will use the file property of the SourceMap\n            if (aSourceFile == null) {\n                if (aSourceMapConsumer.file == null) {\n                    throw new Error(\n                        'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n                        'or the source map\\'s \"file\" property. Both were omitted.'\n                    );\n                }\n                sourceFile = aSourceMapConsumer.file;\n            }\n            var sourceRoot = this._sourceRoot;\n            // Make \"sourceFile\" relative if an absolute Url is passed.\n            if (sourceRoot != null) {\n                sourceFile = util.relative(sourceRoot, sourceFile);\n            }\n            // Applying the SourceMap can add and remove items from the sources and\n            // the names array.\n            var newSources = new ArraySet$1();\n            var newNames = new ArraySet$1();\n\n            // Find mappings for the \"sourceFile\"\n            this._mappings.unsortedForEach(function (mapping) {\n                if (mapping.source === sourceFile && mapping.originalLine != null) {\n                    // Check if it can be mapped by the source map, then update the mapping.\n                    var original = aSourceMapConsumer.originalPositionFor({\n                        line: mapping.originalLine,\n                        column: mapping.originalColumn\n                    });\n                    if (original.source != null) {\n                        // Copy mapping\n                        mapping.source = original.source;\n                        if (aSourceMapPath != null) {\n                            mapping.source = util.join(aSourceMapPath, mapping.source);\n                        }\n                        if (sourceRoot != null) {\n                            mapping.source = util.relative(sourceRoot, mapping.source);\n                        }\n                        mapping.originalLine = original.line;\n                        mapping.originalColumn = original.column;\n                        if (original.name != null) {\n                            mapping.name = original.name;\n                        }\n                    }\n                }\n\n                var source = mapping.source;\n                if (source != null && !newSources.has(source)) {\n                    newSources.add(source);\n                }\n\n                var name = mapping.name;\n                if (name != null && !newNames.has(name)) {\n                    newNames.add(name);\n                }\n\n            }, this);\n            this._sources = newSources;\n            this._names = newNames;\n\n            // Copy sourcesContents of applied map.\n            aSourceMapConsumer.sources.forEach(function (sourceFile) {\n                var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n                if (content != null) {\n                    if (aSourceMapPath != null) {\n                        sourceFile = util.join(aSourceMapPath, sourceFile);\n                    }\n                    if (sourceRoot != null) {\n                        sourceFile = util.relative(sourceRoot, sourceFile);\n                    }\n                    this.setSourceContent(sourceFile, content);\n                }\n            }, this);\n        };\n\n    /**\n     * A mapping can have one of the three levels of data:\n     *\n     *   1. Just the generated position.\n     *   2. The Generated position, original position, and original source.\n     *   3. Generated and original position, original source, as well as a name\n     *      token.\n     *\n     * To maintain consistency, we validate that any new mapping being added falls\n     * in to one of these categories.\n     */\n    SourceMapGenerator.prototype._validateMapping =\n        function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                                    aName) {\n            // When aOriginal is truthy but has empty values for .line and .column,\n            // it is most likely a programmer error. In this case we throw a very\n            // specific error message to try to guide them the right way.\n            // For example: https://github.com/Polymer/polymer-bundler/pull/519\n            if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n                throw new Error(\n                    'original.line and original.column are not numbers -- you probably meant to omit ' +\n                    'the original mapping entirely and only map the generated position. If so, pass ' +\n                    'null for the original mapping instead of an object with empty or null values.'\n                );\n            }\n\n            if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n                && aGenerated.line > 0 && aGenerated.column >= 0\n                && !aOriginal && !aSource && !aName) {\n                // Case 1.\n                return;\n            }\n            else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n                && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n                && aGenerated.line > 0 && aGenerated.column >= 0\n                && aOriginal.line > 0 && aOriginal.column >= 0\n                && aSource) {\n                // Cases 2 and 3.\n                return;\n            }\n            else {\n                throw new Error('Invalid mapping: ' + JSON.stringify({\n                    generated: aGenerated,\n                    source: aSource,\n                    original: aOriginal,\n                    name: aName\n                }));\n            }\n        };\n\n    /**\n     * Serialize the accumulated mappings in to the stream of base 64 VLQs\n     * specified by the source map format.\n     */\n    SourceMapGenerator.prototype._serializeMappings =\n        function SourceMapGenerator_serializeMappings() {\n            var previousGeneratedColumn = 0;\n            var previousGeneratedLine = 1;\n            var previousOriginalColumn = 0;\n            var previousOriginalLine = 0;\n            var previousName = 0;\n            var previousSource = 0;\n            var result = '';\n            var next;\n            var mapping;\n            var nameIdx;\n            var sourceIdx;\n\n            var mappings = this._mappings.toArray();\n            for (var i = 0, len = mappings.length; i < len; i++) {\n                mapping = mappings[i];\n                next = '';\n\n                if (mapping.generatedLine !== previousGeneratedLine) {\n                    previousGeneratedColumn = 0;\n                    while (mapping.generatedLine !== previousGeneratedLine) {\n                        next += ';';\n                        previousGeneratedLine++;\n                    }\n                }\n                else {\n                    if (i > 0) {\n                        if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n                            continue;\n                        }\n                        next += ',';\n                    }\n                }\n\n                next += base64Vlq.encode(mapping.generatedColumn\n                    - previousGeneratedColumn);\n                previousGeneratedColumn = mapping.generatedColumn;\n\n                if (mapping.source != null) {\n                    sourceIdx = this._sources.indexOf(mapping.source);\n                    next += base64Vlq.encode(sourceIdx - previousSource);\n                    previousSource = sourceIdx;\n\n                    // lines are stored 0-based in SourceMap spec version 3\n                    next += base64Vlq.encode(mapping.originalLine - 1\n                        - previousOriginalLine);\n                    previousOriginalLine = mapping.originalLine - 1;\n\n                    next += base64Vlq.encode(mapping.originalColumn\n                        - previousOriginalColumn);\n                    previousOriginalColumn = mapping.originalColumn;\n\n                    if (mapping.name != null) {\n                        nameIdx = this._names.indexOf(mapping.name);\n                        next += base64Vlq.encode(nameIdx - previousName);\n                        previousName = nameIdx;\n                    }\n                }\n\n                result += next;\n            }\n\n            return result;\n        };\n\n    SourceMapGenerator.prototype._generateSourcesContent =\n        function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n            return aSources.map(function (source) {\n                if (!this._sourcesContents) {\n                    return null;\n                }\n                if (aSourceRoot != null) {\n                    source = util.relative(aSourceRoot, source);\n                }\n                var key = util.toSetString(source);\n                return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n                    ? this._sourcesContents[key]\n                    : null;\n            }, this);\n        };\n\n    /**\n     * Externalize the source map.\n     */\n    SourceMapGenerator.prototype.toJSON =\n        function SourceMapGenerator_toJSON() {\n            var map = {\n                version: this._version,\n                sources: this._sources.toArray(),\n                names: this._names.toArray(),\n                mappings: this._serializeMappings()\n            };\n            if (this._file != null) {\n                map.file = this._file;\n            }\n            if (this._sourceRoot != null) {\n                map.sourceRoot = this._sourceRoot;\n            }\n            if (this._sourcesContents) {\n                map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n            }\n\n            return map;\n        };\n\n    /**\n     * Render the source map being generated to a string.\n     */\n    SourceMapGenerator.prototype.toString =\n        function SourceMapGenerator_toString() {\n            return JSON.stringify(this.toJSON());\n        };\n\n    var SourceMapGenerator_1 = SourceMapGenerator;\n\n    var sourceMapGenerator = {\n        SourceMapGenerator: SourceMapGenerator_1\n    };\n\n    var SourceMapGenerator$1 = sourceMapGenerator.SourceMapGenerator;\n    var trackNodes = {\n        Atrule: true,\n        Selector: true,\n        Declaration: true\n    };\n\n    var sourceMap = function generateSourceMap(handlers) {\n        var map = new SourceMapGenerator$1();\n        var line = 1;\n        var column = 0;\n        var generated = {\n            line: 1,\n            column: 0\n        };\n        var original = {\n            line: 0, // should be zero to add first mapping\n            column: 0\n        };\n        var sourceMappingActive = false;\n        var activatedGenerated = {\n            line: 1,\n            column: 0\n        };\n        var activatedMapping = {\n            generated: activatedGenerated\n        };\n\n        var handlersNode = handlers.node;\n        handlers.node = function(node) {\n            if (node.loc && node.loc.start && trackNodes.hasOwnProperty(node.type)) {\n                var nodeLine = node.loc.start.line;\n                var nodeColumn = node.loc.start.column - 1;\n\n                if (original.line !== nodeLine ||\n                    original.column !== nodeColumn) {\n                    original.line = nodeLine;\n                    original.column = nodeColumn;\n\n                    generated.line = line;\n                    generated.column = column;\n\n                    if (sourceMappingActive) {\n                        sourceMappingActive = false;\n                        if (generated.line !== activatedGenerated.line ||\n                            generated.column !== activatedGenerated.column) {\n                            map.addMapping(activatedMapping);\n                        }\n                    }\n\n                    sourceMappingActive = true;\n                    map.addMapping({\n                        source: node.loc.source,\n                        original: original,\n                        generated: generated\n                    });\n                }\n            }\n\n            handlersNode.call(this, node);\n\n            if (sourceMappingActive && trackNodes.hasOwnProperty(node.type)) {\n                activatedGenerated.line = line;\n                activatedGenerated.column = column;\n            }\n        };\n\n        var handlersChunk = handlers.chunk;\n        handlers.chunk = function(chunk) {\n            for (var i = 0; i < chunk.length; i++) {\n                if (chunk.charCodeAt(i) === 10) { // \\n\n                    line++;\n                    column = 0;\n                } else {\n                    column++;\n                }\n            }\n\n            handlersChunk(chunk);\n        };\n\n        var handlersResult = handlers.result;\n        handlers.result = function() {\n            if (sourceMappingActive) {\n                map.addMapping(activatedMapping);\n            }\n\n            return {\n                css: handlersResult(),\n                map: map\n            };\n        };\n\n        return handlers;\n    };\n\n    var hasOwnProperty$3 = Object.prototype.hasOwnProperty;\n\n    function processChildren(node, delimeter) {\n        var list = node.children;\n        var prev = null;\n\n        if (typeof delimeter !== 'function') {\n            list.forEach(this.node, this);\n        } else {\n            list.forEach(function(node) {\n                if (prev !== null) {\n                    delimeter.call(this, prev);\n                }\n\n                this.node(node);\n                prev = node;\n            }, this);\n        }\n    }\n\n    var create$1 = function createGenerator(config) {\n        function processNode(node) {\n            if (hasOwnProperty$3.call(types, node.type)) {\n                types[node.type].call(this, node);\n            } else {\n                throw new Error('Unknown node type: ' + node.type);\n            }\n        }\n\n        var types = {};\n\n        if (config.node) {\n            for (var name in config.node) {\n                types[name] = config.node[name].generate;\n            }\n        }\n\n        return function(node, options) {\n            var buffer = '';\n            var handlers = {\n                children: processChildren,\n                node: processNode,\n                chunk: function(chunk) {\n                    buffer += chunk;\n                },\n                result: function() {\n                    return buffer;\n                }\n            };\n\n            if (options) {\n                if (typeof options.decorator === 'function') {\n                    handlers = options.decorator(handlers);\n                }\n\n                if (options.sourceMap) {\n                    handlers = sourceMap(handlers);\n                }\n            }\n\n            handlers.node(node);\n\n            return handlers.result();\n        };\n    };\n\n    var create$2 = function createConvertors(walk) {\n        return {\n            fromPlainObject: function(ast) {\n                walk(ast, {\n                    enter: function(node) {\n                        if (node.children && node.children instanceof List_1 === false) {\n                            node.children = new List_1().fromArray(node.children);\n                        }\n                    }\n                });\n\n                return ast;\n            },\n            toPlainObject: function(ast) {\n                walk(ast, {\n                    leave: function(node) {\n                        if (node.children && node.children instanceof List_1) {\n                            node.children = node.children.toArray();\n                        }\n                    }\n                });\n\n                return ast;\n            }\n        };\n    };\n\n    var hasOwnProperty$4 = Object.prototype.hasOwnProperty;\n    var noop$3 = function() {};\n\n    function ensureFunction$1(value) {\n        return typeof value === 'function' ? value : noop$3;\n    }\n\n    function invokeForType(fn, type) {\n        return function(node, item, list) {\n            if (node.type === type) {\n                fn.call(this, node, item, list);\n            }\n        };\n    }\n\n    function getWalkersFromStructure(name, nodeType) {\n        var structure = nodeType.structure;\n        var walkers = [];\n\n        for (var key in structure) {\n            if (hasOwnProperty$4.call(structure, key) === false) {\n                continue;\n            }\n\n            var fieldTypes = structure[key];\n            var walker = {\n                name: key,\n                type: false,\n                nullable: false\n            };\n\n            if (!Array.isArray(structure[key])) {\n                fieldTypes = [structure[key]];\n            }\n\n            for (var i = 0; i < fieldTypes.length; i++) {\n                var fieldType = fieldTypes[i];\n                if (fieldType === null) {\n                    walker.nullable = true;\n                } else if (typeof fieldType === 'string') {\n                    walker.type = 'node';\n                } else if (Array.isArray(fieldType)) {\n                    walker.type = 'list';\n                }\n            }\n\n            if (walker.type) {\n                walkers.push(walker);\n            }\n        }\n\n        if (walkers.length) {\n            return {\n                context: nodeType.walkContext,\n                fields: walkers\n            };\n        }\n\n        return null;\n    }\n\n    function getTypesFromConfig(config) {\n        var types = {};\n\n        for (var name in config.node) {\n            if (hasOwnProperty$4.call(config.node, name)) {\n                var nodeType = config.node[name];\n\n                if (!nodeType.structure) {\n                    throw new Error('Missed `structure` field in `' + name + '` node type definition');\n                }\n\n                types[name] = getWalkersFromStructure(name, nodeType);\n            }\n        }\n\n        return types;\n    }\n\n    function createTypeIterator(config, reverse) {\n        var fields = config.fields.slice();\n        var contextName = config.context;\n        var useContext = typeof contextName === 'string';\n\n        if (reverse) {\n            fields.reverse();\n        }\n\n        return function(node, context, walk) {\n            var prevContextValue;\n\n            if (useContext) {\n                prevContextValue = context[contextName];\n                context[contextName] = node;\n            }\n\n            for (var i = 0; i < fields.length; i++) {\n                var field = fields[i];\n                var ref = node[field.name];\n\n                if (!field.nullable || ref) {\n                    if (field.type === 'list') {\n                        if (reverse) {\n                            ref.forEachRight(walk);\n                        } else {\n                            ref.forEach(walk);\n                        }\n                    } else {\n                        walk(ref);\n                    }\n                }\n            }\n\n            if (useContext) {\n                context[contextName] = prevContextValue;\n            }\n        };\n    }\n\n    function createFastTraveralMap(iterators) {\n        return {\n            Atrule: {\n                StyleSheet: iterators.StyleSheet,\n                Atrule: iterators.Atrule,\n                Rule: iterators.Rule,\n                Block: iterators.Block\n            },\n            Rule: {\n                StyleSheet: iterators.StyleSheet,\n                Atrule: iterators.Atrule,\n                Rule: iterators.Rule,\n                Block: iterators.Block\n            },\n            Declaration: {\n                StyleSheet: iterators.StyleSheet,\n                Atrule: iterators.Atrule,\n                Rule: iterators.Rule,\n                Block: iterators.Block,\n                DeclarationList: iterators.DeclarationList\n            }\n        };\n    }\n\n    var create$3 = function createWalker(config) {\n        var types = getTypesFromConfig(config);\n        var iteratorsNatural = {};\n        var iteratorsReverse = {};\n\n        for (var name in types) {\n            if (hasOwnProperty$4.call(types, name) && types[name] !== null) {\n                iteratorsNatural[name] = createTypeIterator(types[name], false);\n                iteratorsReverse[name] = createTypeIterator(types[name], true);\n            }\n        }\n\n        var fastTraversalIteratorsNatural = createFastTraveralMap(iteratorsNatural);\n        var fastTraversalIteratorsReverse = createFastTraveralMap(iteratorsReverse);\n\n        var walk = function(root, options) {\n            function walkNode(node, item, list) {\n                enter.call(context, node, item, list);\n\n                if (iterators.hasOwnProperty(node.type)) {\n                    iterators[node.type](node, context, walkNode);\n                }\n\n                leave.call(context, node, item, list);\n            }\n\n            var enter = noop$3;\n            var leave = noop$3;\n            var iterators = iteratorsNatural;\n            var context = {\n                root: root,\n                stylesheet: null,\n                atrule: null,\n                atrulePrelude: null,\n                rule: null,\n                selector: null,\n                block: null,\n                declaration: null,\n                function: null\n            };\n\n            if (typeof options === 'function') {\n                enter = options;\n            } else if (options) {\n                enter = ensureFunction$1(options.enter);\n                leave = ensureFunction$1(options.leave);\n\n                if (options.reverse) {\n                    iterators = iteratorsReverse;\n                }\n\n                if (options.visit) {\n                    if (fastTraversalIteratorsNatural.hasOwnProperty(options.visit)) {\n                        iterators = options.reverse\n                            ? fastTraversalIteratorsReverse[options.visit]\n                            : fastTraversalIteratorsNatural[options.visit];\n                    } else if (!types.hasOwnProperty(options.visit)) {\n                        throw new Error('Bad value `' + options.visit + '` for `visit` option (should be: ' + Object.keys(types).join(', ') + ')');\n                    }\n\n                    enter = invokeForType(enter, options.visit);\n                    leave = invokeForType(leave, options.visit);\n                }\n            }\n\n            if (enter === noop$3 && leave === noop$3) {\n                throw new Error('Neither `enter` nor `leave` walker handler is set or both aren\\'t a function');\n            }\n\n            // swap handlers in reverse mode to invert visit order\n            if (options.reverse) {\n                var tmp = enter;\n                enter = leave;\n                leave = tmp;\n            }\n\n            walkNode(root);\n        };\n\n        walk.find = function(ast, fn) {\n            var found = null;\n\n            walk(ast, function(node, item, list) {\n                if (found === null && fn.call(this, node, item, list)) {\n                    found = node;\n                }\n            });\n\n            return found;\n        };\n\n        walk.findLast = function(ast, fn) {\n            var found = null;\n\n            walk(ast, {\n                reverse: true,\n                enter: function(node, item, list) {\n                    if (found === null && fn.call(this, node, item, list)) {\n                        found = node;\n                    }\n                }\n            });\n\n            return found;\n        };\n\n        walk.findAll = function(ast, fn) {\n            var found = [];\n\n            walk(ast, function(node, item, list) {\n                if (fn.call(this, node, item, list)) {\n                    found.push(node);\n                }\n            });\n\n            return found;\n        };\n\n        return walk;\n    };\n\n    var clone = function clone(node) {\n        var result = {};\n\n        for (var key in node) {\n            var value = node[key];\n\n            if (value) {\n                if (Array.isArray(value) || value instanceof List_1) {\n                    value = value.map(clone);\n                } else if (value.constructor === Object) {\n                    value = clone(value);\n                }\n            }\n\n            result[key] = value;\n        }\n\n        return result;\n    };\n\n    var hasOwnProperty$5 = Object.prototype.hasOwnProperty;\n    var shape = {\n        generic: true,\n        types: {},\n        atrules: {},\n        properties: {},\n        parseContext: {},\n        scope: {},\n        atrule: ['parse'],\n        pseudo: ['parse'],\n        node: ['name', 'structure', 'parse', 'generate', 'walkContext']\n    };\n\n    function isObject(value) {\n        return value && value.constructor === Object;\n    }\n\n    function copy(value) {\n        if (isObject(value)) {\n            return Object.assign({}, value);\n        } else {\n            return value;\n        }\n    }\n    function extend(dest, src) {\n        for (var key in src) {\n            if (hasOwnProperty$5.call(src, key)) {\n                if (isObject(dest[key])) {\n                    extend(dest[key], copy(src[key]));\n                } else {\n                    dest[key] = copy(src[key]);\n                }\n            }\n        }\n    }\n\n    function mix(dest, src, shape) {\n        for (var key in shape) {\n            if (hasOwnProperty$5.call(shape, key) === false) {\n                continue;\n            }\n\n            if (shape[key] === true) {\n                if (key in src) {\n                    if (hasOwnProperty$5.call(src, key)) {\n                        dest[key] = copy(src[key]);\n                    }\n                }\n            } else if (shape[key]) {\n                if (isObject(shape[key])) {\n                    var res = {};\n                    extend(res, dest[key]);\n                    extend(res, src[key]);\n                    dest[key] = res;\n                } else if (Array.isArray(shape[key])) {\n                    var res = {};\n                    var innerShape = shape[key].reduce(function(s, k) {\n                        s[k] = true;\n                        return s;\n                    }, {});\n                    for (var name in dest[key]) {\n                        if (hasOwnProperty$5.call(dest[key], name)) {\n                            res[name] = {};\n                            if (dest[key] && dest[key][name]) {\n                                mix(res[name], dest[key][name], innerShape);\n                            }\n                        }\n                    }\n                    for (var name in src[key]) {\n                        if (hasOwnProperty$5.call(src[key], name)) {\n                            if (!res[name]) {\n                                res[name] = {};\n                            }\n                            if (src[key] && src[key][name]) {\n                                mix(res[name], src[key][name], innerShape);\n                            }\n                        }\n                    }\n                    dest[key] = res;\n                }\n            }\n        }\n        return dest;\n    }\n\n    var mix_1 = function(dest, src) {\n        return mix(dest, src, shape);\n    };\n\n    function createSyntax(config) {\n        var parse = create(config);\n        var walk = create$3(config);\n        var generate = create$1(config);\n        var convert = create$2(walk);\n\n        var syntax = {\n            List: List_1,\n            SyntaxError: _SyntaxError,\n            TokenStream: TokenStream_1,\n            Lexer: Lexer_1,\n\n            vendorPrefix: names.vendorPrefix,\n            keyword: names.keyword,\n            property: names.property,\n            isCustomProperty: names.isCustomProperty,\n\n            definitionSyntax: definitionSyntax,\n            lexer: null,\n            createLexer: function(config) {\n                return new Lexer_1(config, syntax, syntax.lexer.structure);\n            },\n\n            tokenize: tokenizer,\n            parse: parse,\n            walk: walk,\n            generate: generate,\n\n            find: walk.find,\n            findLast: walk.findLast,\n            findAll: walk.findAll,\n\n            clone: clone,\n            fromPlainObject: convert.fromPlainObject,\n            toPlainObject: convert.toPlainObject,\n\n            createSyntax: function(config) {\n                return createSyntax(mix_1({}, config));\n            },\n            fork: function(extension) {\n                var base = mix_1({}, config); // copy of config\n                return createSyntax(\n                    typeof extension === 'function'\n                        ? extension(base, Object.assign)\n                        : mix_1(base, extension)\n                );\n            }\n        };\n\n        syntax.lexer = new Lexer_1({\n            generic: true,\n            types: config.types,\n            atrules: config.atrules,\n            properties: config.properties,\n            node: config.node\n        }, syntax);\n\n        return syntax;\n    }\n    var create_1 = function(config) {\n        return createSyntax(mix_1({}, config));\n    };\n\n    var create$4 = {\n        create: create_1\n    };\n\n    var generic$1 = true;\n    var types = {\n        \"absolute-size\": \"xx-small|x-small|small|medium|large|x-large|xx-large\",\n        \"alpha-value\": \"<number>|<percentage>\",\n        \"angle-percentage\": \"<angle>|<percentage>\",\n        \"angular-color-hint\": \"<angle-percentage>\",\n        \"angular-color-stop\": \"<color>&&<color-stop-angle>?\",\n        \"angular-color-stop-list\": \"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>\",\n        \"animateable-feature\": \"scroll-position|contents|<custom-ident>\",\n        attachment: \"scroll|fixed|local\",\n        \"attr()\": \"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )\",\n        \"attr-matcher\": \"['~'|'|'|'^'|'$'|'*']? '='\",\n        \"attr-modifier\": \"i|s\",\n        \"attribute-selector\": \"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'\",\n        \"auto-repeat\": \"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )\",\n        \"auto-track-list\": \"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?\",\n        \"baseline-position\": \"[first|last]? baseline\",\n        \"basic-shape\": \"<inset()>|<circle()>|<ellipse()>|<polygon()>\",\n        \"bg-image\": \"none|<image>\",\n        \"bg-layer\": \"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>\",\n        \"bg-position\": \"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]\",\n        \"bg-size\": \"[<length-percentage>|auto]{1,2}|cover|contain\",\n        \"blur()\": \"blur( <length> )\",\n        \"blend-mode\": \"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity\",\n        box: \"border-box|padding-box|content-box\",\n        \"brightness()\": \"brightness( <number-percentage> )\",\n        \"calc()\": \"calc( <calc-sum> )\",\n        \"calc-sum\": \"<calc-product> [['+'|'-'] <calc-product>]*\",\n        \"calc-product\": \"<calc-value> ['*' <calc-value>|'/' <number>]*\",\n        \"calc-value\": \"<number>|<dimension>|<percentage>|( <calc-sum> )\",\n        \"cf-final-image\": \"<image>|<color>\",\n        \"cf-mixing-image\": \"<percentage>?&&<image>\",\n        \"circle()\": \"circle( [<shape-radius>]? [at <position>]? )\",\n        \"clamp()\": \"clamp( <calc-sum>#{3} )\",\n        \"class-selector\": \"'.' <ident-token>\",\n        \"clip-source\": \"<url>\",\n        color: \"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hex-color>|<named-color>|currentcolor|<deprecated-system-color>\",\n        \"color-stop\": \"<color-stop-length>|<color-stop-angle>\",\n        \"color-stop-angle\": \"<angle-percentage>{1,2}\",\n        \"color-stop-length\": \"<length-percentage>{1,2}\",\n        \"color-stop-list\": \"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>\",\n        combinator: \"'>'|'+'|'~'|['||']\",\n        \"common-lig-values\": \"[common-ligatures|no-common-ligatures]\",\n        compat: \"searchfield|textarea|push-button|button-bevel|slider-horizontal|checkbox|radio|square-button|menulist|menulist-button|listbox|meter|progress-bar\",\n        \"composite-style\": \"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor\",\n        \"compositing-operator\": \"add|subtract|intersect|exclude\",\n        \"compound-selector\": \"[<type-selector>? <subclass-selector>* [<pseudo-element-selector> <pseudo-class-selector>*]*]!\",\n        \"compound-selector-list\": \"<compound-selector>#\",\n        \"complex-selector\": \"<compound-selector> [<combinator>? <compound-selector>]*\",\n        \"complex-selector-list\": \"<complex-selector>#\",\n        \"conic-gradient()\": \"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )\",\n        \"contextual-alt-values\": \"[contextual|no-contextual]\",\n        \"content-distribution\": \"space-between|space-around|space-evenly|stretch\",\n        \"content-list\": \"[<string>|contents|<url>|<quote>|<attr()>|counter( <ident> , <'list-style-type'>? )]+\",\n        \"content-position\": \"center|start|end|flex-start|flex-end\",\n        \"content-replacement\": \"<image>\",\n        \"contrast()\": \"contrast( [<number-percentage>] )\",\n        \"counter()\": \"counter( <custom-ident> , [<counter-style>|none]? )\",\n        \"counter-style\": \"<counter-style-name>|symbols( )\",\n        \"counter-style-name\": \"<custom-ident>\",\n        \"counters()\": \"counters( <custom-ident> , <string> , [<counter-style>|none]? )\",\n        \"cross-fade()\": \"cross-fade( <cf-mixing-image> , <cf-final-image>? )\",\n        \"cubic-bezier-timing-function\": \"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number> , <number> , <number> , <number> )\",\n        \"deprecated-system-color\": \"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText\",\n        \"discretionary-lig-values\": \"[discretionary-ligatures|no-discretionary-ligatures]\",\n        \"display-box\": \"contents|none\",\n        \"display-inside\": \"flow|flow-root|table|flex|grid|ruby\",\n        \"display-internal\": \"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container\",\n        \"display-legacy\": \"inline-block|inline-list-item|inline-table|inline-flex|inline-grid\",\n        \"display-listitem\": \"<display-outside>?&&[flow|flow-root]?&&list-item\",\n        \"display-outside\": \"block|inline|run-in\",\n        \"drop-shadow()\": \"drop-shadow( <length>{2,3} <color>? )\",\n        \"east-asian-variant-values\": \"[jis78|jis83|jis90|jis04|simplified|traditional]\",\n        \"east-asian-width-values\": \"[full-width|proportional-width]\",\n        \"element()\": \"element( <id-selector> )\",\n        \"ellipse()\": \"ellipse( [<shape-radius>{2}]? [at <position>]? )\",\n        \"ending-shape\": \"circle|ellipse\",\n        \"env()\": \"env( <custom-ident> , <declaration-value>? )\",\n        \"explicit-track-list\": \"[<line-names>? <track-size>]+ <line-names>?\",\n        \"family-name\": \"<string>|<custom-ident>+\",\n        \"feature-tag-value\": \"<string> [<integer>|on|off]?\",\n        \"feature-type\": \"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation\",\n        \"feature-value-block\": \"<feature-type> '{' <feature-value-declaration-list> '}'\",\n        \"feature-value-block-list\": \"<feature-value-block>+\",\n        \"feature-value-declaration\": \"<custom-ident> : <integer>+ ;\",\n        \"feature-value-declaration-list\": \"<feature-value-declaration>\",\n        \"feature-value-name\": \"<custom-ident>\",\n        \"fill-rule\": \"nonzero|evenodd\",\n        \"filter-function\": \"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>\",\n        \"filter-function-list\": \"[<filter-function>|<url>]+\",\n        \"final-bg-layer\": \"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>\",\n        \"fit-content()\": \"fit-content( [<length>|<percentage>] )\",\n        \"fixed-breadth\": \"<length-percentage>\",\n        \"fixed-repeat\": \"repeat( [<positive-integer>] , [<line-names>? <fixed-size>]+ <line-names>? )\",\n        \"fixed-size\": \"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )\",\n        \"font-stretch-absolute\": \"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>\",\n        \"font-variant-css21\": \"[normal|small-caps]\",\n        \"font-weight-absolute\": \"normal|bold|<number>\",\n        \"frequency-percentage\": \"<frequency>|<percentage>\",\n        \"general-enclosed\": \"[<function-token> <any-value> )]|( <ident> <any-value> )\",\n        \"generic-family\": \"serif|sans-serif|cursive|fantasy|monospace|-apple-system\",\n        \"generic-name\": \"serif|sans-serif|cursive|fantasy|monospace\",\n        \"geometry-box\": \"<shape-box>|fill-box|stroke-box|view-box\",\n        gradient: \"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<-legacy-gradient>\",\n        \"grayscale()\": \"grayscale( <number-percentage> )\",\n        \"grid-line\": \"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]\",\n        \"historical-lig-values\": \"[historical-ligatures|no-historical-ligatures]\",\n        \"hsl()\": \"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )\",\n        \"hsla()\": \"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )\",\n        hue: \"<number>|<angle>\",\n        \"hue-rotate()\": \"hue-rotate( <angle> )\",\n        image: \"<url>|<image()>|<image-set()>|<element()>|<cross-fade()>|<gradient>\",\n        \"image()\": \"image( <image-tags>? [<image-src>? , <color>?]! )\",\n        \"image-set()\": \"image-set( <image-set-option># )\",\n        \"image-set-option\": \"[<image>|<string>] <resolution>\",\n        \"image-src\": \"<url>|<string>\",\n        \"image-tags\": \"ltr|rtl\",\n        \"inflexible-breadth\": \"<length>|<percentage>|min-content|max-content|auto\",\n        \"inset()\": \"inset( <length-percentage>{1,4} [round <'border-radius'>]? )\",\n        \"invert()\": \"invert( <number-percentage> )\",\n        \"keyframes-name\": \"<custom-ident>|<string>\",\n        \"keyframe-block\": \"<keyframe-selector># { <declaration-list> }\",\n        \"keyframe-block-list\": \"<keyframe-block>+\",\n        \"keyframe-selector\": \"from|to|<percentage>\",\n        \"leader()\": \"leader( <leader-type> )\",\n        \"leader-type\": \"dotted|solid|space|<string>\",\n        \"length-percentage\": \"<length>|<percentage>\",\n        \"line-names\": \"'[' <custom-ident>* ']'\",\n        \"line-name-list\": \"[<line-names>|<name-repeat>]+\",\n        \"line-style\": \"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset\",\n        \"line-width\": \"<length>|thin|medium|thick\",\n        \"linear-color-hint\": \"<length-percentage>\",\n        \"linear-color-stop\": \"<color> <color-stop-length>?\",\n        \"linear-gradient()\": \"linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )\",\n        \"mask-layer\": \"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>\",\n        \"mask-position\": \"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?\",\n        \"mask-reference\": \"none|<image>|<mask-source>\",\n        \"mask-source\": \"<url>\",\n        \"masking-mode\": \"alpha|luminance|match-source\",\n        \"matrix()\": \"matrix( <number>#{6} )\",\n        \"matrix3d()\": \"matrix3d( <number>#{16} )\",\n        \"max()\": \"max( <calc-sum># )\",\n        \"media-and\": \"<media-in-parens> [and <media-in-parens>]+\",\n        \"media-condition\": \"<media-not>|<media-and>|<media-or>|<media-in-parens>\",\n        \"media-condition-without-or\": \"<media-not>|<media-and>|<media-in-parens>\",\n        \"media-feature\": \"( [<mf-plain>|<mf-boolean>|<mf-range>] )\",\n        \"media-in-parens\": \"( <media-condition> )|<media-feature>|<general-enclosed>\",\n        \"media-not\": \"not <media-in-parens>\",\n        \"media-or\": \"<media-in-parens> [or <media-in-parens>]+\",\n        \"media-query\": \"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?\",\n        \"media-query-list\": \"<media-query>#\",\n        \"media-type\": \"<ident>\",\n        \"mf-boolean\": \"<mf-name>\",\n        \"mf-name\": \"<ident>\",\n        \"mf-plain\": \"<mf-name> : <mf-value>\",\n        \"mf-range\": \"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>\",\n        \"mf-value\": \"<number>|<dimension>|<ident>|<ratio>\",\n        \"min()\": \"min( <calc-sum># )\",\n        \"minmax()\": \"minmax( [<length>|<percentage>|<flex>|min-content|max-content|auto] , [<length>|<percentage>|<flex>|min-content|max-content|auto] )\",\n        \"named-color\": \"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen|<-non-standard-color>\",\n        \"namespace-prefix\": \"<ident>\",\n        \"ns-prefix\": \"[<ident-token>|'*']? '|'\",\n        \"number-percentage\": \"<number>|<percentage>\",\n        \"numeric-figure-values\": \"[lining-nums|oldstyle-nums]\",\n        \"numeric-fraction-values\": \"[diagonal-fractions|stacked-fractions]\",\n        \"numeric-spacing-values\": \"[proportional-nums|tabular-nums]\",\n        nth: \"<an-plus-b>|even|odd\",\n        \"opacity()\": \"opacity( [<number-percentage>] )\",\n        \"overflow-position\": \"unsafe|safe\",\n        \"outline-radius\": \"<length>|<percentage>\",\n        \"page-body\": \"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>\",\n        \"page-margin-box\": \"<page-margin-box-type> '{' <declaration-list> '}'\",\n        \"page-margin-box-type\": \"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom\",\n        \"page-selector-list\": \"[<page-selector>#]?\",\n        \"page-selector\": \"<pseudo-page>+|<ident> <pseudo-page>*\",\n        \"perspective()\": \"perspective( <length> )\",\n        \"polygon()\": \"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )\",\n        position: \"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]\",\n        \"pseudo-class-selector\": \"':' <ident-token>|':' <function-token> <any-value> ')'\",\n        \"pseudo-element-selector\": \"':' <pseudo-class-selector>\",\n        \"pseudo-page\": \": [left|right|first|blank]\",\n        quote: \"open-quote|close-quote|no-open-quote|no-close-quote\",\n        \"radial-gradient()\": \"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )\",\n        \"relative-selector\": \"<combinator>? <complex-selector>\",\n        \"relative-selector-list\": \"<relative-selector>#\",\n        \"relative-size\": \"larger|smaller\",\n        \"repeat-style\": \"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}\",\n        \"repeating-linear-gradient()\": \"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )\",\n        \"repeating-radial-gradient()\": \"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )\",\n        \"rgb()\": \"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )\",\n        \"rgba()\": \"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )\",\n        \"rotate()\": \"rotate( [<angle>|<zero>] )\",\n        \"rotate3d()\": \"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )\",\n        \"rotateX()\": \"rotateX( [<angle>|<zero>] )\",\n        \"rotateY()\": \"rotateY( [<angle>|<zero>] )\",\n        \"rotateZ()\": \"rotateZ( [<angle>|<zero>] )\",\n        \"saturate()\": \"saturate( <number-percentage> )\",\n        \"scale()\": \"scale( <number> , <number>? )\",\n        \"scale3d()\": \"scale3d( <number> , <number> , <number> )\",\n        \"scaleX()\": \"scaleX( <number> )\",\n        \"scaleY()\": \"scaleY( <number> )\",\n        \"scaleZ()\": \"scaleZ( <number> )\",\n        \"self-position\": \"center|start|end|self-start|self-end|flex-start|flex-end\",\n        \"shape-radius\": \"<length-percentage>|closest-side|farthest-side\",\n        \"skew()\": \"skew( [<angle>|<zero>] , [<angle>|<zero>]? )\",\n        \"skewX()\": \"skewX( [<angle>|<zero>] )\",\n        \"skewY()\": \"skewY( [<angle>|<zero>] )\",\n        \"sepia()\": \"sepia( <number-percentage> )\",\n        shadow: \"inset?&&<length>{2,4}&&<color>?\",\n        \"shadow-t\": \"[<length>{2,3}&&<color>?]\",\n        shape: \"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )\",\n        \"shape-box\": \"<box>|margin-box\",\n        \"side-or-corner\": \"[left|right]||[top|bottom]\",\n        \"single-animation\": \"<time>||<timing-function>||<time>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]\",\n        \"single-animation-direction\": \"normal|reverse|alternate|alternate-reverse\",\n        \"single-animation-fill-mode\": \"none|forwards|backwards|both\",\n        \"single-animation-iteration-count\": \"infinite|<number>\",\n        \"single-animation-play-state\": \"running|paused\",\n        \"single-transition\": \"[none|<single-transition-property>]||<time>||<timing-function>||<time>\",\n        \"single-transition-property\": \"all|<custom-ident>\",\n        size: \"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}\",\n        \"step-position\": \"jump-start|jump-end|jump-none|jump-both|start|end\",\n        \"step-timing-function\": \"step-start|step-end|steps( <integer> [, <step-position>]? )\",\n        \"subclass-selector\": \"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>\",\n        \"supports-condition\": \"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*\",\n        \"supports-in-parens\": \"( <supports-condition> )|<supports-feature>|<general-enclosed>\",\n        \"supports-feature\": \"<supports-decl>|<supports-selector-fn>\",\n        \"supports-decl\": \"( <declaration> )\",\n        \"supports-selector-fn\": \"selector( <complex-selector> )\",\n        symbol: \"<string>|<image>|<custom-ident>\",\n        target: \"<target-counter()>|<target-counters()>|<target-text()>\",\n        \"target-counter()\": \"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )\",\n        \"target-counters()\": \"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )\",\n        \"target-text()\": \"target-text( [<string>|<url>] , [content|before|after|first-letter]? )\",\n        \"time-percentage\": \"<time>|<percentage>\",\n        \"timing-function\": \"linear|<cubic-bezier-timing-function>|<step-timing-function>\",\n        \"track-breadth\": \"<length-percentage>|<flex>|min-content|max-content|auto\",\n        \"track-list\": \"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?\",\n        \"track-repeat\": \"repeat( [<positive-integer>] , [<line-names>? <track-size>]+ <line-names>? )\",\n        \"track-size\": \"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( [<length>|<percentage>] )\",\n        \"transform-function\": \"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>\",\n        \"transform-list\": \"<transform-function>+\",\n        \"translate()\": \"translate( <length-percentage> , <length-percentage>? )\",\n        \"translate3d()\": \"translate3d( <length-percentage> , <length-percentage> , <length> )\",\n        \"translateX()\": \"translateX( <length-percentage> )\",\n        \"translateY()\": \"translateY( <length-percentage> )\",\n        \"translateZ()\": \"translateZ( <length> )\",\n        \"type-or-unit\": \"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%\",\n        \"type-selector\": \"<wq-name>|<ns-prefix>? '*'\",\n        \"var()\": \"var( <custom-property-name> , <declaration-value>? )\",\n        \"viewport-length\": \"auto|<length-percentage>\",\n        \"wq-name\": \"<ns-prefix>? <ident-token>\",\n        \"-legacy-gradient\": \"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>\",\n        \"-legacy-linear-gradient\": \"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )\",\n        \"-legacy-repeating-linear-gradient\": \"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )\",\n        \"-legacy-linear-gradient-arguments\": \"[<angle>|<side-or-corner>]? , <color-stop-list>\",\n        \"-legacy-radial-gradient\": \"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )\",\n        \"-legacy-repeating-radial-gradient\": \"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )\",\n        \"-legacy-radial-gradient-arguments\": \"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>\",\n        \"-legacy-radial-gradient-size\": \"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover\",\n        \"-legacy-radial-gradient-shape\": \"circle|ellipse\",\n        \"-non-standard-font\": \"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body\",\n        \"-non-standard-color\": \"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text\",\n        \"-non-standard-image-rendering\": \"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast\",\n        \"-non-standard-overflow\": \"-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable\",\n        \"-non-standard-width\": \"min-intrinsic|intrinsic|-moz-min-content|-moz-max-content|-webkit-min-content|-webkit-max-content\",\n        \"-webkit-gradient()\": \"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )\",\n        \"-webkit-gradient-color-stop\": \"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )\",\n        \"-webkit-gradient-point\": \"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]\",\n        \"-webkit-gradient-radius\": \"<length>|<percentage>\",\n        \"-webkit-gradient-type\": \"linear|radial\",\n        \"-webkit-mask-box-repeat\": \"repeat|stretch|round\",\n        \"-webkit-mask-clip-style\": \"border|border-box|padding|padding-box|content|content-box|text\",\n        \"-ms-filter-function-list\": \"<-ms-filter-function>+\",\n        \"-ms-filter-function\": \"<-ms-filter-function-progid>|<-ms-filter-function-legacy>\",\n        \"-ms-filter-function-progid\": \"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]\",\n        \"-ms-filter-function-legacy\": \"<ident-token>|<function-token> <any-value>? )\",\n        \"-ms-filter\": \"<string>\",\n        age: \"child|young|old\",\n        \"attr-name\": \"<wq-name>\",\n        \"attr-fallback\": \"<any-value>\",\n        \"border-radius\": \"<length-percentage>{1,2}\",\n        bottom: \"<length>|auto\",\n        \"generic-voice\": \"[<age>? <gender> <integer>?]\",\n        gender: \"male|female|neutral\",\n        left: \"<length>|auto\",\n        \"mask-image\": \"<mask-reference>#\",\n        \"name-repeat\": \"repeat( [<positive-integer>|auto-fill] , <line-names>+ )\",\n        paint: \"none|<color>|<url> [none|<color>]?|context-fill|context-stroke\",\n        \"path()\": \"path( <string> )\",\n        ratio: \"<integer> / <integer>\",\n        right: \"<length>|auto\",\n        \"svg-length\": \"<percentage>|<length>|<number>\",\n        \"svg-writing-mode\": \"lr-tb|rl-tb|tb-rl|lr|rl|tb\",\n        top: \"<length>|auto\",\n        \"track-group\": \"'(' [<string>* <track-minmax> <string>*]+ ')' ['[' <positive-integer> ']']?|<track-minmax>\",\n        \"track-list-v0\": \"[<string>* <track-group> <string>*]+|none\",\n        \"track-minmax\": \"minmax( <track-breadth> , <track-breadth> )|auto|<track-breadth>|fit-content\",\n        x: \"<number>\",\n        y: \"<number>\",\n        declaration: \"<ident-token> : <declaration-value>? ['!' important]?\",\n        \"declaration-list\": \"[<declaration>? ';']* <declaration>?\",\n        url: \"url( <string> <url-modifier>* )|<url-token>\",\n        \"url-modifier\": \"<ident>|<function-token> <any-value> )\",\n        \"number-zero-one\": \"<number [0,1]>\",\n        \"number-one-or-greater\": \"<number [1,\u221e]>\",\n        \"positive-integer\": \"<integer [0,\u221e]>\"\n    };\n    var properties$1 = {\n        \"--*\": \"<declaration-value>\",\n        \"-ms-accelerator\": \"false|true\",\n        \"-ms-block-progression\": \"tb|rl|bt|lr\",\n        \"-ms-content-zoom-chaining\": \"none|chained\",\n        \"-ms-content-zooming\": \"none|zoom\",\n        \"-ms-content-zoom-limit\": \"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>\",\n        \"-ms-content-zoom-limit-max\": \"<percentage>\",\n        \"-ms-content-zoom-limit-min\": \"<percentage>\",\n        \"-ms-content-zoom-snap\": \"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>\",\n        \"-ms-content-zoom-snap-points\": \"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )\",\n        \"-ms-content-zoom-snap-type\": \"none|proximity|mandatory\",\n        \"-ms-filter\": \"<string>\",\n        \"-ms-flow-from\": \"[none|<custom-ident>]#\",\n        \"-ms-flow-into\": \"[none|<custom-ident>]#\",\n        \"-ms-high-contrast-adjust\": \"auto|none\",\n        \"-ms-hyphenate-limit-chars\": \"auto|<integer>{1,3}\",\n        \"-ms-hyphenate-limit-lines\": \"no-limit|<integer>\",\n        \"-ms-hyphenate-limit-zone\": \"<percentage>|<length>\",\n        \"-ms-ime-align\": \"auto|after\",\n        \"-ms-overflow-style\": \"auto|none|scrollbar|-ms-autohiding-scrollbar\",\n        \"-ms-scrollbar-3dlight-color\": \"<color>\",\n        \"-ms-scrollbar-arrow-color\": \"<color>\",\n        \"-ms-scrollbar-base-color\": \"<color>\",\n        \"-ms-scrollbar-darkshadow-color\": \"<color>\",\n        \"-ms-scrollbar-face-color\": \"<color>\",\n        \"-ms-scrollbar-highlight-color\": \"<color>\",\n        \"-ms-scrollbar-shadow-color\": \"<color>\",\n        \"-ms-scrollbar-track-color\": \"<color>\",\n        \"-ms-scroll-chaining\": \"chained|none\",\n        \"-ms-scroll-limit\": \"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>\",\n        \"-ms-scroll-limit-x-max\": \"auto|<length>\",\n        \"-ms-scroll-limit-x-min\": \"<length>\",\n        \"-ms-scroll-limit-y-max\": \"auto|<length>\",\n        \"-ms-scroll-limit-y-min\": \"<length>\",\n        \"-ms-scroll-rails\": \"none|railed\",\n        \"-ms-scroll-snap-points-x\": \"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )\",\n        \"-ms-scroll-snap-points-y\": \"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )\",\n        \"-ms-scroll-snap-type\": \"none|proximity|mandatory\",\n        \"-ms-scroll-snap-x\": \"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>\",\n        \"-ms-scroll-snap-y\": \"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>\",\n        \"-ms-scroll-translation\": \"none|vertical-to-horizontal\",\n        \"-ms-text-autospace\": \"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space\",\n        \"-ms-touch-select\": \"grippers|none\",\n        \"-ms-user-select\": \"none|element|text\",\n        \"-ms-wrap-flow\": \"auto|both|start|end|maximum|clear\",\n        \"-ms-wrap-margin\": \"<length>\",\n        \"-ms-wrap-through\": \"wrap|none\",\n        \"-moz-appearance\": \"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized\",\n        \"-moz-binding\": \"<url>|none\",\n        \"-moz-border-bottom-colors\": \"<color>+|none\",\n        \"-moz-border-left-colors\": \"<color>+|none\",\n        \"-moz-border-right-colors\": \"<color>+|none\",\n        \"-moz-border-top-colors\": \"<color>+|none\",\n        \"-moz-context-properties\": \"none|[fill|fill-opacity|stroke|stroke-opacity]#\",\n        \"-moz-float-edge\": \"border-box|content-box|margin-box|padding-box\",\n        \"-moz-force-broken-image-icon\": \"<integer>\",\n        \"-moz-image-region\": \"<shape>|auto\",\n        \"-moz-orient\": \"inline|block|horizontal|vertical\",\n        \"-moz-outline-radius\": \"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?\",\n        \"-moz-outline-radius-bottomleft\": \"<outline-radius>\",\n        \"-moz-outline-radius-bottomright\": \"<outline-radius>\",\n        \"-moz-outline-radius-topleft\": \"<outline-radius>\",\n        \"-moz-outline-radius-topright\": \"<outline-radius>\",\n        \"-moz-stack-sizing\": \"ignore|stretch-to-fit\",\n        \"-moz-text-blink\": \"none|blink\",\n        \"-moz-user-focus\": \"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none\",\n        \"-moz-user-input\": \"auto|none|enabled|disabled\",\n        \"-moz-user-modify\": \"read-only|read-write|write-only\",\n        \"-moz-window-dragging\": \"drag|no-drag\",\n        \"-moz-window-shadow\": \"default|menu|tooltip|sheet|none\",\n        \"-webkit-appearance\": \"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|listbox|listitem|media-fullscreen-button|media-mute-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield\",\n        \"-webkit-border-before\": \"<'border-width'>||<'border-style'>||<'color'>\",\n        \"-webkit-border-before-color\": \"<'color'>\",\n        \"-webkit-border-before-style\": \"<'border-style'>\",\n        \"-webkit-border-before-width\": \"<'border-width'>\",\n        \"-webkit-box-reflect\": \"[above|below|right|left]? <length>? <image>?\",\n        \"-webkit-line-clamp\": \"none|<integer>\",\n        \"-webkit-mask\": \"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#\",\n        \"-webkit-mask-attachment\": \"<attachment>#\",\n        \"-webkit-mask-clip\": \"[<box>|border|padding|content|text]#\",\n        \"-webkit-mask-composite\": \"<composite-style>#\",\n        \"-webkit-mask-image\": \"<mask-reference>#\",\n        \"-webkit-mask-origin\": \"[<box>|border|padding|content]#\",\n        \"-webkit-mask-position\": \"<position>#\",\n        \"-webkit-mask-position-x\": \"[<length-percentage>|left|center|right]#\",\n        \"-webkit-mask-position-y\": \"[<length-percentage>|top|center|bottom]#\",\n        \"-webkit-mask-repeat\": \"<repeat-style>#\",\n        \"-webkit-mask-repeat-x\": \"repeat|no-repeat|space|round\",\n        \"-webkit-mask-repeat-y\": \"repeat|no-repeat|space|round\",\n        \"-webkit-mask-size\": \"<bg-size>#\",\n        \"-webkit-overflow-scrolling\": \"auto|touch\",\n        \"-webkit-tap-highlight-color\": \"<color>\",\n        \"-webkit-text-fill-color\": \"<color>\",\n        \"-webkit-text-stroke\": \"<length>||<color>\",\n        \"-webkit-text-stroke-color\": \"<color>\",\n        \"-webkit-text-stroke-width\": \"<length>\",\n        \"-webkit-touch-callout\": \"default|none\",\n        \"-webkit-user-modify\": \"read-only|read-write|read-write-plaintext-only\",\n        \"align-content\": \"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>\",\n        \"align-items\": \"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]\",\n        \"align-self\": \"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>\",\n        all: \"initial|inherit|unset|revert\",\n        animation: \"<single-animation>#\",\n        \"animation-delay\": \"<time>#\",\n        \"animation-direction\": \"<single-animation-direction>#\",\n        \"animation-duration\": \"<time>#\",\n        \"animation-fill-mode\": \"<single-animation-fill-mode>#\",\n        \"animation-iteration-count\": \"<single-animation-iteration-count>#\",\n        \"animation-name\": \"[none|<keyframes-name>]#\",\n        \"animation-play-state\": \"<single-animation-play-state>#\",\n        \"animation-timing-function\": \"<timing-function>#\",\n        appearance: \"none|auto|button|textfield|<compat>\",\n        azimuth: \"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards\",\n        \"backdrop-filter\": \"none|<filter-function-list>\",\n        \"backface-visibility\": \"visible|hidden\",\n        background: \"[<bg-layer> ,]* <final-bg-layer>\",\n        \"background-attachment\": \"<attachment>#\",\n        \"background-blend-mode\": \"<blend-mode>#\",\n        \"background-clip\": \"<box>#\",\n        \"background-color\": \"<color>\",\n        \"background-image\": \"<bg-image>#\",\n        \"background-origin\": \"<box>#\",\n        \"background-position\": \"<bg-position>#\",\n        \"background-position-x\": \"[center|[left|right|x-start|x-end]? <length-percentage>?]#\",\n        \"background-position-y\": \"[center|[top|bottom|y-start|y-end]? <length-percentage>?]#\",\n        \"background-repeat\": \"<repeat-style>#\",\n        \"background-size\": \"<bg-size>#\",\n        \"block-overflow\": \"clip|ellipsis|<string>\",\n        \"block-size\": \"<'width'>\",\n        border: \"<line-width>||<line-style>||<color>\",\n        \"border-block\": \"<'border-top-width'>||<'border-top-style'>||<'color'>\",\n        \"border-block-color\": \"<'border-top-color'>{1,2}\",\n        \"border-block-style\": \"<'border-top-style'>\",\n        \"border-block-width\": \"<'border-top-width'>\",\n        \"border-block-end\": \"<'border-top-width'>||<'border-top-style'>||<'color'>\",\n        \"border-block-end-color\": \"<'border-top-color'>\",\n        \"border-block-end-style\": \"<'border-top-style'>\",\n        \"border-block-end-width\": \"<'border-top-width'>\",\n        \"border-block-start\": \"<'border-top-width'>||<'border-top-style'>||<'color'>\",\n        \"border-block-start-color\": \"<'border-top-color'>\",\n        \"border-block-start-style\": \"<'border-top-style'>\",\n        \"border-block-start-width\": \"<'border-top-width'>\",\n        \"border-bottom\": \"<line-width>||<line-style>||<color>\",\n        \"border-bottom-color\": \"<'border-top-color'>\",\n        \"border-bottom-left-radius\": \"<length-percentage>{1,2}\",\n        \"border-bottom-right-radius\": \"<length-percentage>{1,2}\",\n        \"border-bottom-style\": \"<line-style>\",\n        \"border-bottom-width\": \"<line-width>\",\n        \"border-collapse\": \"collapse|separate\",\n        \"border-color\": \"<color>{1,4}\",\n        \"border-end-end-radius\": \"<length-percentage>{1,2}\",\n        \"border-end-start-radius\": \"<length-percentage>{1,2}\",\n        \"border-image\": \"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>\",\n        \"border-image-outset\": \"[<length>|<number>]{1,4}\",\n        \"border-image-repeat\": \"[stretch|repeat|round|space]{1,2}\",\n        \"border-image-slice\": \"<number-percentage>{1,4}&&fill?\",\n        \"border-image-source\": \"none|<image>\",\n        \"border-image-width\": \"[<length-percentage>|<number>|auto]{1,4}\",\n        \"border-inline\": \"<'border-top-width'>||<'border-top-style'>||<'color'>\",\n        \"border-inline-end\": \"<'border-top-width'>||<'border-top-style'>||<'color'>\",\n        \"border-inline-color\": \"<'border-top-color'>{1,2}\",\n        \"border-inline-style\": \"<'border-top-style'>\",\n        \"border-inline-width\": \"<'border-top-width'>\",\n        \"border-inline-end-color\": \"<'border-top-color'>\",\n        \"border-inline-end-style\": \"<'border-top-style'>\",\n        \"border-inline-end-width\": \"<'border-top-width'>\",\n        \"border-inline-start\": \"<'border-top-width'>||<'border-top-style'>||<'color'>\",\n        \"border-inline-start-color\": \"<'border-top-color'>\",\n        \"border-inline-start-style\": \"<'border-top-style'>\",\n        \"border-inline-start-width\": \"<'border-top-width'>\",\n        \"border-left\": \"<line-width>||<line-style>||<color>\",\n        \"border-left-color\": \"<color>\",\n        \"border-left-style\": \"<line-style>\",\n        \"border-left-width\": \"<line-width>\",\n        \"border-radius\": \"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?\",\n        \"border-right\": \"<line-width>||<line-style>||<color>\",\n        \"border-right-color\": \"<color>\",\n        \"border-right-style\": \"<line-style>\",\n        \"border-right-width\": \"<line-width>\",\n        \"border-spacing\": \"<length> <length>?\",\n        \"border-start-end-radius\": \"<length-percentage>{1,2}\",\n        \"border-start-start-radius\": \"<length-percentage>{1,2}\",\n        \"border-style\": \"<line-style>{1,4}\",\n        \"border-top\": \"<line-width>||<line-style>||<color>\",\n        \"border-top-color\": \"<color>\",\n        \"border-top-left-radius\": \"<length-percentage>{1,2}\",\n        \"border-top-right-radius\": \"<length-percentage>{1,2}\",\n        \"border-top-style\": \"<line-style>\",\n        \"border-top-width\": \"<line-width>\",\n        \"border-width\": \"<line-width>{1,4}\",\n        bottom: \"<length>|<percentage>|auto\",\n        \"box-align\": \"start|center|end|baseline|stretch\",\n        \"box-decoration-break\": \"slice|clone\",\n        \"box-direction\": \"normal|reverse|inherit\",\n        \"box-flex\": \"<number>\",\n        \"box-flex-group\": \"<integer>\",\n        \"box-lines\": \"single|multiple\",\n        \"box-ordinal-group\": \"<integer>\",\n        \"box-orient\": \"horizontal|vertical|inline-axis|block-axis|inherit\",\n        \"box-pack\": \"start|center|end|justify\",\n        \"box-shadow\": \"none|<shadow>#\",\n        \"box-sizing\": \"content-box|border-box\",\n        \"break-after\": \"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region\",\n        \"break-before\": \"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region\",\n        \"break-inside\": \"auto|avoid|avoid-page|avoid-column|avoid-region\",\n        \"caption-side\": \"top|bottom|block-start|block-end|inline-start|inline-end\",\n        \"caret-color\": \"auto|<color>\",\n        clear: \"none|left|right|both|inline-start|inline-end\",\n        clip: \"<shape>|auto\",\n        \"clip-path\": \"<clip-source>|[<basic-shape>||<geometry-box>]|none\",\n        color: \"<color>\",\n        \"color-adjust\": \"economy|exact\",\n        \"column-count\": \"<integer>|auto\",\n        \"column-fill\": \"auto|balance|balance-all\",\n        \"column-gap\": \"normal|<length-percentage>\",\n        \"column-rule\": \"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>\",\n        \"column-rule-color\": \"<color>\",\n        \"column-rule-style\": \"<'border-style'>\",\n        \"column-rule-width\": \"<'border-width'>\",\n        \"column-span\": \"none|all\",\n        \"column-width\": \"<length>|auto\",\n        columns: \"<'column-width'>||<'column-count'>\",\n        contain: \"none|strict|content|[size||layout||style||paint]\",\n        content: \"normal|none|[<content-replacement>|<content-list>] [/ <string>]?\",\n        \"counter-increment\": \"[<custom-ident> <integer>?]+|none\",\n        \"counter-reset\": \"[<custom-ident> <integer>?]+|none\",\n        \"counter-set\": \"[<custom-ident> <integer>?]+|none\",\n        cursor: \"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]\",\n        direction: \"ltr|rtl\",\n        display: \"block|contents|flex|flow|flow-root|grid|inline|inline-block|inline-flex|inline-grid|inline-list-item|inline-table|list-item|none|ruby|ruby-base|ruby-base-container|ruby-text|ruby-text-container|run-in|table|table-caption|table-cell|table-column|table-column-group|table-footer-group|table-header-group|table-row|table-row-group|-ms-flexbox|-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box\",\n        \"empty-cells\": \"show|hide\",\n        filter: \"none|<filter-function-list>|<-ms-filter-function-list>\",\n        flex: \"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]\",\n        \"flex-basis\": \"content|<'width'>\",\n        \"flex-direction\": \"row|row-reverse|column|column-reverse\",\n        \"flex-flow\": \"<'flex-direction'>||<'flex-wrap'>\",\n        \"flex-grow\": \"<number>\",\n        \"flex-shrink\": \"<number>\",\n        \"flex-wrap\": \"nowrap|wrap|wrap-reverse\",\n        float: \"left|right|none|inline-start|inline-end\",\n        font: \"[[<'font-style'>||<font-variant-css21>||<'font-weight'>||<'font-stretch'>]? <'font-size'> [/ <'line-height'>]? <'font-family'>]|caption|icon|menu|message-box|small-caption|status-bar\",\n        \"font-family\": \"[<family-name>|<generic-family>]#\",\n        \"font-feature-settings\": \"normal|<feature-tag-value>#\",\n        \"font-kerning\": \"auto|normal|none\",\n        \"font-language-override\": \"normal|<string>\",\n        \"font-optical-sizing\": \"auto|none\",\n        \"font-variation-settings\": \"normal|[<string> <number>]#\",\n        \"font-size\": \"<absolute-size>|<relative-size>|<length-percentage>\",\n        \"font-size-adjust\": \"none|<number>\",\n        \"font-stretch\": \"<font-stretch-absolute>\",\n        \"font-style\": \"normal|italic|oblique <angle>?\",\n        \"font-synthesis\": \"none|[weight||style]\",\n        \"font-variant\": \"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]\",\n        \"font-variant-alternates\": \"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]\",\n        \"font-variant-caps\": \"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps\",\n        \"font-variant-east-asian\": \"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]\",\n        \"font-variant-ligatures\": \"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]\",\n        \"font-variant-numeric\": \"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]\",\n        \"font-variant-position\": \"normal|sub|super\",\n        \"font-weight\": \"<font-weight-absolute>|bolder|lighter\",\n        gap: \"<'row-gap'> <'column-gap'>?\",\n        grid: \"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>\",\n        \"grid-area\": \"<grid-line> [/ <grid-line>]{0,3}\",\n        \"grid-auto-columns\": \"<track-size>+\",\n        \"grid-auto-flow\": \"[row|column]||dense\",\n        \"grid-auto-rows\": \"<track-size>+\",\n        \"grid-column\": \"<grid-line> [/ <grid-line>]?\",\n        \"grid-column-end\": \"<grid-line>\",\n        \"grid-column-gap\": \"<length-percentage>\",\n        \"grid-column-start\": \"<grid-line>\",\n        \"grid-gap\": \"<'grid-row-gap'> <'grid-column-gap'>?\",\n        \"grid-row\": \"<grid-line> [/ <grid-line>]?\",\n        \"grid-row-end\": \"<grid-line>\",\n        \"grid-row-gap\": \"<length-percentage>\",\n        \"grid-row-start\": \"<grid-line>\",\n        \"grid-template\": \"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?\",\n        \"grid-template-areas\": \"none|<string>+\",\n        \"grid-template-columns\": \"none|<track-list>|<auto-track-list>\",\n        \"grid-template-rows\": \"none|<track-list>|<auto-track-list>\",\n        \"hanging-punctuation\": \"none|[first||[force-end|allow-end]||last]\",\n        height: \"[<length>|<percentage>]&&[border-box|content-box]?|available|min-content|max-content|fit-content|auto\",\n        hyphens: \"none|manual|auto\",\n        \"image-orientation\": \"from-image|<angle>|[<angle>? flip]\",\n        \"image-rendering\": \"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>\",\n        \"image-resolution\": \"[from-image||<resolution>]&&snap?\",\n        \"ime-mode\": \"auto|normal|active|inactive|disabled\",\n        \"initial-letter\": \"normal|[<number> <integer>?]\",\n        \"initial-letter-align\": \"[auto|alphabetic|hanging|ideographic]\",\n        \"inline-size\": \"<'width'>\",\n        inset: \"<'top'>{1,4}\",\n        \"inset-block\": \"<'top'>{1,2}\",\n        \"inset-block-end\": \"<'top'>\",\n        \"inset-block-start\": \"<'top'>\",\n        \"inset-inline\": \"<'top'>{1,2}\",\n        \"inset-inline-end\": \"<'top'>\",\n        \"inset-inline-start\": \"<'top'>\",\n        isolation: \"auto|isolate\",\n        \"justify-content\": \"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]\",\n        \"justify-items\": \"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]\",\n        \"justify-self\": \"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]\",\n        left: \"<length>|<percentage>|auto\",\n        \"letter-spacing\": \"normal|<length-percentage>\",\n        \"line-break\": \"auto|loose|normal|strict\",\n        \"line-clamp\": \"none|<integer>\",\n        \"line-height\": \"normal|<number>|<length>|<percentage>\",\n        \"line-height-step\": \"<length>\",\n        \"list-style\": \"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>\",\n        \"list-style-image\": \"<url>|none\",\n        \"list-style-position\": \"inside|outside\",\n        \"list-style-type\": \"<counter-style>|<string>|none\",\n        margin: \"[<length>|<percentage>|auto]{1,4}\",\n        \"margin-block\": \"<'margin-left'>{1,2}\",\n        \"margin-block-end\": \"<'margin-left'>\",\n        \"margin-block-start\": \"<'margin-left'>\",\n        \"margin-bottom\": \"<length>|<percentage>|auto\",\n        \"margin-inline\": \"<'margin-left'>{1,2}\",\n        \"margin-inline-end\": \"<'margin-left'>\",\n        \"margin-inline-start\": \"<'margin-left'>\",\n        \"margin-left\": \"<length>|<percentage>|auto\",\n        \"margin-right\": \"<length>|<percentage>|auto\",\n        \"margin-top\": \"<length>|<percentage>|auto\",\n        mask: \"<mask-layer>#\",\n        \"mask-border\": \"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>\",\n        \"mask-border-mode\": \"luminance|alpha\",\n        \"mask-border-outset\": \"[<length>|<number>]{1,4}\",\n        \"mask-border-repeat\": \"[stretch|repeat|round|space]{1,2}\",\n        \"mask-border-slice\": \"<number-percentage>{1,4} fill?\",\n        \"mask-border-source\": \"none|<image>\",\n        \"mask-border-width\": \"[<length-percentage>|<number>|auto]{1,4}\",\n        \"mask-clip\": \"[<geometry-box>|no-clip]#\",\n        \"mask-composite\": \"<compositing-operator>#\",\n        \"mask-image\": \"<mask-reference>#\",\n        \"mask-mode\": \"<masking-mode>#\",\n        \"mask-origin\": \"<geometry-box>#\",\n        \"mask-position\": \"<position>#\",\n        \"mask-repeat\": \"<repeat-style>#\",\n        \"mask-size\": \"<bg-size>#\",\n        \"mask-type\": \"luminance|alpha\",\n        \"max-block-size\": \"<'max-width'>\",\n        \"max-height\": \"<length>|<percentage>|none|max-content|min-content|fit-content|fill-available\",\n        \"max-inline-size\": \"<'max-width'>\",\n        \"max-lines\": \"none|<integer>\",\n        \"max-width\": \"<length>|<percentage>|none|max-content|min-content|fit-content|fill-available|<-non-standard-width>\",\n        \"min-block-size\": \"<'min-width'>\",\n        \"min-height\": \"<length>|<percentage>|auto|max-content|min-content|fit-content|fill-available\",\n        \"min-inline-size\": \"<'min-width'>\",\n        \"min-width\": \"<length>|<percentage>|auto|max-content|min-content|fit-content|fill-available|<-non-standard-width>\",\n        \"mix-blend-mode\": \"<blend-mode>\",\n        \"object-fit\": \"fill|contain|cover|none|scale-down\",\n        \"object-position\": \"<position>\",\n        offset: \"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?\",\n        \"offset-anchor\": \"auto|<position>\",\n        \"offset-distance\": \"<length-percentage>\",\n        \"offset-path\": \"none|ray( [<angle>&&<size>?&&contain?] )|<path()>|<url>|[<basic-shape>||<geometry-box>]\",\n        \"offset-position\": \"auto|<position>\",\n        \"offset-rotate\": \"[auto|reverse]||<angle>\",\n        opacity: \"<number-zero-one>\",\n        order: \"<integer>\",\n        orphans: \"<integer>\",\n        outline: \"[<'outline-color'>||<'outline-style'>||<'outline-width'>]\",\n        \"outline-color\": \"<color>|invert\",\n        \"outline-offset\": \"<length>\",\n        \"outline-style\": \"auto|<'border-style'>\",\n        \"outline-width\": \"<line-width>\",\n        overflow: \"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>\",\n        \"overflow-anchor\": \"auto|none\",\n        \"overflow-block\": \"visible|hidden|clip|scroll|auto\",\n        \"overflow-clip-box\": \"padding-box|content-box\",\n        \"overflow-inline\": \"visible|hidden|clip|scroll|auto\",\n        \"overflow-wrap\": \"normal|break-word|anywhere\",\n        \"overflow-x\": \"visible|hidden|clip|scroll|auto\",\n        \"overflow-y\": \"visible|hidden|clip|scroll|auto\",\n        \"overscroll-behavior\": \"[contain|none|auto]{1,2}\",\n        \"overscroll-behavior-x\": \"contain|none|auto\",\n        \"overscroll-behavior-y\": \"contain|none|auto\",\n        padding: \"[<length>|<percentage>]{1,4}\",\n        \"padding-block\": \"<'padding-left'>{1,2}\",\n        \"padding-block-end\": \"<'padding-left'>\",\n        \"padding-block-start\": \"<'padding-left'>\",\n        \"padding-bottom\": \"<length>|<percentage>\",\n        \"padding-inline\": \"<'padding-left'>{1,2}\",\n        \"padding-inline-end\": \"<'padding-left'>\",\n        \"padding-inline-start\": \"<'padding-left'>\",\n        \"padding-left\": \"<length>|<percentage>\",\n        \"padding-right\": \"<length>|<percentage>\",\n        \"padding-top\": \"<length>|<percentage>\",\n        \"page-break-after\": \"auto|always|avoid|left|right|recto|verso\",\n        \"page-break-before\": \"auto|always|avoid|left|right|recto|verso\",\n        \"page-break-inside\": \"auto|avoid\",\n        \"paint-order\": \"normal|[fill||stroke||markers]\",\n        perspective: \"none|<length>\",\n        \"perspective-origin\": \"<position>\",\n        \"place-content\": \"<'align-content'> <'justify-content'>?\",\n        \"place-items\": \"<'align-items'> <'justify-items'>?\",\n        \"place-self\": \"<'align-self'> <'justify-self'>?\",\n        \"pointer-events\": \"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit\",\n        position: \"static|relative|absolute|sticky|fixed|-webkit-sticky\",\n        quotes: \"none|[<string> <string>]+\",\n        resize: \"none|both|horizontal|vertical|block|inline\",\n        right: \"<length>|<percentage>|auto\",\n        rotate: \"none|<angle>|[x|y|z|<number>{3}]&&<angle>\",\n        \"row-gap\": \"normal|<length-percentage>\",\n        \"ruby-align\": \"start|center|space-between|space-around\",\n        \"ruby-merge\": \"separate|collapse|auto\",\n        \"ruby-position\": \"over|under|inter-character\",\n        scale: \"none|<number>{1,3}\",\n        \"scrollbar-color\": \"auto|dark|light|<color>{2}\",\n        \"scrollbar-width\": \"auto|thin|none\",\n        \"scroll-behavior\": \"auto|smooth\",\n        \"scroll-margin\": \"<length>{1,4}\",\n        \"scroll-margin-block\": \"<length>{1,2}\",\n        \"scroll-margin-block-start\": \"<length>\",\n        \"scroll-margin-block-end\": \"<length>\",\n        \"scroll-margin-bottom\": \"<length>\",\n        \"scroll-margin-inline\": \"<length>{1,2}\",\n        \"scroll-margin-inline-start\": \"<length>\",\n        \"scroll-margin-inline-end\": \"<length>\",\n        \"scroll-margin-left\": \"<length>\",\n        \"scroll-margin-right\": \"<length>\",\n        \"scroll-margin-top\": \"<length>\",\n        \"scroll-padding\": \"[auto|<length-percentage>]{1,4}\",\n        \"scroll-padding-block\": \"[auto|<length-percentage>]{1,2}\",\n        \"scroll-padding-block-start\": \"auto|<length-percentage>\",\n        \"scroll-padding-block-end\": \"auto|<length-percentage>\",\n        \"scroll-padding-bottom\": \"auto|<length-percentage>\",\n        \"scroll-padding-inline\": \"[auto|<length-percentage>]{1,2}\",\n        \"scroll-padding-inline-start\": \"auto|<length-percentage>\",\n        \"scroll-padding-inline-end\": \"auto|<length-percentage>\",\n        \"scroll-padding-left\": \"auto|<length-percentage>\",\n        \"scroll-padding-right\": \"auto|<length-percentage>\",\n        \"scroll-padding-top\": \"auto|<length-percentage>\",\n        \"scroll-snap-align\": \"[none|start|end|center]{1,2}\",\n        \"scroll-snap-coordinate\": \"none|<position>#\",\n        \"scroll-snap-destination\": \"<position>\",\n        \"scroll-snap-points-x\": \"none|repeat( <length-percentage> )\",\n        \"scroll-snap-points-y\": \"none|repeat( <length-percentage> )\",\n        \"scroll-snap-stop\": \"normal|always\",\n        \"scroll-snap-type\": \"none|[x|y|block|inline|both] [mandatory|proximity]?\",\n        \"scroll-snap-type-x\": \"none|mandatory|proximity\",\n        \"scroll-snap-type-y\": \"none|mandatory|proximity\",\n        \"shape-image-threshold\": \"<number>\",\n        \"shape-margin\": \"<length-percentage>\",\n        \"shape-outside\": \"none|<shape-box>||<basic-shape>|<image>\",\n        \"tab-size\": \"<integer>|<length>\",\n        \"table-layout\": \"auto|fixed\",\n        \"text-align\": \"start|end|left|right|center|justify|match-parent\",\n        \"text-align-last\": \"auto|start|end|left|right|center|justify\",\n        \"text-combine-upright\": \"none|all|[digits <integer>?]\",\n        \"text-decoration\": \"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>\",\n        \"text-decoration-color\": \"<color>\",\n        \"text-decoration-line\": \"none|[underline||overline||line-through||blink]\",\n        \"text-decoration-skip\": \"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]\",\n        \"text-decoration-skip-ink\": \"auto|none\",\n        \"text-decoration-style\": \"solid|double|dotted|dashed|wavy\",\n        \"text-emphasis\": \"<'text-emphasis-style'>||<'text-emphasis-color'>\",\n        \"text-emphasis-color\": \"<color>\",\n        \"text-emphasis-position\": \"[over|under]&&[right|left]\",\n        \"text-emphasis-style\": \"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>\",\n        \"text-indent\": \"<length-percentage>&&hanging?&&each-line?\",\n        \"text-justify\": \"auto|inter-character|inter-word|none\",\n        \"text-orientation\": \"mixed|upright|sideways\",\n        \"text-overflow\": \"[clip|ellipsis|<string>]{1,2}\",\n        \"text-rendering\": \"auto|optimizeSpeed|optimizeLegibility|geometricPrecision\",\n        \"text-shadow\": \"none|<shadow-t>#\",\n        \"text-size-adjust\": \"none|auto|<percentage>\",\n        \"text-transform\": \"none|capitalize|uppercase|lowercase|full-width|full-size-kana\",\n        \"text-underline-position\": \"auto|[under||[left|right]]\",\n        top: \"<length>|<percentage>|auto\",\n        \"touch-action\": \"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation\",\n        transform: \"none|<transform-list>\",\n        \"transform-box\": \"border-box|fill-box|view-box\",\n        \"transform-origin\": \"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?\",\n        \"transform-style\": \"flat|preserve-3d\",\n        transition: \"<single-transition>#\",\n        \"transition-delay\": \"<time>#\",\n        \"transition-duration\": \"<time>#\",\n        \"transition-property\": \"none|<single-transition-property>#\",\n        \"transition-timing-function\": \"<timing-function>#\",\n        translate: \"none|<length-percentage> [<length-percentage> <length>?]?\",\n        \"unicode-bidi\": \"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate\",\n        \"user-select\": \"auto|text|none|contain|all\",\n        \"vertical-align\": \"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>\",\n        visibility: \"visible|hidden|collapse\",\n        \"white-space\": \"normal|pre|nowrap|pre-wrap|pre-line\",\n        widows: \"<integer>\",\n        width: \"[<length>|<percentage>]&&[border-box|content-box]?|available|min-content|max-content|fit-content|auto\",\n        \"will-change\": \"auto|<animateable-feature>#\",\n        \"word-break\": \"normal|break-all|keep-all|break-word\",\n        \"word-spacing\": \"normal|<length-percentage>\",\n        \"word-wrap\": \"normal|break-word\",\n        \"writing-mode\": \"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>\",\n        \"z-index\": \"auto|<integer>\",\n        zoom: \"normal|reset|<number>|<percentage>\",\n        \"-moz-background-clip\": \"padding|border\",\n        \"-moz-border-radius-bottomleft\": \"<'border-bottom-left-radius'>\",\n        \"-moz-border-radius-bottomright\": \"<'border-bottom-right-radius'>\",\n        \"-moz-border-radius-topleft\": \"<'border-top-left-radius'>\",\n        \"-moz-border-radius-topright\": \"<'border-bottom-right-radius'>\",\n        \"-moz-control-character-visibility\": \"visible|hidden\",\n        \"-moz-osx-font-smoothing\": \"auto|grayscale\",\n        \"-moz-user-select\": \"none|text|all|-moz-none\",\n        \"-ms-flex-align\": \"start|end|center|baseline|stretch\",\n        \"-ms-flex-item-align\": \"auto|start|end|center|baseline|stretch\",\n        \"-ms-flex-line-pack\": \"start|end|center|justify|distribute|stretch\",\n        \"-ms-flex-negative\": \"<'flex-shrink'>\",\n        \"-ms-flex-pack\": \"start|end|center|justify|distribute\",\n        \"-ms-flex-order\": \"<integer>\",\n        \"-ms-flex-positive\": \"<'flex-grow'>\",\n        \"-ms-flex-preferred-size\": \"<'flex-basis'>\",\n        \"-ms-interpolation-mode\": \"nearest-neighbor|bicubic\",\n        \"-ms-grid-column-align\": \"start|end|center|stretch\",\n        \"-ms-grid-columns\": \"<track-list-v0>\",\n        \"-ms-grid-row-align\": \"start|end|center|stretch\",\n        \"-ms-grid-rows\": \"<track-list-v0>\",\n        \"-ms-hyphenate-limit-last\": \"none|always|column|page|spread\",\n        \"-webkit-background-clip\": \"[<box>|border|padding|content|text]#\",\n        \"-webkit-column-break-after\": \"always|auto|avoid\",\n        \"-webkit-column-break-before\": \"always|auto|avoid\",\n        \"-webkit-column-break-inside\": \"always|auto|avoid\",\n        \"-webkit-font-smoothing\": \"auto|none|antialiased|subpixel-antialiased\",\n        \"-webkit-mask-box-image\": \"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?\",\n        \"-webkit-print-color-adjust\": \"economy|exact\",\n        \"-webkit-text-security\": \"none|circle|disc|square\",\n        \"-webkit-user-drag\": \"none|element|auto\",\n        \"-webkit-user-select\": \"auto|none|text|all\",\n        \"alignment-baseline\": \"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical\",\n        \"baseline-shift\": \"baseline|sub|super|<svg-length>\",\n        behavior: \"<url>+\",\n        \"clip-rule\": \"nonzero|evenodd\",\n        cue: \"<'cue-before'> <'cue-after'>?\",\n        \"cue-after\": \"<url> <decibel>?|none\",\n        \"cue-before\": \"<url> <decibel>?|none\",\n        \"dominant-baseline\": \"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\",\n        fill: \"<paint>\",\n        \"fill-opacity\": \"<number-zero-one>\",\n        \"fill-rule\": \"nonzero|evenodd\",\n        \"glyph-orientation-horizontal\": \"<angle>\",\n        \"glyph-orientation-vertical\": \"<angle>\",\n        kerning: \"auto|<svg-length>\",\n        marker: \"none|<url>\",\n        \"marker-end\": \"none|<url>\",\n        \"marker-mid\": \"none|<url>\",\n        \"marker-start\": \"none|<url>\",\n        pause: \"<'pause-before'> <'pause-after'>?\",\n        \"pause-after\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"pause-before\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        rest: \"<'rest-before'> <'rest-after'>?\",\n        \"rest-after\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"rest-before\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"shape-rendering\": \"auto|optimizeSpeed|crispEdges|geometricPrecision\",\n        src: \"[<url> [format( <string># )]?|local( <family-name> )]#\",\n        speak: \"auto|none|normal\",\n        \"speak-as\": \"normal|spell-out||digits||[literal-punctuation|no-punctuation]\",\n        stroke: \"<paint>\",\n        \"stroke-dasharray\": \"none|[<svg-length>+]#\",\n        \"stroke-dashoffset\": \"<svg-length>\",\n        \"stroke-linecap\": \"butt|round|square\",\n        \"stroke-linejoin\": \"miter|round|bevel\",\n        \"stroke-miterlimit\": \"<number-one-or-greater>\",\n        \"stroke-opacity\": \"<number-zero-one>\",\n        \"stroke-width\": \"<svg-length>\",\n        \"text-anchor\": \"start|middle|end\",\n        \"unicode-range\": \"<urange>#\",\n        \"voice-balance\": \"<number>|left|center|right|leftwards|rightwards\",\n        \"voice-duration\": \"auto|<time>\",\n        \"voice-family\": \"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve\",\n        \"voice-pitch\": \"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]\",\n        \"voice-range\": \"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]\",\n        \"voice-rate\": \"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>\",\n        \"voice-stress\": \"normal|strong|moderate|none|reduced\",\n        \"voice-volume\": \"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]\"\n    };\n    var defaultSyntax = {\n        generic: generic$1,\n        types: types,\n        properties: properties$1\n    };\n\n    var defaultSyntax$1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generic: generic$1,\n        types: types,\n        properties: properties$1,\n        'default': defaultSyntax\n    });\n\n    var cmpChar$3 = tokenizer.cmpChar;\n    var isDigit$4 = tokenizer.isDigit;\n    var TYPE$9 = tokenizer.TYPE;\n\n    var WHITESPACE$4 = TYPE$9.WhiteSpace;\n    var COMMENT$3 = TYPE$9.Comment;\n    var IDENT$3 = TYPE$9.Ident;\n    var NUMBER$3 = TYPE$9.Number;\n    var DIMENSION$2 = TYPE$9.Dimension;\n    var PLUSSIGN$3 = 0x002B;    // U+002B PLUS SIGN (+)\n    var HYPHENMINUS$3 = 0x002D; // U+002D HYPHEN-MINUS (-)\n    var N$4 = 0x006E;           // U+006E LATIN SMALL LETTER N (n)\n    var DISALLOW_SIGN$1 = true;\n    var ALLOW_SIGN$1 = false;\n\n    function checkInteger$1(offset, disallowSign) {\n        var pos = this.scanner.tokenStart + offset;\n        var code = this.scanner.source.charCodeAt(pos);\n\n        if (code === PLUSSIGN$3 || code === HYPHENMINUS$3) {\n            if (disallowSign) {\n                this.error('Number sign is not allowed');\n            }\n            pos++;\n        }\n\n        for (; pos < this.scanner.tokenEnd; pos++) {\n            if (!isDigit$4(this.scanner.source.charCodeAt(pos))) {\n                this.error('Integer is expected', pos);\n            }\n        }\n    }\n\n    function checkTokenIsInteger(disallowSign) {\n        return checkInteger$1.call(this, 0, disallowSign);\n    }\n\n    function expectCharCode(offset, code) {\n        if (!cmpChar$3(this.scanner.source, this.scanner.tokenStart + offset, code)) {\n            var msg = '';\n\n            switch (code) {\n                case N$4:\n                    msg = 'N is expected';\n                    break;\n                case HYPHENMINUS$3:\n                    msg = 'HyphenMinus is expected';\n                    break;\n            }\n\n            this.error(msg, this.scanner.tokenStart + offset);\n        }\n    }\n\n    // ... <signed-integer>\n    // ... ['+' | '-'] <signless-integer>\n    function consumeB$1() {\n        var offset = 0;\n        var sign = 0;\n        var type = this.scanner.tokenType;\n\n        while (type === WHITESPACE$4 || type === COMMENT$3) {\n            type = this.scanner.lookupType(++offset);\n        }\n\n        if (type !== NUMBER$3) {\n            if (this.scanner.isDelim(PLUSSIGN$3, offset) ||\n                this.scanner.isDelim(HYPHENMINUS$3, offset)) {\n                sign = this.scanner.isDelim(PLUSSIGN$3, offset) ? PLUSSIGN$3 : HYPHENMINUS$3;\n\n                do {\n                    type = this.scanner.lookupType(++offset);\n                } while (type === WHITESPACE$4 || type === COMMENT$3);\n\n                if (type !== NUMBER$3) {\n                    this.scanner.skip(offset);\n                    checkTokenIsInteger.call(this, DISALLOW_SIGN$1);\n                }\n            } else {\n                return null;\n            }\n        }\n\n        if (offset > 0) {\n            this.scanner.skip(offset);\n        }\n\n        if (sign === 0) {\n            type = this.scanner.source.charCodeAt(this.scanner.tokenStart);\n            if (type !== PLUSSIGN$3 && type !== HYPHENMINUS$3) {\n                this.error('Number sign is expected');\n            }\n        }\n\n        checkTokenIsInteger.call(this, sign !== 0);\n        return sign === HYPHENMINUS$3 ? '-' + this.consume(NUMBER$3) : this.consume(NUMBER$3);\n    }\n\n    // An+B microsyntax https://www.w3.org/TR/css-syntax-3/#anb\n    var AnPlusB = {\n        name: 'AnPlusB',\n        structure: {\n            a: [String, null],\n            b: [String, null]\n        },\n        parse: function() {\n            /* eslint-disable brace-style*/\n            var start = this.scanner.tokenStart;\n            var a = null;\n            var b = null;\n\n            // <integer>\n            if (this.scanner.tokenType === NUMBER$3) {\n                checkTokenIsInteger.call(this, ALLOW_SIGN$1);\n                b = this.consume(NUMBER$3);\n            }\n\n                // -n\n                // -n <signed-integer>\n                // -n ['+' | '-'] <signless-integer>\n                // -n- <signless-integer>\n            // <dashndashdigit-ident>\n            else if (this.scanner.tokenType === IDENT$3 && cmpChar$3(this.scanner.source, this.scanner.tokenStart, HYPHENMINUS$3)) {\n                a = '-1';\n\n                expectCharCode.call(this, 1, N$4);\n\n                switch (this.scanner.getTokenLength()) {\n                    // -n\n                    // -n <signed-integer>\n                    // -n ['+' | '-'] <signless-integer>\n                    case 2:\n                        this.scanner.next();\n                        b = consumeB$1.call(this);\n                        break;\n\n                    // -n- <signless-integer>\n                    case 3:\n                        expectCharCode.call(this, 2, HYPHENMINUS$3);\n\n                        this.scanner.next();\n                        this.scanner.skipSC();\n\n                        checkTokenIsInteger.call(this, DISALLOW_SIGN$1);\n\n                        b = '-' + this.consume(NUMBER$3);\n                        break;\n\n                    // <dashndashdigit-ident>\n                    default:\n                        expectCharCode.call(this, 2, HYPHENMINUS$3);\n                        checkInteger$1.call(this, 3, DISALLOW_SIGN$1);\n                        this.scanner.next();\n\n                        b = this.scanner.substrToCursor(start + 2);\n                }\n            }\n\n                // '+'? n\n                // '+'? n <signed-integer>\n                // '+'? n ['+' | '-'] <signless-integer>\n                // '+'? n- <signless-integer>\n            // '+'? <ndashdigit-ident>\n            else if (this.scanner.tokenType === IDENT$3 || (this.scanner.isDelim(PLUSSIGN$3) && this.scanner.lookupType(1) === IDENT$3)) {\n                var sign = 0;\n                a = '1';\n\n                // just ignore a plus\n                if (this.scanner.isDelim(PLUSSIGN$3)) {\n                    sign = 1;\n                    this.scanner.next();\n                }\n\n                expectCharCode.call(this, 0, N$4);\n\n                switch (this.scanner.getTokenLength()) {\n                    // '+'? n\n                    // '+'? n <signed-integer>\n                    // '+'? n ['+' | '-'] <signless-integer>\n                    case 1:\n                        this.scanner.next();\n                        b = consumeB$1.call(this);\n                        break;\n\n                    // '+'? n- <signless-integer>\n                    case 2:\n                        expectCharCode.call(this, 1, HYPHENMINUS$3);\n\n                        this.scanner.next();\n                        this.scanner.skipSC();\n\n                        checkTokenIsInteger.call(this, DISALLOW_SIGN$1);\n\n                        b = '-' + this.consume(NUMBER$3);\n                        break;\n\n                    // '+'? <ndashdigit-ident>\n                    default:\n                        expectCharCode.call(this, 1, HYPHENMINUS$3);\n                        checkInteger$1.call(this, 2, DISALLOW_SIGN$1);\n                        this.scanner.next();\n\n                        b = this.scanner.substrToCursor(start + sign + 1);\n                }\n            }\n\n                // <ndashdigit-dimension>\n                // <ndash-dimension> <signless-integer>\n                // <n-dimension>\n                // <n-dimension> <signed-integer>\n            // <n-dimension> ['+' | '-'] <signless-integer>\n            else if (this.scanner.tokenType === DIMENSION$2) {\n                var code = this.scanner.source.charCodeAt(this.scanner.tokenStart);\n                var sign = code === PLUSSIGN$3 || code === HYPHENMINUS$3;\n\n                for (var i = this.scanner.tokenStart + sign; i < this.scanner.tokenEnd; i++) {\n                    if (!isDigit$4(this.scanner.source.charCodeAt(i))) {\n                        break;\n                    }\n                }\n\n                if (i === this.scanner.tokenStart + sign) {\n                    this.error('Integer is expected', this.scanner.tokenStart + sign);\n                }\n\n                expectCharCode.call(this, i - this.scanner.tokenStart, N$4);\n                a = this.scanner.source.substring(start, i);\n\n                // <n-dimension>\n                // <n-dimension> <signed-integer>\n                // <n-dimension> ['+' | '-'] <signless-integer>\n                if (i + 1 === this.scanner.tokenEnd) {\n                    this.scanner.next();\n                    b = consumeB$1.call(this);\n                } else {\n                    expectCharCode.call(this, i - this.scanner.tokenStart + 1, HYPHENMINUS$3);\n\n                    // <ndash-dimension> <signless-integer>\n                    if (i + 2 === this.scanner.tokenEnd) {\n                        this.scanner.next();\n                        this.scanner.skipSC();\n                        checkTokenIsInteger.call(this, DISALLOW_SIGN$1);\n                        b = '-' + this.consume(NUMBER$3);\n                    }\n                    // <ndashdigit-dimension>\n                    else {\n                        checkInteger$1.call(this, i - this.scanner.tokenStart + 2, DISALLOW_SIGN$1);\n                        this.scanner.next();\n                        b = this.scanner.substrToCursor(i + 1);\n                    }\n                }\n            } else {\n                this.error();\n            }\n\n            if (a !== null && a.charCodeAt(0) === PLUSSIGN$3) {\n                a = a.substr(1);\n            }\n\n            if (b !== null && b.charCodeAt(0) === PLUSSIGN$3) {\n                b = b.substr(1);\n            }\n\n            return {\n                type: 'AnPlusB',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                a: a,\n                b: b\n            };\n        },\n        generate: function(node) {\n            var a = node.a !== null && node.a !== undefined;\n            var b = node.b !== null && node.b !== undefined;\n\n            if (a) {\n                this.chunk(\n                    node.a === '+1' ? '+n' : // eslint-disable-line operator-linebreak, indent\n                        node.a ===  '1' ?  'n' : // eslint-disable-line operator-linebreak, indent\n                            node.a === '-1' ? '-n' : // eslint-disable-line operator-linebreak, indent\n                                node.a + 'n'             // eslint-disable-line operator-linebreak, indent\n                );\n\n                if (b) {\n                    b = String(node.b);\n                    if (b.charAt(0) === '-' || b.charAt(0) === '+') {\n                        this.chunk(b.charAt(0));\n                        this.chunk(b.substr(1));\n                    } else {\n                        this.chunk('+');\n                        this.chunk(b);\n                    }\n                }\n            } else {\n                this.chunk(String(node.b));\n            }\n        }\n    };\n\n    var TYPE$a = tokenizer.TYPE;\n\n    var WhiteSpace = TYPE$a.WhiteSpace;\n    var Semicolon = TYPE$a.Semicolon;\n    var LeftCurlyBracket = TYPE$a.LeftCurlyBracket;\n    var Delim = TYPE$a.Delim;\n    var EXCLAMATIONMARK$1 = 0x0021; // U+0021 EXCLAMATION MARK (!)\n\n    function getOffsetExcludeWS() {\n        if (this.scanner.tokenIndex > 0) {\n            if (this.scanner.lookupType(-1) === WhiteSpace) {\n                return this.scanner.tokenIndex > 1\n                    ? this.scanner.getTokenStart(this.scanner.tokenIndex - 1)\n                    : this.scanner.firstCharOffset;\n            }\n        }\n\n        return this.scanner.tokenStart;\n    }\n\n    // 0, 0, false\n    function balanceEnd() {\n        return 0;\n    }\n\n    // LEFTCURLYBRACKET, 0, false\n    function leftCurlyBracket(tokenType) {\n        return tokenType === LeftCurlyBracket ? 1 : 0;\n    }\n\n    // LEFTCURLYBRACKET, SEMICOLON, false\n    function leftCurlyBracketOrSemicolon(tokenType) {\n        return tokenType === LeftCurlyBracket || tokenType === Semicolon ? 1 : 0;\n    }\n\n    // EXCLAMATIONMARK, SEMICOLON, false\n    function exclamationMarkOrSemicolon(tokenType, source, offset) {\n        if (tokenType === Delim && source.charCodeAt(offset) === EXCLAMATIONMARK$1) {\n            return 1;\n        }\n\n        return tokenType === Semicolon ? 1 : 0;\n    }\n\n    // 0, SEMICOLON, true\n    function semicolonIncluded(tokenType) {\n        return tokenType === Semicolon ? 2 : 0;\n    }\n\n    var Raw = {\n        name: 'Raw',\n        structure: {\n            value: String\n        },\n        parse: function(startToken, mode, excludeWhiteSpace) {\n            var startOffset = this.scanner.getTokenStart(startToken);\n            var endOffset;\n\n            this.scanner.skip(\n                this.scanner.getRawLength(startToken, mode || balanceEnd)\n            );\n\n            if (excludeWhiteSpace && this.scanner.tokenStart > startOffset) {\n                endOffset = getOffsetExcludeWS.call(this);\n            } else {\n                endOffset = this.scanner.tokenStart;\n            }\n\n            return {\n                type: 'Raw',\n                loc: this.getLocation(startOffset, endOffset),\n                value: this.scanner.source.substring(startOffset, endOffset)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.value);\n        },\n\n        mode: {\n            default: balanceEnd,\n            leftCurlyBracket: leftCurlyBracket,\n            leftCurlyBracketOrSemicolon: leftCurlyBracketOrSemicolon,\n            exclamationMarkOrSemicolon: exclamationMarkOrSemicolon,\n            semicolonIncluded: semicolonIncluded\n        }\n    };\n\n    var TYPE$b = tokenizer.TYPE;\n    var rawMode = Raw.mode;\n\n    var ATKEYWORD = TYPE$b.AtKeyword;\n    var SEMICOLON = TYPE$b.Semicolon;\n    var LEFTCURLYBRACKET$1 = TYPE$b.LeftCurlyBracket;\n    var RIGHTCURLYBRACKET$1 = TYPE$b.RightCurlyBracket;\n\n    function consumeRaw(startToken) {\n        return this.Raw(startToken, rawMode.leftCurlyBracketOrSemicolon, true);\n    }\n\n    function isDeclarationBlockAtrule() {\n        for (var offset = 1, type; type = this.scanner.lookupType(offset); offset++) {\n            if (type === RIGHTCURLYBRACKET$1) {\n                return true;\n            }\n\n            if (type === LEFTCURLYBRACKET$1 ||\n                type === ATKEYWORD) {\n                return false;\n            }\n        }\n\n        return false;\n    }\n\n    var Atrule = {\n        name: 'Atrule',\n        structure: {\n            name: String,\n            prelude: ['AtrulePrelude', 'Raw', null],\n            block: ['Block', null]\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var name;\n            var nameLowerCase;\n            var prelude = null;\n            var block = null;\n\n            this.eat(ATKEYWORD);\n\n            name = this.scanner.substrToCursor(start + 1);\n            nameLowerCase = name.toLowerCase();\n            this.scanner.skipSC();\n\n            // parse prelude\n            if (this.scanner.eof === false &&\n                this.scanner.tokenType !== LEFTCURLYBRACKET$1 &&\n                this.scanner.tokenType !== SEMICOLON) {\n                if (this.parseAtrulePrelude) {\n                    prelude = this.parseWithFallback(this.AtrulePrelude.bind(this, name), consumeRaw);\n\n                    // turn empty AtrulePrelude into null\n                    if (prelude.type === 'AtrulePrelude' && prelude.children.head === null) {\n                        prelude = null;\n                    }\n                } else {\n                    prelude = consumeRaw.call(this, this.scanner.tokenIndex);\n                }\n\n                this.scanner.skipSC();\n            }\n\n            switch (this.scanner.tokenType) {\n                case SEMICOLON:\n                    this.scanner.next();\n                    break;\n\n                case LEFTCURLYBRACKET$1:\n                    if (this.atrule.hasOwnProperty(nameLowerCase) &&\n                        typeof this.atrule[nameLowerCase].block === 'function') {\n                        block = this.atrule[nameLowerCase].block.call(this);\n                    } else {\n                        // TODO: should consume block content as Raw?\n                        block = this.Block(isDeclarationBlockAtrule.call(this));\n                    }\n\n                    break;\n            }\n\n            return {\n                type: 'Atrule',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                name: name,\n                prelude: prelude,\n                block: block\n            };\n        },\n        generate: function(node) {\n            this.chunk('@');\n            this.chunk(node.name);\n\n            if (node.prelude !== null) {\n                this.chunk(' ');\n                this.node(node.prelude);\n            }\n\n            if (node.block) {\n                this.node(node.block);\n            } else {\n                this.chunk(';');\n            }\n        },\n        walkContext: 'atrule'\n    };\n\n    var TYPE$c = tokenizer.TYPE;\n\n    var SEMICOLON$1 = TYPE$c.Semicolon;\n    var LEFTCURLYBRACKET$2 = TYPE$c.LeftCurlyBracket;\n\n    var AtrulePrelude = {\n        name: 'AtrulePrelude',\n        structure: {\n            children: [[]]\n        },\n        parse: function(name) {\n            var children = null;\n\n            if (name !== null) {\n                name = name.toLowerCase();\n            }\n\n            this.scanner.skipSC();\n\n            if (this.atrule.hasOwnProperty(name) &&\n                typeof this.atrule[name].prelude === 'function') {\n                // custom consumer\n                children = this.atrule[name].prelude.call(this);\n            } else {\n                // default consumer\n                children = this.readSequence(this.scope.AtrulePrelude);\n            }\n\n            this.scanner.skipSC();\n\n            if (this.scanner.eof !== true &&\n                this.scanner.tokenType !== LEFTCURLYBRACKET$2 &&\n                this.scanner.tokenType !== SEMICOLON$1) {\n                this.error('Semicolon or block is expected');\n            }\n\n            if (children === null) {\n                children = this.createList();\n            }\n\n            return {\n                type: 'AtrulePrelude',\n                loc: this.getLocationFromList(children),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.children(node);\n        },\n        walkContext: 'atrulePrelude'\n    };\n\n    var TYPE$d = tokenizer.TYPE;\n\n    var IDENT$4 = TYPE$d.Ident;\n    var STRING = TYPE$d.String;\n    var COLON = TYPE$d.Colon;\n    var LEFTSQUAREBRACKET$1 = TYPE$d.LeftSquareBracket;\n    var RIGHTSQUAREBRACKET$1 = TYPE$d.RightSquareBracket;\n    var DOLLARSIGN = 0x0024;       // U+0024 DOLLAR SIGN ($)\n    var ASTERISK$1 = 0x002A;         // U+002A ASTERISK (*)\n    var EQUALSSIGN = 0x003D;       // U+003D EQUALS SIGN (=)\n    var CIRCUMFLEXACCENT = 0x005E; // U+005E (^)\n    var VERTICALLINE$1 = 0x007C;     // U+007C VERTICAL LINE (|)\n    var TILDE = 0x007E;            // U+007E TILDE (~)\n\n    function getAttributeName() {\n        if (this.scanner.eof) {\n            this.error('Unexpected end of input');\n        }\n\n        var start = this.scanner.tokenStart;\n        var expectIdent = false;\n        var checkColon = true;\n\n        if (this.scanner.isDelim(ASTERISK$1)) {\n            expectIdent = true;\n            checkColon = false;\n            this.scanner.next();\n        } else if (!this.scanner.isDelim(VERTICALLINE$1)) {\n            this.eat(IDENT$4);\n        }\n\n        if (this.scanner.isDelim(VERTICALLINE$1)) {\n            if (this.scanner.source.charCodeAt(this.scanner.tokenStart + 1) !== EQUALSSIGN) {\n                this.scanner.next();\n                this.eat(IDENT$4);\n            } else if (expectIdent) {\n                this.error('Identifier is expected', this.scanner.tokenEnd);\n            }\n        } else if (expectIdent) {\n            this.error('Vertical line is expected');\n        }\n\n        if (checkColon && this.scanner.tokenType === COLON) {\n            this.scanner.next();\n            this.eat(IDENT$4);\n        }\n\n        return {\n            type: 'Identifier',\n            loc: this.getLocation(start, this.scanner.tokenStart),\n            name: this.scanner.substrToCursor(start)\n        };\n    }\n\n    function getOperator() {\n        var start = this.scanner.tokenStart;\n        var code = this.scanner.source.charCodeAt(start);\n\n        if (code !== EQUALSSIGN &&        // =\n            code !== TILDE &&             // ~=\n            code !== CIRCUMFLEXACCENT &&  // ^=\n            code !== DOLLARSIGN &&        // $=\n            code !== ASTERISK$1 &&          // *=\n            code !== VERTICALLINE$1         // |=\n        ) {\n            this.error('Attribute selector (=, ~=, ^=, $=, *=, |=) is expected');\n        }\n\n        this.scanner.next();\n\n        if (code !== EQUALSSIGN) {\n            if (!this.scanner.isDelim(EQUALSSIGN)) {\n                this.error('Equal sign is expected');\n            }\n\n            this.scanner.next();\n        }\n\n        return this.scanner.substrToCursor(start);\n    }\n\n    // '[' <wq-name> ']'\n    // '[' <wq-name> <attr-matcher> [ <string-token> | <ident-token> ] <attr-modifier>? ']'\n    var AttributeSelector = {\n        name: 'AttributeSelector',\n        structure: {\n            name: 'Identifier',\n            matcher: [String, null],\n            value: ['String', 'Identifier', null],\n            flags: [String, null]\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var name;\n            var matcher = null;\n            var value = null;\n            var flags = null;\n\n            this.eat(LEFTSQUAREBRACKET$1);\n            this.scanner.skipSC();\n\n            name = getAttributeName.call(this);\n            this.scanner.skipSC();\n\n            if (this.scanner.tokenType !== RIGHTSQUAREBRACKET$1) {\n                // avoid case `[name i]`\n                if (this.scanner.tokenType !== IDENT$4) {\n                    matcher = getOperator.call(this);\n\n                    this.scanner.skipSC();\n\n                    value = this.scanner.tokenType === STRING\n                        ? this.String()\n                        : this.Identifier();\n\n                    this.scanner.skipSC();\n                }\n\n                // attribute flags\n                if (this.scanner.tokenType === IDENT$4) {\n                    flags = this.scanner.getTokenValue();\n                    this.scanner.next();\n\n                    this.scanner.skipSC();\n                }\n            }\n\n            this.eat(RIGHTSQUAREBRACKET$1);\n\n            return {\n                type: 'AttributeSelector',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                name: name,\n                matcher: matcher,\n                value: value,\n                flags: flags\n            };\n        },\n        generate: function(node) {\n            var flagsPrefix = ' ';\n\n            this.chunk('[');\n            this.node(node.name);\n\n            if (node.matcher !== null) {\n                this.chunk(node.matcher);\n\n                if (node.value !== null) {\n                    this.node(node.value);\n\n                    // space between string and flags is not required\n                    if (node.value.type === 'String') {\n                        flagsPrefix = '';\n                    }\n                }\n            }\n\n            if (node.flags !== null) {\n                this.chunk(flagsPrefix);\n                this.chunk(node.flags);\n            }\n\n            this.chunk(']');\n        }\n    };\n\n    var TYPE$e = tokenizer.TYPE;\n    var rawMode$1 = Raw.mode;\n\n    var WHITESPACE$5 = TYPE$e.WhiteSpace;\n    var COMMENT$4 = TYPE$e.Comment;\n    var SEMICOLON$2 = TYPE$e.Semicolon;\n    var ATKEYWORD$1 = TYPE$e.AtKeyword;\n    var LEFTCURLYBRACKET$3 = TYPE$e.LeftCurlyBracket;\n    var RIGHTCURLYBRACKET$2 = TYPE$e.RightCurlyBracket;\n\n    function consumeRaw$1(startToken) {\n        return this.Raw(startToken, null, true);\n    }\n    function consumeRule() {\n        return this.parseWithFallback(this.Rule, consumeRaw$1);\n    }\n    function consumeRawDeclaration(startToken) {\n        return this.Raw(startToken, rawMode$1.semicolonIncluded, true);\n    }\n    function consumeDeclaration() {\n        if (this.scanner.tokenType === SEMICOLON$2) {\n            return consumeRawDeclaration.call(this, this.scanner.tokenIndex);\n        }\n\n        var node = this.parseWithFallback(this.Declaration, consumeRawDeclaration);\n\n        if (this.scanner.tokenType === SEMICOLON$2) {\n            this.scanner.next();\n        }\n\n        return node;\n    }\n\n    var Block = {\n        name: 'Block',\n        structure: {\n            children: [[\n                'Atrule',\n                'Rule',\n                'Declaration'\n            ]]\n        },\n        parse: function(isDeclaration) {\n            var consumer = isDeclaration ? consumeDeclaration : consumeRule;\n\n            var start = this.scanner.tokenStart;\n            var children = this.createList();\n\n            this.eat(LEFTCURLYBRACKET$3);\n\n            scan:\n                while (!this.scanner.eof) {\n                    switch (this.scanner.tokenType) {\n                        case RIGHTCURLYBRACKET$2:\n                            break scan;\n\n                        case WHITESPACE$5:\n                        case COMMENT$4:\n                            this.scanner.next();\n                            break;\n\n                        case ATKEYWORD$1:\n                            children.push(this.parseWithFallback(this.Atrule, consumeRaw$1));\n                            break;\n\n                        default:\n                            children.push(consumer.call(this));\n                    }\n                }\n\n            if (!this.scanner.eof) {\n                this.eat(RIGHTCURLYBRACKET$2);\n            }\n\n            return {\n                type: 'Block',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.chunk('{');\n            this.children(node, function(prev) {\n                if (prev.type === 'Declaration') {\n                    this.chunk(';');\n                }\n            });\n            this.chunk('}');\n        },\n        walkContext: 'block'\n    };\n\n    var TYPE$f = tokenizer.TYPE;\n\n    var LEFTSQUAREBRACKET$2 = TYPE$f.LeftSquareBracket;\n    var RIGHTSQUAREBRACKET$2 = TYPE$f.RightSquareBracket;\n\n    var Brackets = {\n        name: 'Brackets',\n        structure: {\n            children: [[]]\n        },\n        parse: function(readSequence, recognizer) {\n            var start = this.scanner.tokenStart;\n            var children = null;\n\n            this.eat(LEFTSQUAREBRACKET$2);\n\n            children = readSequence.call(this, recognizer);\n\n            if (!this.scanner.eof) {\n                this.eat(RIGHTSQUAREBRACKET$2);\n            }\n\n            return {\n                type: 'Brackets',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.chunk('[');\n            this.children(node);\n            this.chunk(']');\n        }\n    };\n\n    var CDC = tokenizer.TYPE.CDC;\n\n    var CDC_1 = {\n        name: 'CDC',\n        structure: [],\n        parse: function() {\n            var start = this.scanner.tokenStart;\n\n            this.eat(CDC); // -->\n\n            return {\n                type: 'CDC',\n                loc: this.getLocation(start, this.scanner.tokenStart)\n            };\n        },\n        generate: function() {\n            this.chunk('-->');\n        }\n    };\n\n    var CDO = tokenizer.TYPE.CDO;\n\n    var CDO_1 = {\n        name: 'CDO',\n        structure: [],\n        parse: function() {\n            var start = this.scanner.tokenStart;\n\n            this.eat(CDO); // <!--\n\n            return {\n                type: 'CDO',\n                loc: this.getLocation(start, this.scanner.tokenStart)\n            };\n        },\n        generate: function() {\n            this.chunk('<!--');\n        }\n    };\n\n    var TYPE$g = tokenizer.TYPE;\n\n    var IDENT$5 = TYPE$g.Ident;\n    var FULLSTOP = 0x002E; // U+002E FULL STOP (.)\n\n    // '.' ident\n    var ClassSelector = {\n        name: 'ClassSelector',\n        structure: {\n            name: String\n        },\n        parse: function() {\n            if (!this.scanner.isDelim(FULLSTOP)) {\n                this.error('Full stop is expected');\n            }\n\n            this.scanner.next();\n\n            return {\n                type: 'ClassSelector',\n                loc: this.getLocation(this.scanner.tokenStart - 1, this.scanner.tokenEnd),\n                name: this.consume(IDENT$5)\n            };\n        },\n        generate: function(node) {\n            this.chunk('.');\n            this.chunk(node.name);\n        }\n    };\n\n    var TYPE$h = tokenizer.TYPE;\n\n    var IDENT$6 = TYPE$h.Ident;\n    var PLUSSIGN$4 = 0x002B;        // U+002B PLUS SIGN (+)\n    var SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\n    var GREATERTHANSIGN$1 = 0x003E; // U+003E GREATER-THAN SIGN (>)\n    var TILDE$1 = 0x007E;           // U+007E TILDE (~)\n\n    // + | > | ~ | /deep/\n    var Combinator = {\n        name: 'Combinator',\n        structure: {\n            name: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var code = this.scanner.source.charCodeAt(this.scanner.tokenStart);\n\n            switch (code) {\n                case GREATERTHANSIGN$1:\n                case PLUSSIGN$4:\n                case TILDE$1:\n                    this.scanner.next();\n                    break;\n\n                case SOLIDUS:\n                    this.scanner.next();\n\n                    if (this.scanner.tokenType !== IDENT$6 || this.scanner.lookupValue(0, 'deep') === false) {\n                        this.error('Identifier `deep` is expected');\n                    }\n\n                    this.scanner.next();\n\n                    if (!this.scanner.isDelim(SOLIDUS)) {\n                        this.error('Solidus is expected');\n                    }\n\n                    this.scanner.next();\n                    break;\n\n                default:\n                    this.error('Combinator is expected');\n            }\n\n            return {\n                type: 'Combinator',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                name: this.scanner.substrToCursor(start)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.name);\n        }\n    };\n\n    var TYPE$i = tokenizer.TYPE;\n\n    var COMMENT$5 = TYPE$i.Comment;\n    var ASTERISK$2 = 0x002A;        // U+002A ASTERISK (*)\n    var SOLIDUS$1 = 0x002F;         // U+002F SOLIDUS (/)\n\n    // '/*' .* '*/'\n    var Comment = {\n        name: 'Comment',\n        structure: {\n            value: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var end = this.scanner.tokenEnd;\n\n            this.eat(COMMENT$5);\n\n            if ((end - start + 2) >= 2 &&\n                this.scanner.source.charCodeAt(end - 2) === ASTERISK$2 &&\n                this.scanner.source.charCodeAt(end - 1) === SOLIDUS$1) {\n                end -= 2;\n            }\n\n            return {\n                type: 'Comment',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                value: this.scanner.source.substring(start + 2, end)\n            };\n        },\n        generate: function(node) {\n            this.chunk('/*');\n            this.chunk(node.value);\n            this.chunk('*/');\n        }\n    };\n\n    var isCustomProperty$1 = names.isCustomProperty;\n    var TYPE$j = tokenizer.TYPE;\n    var rawMode$2 = Raw.mode;\n\n    var IDENT$7 = TYPE$j.Ident;\n    var HASH$1 = TYPE$j.Hash;\n    var COLON$1 = TYPE$j.Colon;\n    var SEMICOLON$3 = TYPE$j.Semicolon;\n    var DELIM$2 = TYPE$j.Delim;\n    var EXCLAMATIONMARK$2 = 0x0021; // U+0021 EXCLAMATION MARK (!)\n    var NUMBERSIGN$2 = 0x0023;      // U+0023 NUMBER SIGN (#)\n    var DOLLARSIGN$1 = 0x0024;      // U+0024 DOLLAR SIGN ($)\n    var AMPERSAND$1 = 0x0026;       // U+0026 ANPERSAND (&)\n    var ASTERISK$3 = 0x002A;        // U+002A ASTERISK (*)\n    var PLUSSIGN$5 = 0x002B;        // U+002B PLUS SIGN (+)\n    var SOLIDUS$2 = 0x002F;         // U+002F SOLIDUS (/)\n\n    function consumeValueRaw(startToken) {\n        return this.Raw(startToken, rawMode$2.exclamationMarkOrSemicolon, true);\n    }\n\n    function consumeCustomPropertyRaw(startToken) {\n        return this.Raw(startToken, rawMode$2.exclamationMarkOrSemicolon, false);\n    }\n\n    function consumeValue() {\n        var startValueToken = this.scanner.tokenIndex;\n        var value = this.Value();\n\n        if (value.type !== 'Raw' &&\n            this.scanner.eof === false &&\n            this.scanner.tokenType !== SEMICOLON$3 &&\n            this.scanner.isDelim(EXCLAMATIONMARK$2) === false &&\n            this.scanner.isBalanceEdge(startValueToken) === false) {\n            this.error();\n        }\n\n        return value;\n    }\n\n    var Declaration = {\n        name: 'Declaration',\n        structure: {\n            important: [Boolean, String],\n            property: String,\n            value: ['Value', 'Raw']\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var startToken = this.scanner.tokenIndex;\n            var property = readProperty$1.call(this);\n            var customProperty = isCustomProperty$1(property);\n            var parseValue = customProperty ? this.parseCustomProperty : this.parseValue;\n            var consumeRaw = customProperty ? consumeCustomPropertyRaw : consumeValueRaw;\n            var important = false;\n            var value;\n\n            this.scanner.skipSC();\n            this.eat(COLON$1);\n\n            if (!customProperty) {\n                this.scanner.skipSC();\n            }\n\n            if (parseValue) {\n                value = this.parseWithFallback(consumeValue, consumeRaw);\n            } else {\n                value = consumeRaw.call(this, this.scanner.tokenIndex);\n            }\n\n            if (this.scanner.isDelim(EXCLAMATIONMARK$2)) {\n                important = getImportant.call(this);\n                this.scanner.skipSC();\n            }\n\n            // Do not include semicolon to range per spec\n            // https://drafts.csswg.org/css-syntax/#declaration-diagram\n\n            if (this.scanner.eof === false &&\n                this.scanner.tokenType !== SEMICOLON$3 &&\n                this.scanner.isBalanceEdge(startToken) === false) {\n                this.error();\n            }\n\n            return {\n                type: 'Declaration',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                important: important,\n                property: property,\n                value: value\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.property);\n            this.chunk(':');\n            this.node(node.value);\n\n            if (node.important) {\n                this.chunk(node.important === true ? '!important' : '!' + node.important);\n            }\n        },\n        walkContext: 'declaration'\n    };\n\n    function readProperty$1() {\n        var start = this.scanner.tokenStart;\n\n        // hacks\n        if (this.scanner.tokenType === DELIM$2) {\n            switch (this.scanner.source.charCodeAt(this.scanner.tokenStart)) {\n                case ASTERISK$3:\n                case DOLLARSIGN$1:\n                case PLUSSIGN$5:\n                case NUMBERSIGN$2:\n                case AMPERSAND$1:\n                    this.scanner.next();\n                    break;\n\n                // TODO: not sure we should support this hack\n                case SOLIDUS$2:\n                    this.scanner.next();\n                    if (this.scanner.isDelim(SOLIDUS$2)) {\n                        this.scanner.next();\n                    }\n                    break;\n            }\n        }\n\n        if (this.scanner.tokenType === HASH$1) {\n            this.eat(HASH$1);\n        } else {\n            this.eat(IDENT$7);\n        }\n\n        return this.scanner.substrToCursor(start);\n    }\n\n    // ! ws* important\n    function getImportant() {\n        this.eat(DELIM$2);\n        this.scanner.skipSC();\n\n        var important = this.consume(IDENT$7);\n\n        // store original value in case it differ from `important`\n        // for better original source restoring and hacks like `!ie` support\n        return important === 'important' ? true : important;\n    }\n\n    var TYPE$k = tokenizer.TYPE;\n    var rawMode$3 = Raw.mode;\n\n    var WHITESPACE$6 = TYPE$k.WhiteSpace;\n    var COMMENT$6 = TYPE$k.Comment;\n    var SEMICOLON$4 = TYPE$k.Semicolon;\n\n    function consumeRaw$2(startToken) {\n        return this.Raw(startToken, rawMode$3.semicolonIncluded, true);\n    }\n\n    var DeclarationList = {\n        name: 'DeclarationList',\n        structure: {\n            children: [[\n                'Declaration'\n            ]]\n        },\n        parse: function() {\n            var children = this.createList();\n\n\n            while (!this.scanner.eof) {\n                switch (this.scanner.tokenType) {\n                    case WHITESPACE$6:\n                    case COMMENT$6:\n                    case SEMICOLON$4:\n                        this.scanner.next();\n                        break;\n\n                    default:\n                        children.push(this.parseWithFallback(this.Declaration, consumeRaw$2));\n                }\n            }\n\n            return {\n                type: 'DeclarationList',\n                loc: this.getLocationFromList(children),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.children(node, function(prev) {\n                if (prev.type === 'Declaration') {\n                    this.chunk(';');\n                }\n            });\n        }\n    };\n\n    var consumeNumber$3 = utils.consumeNumber;\n    var TYPE$l = tokenizer.TYPE;\n\n    var DIMENSION$3 = TYPE$l.Dimension;\n\n    var Dimension = {\n        name: 'Dimension',\n        structure: {\n            value: String,\n            unit: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var numberEnd = consumeNumber$3(this.scanner.source, start);\n\n            this.eat(DIMENSION$3);\n\n            return {\n                type: 'Dimension',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                value: this.scanner.source.substring(start, numberEnd),\n                unit: this.scanner.source.substring(numberEnd, this.scanner.tokenStart)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.value);\n            this.chunk(node.unit);\n        }\n    };\n\n    var TYPE$m = tokenizer.TYPE;\n\n    var RIGHTPARENTHESIS$2 = TYPE$m.RightParenthesis;\n\n    // <function-token> <sequence> )\n    var _Function = {\n        name: 'Function',\n        structure: {\n            name: String,\n            children: [[]]\n        },\n        parse: function(readSequence, recognizer) {\n            var start = this.scanner.tokenStart;\n            var name = this.consumeFunctionName();\n            var nameLowerCase = name.toLowerCase();\n            var children;\n\n            children = recognizer.hasOwnProperty(nameLowerCase)\n                ? recognizer[nameLowerCase].call(this, recognizer)\n                : readSequence.call(this, recognizer);\n\n            if (!this.scanner.eof) {\n                this.eat(RIGHTPARENTHESIS$2);\n            }\n\n            return {\n                type: 'Function',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                name: name,\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.name);\n            this.chunk('(');\n            this.children(node);\n            this.chunk(')');\n        },\n        walkContext: 'function'\n    };\n\n    var TYPE$n = tokenizer.TYPE;\n\n    var HASH$2 = TYPE$n.Hash;\n\n    // '#' ident\n    var HexColor = {\n        name: 'HexColor',\n        structure: {\n            value: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n\n            this.eat(HASH$2);\n\n            return {\n                type: 'HexColor',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                value: this.scanner.substrToCursor(start + 1)\n            };\n        },\n        generate: function(node) {\n            this.chunk('#');\n            this.chunk(node.value);\n        }\n    };\n\n    var TYPE$o = tokenizer.TYPE;\n\n    var IDENT$8 = TYPE$o.Ident;\n\n    var Identifier = {\n        name: 'Identifier',\n        structure: {\n            name: String\n        },\n        parse: function() {\n            return {\n                type: 'Identifier',\n                loc: this.getLocation(this.scanner.tokenStart, this.scanner.tokenEnd),\n                name: this.consume(IDENT$8)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.name);\n        }\n    };\n\n    var TYPE$p = tokenizer.TYPE;\n\n    var HASH$3 = TYPE$p.Hash;\n\n    // <hash-token>\n    var IdSelector = {\n        name: 'IdSelector',\n        structure: {\n            name: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n\n            // TODO: check value is an ident\n            this.eat(HASH$3);\n\n            return {\n                type: 'IdSelector',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                name: this.scanner.substrToCursor(start + 1)\n            };\n        },\n        generate: function(node) {\n            this.chunk('#');\n            this.chunk(node.name);\n        }\n    };\n\n    var TYPE$q = tokenizer.TYPE;\n\n    var IDENT$9 = TYPE$q.Ident;\n    var NUMBER$4 = TYPE$q.Number;\n    var DIMENSION$4 = TYPE$q.Dimension;\n    var LEFTPARENTHESIS$2 = TYPE$q.LeftParenthesis;\n    var RIGHTPARENTHESIS$3 = TYPE$q.RightParenthesis;\n    var COLON$2 = TYPE$q.Colon;\n    var DELIM$3 = TYPE$q.Delim;\n\n    var MediaFeature = {\n        name: 'MediaFeature',\n        structure: {\n            name: String,\n            value: ['Identifier', 'Number', 'Dimension', 'Ratio', null]\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var name;\n            var value = null;\n\n            this.eat(LEFTPARENTHESIS$2);\n            this.scanner.skipSC();\n\n            name = this.consume(IDENT$9);\n            this.scanner.skipSC();\n\n            if (this.scanner.tokenType !== RIGHTPARENTHESIS$3) {\n                this.eat(COLON$2);\n                this.scanner.skipSC();\n\n                switch (this.scanner.tokenType) {\n                    case NUMBER$4:\n                        if (this.lookupNonWSType(1) === DELIM$3) {\n                            value = this.Ratio();\n                        } else {\n                            value = this.Number();\n                        }\n\n                        break;\n\n                    case DIMENSION$4:\n                        value = this.Dimension();\n                        break;\n\n                    case IDENT$9:\n                        value = this.Identifier();\n\n                        break;\n\n                    default:\n                        this.error('Number, dimension, ratio or identifier is expected');\n                }\n\n                this.scanner.skipSC();\n            }\n\n            this.eat(RIGHTPARENTHESIS$3);\n\n            return {\n                type: 'MediaFeature',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                name: name,\n                value: value\n            };\n        },\n        generate: function(node) {\n            this.chunk('(');\n            this.chunk(node.name);\n            if (node.value !== null) {\n                this.chunk(':');\n                this.node(node.value);\n            }\n            this.chunk(')');\n        }\n    };\n\n    var TYPE$r = tokenizer.TYPE;\n\n    var WHITESPACE$7 = TYPE$r.WhiteSpace;\n    var COMMENT$7 = TYPE$r.Comment;\n    var IDENT$a = TYPE$r.Ident;\n    var LEFTPARENTHESIS$3 = TYPE$r.LeftParenthesis;\n\n    var MediaQuery = {\n        name: 'MediaQuery',\n        structure: {\n            children: [[\n                'Identifier',\n                'MediaFeature',\n                'WhiteSpace'\n            ]]\n        },\n        parse: function() {\n            this.scanner.skipSC();\n\n            var children = this.createList();\n            var child = null;\n            var space = null;\n\n            scan:\n                while (!this.scanner.eof) {\n                    switch (this.scanner.tokenType) {\n                        case COMMENT$7:\n                            this.scanner.next();\n                            continue;\n\n                        case WHITESPACE$7:\n                            space = this.WhiteSpace();\n                            continue;\n\n                        case IDENT$a:\n                            child = this.Identifier();\n                            break;\n\n                        case LEFTPARENTHESIS$3:\n                            child = this.MediaFeature();\n                            break;\n\n                        default:\n                            break scan;\n                    }\n\n                    if (space !== null) {\n                        children.push(space);\n                        space = null;\n                    }\n\n                    children.push(child);\n                }\n\n            if (child === null) {\n                this.error('Identifier or parenthesis is expected');\n            }\n\n            return {\n                type: 'MediaQuery',\n                loc: this.getLocationFromList(children),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.children(node);\n        }\n    };\n\n    var COMMA$1 = tokenizer.TYPE.Comma;\n\n    var MediaQueryList = {\n        name: 'MediaQueryList',\n        structure: {\n            children: [[\n                'MediaQuery'\n            ]]\n        },\n        parse: function(relative) {\n            var children = this.createList();\n\n            this.scanner.skipSC();\n\n            while (!this.scanner.eof) {\n                children.push(this.MediaQuery(relative));\n\n                if (this.scanner.tokenType !== COMMA$1) {\n                    break;\n                }\n\n                this.scanner.next();\n            }\n\n            return {\n                type: 'MediaQueryList',\n                loc: this.getLocationFromList(children),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.children(node, function() {\n                this.chunk(',');\n            });\n        }\n    };\n\n    var Nth = {\n        name: 'Nth',\n        structure: {\n            nth: ['AnPlusB', 'Identifier'],\n            selector: ['SelectorList', null]\n        },\n        parse: function(allowOfClause) {\n            this.scanner.skipSC();\n\n            var start = this.scanner.tokenStart;\n            var end = start;\n            var selector = null;\n            var query;\n\n            if (this.scanner.lookupValue(0, 'odd') || this.scanner.lookupValue(0, 'even')) {\n                query = this.Identifier();\n            } else {\n                query = this.AnPlusB();\n            }\n\n            this.scanner.skipSC();\n\n            if (allowOfClause && this.scanner.lookupValue(0, 'of')) {\n                this.scanner.next();\n\n                selector = this.SelectorList();\n\n                if (this.needPositions) {\n                    end = this.getLastListNode(selector.children).loc.end.offset;\n                }\n            } else {\n                if (this.needPositions) {\n                    end = query.loc.end.offset;\n                }\n            }\n\n            return {\n                type: 'Nth',\n                loc: this.getLocation(start, end),\n                nth: query,\n                selector: selector\n            };\n        },\n        generate: function(node) {\n            this.node(node.nth);\n            if (node.selector !== null) {\n                this.chunk(' of ');\n                this.node(node.selector);\n            }\n        }\n    };\n\n    var NUMBER$5 = tokenizer.TYPE.Number;\n\n    var _Number = {\n        name: 'Number',\n        structure: {\n            value: String\n        },\n        parse: function() {\n            return {\n                type: 'Number',\n                loc: this.getLocation(this.scanner.tokenStart, this.scanner.tokenEnd),\n                value: this.consume(NUMBER$5)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.value);\n        }\n    };\n\n    // '/' | '*' | ',' | ':' | '+' | '-'\n    var Operator = {\n        name: 'Operator',\n        structure: {\n            value: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n\n            this.scanner.next();\n\n            return {\n                type: 'Operator',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                value: this.scanner.substrToCursor(start)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.value);\n        }\n    };\n\n    var TYPE$s = tokenizer.TYPE;\n\n    var LEFTPARENTHESIS$4 = TYPE$s.LeftParenthesis;\n    var RIGHTPARENTHESIS$4 = TYPE$s.RightParenthesis;\n\n    var Parentheses = {\n        name: 'Parentheses',\n        structure: {\n            children: [[]]\n        },\n        parse: function(readSequence, recognizer) {\n            var start = this.scanner.tokenStart;\n            var children = null;\n\n            this.eat(LEFTPARENTHESIS$4);\n\n            children = readSequence.call(this, recognizer);\n\n            if (!this.scanner.eof) {\n                this.eat(RIGHTPARENTHESIS$4);\n            }\n\n            return {\n                type: 'Parentheses',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.chunk('(');\n            this.children(node);\n            this.chunk(')');\n        }\n    };\n\n    var consumeNumber$4 = utils.consumeNumber;\n    var TYPE$t = tokenizer.TYPE;\n\n    var PERCENTAGE$1 = TYPE$t.Percentage;\n\n    var Percentage = {\n        name: 'Percentage',\n        structure: {\n            value: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var numberEnd = consumeNumber$4(this.scanner.source, start);\n\n            this.eat(PERCENTAGE$1);\n\n            return {\n                type: 'Percentage',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                value: this.scanner.source.substring(start, numberEnd)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.value);\n            this.chunk('%');\n        }\n    };\n\n    var TYPE$u = tokenizer.TYPE;\n\n    var IDENT$b = TYPE$u.Ident;\n    var FUNCTION$1 = TYPE$u.Function;\n    var COLON$3 = TYPE$u.Colon;\n    var RIGHTPARENTHESIS$5 = TYPE$u.RightParenthesis;\n\n    // : [ <ident> | <function-token> <any-value>? ) ]\n    var PseudoClassSelector = {\n        name: 'PseudoClassSelector',\n        structure: {\n            name: String,\n            children: [['Raw'], null]\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var children = null;\n            var name;\n            var nameLowerCase;\n\n            this.eat(COLON$3);\n\n            if (this.scanner.tokenType === FUNCTION$1) {\n                name = this.consumeFunctionName();\n                nameLowerCase = name.toLowerCase();\n\n                if (this.pseudo.hasOwnProperty(nameLowerCase)) {\n                    this.scanner.skipSC();\n                    children = this.pseudo[nameLowerCase].call(this);\n                    this.scanner.skipSC();\n                } else {\n                    children = this.createList();\n                    children.push(\n                        this.Raw(this.scanner.tokenIndex, null, false)\n                    );\n                }\n\n                this.eat(RIGHTPARENTHESIS$5);\n            } else {\n                name = this.consume(IDENT$b);\n            }\n\n            return {\n                type: 'PseudoClassSelector',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                name: name,\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.chunk(':');\n            this.chunk(node.name);\n\n            if (node.children !== null) {\n                this.chunk('(');\n                this.children(node);\n                this.chunk(')');\n            }\n        },\n        walkContext: 'function'\n    };\n\n    var TYPE$v = tokenizer.TYPE;\n\n    var IDENT$c = TYPE$v.Ident;\n    var FUNCTION$2 = TYPE$v.Function;\n    var COLON$4 = TYPE$v.Colon;\n    var RIGHTPARENTHESIS$6 = TYPE$v.RightParenthesis;\n\n    // :: [ <ident> | <function-token> <any-value>? ) ]\n    var PseudoElementSelector = {\n        name: 'PseudoElementSelector',\n        structure: {\n            name: String,\n            children: [['Raw'], null]\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var children = null;\n            var name;\n            var nameLowerCase;\n\n            this.eat(COLON$4);\n            this.eat(COLON$4);\n\n            if (this.scanner.tokenType === FUNCTION$2) {\n                name = this.consumeFunctionName();\n                nameLowerCase = name.toLowerCase();\n\n                if (this.pseudo.hasOwnProperty(nameLowerCase)) {\n                    this.scanner.skipSC();\n                    children = this.pseudo[nameLowerCase].call(this);\n                    this.scanner.skipSC();\n                } else {\n                    children = this.createList();\n                    children.push(\n                        this.Raw(this.scanner.tokenIndex, null, false)\n                    );\n                }\n\n                this.eat(RIGHTPARENTHESIS$6);\n            } else {\n                name = this.consume(IDENT$c);\n            }\n\n            return {\n                type: 'PseudoElementSelector',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                name: name,\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.chunk('::');\n            this.chunk(node.name);\n\n            if (node.children !== null) {\n                this.chunk('(');\n                this.children(node);\n                this.chunk(')');\n            }\n        },\n        walkContext: 'function'\n    };\n\n    var isDigit$5 = tokenizer.isDigit;\n    var TYPE$w = tokenizer.TYPE;\n\n    var NUMBER$6 = TYPE$w.Number;\n    var DELIM$4 = TYPE$w.Delim;\n    var SOLIDUS$3 = 0x002F;  // U+002F SOLIDUS (/)\n    var FULLSTOP$1 = 0x002E; // U+002E FULL STOP (.)\n\n    // Terms of <ratio> should be a positive numbers (not zero or negative)\n    // (see https://drafts.csswg.org/mediaqueries-3/#values)\n    // However, -o-min-device-pixel-ratio takes fractional values as a ratio's term\n    // and this is using by various sites. Therefore we relax checking on parse\n    // to test a term is unsigned number without an exponent part.\n    // Additional checking may be applied on lexer validation.\n    function consumeNumber$5() {\n        this.scanner.skipWS();\n\n        var value = this.consume(NUMBER$6);\n\n        for (var i = 0; i < value.length; i++) {\n            var code = value.charCodeAt(i);\n            if (!isDigit$5(code) && code !== FULLSTOP$1) {\n                this.error('Unsigned number is expected', this.scanner.tokenStart - value.length + i);\n            }\n        }\n\n        if (Number(value) === 0) {\n            this.error('Zero number is not allowed', this.scanner.tokenStart - value.length);\n        }\n\n        return value;\n    }\n\n    // <positive-integer> S* '/' S* <positive-integer>\n    var Ratio = {\n        name: 'Ratio',\n        structure: {\n            left: String,\n            right: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var left = consumeNumber$5.call(this);\n            var right;\n\n            this.scanner.skipWS();\n\n            if (!this.scanner.isDelim(SOLIDUS$3)) {\n                this.error('Solidus is expected');\n            }\n            this.eat(DELIM$4);\n            right = consumeNumber$5.call(this);\n\n            return {\n                type: 'Ratio',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                left: left,\n                right: right\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.left);\n            this.chunk('/');\n            this.chunk(node.right);\n        }\n    };\n\n    var TYPE$x = tokenizer.TYPE;\n    var rawMode$4 = Raw.mode;\n\n    var LEFTCURLYBRACKET$4 = TYPE$x.LeftCurlyBracket;\n\n    function consumeRaw$3(startToken) {\n        return this.Raw(startToken, rawMode$4.leftCurlyBracket, true);\n    }\n\n    function consumePrelude() {\n        var prelude = this.SelectorList();\n\n        if (prelude.type !== 'Raw' &&\n            this.scanner.eof === false &&\n            this.scanner.tokenType !== LEFTCURLYBRACKET$4) {\n            this.error();\n        }\n\n        return prelude;\n    }\n\n    var Rule = {\n        name: 'Rule',\n        structure: {\n            prelude: ['SelectorList', 'Raw'],\n            block: ['Block']\n        },\n        parse: function() {\n            var startToken = this.scanner.tokenIndex;\n            var startOffset = this.scanner.tokenStart;\n            var prelude;\n            var block;\n\n            if (this.parseRulePrelude) {\n                prelude = this.parseWithFallback(consumePrelude, consumeRaw$3);\n            } else {\n                prelude = consumeRaw$3.call(this, startToken);\n            }\n\n            block = this.Block(true);\n\n            return {\n                type: 'Rule',\n                loc: this.getLocation(startOffset, this.scanner.tokenStart),\n                prelude: prelude,\n                block: block\n            };\n        },\n        generate: function(node) {\n            this.node(node.prelude);\n            this.node(node.block);\n        },\n        walkContext: 'rule'\n    };\n\n    var Selector = {\n        name: 'Selector',\n        structure: {\n            children: [[\n                'TypeSelector',\n                'IdSelector',\n                'ClassSelector',\n                'AttributeSelector',\n                'PseudoClassSelector',\n                'PseudoElementSelector',\n                'Combinator',\n                'WhiteSpace'\n            ]]\n        },\n        parse: function() {\n            var children = this.readSequence(this.scope.Selector);\n\n            // nothing were consumed\n            if (this.getFirstListNode(children) === null) {\n                this.error('Selector is expected');\n            }\n\n            return {\n                type: 'Selector',\n                loc: this.getLocationFromList(children),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.children(node);\n        }\n    };\n\n    var TYPE$y = tokenizer.TYPE;\n\n    var COMMA$2 = TYPE$y.Comma;\n\n    var SelectorList = {\n        name: 'SelectorList',\n        structure: {\n            children: [[\n                'Selector',\n                'Raw'\n            ]]\n        },\n        parse: function() {\n            var children = this.createList();\n\n            while (!this.scanner.eof) {\n                children.push(this.Selector());\n\n                if (this.scanner.tokenType === COMMA$2) {\n                    this.scanner.next();\n                    continue;\n                }\n\n                break;\n            }\n\n            return {\n                type: 'SelectorList',\n                loc: this.getLocationFromList(children),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.children(node, function() {\n                this.chunk(',');\n            });\n        },\n        walkContext: 'selector'\n    };\n\n    var STRING$1 = tokenizer.TYPE.String;\n\n    var _String = {\n        name: 'String',\n        structure: {\n            value: String\n        },\n        parse: function() {\n            return {\n                type: 'String',\n                loc: this.getLocation(this.scanner.tokenStart, this.scanner.tokenEnd),\n                value: this.consume(STRING$1)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.value);\n        }\n    };\n\n    var TYPE$z = tokenizer.TYPE;\n\n    var WHITESPACE$8 = TYPE$z.WhiteSpace;\n    var COMMENT$8 = TYPE$z.Comment;\n    var ATKEYWORD$2 = TYPE$z.AtKeyword;\n    var CDO$1 = TYPE$z.CDO;\n    var CDC$1 = TYPE$z.CDC;\n    var EXCLAMATIONMARK$3 = 0x0021; // U+0021 EXCLAMATION MARK (!)\n\n    function consumeRaw$4(startToken) {\n        return this.Raw(startToken, null, false);\n    }\n\n    var StyleSheet = {\n        name: 'StyleSheet',\n        structure: {\n            children: [[\n                'Comment',\n                'CDO',\n                'CDC',\n                'Atrule',\n                'Rule',\n                'Raw'\n            ]]\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var children = this.createList();\n            var child;\n\n\n            while (!this.scanner.eof) {\n                switch (this.scanner.tokenType) {\n                    case WHITESPACE$8:\n                        this.scanner.next();\n                        continue;\n\n                    case COMMENT$8:\n                        // ignore comments except exclamation comments (i.e. /*! .. */) on top level\n                        if (this.scanner.source.charCodeAt(this.scanner.tokenStart + 2) !== EXCLAMATIONMARK$3) {\n                            this.scanner.next();\n                            continue;\n                        }\n\n                        child = this.Comment();\n                        break;\n\n                    case CDO$1: // <!--\n                        child = this.CDO();\n                        break;\n\n                    case CDC$1: // -->\n                        child = this.CDC();\n                        break;\n\n                    // CSS Syntax Module Level 3\n                    // \u00a72.2 Error handling\n                    // At the \"top level\" of a stylesheet, an <at-keyword-token> starts an at-rule.\n                    case ATKEYWORD$2:\n                        child = this.parseWithFallback(this.Atrule, consumeRaw$4);\n                        break;\n\n                    // Anything else starts a qualified rule ...\n                    default:\n                        child = this.parseWithFallback(this.Rule, consumeRaw$4);\n                }\n\n                children.push(child);\n            }\n\n            return {\n                type: 'StyleSheet',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.children(node);\n        },\n        walkContext: 'stylesheet'\n    };\n\n    var TYPE$A = tokenizer.TYPE;\n\n    var IDENT$d = TYPE$A.Ident;\n    var ASTERISK$4 = 0x002A;     // U+002A ASTERISK (*)\n    var VERTICALLINE$2 = 0x007C; // U+007C VERTICAL LINE (|)\n\n    function eatIdentifierOrAsterisk() {\n        if (this.scanner.tokenType !== IDENT$d &&\n            this.scanner.isDelim(ASTERISK$4) === false) {\n            this.error('Identifier or asterisk is expected');\n        }\n\n        this.scanner.next();\n    }\n\n    // ident\n    // ident|ident\n    // ident|*\n    // *\n    // *|ident\n    // *|*\n    // |ident\n    // |*\n    var TypeSelector = {\n        name: 'TypeSelector',\n        structure: {\n            name: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n\n            if (this.scanner.isDelim(VERTICALLINE$2)) {\n                this.scanner.next();\n                eatIdentifierOrAsterisk.call(this);\n            } else {\n                eatIdentifierOrAsterisk.call(this);\n\n                if (this.scanner.isDelim(VERTICALLINE$2)) {\n                    this.scanner.next();\n                    eatIdentifierOrAsterisk.call(this);\n                }\n            }\n\n            return {\n                type: 'TypeSelector',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                name: this.scanner.substrToCursor(start)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.name);\n        }\n    };\n\n    var isHexDigit$4 = tokenizer.isHexDigit;\n    var cmpChar$4 = tokenizer.cmpChar;\n    var TYPE$B = tokenizer.TYPE;\n    var NAME$3 = tokenizer.NAME;\n\n    var IDENT$e = TYPE$B.Ident;\n    var NUMBER$7 = TYPE$B.Number;\n    var DIMENSION$5 = TYPE$B.Dimension;\n    var PLUSSIGN$6 = 0x002B;     // U+002B PLUS SIGN (+)\n    var HYPHENMINUS$4 = 0x002D;  // U+002D HYPHEN-MINUS (-)\n    var QUESTIONMARK$2 = 0x003F; // U+003F QUESTION MARK (?)\n    var U$1 = 0x0075;            // U+0075 LATIN SMALL LETTER U (u)\n\n    function eatHexSequence(offset, allowDash) {\n        for (var pos = this.scanner.tokenStart + offset, len = 0; pos < this.scanner.tokenEnd; pos++) {\n            var code = this.scanner.source.charCodeAt(pos);\n\n            if (code === HYPHENMINUS$4 && allowDash && len !== 0) {\n                if (eatHexSequence.call(this, offset + len + 1, false) === 0) {\n                    this.error();\n                }\n\n                return -1;\n            }\n\n            if (!isHexDigit$4(code)) {\n                this.error(\n                    allowDash && len !== 0\n                        ? 'HyphenMinus' + (len < 6 ? ' or hex digit' : '') + ' is expected'\n                        : (len < 6 ? 'Hex digit is expected' : 'Unexpected input'),\n                    pos\n                );\n            }\n\n            if (++len > 6) {\n                this.error('Too many hex digits', pos);\n            }    }\n\n        this.scanner.next();\n        return len;\n    }\n\n    function eatQuestionMarkSequence(max) {\n        var count = 0;\n\n        while (this.scanner.isDelim(QUESTIONMARK$2)) {\n            if (++count > max) {\n                this.error('Too many question marks');\n            }\n\n            this.scanner.next();\n        }\n    }\n\n    function startsWith$1(code) {\n        if (this.scanner.source.charCodeAt(this.scanner.tokenStart) !== code) {\n            this.error(NAME$3[code] + ' is expected');\n        }\n    }\n\n    // https://drafts.csswg.org/css-syntax/#urange\n    // Informally, the <urange> production has three forms:\n    // U+0001\n    //      Defines a range consisting of a single code point, in this case the code point \"1\".\n    // U+0001-00ff\n    //      Defines a range of codepoints between the first and the second value, in this case\n    //      the range between \"1\" and \"ff\" (255 in decimal) inclusive.\n    // U+00??\n    //      Defines a range of codepoints where the \"?\" characters range over all hex digits,\n    //      in this case defining the same as the value U+0000-00ff.\n    // In each form, a maximum of 6 digits is allowed for each hexadecimal number (if you treat \"?\" as a hexadecimal digit).\n    //\n    // <urange> =\n    //   u '+' <ident-token> '?'* |\n    //   u <dimension-token> '?'* |\n    //   u <number-token> '?'* |\n    //   u <number-token> <dimension-token> |\n    //   u <number-token> <number-token> |\n    //   u '+' '?'+\n    function scanUnicodeRange() {\n        var hexLength = 0;\n\n        // u '+' <ident-token> '?'*\n        // u '+' '?'+\n        if (this.scanner.isDelim(PLUSSIGN$6)) {\n            this.scanner.next();\n\n            if (this.scanner.tokenType === IDENT$e) {\n                hexLength = eatHexSequence.call(this, 0, true);\n                if (hexLength > 0) {\n                    eatQuestionMarkSequence.call(this, 6 - hexLength);\n                }\n                return;\n            }\n\n            if (this.scanner.isDelim(QUESTIONMARK$2)) {\n                this.scanner.next();\n                eatQuestionMarkSequence.call(this, 5);\n                return;\n            }\n\n            this.error('Hex digit or question mark is expected');\n            return;\n        }\n\n        // u <number-token> '?'*\n        // u <number-token> <dimension-token>\n        // u <number-token> <number-token>\n        if (this.scanner.tokenType === NUMBER$7) {\n            startsWith$1.call(this, PLUSSIGN$6);\n            hexLength = eatHexSequence.call(this, 1, true);\n\n            if (this.scanner.isDelim(QUESTIONMARK$2)) {\n                eatQuestionMarkSequence.call(this, 6 - hexLength);\n                return;\n            }\n\n            if (this.scanner.tokenType === DIMENSION$5 ||\n                this.scanner.tokenType === NUMBER$7) {\n                startsWith$1.call(this, HYPHENMINUS$4);\n                eatHexSequence.call(this, 1, false);\n                return;\n            }\n\n            return;\n        }\n\n        // u <dimension-token> '?'*\n        if (this.scanner.tokenType === DIMENSION$5) {\n            startsWith$1.call(this, PLUSSIGN$6);\n            hexLength = eatHexSequence.call(this, 1, true);\n\n            if (hexLength > 0) {\n                eatQuestionMarkSequence.call(this, 6 - hexLength);\n            }\n\n            return;\n        }\n\n        this.error();\n    }\n\n    var UnicodeRange = {\n        name: 'UnicodeRange',\n        structure: {\n            value: String\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n\n            // U or u\n            if (!cmpChar$4(this.scanner.source, start, U$1)) {\n                this.error('U is expected');\n            }\n\n            if (!cmpChar$4(this.scanner.source, start + 1, PLUSSIGN$6)) {\n                this.error('Plus sign is expected');\n            }\n\n            this.scanner.next();\n            scanUnicodeRange.call(this);\n\n            return {\n                type: 'UnicodeRange',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                value: this.scanner.substrToCursor(start)\n            };\n        },\n        generate: function(node) {\n            this.chunk(node.value);\n        }\n    };\n\n    var isWhiteSpace$2 = tokenizer.isWhiteSpace;\n    var cmpStr$4 = tokenizer.cmpStr;\n    var TYPE$C = tokenizer.TYPE;\n\n    var FUNCTION$3 = TYPE$C.Function;\n    var URL$1 = TYPE$C.Url;\n    var RIGHTPARENTHESIS$7 = TYPE$C.RightParenthesis;\n\n    // <url-token> | <function-token> <string> )\n    var Url = {\n        name: 'Url',\n        structure: {\n            value: ['String', 'Raw']\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var value;\n\n            switch (this.scanner.tokenType) {\n                case URL$1:\n                    var rawStart = start + 4;\n                    var rawEnd = this.scanner.tokenEnd - 1;\n\n                    while (rawStart < rawEnd && isWhiteSpace$2(this.scanner.source.charCodeAt(rawStart))) {\n                        rawStart++;\n                    }\n\n                    while (rawStart < rawEnd && isWhiteSpace$2(this.scanner.source.charCodeAt(rawEnd - 1))) {\n                        rawEnd--;\n                    }\n\n                    value = {\n                        type: 'Raw',\n                        loc: this.getLocation(rawStart, rawEnd),\n                        value: this.scanner.source.substring(rawStart, rawEnd)\n                    };\n\n                    this.eat(URL$1);\n                    break;\n\n                case FUNCTION$3:\n                    if (!cmpStr$4(this.scanner.source, this.scanner.tokenStart, this.scanner.tokenEnd, 'url(')) {\n                        this.error('Function name must be `url`');\n                    }\n\n                    this.eat(FUNCTION$3);\n                    this.scanner.skipSC();\n                    value = this.String();\n                    this.scanner.skipSC();\n                    this.eat(RIGHTPARENTHESIS$7);\n                    break;\n\n                default:\n                    this.error('Url or Function is expected');\n            }\n\n            return {\n                type: 'Url',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                value: value\n            };\n        },\n        generate: function(node) {\n            this.chunk('url');\n            this.chunk('(');\n            this.node(node.value);\n            this.chunk(')');\n        }\n    };\n\n    var Value = {\n        name: 'Value',\n        structure: {\n            children: [[]]\n        },\n        parse: function() {\n            var start = this.scanner.tokenStart;\n            var children = this.readSequence(this.scope.Value);\n\n            return {\n                type: 'Value',\n                loc: this.getLocation(start, this.scanner.tokenStart),\n                children: children\n            };\n        },\n        generate: function(node) {\n            this.children(node);\n        }\n    };\n\n    var WHITESPACE$9 = tokenizer.TYPE.WhiteSpace;\n    var SPACE$2 = Object.freeze({\n        type: 'WhiteSpace',\n        loc: null,\n        value: ' '\n    });\n\n    var WhiteSpace$1 = {\n        name: 'WhiteSpace',\n        structure: {\n            value: String\n        },\n        parse: function() {\n            this.eat(WHITESPACE$9);\n            return SPACE$2;\n\n            // return {\n            //     type: 'WhiteSpace',\n            //     loc: this.getLocation(this.scanner.tokenStart, this.scanner.tokenEnd),\n            //     value: this.consume(WHITESPACE)\n            // };\n        },\n        generate: function(node) {\n            this.chunk(node.value);\n        }\n    };\n\n    var node = {\n        AnPlusB: AnPlusB,\n        Atrule: Atrule,\n        AtrulePrelude: AtrulePrelude,\n        AttributeSelector: AttributeSelector,\n        Block: Block,\n        Brackets: Brackets,\n        CDC: CDC_1,\n        CDO: CDO_1,\n        ClassSelector: ClassSelector,\n        Combinator: Combinator,\n        Comment: Comment,\n        Declaration: Declaration,\n        DeclarationList: DeclarationList,\n        Dimension: Dimension,\n        Function: _Function,\n        HexColor: HexColor,\n        Identifier: Identifier,\n        IdSelector: IdSelector,\n        MediaFeature: MediaFeature,\n        MediaQuery: MediaQuery,\n        MediaQueryList: MediaQueryList,\n        Nth: Nth,\n        Number: _Number,\n        Operator: Operator,\n        Parentheses: Parentheses,\n        Percentage: Percentage,\n        PseudoClassSelector: PseudoClassSelector,\n        PseudoElementSelector: PseudoElementSelector,\n        Ratio: Ratio,\n        Raw: Raw,\n        Rule: Rule,\n        Selector: Selector,\n        SelectorList: SelectorList,\n        String: _String,\n        StyleSheet: StyleSheet,\n        TypeSelector: TypeSelector,\n        UnicodeRange: UnicodeRange,\n        Url: Url,\n        Value: Value,\n        WhiteSpace: WhiteSpace$1\n    };\n\n    var data = getCjsExportFromNamespace(defaultSyntax$1);\n\n    var lexer = {\n        generic: true,\n        types: data.types,\n        atrules: data.atrules,\n        properties: data.properties,\n        node: node\n    };\n\n    var cmpChar$5 = tokenizer.cmpChar;\n    var cmpStr$5 = tokenizer.cmpStr;\n    var TYPE$D = tokenizer.TYPE;\n\n    var IDENT$f = TYPE$D.Ident;\n    var STRING$2 = TYPE$D.String;\n    var NUMBER$8 = TYPE$D.Number;\n    var FUNCTION$4 = TYPE$D.Function;\n    var URL$2 = TYPE$D.Url;\n    var HASH$4 = TYPE$D.Hash;\n    var DIMENSION$6 = TYPE$D.Dimension;\n    var PERCENTAGE$2 = TYPE$D.Percentage;\n    var LEFTPARENTHESIS$5 = TYPE$D.LeftParenthesis;\n    var LEFTSQUAREBRACKET$3 = TYPE$D.LeftSquareBracket;\n    var COMMA$3 = TYPE$D.Comma;\n    var DELIM$5 = TYPE$D.Delim;\n    var NUMBERSIGN$3 = 0x0023;  // U+0023 NUMBER SIGN (#)\n    var ASTERISK$5 = 0x002A;    // U+002A ASTERISK (*)\n    var PLUSSIGN$7 = 0x002B;    // U+002B PLUS SIGN (+)\n    var HYPHENMINUS$5 = 0x002D; // U+002D HYPHEN-MINUS (-)\n    var SOLIDUS$4 = 0x002F;     // U+002F SOLIDUS (/)\n    var U$2 = 0x0075;           // U+0075 LATIN SMALL LETTER U (u)\n\n    var _default = function defaultRecognizer(context) {\n        switch (this.scanner.tokenType) {\n            case HASH$4:\n                return this.HexColor();\n\n            case COMMA$3:\n                context.space = null;\n                context.ignoreWSAfter = true;\n                return this.Operator();\n\n            case LEFTPARENTHESIS$5:\n                return this.Parentheses(this.readSequence, context.recognizer);\n\n            case LEFTSQUAREBRACKET$3:\n                return this.Brackets(this.readSequence, context.recognizer);\n\n            case STRING$2:\n                return this.String();\n\n            case DIMENSION$6:\n                return this.Dimension();\n\n            case PERCENTAGE$2:\n                return this.Percentage();\n\n            case NUMBER$8:\n                return this.Number();\n\n            case FUNCTION$4:\n                return cmpStr$5(this.scanner.source, this.scanner.tokenStart, this.scanner.tokenEnd, 'url(')\n                    ? this.Url()\n                    : this.Function(this.readSequence, context.recognizer);\n\n            case URL$2:\n                return this.Url();\n\n            case IDENT$f:\n                // check for unicode range, it should start with u+ or U+\n                if (cmpChar$5(this.scanner.source, this.scanner.tokenStart, U$2) &&\n                    cmpChar$5(this.scanner.source, this.scanner.tokenStart + 1, PLUSSIGN$7)) {\n                    return this.UnicodeRange();\n                } else {\n                    return this.Identifier();\n                }\n\n            case DELIM$5:\n                var code = this.scanner.source.charCodeAt(this.scanner.tokenStart);\n\n                if (code === SOLIDUS$4 ||\n                    code === ASTERISK$5 ||\n                    code === PLUSSIGN$7 ||\n                    code === HYPHENMINUS$5) {\n                    return this.Operator(); // TODO: replace with Delim\n                }\n\n                // TODO: produce a node with Delim node type\n\n                if (code === NUMBERSIGN$3) {\n                    this.error('Hex or identifier is expected', this.scanner.tokenStart + 1);\n                }\n\n                break;\n        }\n    };\n\n    var atrulePrelude = {\n        getNode: _default\n    };\n\n    var TYPE$E = tokenizer.TYPE;\n\n    var DELIM$6 = TYPE$E.Delim;\n    var IDENT$g = TYPE$E.Ident;\n    var DIMENSION$7 = TYPE$E.Dimension;\n    var PERCENTAGE$3 = TYPE$E.Percentage;\n    var NUMBER$9 = TYPE$E.Number;\n    var HASH$5 = TYPE$E.Hash;\n    var COLON$5 = TYPE$E.Colon;\n    var LEFTSQUAREBRACKET$4 = TYPE$E.LeftSquareBracket;\n    var NUMBERSIGN$4 = 0x0023;      // U+0023 NUMBER SIGN (#)\n    var ASTERISK$6 = 0x002A;        // U+002A ASTERISK (*)\n    var PLUSSIGN$8 = 0x002B;        // U+002B PLUS SIGN (+)\n    var SOLIDUS$5 = 0x002F;         // U+002F SOLIDUS (/)\n    var FULLSTOP$2 = 0x002E;        // U+002E FULL STOP (.)\n    var GREATERTHANSIGN$2 = 0x003E; // U+003E GREATER-THAN SIGN (>)\n    var VERTICALLINE$3 = 0x007C;    // U+007C VERTICAL LINE (|)\n    var TILDE$2 = 0x007E;           // U+007E TILDE (~)\n\n    function getNode(context) {\n        switch (this.scanner.tokenType) {\n            case LEFTSQUAREBRACKET$4:\n                return this.AttributeSelector();\n\n            case HASH$5:\n                return this.IdSelector();\n\n            case COLON$5:\n                if (this.scanner.lookupType(1) === COLON$5) {\n                    return this.PseudoElementSelector();\n                } else {\n                    return this.PseudoClassSelector();\n                }\n\n            case IDENT$g:\n                return this.TypeSelector();\n\n            case NUMBER$9:\n            case PERCENTAGE$3:\n                return this.Percentage();\n\n            case DIMENSION$7:\n                // throws when .123ident\n                if (this.scanner.source.charCodeAt(this.scanner.tokenStart) === FULLSTOP$2) {\n                    this.error('Identifier is expected', this.scanner.tokenStart + 1);\n                }\n                break;\n\n            case DELIM$6:\n                var code = this.scanner.source.charCodeAt(this.scanner.tokenStart);\n\n                switch (code) {\n                    case PLUSSIGN$8:\n                    case GREATERTHANSIGN$2:\n                    case TILDE$2:\n                        context.space = null;\n                        context.ignoreWSAfter = true;\n                        return this.Combinator();\n\n                    case SOLIDUS$5:  // /deep/\n                        return this.Combinator();\n\n                    case FULLSTOP$2:\n                        return this.ClassSelector();\n\n                    case ASTERISK$6:\n                    case VERTICALLINE$3:\n                        return this.TypeSelector();\n\n                    case NUMBERSIGN$4:\n                        return this.IdSelector();\n                }\n\n                break;\n        }\n    }\n    var selector = {\n        getNode: getNode\n    };\n\n    // https://drafts.csswg.org/css-images-4/#element-notation\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/element\n    var element = function() {\n        this.scanner.skipSC();\n\n        var children = this.createSingleNodeList(\n            this.IdSelector()\n        );\n\n        this.scanner.skipSC();\n\n        return children;\n    };\n\n    // legacy IE function\n    // expression( <any-value> )\n    var expression = function() {\n        return this.createSingleNodeList(\n            this.Raw(this.scanner.tokenIndex, null, false)\n        );\n    };\n\n    var TYPE$F = tokenizer.TYPE;\n    var rawMode$5 = Raw.mode;\n\n    var COMMA$4 = TYPE$F.Comma;\n\n    // var( <ident> , <value>? )\n    var _var = function() {\n        var children = this.createList();\n\n        this.scanner.skipSC();\n\n        // NOTE: Don't check more than a first argument is an ident, rest checks are for lexer\n        children.push(this.Identifier());\n\n        this.scanner.skipSC();\n\n        if (this.scanner.tokenType === COMMA$4) {\n            children.push(this.Operator());\n            children.push(this.parseCustomProperty\n                ? this.Value(null)\n                : this.Raw(this.scanner.tokenIndex, rawMode$5.exclamationMarkOrSemicolon, false)\n            );\n        }\n\n        return children;\n    };\n\n    var value = {\n        getNode: _default,\n        '-moz-element': element,\n        'element': element,\n        'expression': expression,\n        'var': _var\n    };\n\n    var scope = {\n        AtrulePrelude: atrulePrelude,\n        Selector: selector,\n        Value: value\n    };\n\n    var fontFace = {\n        parse: {\n            prelude: null,\n            block: function() {\n                return this.Block(true);\n            }\n        }\n    };\n\n    var TYPE$G = tokenizer.TYPE;\n\n    var STRING$3 = TYPE$G.String;\n    var IDENT$h = TYPE$G.Ident;\n    var URL$3 = TYPE$G.Url;\n    var FUNCTION$5 = TYPE$G.Function;\n    var LEFTPARENTHESIS$6 = TYPE$G.LeftParenthesis;\n\n    var _import = {\n        parse: {\n            prelude: function() {\n                var children = this.createList();\n\n                this.scanner.skipSC();\n\n                switch (this.scanner.tokenType) {\n                    case STRING$3:\n                        children.push(this.String());\n                        break;\n\n                    case URL$3:\n                    case FUNCTION$5:\n                        children.push(this.Url());\n                        break;\n\n                    default:\n                        this.error('String or url() is expected');\n                }\n\n                if (this.lookupNonWSType(0) === IDENT$h ||\n                    this.lookupNonWSType(0) === LEFTPARENTHESIS$6) {\n                    children.push(this.WhiteSpace());\n                    children.push(this.MediaQueryList());\n                }\n\n                return children;\n            },\n            block: null\n        }\n    };\n\n    var media = {\n        parse: {\n            prelude: function() {\n                return this.createSingleNodeList(\n                    this.MediaQueryList()\n                );\n            },\n            block: function() {\n                return this.Block(false);\n            }\n        }\n    };\n\n    var page = {\n        parse: {\n            prelude: function() {\n                return this.createSingleNodeList(\n                    this.SelectorList()\n                );\n            },\n            block: function() {\n                return this.Block(true);\n            }\n        }\n    };\n\n    var TYPE$H = tokenizer.TYPE;\n\n    var WHITESPACE$a = TYPE$H.WhiteSpace;\n    var COMMENT$9 = TYPE$H.Comment;\n    var IDENT$i = TYPE$H.Ident;\n    var FUNCTION$6 = TYPE$H.Function;\n    var COLON$6 = TYPE$H.Colon;\n    var LEFTPARENTHESIS$7 = TYPE$H.LeftParenthesis;\n\n    function consumeRaw$5() {\n        return this.createSingleNodeList(\n            this.Raw(this.scanner.tokenIndex, null, false)\n        );\n    }\n\n    function parentheses() {\n        this.scanner.skipSC();\n\n        if (this.scanner.tokenType === IDENT$i &&\n            this.lookupNonWSType(1) === COLON$6) {\n            return this.createSingleNodeList(\n                this.Declaration()\n            );\n        }\n\n        return readSequence.call(this);\n    }\n\n    function readSequence() {\n        var children = this.createList();\n        var space = null;\n        var child;\n\n        this.scanner.skipSC();\n\n        scan:\n            while (!this.scanner.eof) {\n                switch (this.scanner.tokenType) {\n                    case WHITESPACE$a:\n                        space = this.WhiteSpace();\n                        continue;\n\n                    case COMMENT$9:\n                        this.scanner.next();\n                        continue;\n\n                    case FUNCTION$6:\n                        child = this.Function(consumeRaw$5, this.scope.AtrulePrelude);\n                        break;\n\n                    case IDENT$i:\n                        child = this.Identifier();\n                        break;\n\n                    case LEFTPARENTHESIS$7:\n                        child = this.Parentheses(parentheses, this.scope.AtrulePrelude);\n                        break;\n\n                    default:\n                        break scan;\n                }\n\n                if (space !== null) {\n                    children.push(space);\n                    space = null;\n                }\n\n                children.push(child);\n            }\n\n        return children;\n    }\n\n    var supports = {\n        parse: {\n            prelude: function() {\n                var children = readSequence.call(this);\n\n                if (this.getFirstListNode(children) === null) {\n                    this.error('Condition is expected');\n                }\n\n                return children;\n            },\n            block: function() {\n                return this.Block(false);\n            }\n        }\n    };\n\n    var atrule = {\n        'font-face': fontFace,\n        'import': _import,\n        'media': media,\n        'page': page,\n        'supports': supports\n    };\n\n    var dir = {\n        parse: function() {\n            return this.createSingleNodeList(\n                this.Identifier()\n            );\n        }\n    };\n\n    var has$1 = {\n        parse: function() {\n            return this.createSingleNodeList(\n                this.SelectorList()\n            );\n        }\n    };\n\n    var lang = {\n        parse: function() {\n            return this.createSingleNodeList(\n                this.Identifier()\n            );\n        }\n    };\n\n    var selectorList = {\n        parse: function selectorList() {\n            return this.createSingleNodeList(\n                this.SelectorList()\n            );\n        }\n    };\n\n    var matches = selectorList;\n\n    var not = selectorList;\n\n    var ALLOW_OF_CLAUSE = true;\n\n    var nthWithOfClause = {\n        parse: function nthWithOfClause() {\n            return this.createSingleNodeList(\n                this.Nth(ALLOW_OF_CLAUSE)\n            );\n        }\n    };\n\n    var nthChild = nthWithOfClause;\n\n    var nthLastChild = nthWithOfClause;\n\n    var DISALLOW_OF_CLAUSE = false;\n\n    var nth = {\n        parse: function nth() {\n            return this.createSingleNodeList(\n                this.Nth(DISALLOW_OF_CLAUSE)\n            );\n        }\n    };\n\n    var nthLastOfType = nth;\n\n    var nthOfType = nth;\n\n    var slotted = {\n        parse: function compoundSelector() {\n            return this.createSingleNodeList(\n                this.Selector()\n            );\n        }\n    };\n\n    var pseudo = {\n        'dir': dir,\n        'has': has$1,\n        'lang': lang,\n        'matches': matches,\n        'not': not,\n        'nth-child': nthChild,\n        'nth-last-child': nthLastChild,\n        'nth-last-of-type': nthLastOfType,\n        'nth-of-type': nthOfType,\n        'slotted': slotted\n    };\n\n    var parser = {\n        parseContext: {\n            default: 'StyleSheet',\n            stylesheet: 'StyleSheet',\n            atrule: 'Atrule',\n            atrulePrelude: function(options) {\n                return this.AtrulePrelude(options.atrule ? String(options.atrule) : null);\n            },\n            mediaQueryList: 'MediaQueryList',\n            mediaQuery: 'MediaQuery',\n            rule: 'Rule',\n            selectorList: 'SelectorList',\n            selector: 'Selector',\n            block: function() {\n                return this.Block(true);\n            },\n            declarationList: 'DeclarationList',\n            declaration: 'Declaration',\n            value: 'Value'\n        },\n        scope: scope,\n        atrule: atrule,\n        pseudo: pseudo,\n        node: node\n    };\n\n    var walker = {\n        node: node\n    };\n\n    function merge() {\n        var dest = {};\n\n        for (var i = 0; i < arguments.length; i++) {\n            var src = arguments[i];\n            for (var key in src) {\n                dest[key] = src[key];\n            }\n        }\n\n        return dest;\n    }\n\n    var syntax = create$4.create(\n        merge(\n            lexer,\n            parser,\n            walker\n        )\n    );\n\n    var lib = syntax;\n\n    var hasOwnProperty$6 = Object.prototype.hasOwnProperty;\n\n    function buildMap(list, caseInsensitive) {\n        var map = Object.create(null);\n\n        if (!Array.isArray(list)) {\n            return null;\n        }\n\n        for (var i = 0; i < list.length; i++) {\n            var name = list[i];\n\n            if (caseInsensitive) {\n                name = name.toLowerCase();\n            }\n\n            map[name] = true;\n        }\n\n        return map;\n    }\n\n    function buildList(data) {\n        if (!data) {\n            return null;\n        }\n\n        var tags = buildMap(data.tags, true);\n        var ids = buildMap(data.ids);\n        var classes = buildMap(data.classes);\n\n        if (tags === null &&\n            ids === null &&\n            classes === null) {\n            return null;\n        }\n\n        return {\n            tags: tags,\n            ids: ids,\n            classes: classes\n        };\n    }\n\n    function buildIndex(data) {\n        var scopes = false;\n\n        if (data.scopes && Array.isArray(data.scopes)) {\n            scopes = Object.create(null);\n\n            for (var i = 0; i < data.scopes.length; i++) {\n                var list = data.scopes[i];\n\n                if (!list || !Array.isArray(list)) {\n                    throw new Error('Wrong usage format');\n                }\n\n                for (var j = 0; j < list.length; j++) {\n                    var name = list[j];\n\n                    if (hasOwnProperty$6.call(scopes, name)) {\n                        throw new Error('Class can\\'t be used for several scopes: ' + name);\n                    }\n\n                    scopes[name] = i + 1;\n                }\n            }\n        }\n\n        return {\n            whitelist: buildList(data),\n            blacklist: buildList(data.blacklist),\n            scopes: scopes\n        };\n    }\n\n    var usage = {\n        buildIndex: buildIndex\n    };\n\n    var utils$1 = {\n        hasNoChildren: function(node) {\n            return !node || !node.children || node.children.isEmpty();\n        },\n        isNodeChildrenList: function(node, list) {\n            return node !== null && node.children === list;\n        }\n    };\n\n    var resolveKeyword = lib.keyword;\n    var { hasNoChildren } = utils$1;\n\n    var Atrule$1 = function cleanAtrule(node, item, list) {\n        if (node.block) {\n            // otherwise removed at-rule don't prevent @import for removal\n            if (this.stylesheet !== null) {\n                this.stylesheet.firstAtrulesAllowed = false;\n            }\n\n            if (hasNoChildren(node.block)) {\n                list.remove(item);\n                return;\n            }\n        }\n\n        switch (node.name) {\n            case 'charset':\n                if (hasNoChildren(node.prelude)) {\n                    list.remove(item);\n                    return;\n                }\n\n                // if there is any rule before @charset -> remove it\n                if (item.prev) {\n                    list.remove(item);\n                    return;\n                }\n\n                break;\n\n            case 'import':\n                if (this.stylesheet === null || !this.stylesheet.firstAtrulesAllowed) {\n                    list.remove(item);\n                    return;\n                }\n\n                // if there are some rules that not an @import or @charset before @import\n                // remove it\n                list.prevUntil(item.prev, function(rule) {\n                    if (rule.type === 'Atrule') {\n                        if (rule.name === 'import' || rule.name === 'charset') {\n                            return;\n                        }\n                    }\n\n                    this.root.firstAtrulesAllowed = false;\n                    list.remove(item);\n                    return true;\n                }, this);\n\n                break;\n\n            default:\n                var name = resolveKeyword(node.name).basename;\n                if (name === 'keyframes' ||\n                    name === 'media' ||\n                    name === 'supports') {\n\n                    // drop at-rule with no prelude\n                    if (hasNoChildren(node.prelude) || hasNoChildren(node.block)) {\n                        list.remove(item);\n                    }\n                }\n        }\n    };\n\n    var Comment$1 = function cleanComment(data, item, list) {\n        list.remove(item);\n    };\n\n    var Declaration$1 = function cleanDeclartion(node, item, list) {\n        if (node.value.children && node.value.children.isEmpty()) {\n            list.remove(item);\n        }\n    };\n\n    var { isNodeChildrenList } = utils$1;\n\n    var Raw$1 = function cleanRaw(node, item, list) {\n        // raw in stylesheet or block children\n        if (isNodeChildrenList(this.stylesheet, list) ||\n            isNodeChildrenList(this.block, list)) {\n            list.remove(item);\n        }\n    };\n\n    var hasOwnProperty$7 = Object.prototype.hasOwnProperty;\n    var walk$1 = lib.walk;\n    var { hasNoChildren: hasNoChildren$1 } = utils$1;\n\n    function cleanUnused(selectorList, usageData) {\n        selectorList.children.each(function(selector, item, list) {\n            var shouldRemove = false;\n\n            walk$1(selector, function(node) {\n                // ignore nodes in nested selectors\n                if (this.selector === null || this.selector === selectorList) {\n                    switch (node.type) {\n                        case 'SelectorList':\n                            // TODO: remove toLowerCase when pseudo selectors will be normalized\n                            // ignore selectors inside :not()\n                            if (this.function === null || this.function.name.toLowerCase() !== 'not') {\n                                if (cleanUnused(node, usageData)) {\n                                    shouldRemove = true;\n                                }\n                            }\n                            break;\n\n                        case 'ClassSelector':\n                            if (usageData.whitelist !== null &&\n                                usageData.whitelist.classes !== null &&\n                                !hasOwnProperty$7.call(usageData.whitelist.classes, node.name)) {\n                                shouldRemove = true;\n                            }\n                            if (usageData.blacklist !== null &&\n                                usageData.blacklist.classes !== null &&\n                                hasOwnProperty$7.call(usageData.blacklist.classes, node.name)) {\n                                shouldRemove = true;\n                            }\n                            break;\n\n                        case 'IdSelector':\n                            if (usageData.whitelist !== null &&\n                                usageData.whitelist.ids !== null &&\n                                !hasOwnProperty$7.call(usageData.whitelist.ids, node.name)) {\n                                shouldRemove = true;\n                            }\n                            if (usageData.blacklist !== null &&\n                                usageData.blacklist.ids !== null &&\n                                hasOwnProperty$7.call(usageData.blacklist.ids, node.name)) {\n                                shouldRemove = true;\n                            }\n                            break;\n\n                        case 'TypeSelector':\n                            // TODO: remove toLowerCase when type selectors will be normalized\n                            // ignore universal selectors\n                            if (node.name.charAt(node.name.length - 1) !== '*') {\n                                if (usageData.whitelist !== null &&\n                                    usageData.whitelist.tags !== null &&\n                                    !hasOwnProperty$7.call(usageData.whitelist.tags, node.name.toLowerCase())) {\n                                    shouldRemove = true;\n                                }\n                                if (usageData.blacklist !== null &&\n                                    usageData.blacklist.tags !== null &&\n                                    hasOwnProperty$7.call(usageData.blacklist.tags, node.name.toLowerCase())) {\n                                    shouldRemove = true;\n                                }\n                            }\n                            break;\n                    }\n                }\n            });\n\n            if (shouldRemove) {\n                list.remove(item);\n            }\n        });\n\n        return selectorList.children.isEmpty();\n    }\n\n    var Rule$1 = function cleanRule(node, item, list, options) {\n        if (hasNoChildren$1(node.prelude) || hasNoChildren$1(node.block)) {\n            list.remove(item);\n            return;\n        }\n\n        var usageData = options.usage;\n\n        if (usageData && (usageData.whitelist !== null || usageData.blacklist !== null)) {\n            cleanUnused(node.prelude, usageData);\n\n            if (hasNoChildren$1(node.prelude)) {\n                list.remove(item);\n                return;\n            }\n        }\n    };\n\n    // remove useless universal selector\n    var TypeSelector$1 = function cleanTypeSelector(node, item, list) {\n        var name = item.data.name;\n\n        // check it's a non-namespaced universal selector\n        if (name !== '*') {\n            return;\n        }\n\n        // remove when universal selector before other selectors\n        var nextType = item.next && item.next.data.type;\n        if (nextType === 'IdSelector' ||\n            nextType === 'ClassSelector' ||\n            nextType === 'AttributeSelector' ||\n            nextType === 'PseudoClassSelector' ||\n            nextType === 'PseudoElementSelector') {\n            list.remove(item);\n        }\n    };\n\n    var { isNodeChildrenList: isNodeChildrenList$1 } = utils$1;\n\n    function isSafeOperator(node) {\n        return node.type === 'Operator' && node.value !== '+' && node.value !== '-';\n    }\n\n    var WhiteSpace$2 = function cleanWhitespace(node, item, list) {\n        // remove when first or last item in sequence\n        if (item.next === null || item.prev === null) {\n            list.remove(item);\n            return;\n        }\n\n        // white space in stylesheet or block children\n        if (isNodeChildrenList$1(this.stylesheet, list) ||\n            isNodeChildrenList$1(this.block, list)) {\n            list.remove(item);\n            return;\n        }\n\n        if (item.next.data.type === 'WhiteSpace') {\n            list.remove(item);\n            return;\n        }\n\n        if (isSafeOperator(item.prev.data) || isSafeOperator(item.next.data)) {\n            list.remove(item);\n            return;\n        }\n    };\n\n    var walk$2 = lib.walk;\n    var handlers = {\n        Atrule: Atrule$1,\n        Comment: Comment$1,\n        Declaration: Declaration$1,\n        Raw: Raw$1,\n        Rule: Rule$1,\n        TypeSelector: TypeSelector$1,\n        WhiteSpace: WhiteSpace$2\n    };\n\n    var clean = function(ast, options) {\n        walk$2(ast, {\n            leave: function(node, item, list) {\n                if (handlers.hasOwnProperty(node.type)) {\n                    handlers[node.type].call(this, node, item, list, options);\n                }\n            }\n        });\n    };\n\n    var keyframes = function(node) {\n        node.block.children.each(function(rule) {\n            rule.prelude.children.each(function(simpleselector) {\n                simpleselector.children.each(function(data, item) {\n                    if (data.type === 'Percentage' && data.value === '100') {\n                        item.data = {\n                            type: 'TypeSelector',\n                            loc: data.loc,\n                            name: 'to'\n                        };\n                    } else if (data.type === 'TypeSelector' && data.name === 'from') {\n                        item.data = {\n                            type: 'Percentage',\n                            loc: data.loc,\n                            value: '0'\n                        };\n                    }\n                });\n            });\n        });\n    };\n\n    var resolveKeyword$1 = lib.keyword;\n\n\n    var Atrule$2 = function(node) {\n        // compress @keyframe selectors\n        if (resolveKeyword$1(node.name).basename === 'keyframes') {\n            keyframes(node);\n        }\n    };\n\n    // Can unquote attribute detection\n    // Adopted implementation of Mathias Bynens\n    // https://github.com/mathiasbynens/mothereff.in/blob/master/unquoted-attributes/eff.js\n    var escapesRx = /\\\\([0-9A-Fa-f]{1,6})(\\r\\n|[ \\t\\n\\f\\r])?|\\\\./g;\n    var blockUnquoteRx = /^(-?\\d|--)|[\\u0000-\\u002c\\u002e\\u002f\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u009f]/;\n\n    function canUnquote(value) {\n        if (value === '' || value === '-') {\n            return;\n        }\n\n        // Escapes are valid, so replace them with a valid non-empty string\n        value = value.replace(escapesRx, 'a');\n\n        return !blockUnquoteRx.test(value);\n    }\n\n    var AttributeSelector$1 = function(node) {\n        var attrValue = node.value;\n\n        if (!attrValue || attrValue.type !== 'String') {\n            return;\n        }\n\n        var unquotedValue = attrValue.value.replace(/^(.)(.*)\\1$/, '$2');\n        if (canUnquote(unquotedValue)) {\n            node.value = {\n                type: 'Identifier',\n                loc: attrValue.loc,\n                name: unquotedValue\n            };\n        }\n    };\n\n    var font = function compressFont(node) {\n        var list = node.children;\n\n        list.eachRight(function(node, item) {\n            if (node.type === 'Identifier') {\n                if (node.name === 'bold') {\n                    item.data = {\n                        type: 'Number',\n                        loc: node.loc,\n                        value: '700'\n                    };\n                } else if (node.name === 'normal') {\n                    var prev = item.prev;\n\n                    if (prev && prev.data.type === 'Operator' && prev.data.value === '/') {\n                        this.remove(prev);\n                    }\n\n                    this.remove(item);\n                } else if (node.name === 'medium') {\n                    var next = item.next;\n\n                    if (!next || next.data.type !== 'Operator') {\n                        this.remove(item);\n                    }\n                }\n            }\n        });\n\n        // remove redundant spaces\n        list.each(function(node, item) {\n            if (node.type === 'WhiteSpace') {\n                if (!item.prev || !item.next || item.next.data.type === 'WhiteSpace') {\n                    this.remove(item);\n                }\n            }\n        });\n\n        if (list.isEmpty()) {\n            list.insert(list.createItem({\n                type: 'Identifier',\n                name: 'normal'\n            }));\n        }\n    };\n\n    var fontWeight = function compressFontWeight(node) {\n        var value = node.children.head.data;\n\n        if (value.type === 'Identifier') {\n            switch (value.name) {\n                case 'normal':\n                    node.children.head.data = {\n                        type: 'Number',\n                        loc: value.loc,\n                        value: '400'\n                    };\n                    break;\n                case 'bold':\n                    node.children.head.data = {\n                        type: 'Number',\n                        loc: value.loc,\n                        value: '700'\n                    };\n                    break;\n            }\n        }\n    };\n\n    var List$1 = lib.List;\n\n    var background = function compressBackground(node) {\n        function lastType() {\n            if (buffer.length) {\n                return buffer[buffer.length - 1].type;\n            }\n        }\n\n        function flush() {\n            if (lastType() === 'WhiteSpace') {\n                buffer.pop();\n            }\n\n            if (!buffer.length) {\n                buffer.unshift(\n                    {\n                        type: 'Number',\n                        loc: null,\n                        value: '0'\n                    },\n                    {\n                        type: 'WhiteSpace',\n                        value: ' '\n                    },\n                    {\n                        type: 'Number',\n                        loc: null,\n                        value: '0'\n                    }\n                );\n            }\n\n            newValue.push.apply(newValue, buffer);\n\n            buffer = [];\n        }\n\n        var newValue = [];\n        var buffer = [];\n\n        node.children.each(function(node) {\n            if (node.type === 'Operator' && node.value === ',') {\n                flush();\n                newValue.push(node);\n                return;\n            }\n\n            // remove defaults\n            if (node.type === 'Identifier') {\n                if (node.name === 'transparent' ||\n                    node.name === 'none' ||\n                    node.name === 'repeat' ||\n                    node.name === 'scroll') {\n                    return;\n                }\n            }\n\n            // don't add redundant spaces\n            if (node.type === 'WhiteSpace' && (!buffer.length || lastType() === 'WhiteSpace')) {\n                return;\n            }\n\n            buffer.push(node);\n        });\n\n        flush();\n        node.children = new List$1().fromArray(newValue);\n    };\n\n    function removeItemAndRedundantWhiteSpace(list, item) {\n        var prev = item.prev;\n        var next = item.next;\n\n        if (next !== null) {\n            if (next.data.type === 'WhiteSpace' && (prev === null || prev.data.type === 'WhiteSpace')) {\n                list.remove(next);\n            }\n        } else if (prev !== null && prev.data.type === 'WhiteSpace') {\n            list.remove(prev);\n        }\n\n        list.remove(item);\n    }\n\n    var border = function compressBorder(node) {\n        node.children.each(function(node, item, list) {\n            if (node.type === 'Identifier' && node.name.toLowerCase() === 'none') {\n                if (list.head === list.tail) {\n                    // replace `none` for zero when `none` is a single term\n                    item.data = {\n                        type: 'Number',\n                        loc: node.loc,\n                        value: '0'\n                    };\n                } else {\n                    removeItemAndRedundantWhiteSpace(list, item);\n                }\n            }\n        });\n    };\n\n    var resolveName = lib.property;\n    var handlers$1 = {\n        'font': font,\n        'font-weight': fontWeight,\n        'background': background,\n        'border': border,\n        'outline': border\n    };\n\n    var Value$1 = function compressValue(node) {\n        if (!this.declaration) {\n            return;\n        }\n\n        var property = resolveName(this.declaration.property);\n\n        if (handlers$1.hasOwnProperty(property.basename)) {\n            handlers$1[property.basename](node);\n        }\n    };\n\n    var OMIT_PLUSSIGN = /^(?:\\+|(-))?0*(\\d*)(?:\\.0*|(\\.\\d*?)0*)?$/;\n    var KEEP_PLUSSIGN = /^([\\+\\-])?0*(\\d*)(?:\\.0*|(\\.\\d*?)0*)?$/;\n    var unsafeToRemovePlusSignAfter = {\n        Dimension: true,\n        HexColor: true,\n        Identifier: true,\n        Number: true,\n        Raw: true,\n        UnicodeRange: true\n    };\n\n    function packNumber(value, item) {\n        // omit plus sign only if no prev or prev is safe type\n        var regexp = item && item.prev !== null && unsafeToRemovePlusSignAfter.hasOwnProperty(item.prev.data.type)\n            ? KEEP_PLUSSIGN\n            : OMIT_PLUSSIGN;\n\n        // 100 -> '100'\n        // 00100 -> '100'\n        // +100 -> '100' (only when safe, e.g. omitting plus sign for 1px+1px leads to single dimension instead of two)\n        // -100 -> '-100'\n        // 0.123 -> '.123'\n        // 0.12300 -> '.123'\n        // 0.0 -> ''\n        // 0 -> ''\n        // -0 -> '-'\n        value = String(value).replace(regexp, '$1$2$3');\n\n        if (value === '' || value === '-') {\n            value = '0';\n        }\n\n        return value;\n    }\n\n    var _Number$1 = function(node, item) {\n        node.value = packNumber(node.value, item);\n    };\n    var pack = packNumber;\n    _Number$1.pack = pack;\n\n    var packNumber$1 = _Number$1.pack;\n    var LENGTH_UNIT = {\n        // absolute length units\n        'px': true,\n        'mm': true,\n        'cm': true,\n        'in': true,\n        'pt': true,\n        'pc': true,\n\n        // relative length units\n        'em': true,\n        'ex': true,\n        'ch': true,\n        'rem': true,\n\n        // viewport-percentage lengths\n        'vh': true,\n        'vw': true,\n        'vmin': true,\n        'vmax': true,\n        'vm': true\n    };\n\n    var Dimension$1 = function compressDimension(node, item) {\n        var value = packNumber$1(node.value, item);\n\n        node.value = value;\n\n        if (value === '0' && this.declaration !== null && this.atrulePrelude === null) {\n            var unit = node.unit.toLowerCase();\n\n            // only length values can be compressed\n            if (!LENGTH_UNIT.hasOwnProperty(unit)) {\n                return;\n            }\n\n            // issue #362: shouldn't remove unit in -ms-flex since it breaks flex in IE10/11\n            // issue #200: shouldn't remove unit in flex since it breaks flex in IE10/11\n            if (this.declaration.property === '-ms-flex' ||\n                this.declaration.property === 'flex') {\n                return;\n            }\n\n            // issue #222: don't remove units inside calc\n            if (this.function && this.function.name === 'calc') {\n                return;\n            }\n\n            item.data = {\n                type: 'Number',\n                loc: node.loc,\n                value: value\n            };\n        }\n    };\n\n    var lexer$1 = lib.lexer;\n    var packNumber$2 = _Number$1.pack;\n    var blacklist = new Set([\n        // see https://github.com/jakubpawlowicz/clean-css/issues/957\n        'width',\n        'min-width',\n        'max-width',\n        'height',\n        'min-height',\n        'max-height',\n\n        // issue #410: Don\u2019t remove units in flex-basis value for (-ms-)flex shorthand\n        // issue #362: shouldn't remove unit in -ms-flex since it breaks flex in IE10/11\n        // issue #200: shouldn't remove unit in flex since it breaks flex in IE10/11\n        'flex',\n        '-ms-flex'\n    ]);\n\n    var Percentage$1 = function compressPercentage(node, item) {\n        node.value = packNumber$2(node.value, item);\n\n        if (node.value === '0' && this.declaration && !blacklist.has(this.declaration.property)) {\n            // try to convert a number\n            item.data = {\n                type: 'Number',\n                loc: node.loc,\n                value: node.value\n            };\n\n            // that's ok only when new value matches on length\n            if (!lexer$1.matchDeclaration(this.declaration).isType(item.data, 'length')) {\n                // otherwise rollback changes\n                item.data = node;\n            }\n        }\n    };\n\n    var _String$1 = function(node) {\n        var value = node.value;\n\n        // remove escaped newlines, i.e.\n        // .a { content: \"foo\\\n        // bar\"}\n        // ->\n        // .a { content: \"foobar\" }\n        value = value.replace(/\\\\(\\r\\n|\\r|\\n|\\f)/g, '');\n\n        node.value = value;\n    };\n\n    var UNICODE = '\\\\\\\\[0-9a-f]{1,6}(\\\\r\\\\n|[ \\\\n\\\\r\\\\t\\\\f])?';\n    var ESCAPE = '(' + UNICODE + '|\\\\\\\\[^\\\\n\\\\r\\\\f0-9a-fA-F])';\n    var NONPRINTABLE = '\\u0000\\u0008\\u000b\\u000e-\\u001f\\u007f';\n    var SAFE_URL = new RegExp('^(' + ESCAPE + '|[^\\\"\\'\\\\(\\\\)\\\\\\\\\\\\s' + NONPRINTABLE + '])*$', 'i');\n\n    var Url$1 = function(node) {\n        var value = node.value;\n\n        if (value.type !== 'String') {\n            return;\n        }\n\n        var quote = value.value[0];\n        var url = value.value.substr(1, value.value.length - 2);\n\n        // convert `\\\\` to `/`\n        url = url.replace(/\\\\\\\\/g, '/');\n\n        // remove quotes when safe\n        // https://www.w3.org/TR/css-syntax-3/#url-unquoted-diagram\n        if (SAFE_URL.test(url)) {\n            node.value = {\n                type: 'Raw',\n                loc: node.value.loc,\n                value: url\n            };\n        } else {\n            // use double quotes if string has no double quotes\n            // otherwise use original quotes\n            // TODO: make better quote type selection\n            node.value.value = url.indexOf('\"') === -1 ? '\"' + url + '\"' : quote + url + quote;\n        }\n    };\n\n    var lexer$2 = lib.lexer;\n    var packNumber$3 = _Number$1.pack;\n\n    // http://www.w3.org/TR/css3-color/#svg-color\n    var NAME_TO_HEX = {\n        'aliceblue': 'f0f8ff',\n        'antiquewhite': 'faebd7',\n        'aqua': '0ff',\n        'aquamarine': '7fffd4',\n        'azure': 'f0ffff',\n        'beige': 'f5f5dc',\n        'bisque': 'ffe4c4',\n        'black': '000',\n        'blanchedalmond': 'ffebcd',\n        'blue': '00f',\n        'blueviolet': '8a2be2',\n        'brown': 'a52a2a',\n        'burlywood': 'deb887',\n        'cadetblue': '5f9ea0',\n        'chartreuse': '7fff00',\n        'chocolate': 'd2691e',\n        'coral': 'ff7f50',\n        'cornflowerblue': '6495ed',\n        'cornsilk': 'fff8dc',\n        'crimson': 'dc143c',\n        'cyan': '0ff',\n        'darkblue': '00008b',\n        'darkcyan': '008b8b',\n        'darkgoldenrod': 'b8860b',\n        'darkgray': 'a9a9a9',\n        'darkgrey': 'a9a9a9',\n        'darkgreen': '006400',\n        'darkkhaki': 'bdb76b',\n        'darkmagenta': '8b008b',\n        'darkolivegreen': '556b2f',\n        'darkorange': 'ff8c00',\n        'darkorchid': '9932cc',\n        'darkred': '8b0000',\n        'darksalmon': 'e9967a',\n        'darkseagreen': '8fbc8f',\n        'darkslateblue': '483d8b',\n        'darkslategray': '2f4f4f',\n        'darkslategrey': '2f4f4f',\n        'darkturquoise': '00ced1',\n        'darkviolet': '9400d3',\n        'deeppink': 'ff1493',\n        'deepskyblue': '00bfff',\n        'dimgray': '696969',\n        'dimgrey': '696969',\n        'dodgerblue': '1e90ff',\n        'firebrick': 'b22222',\n        'floralwhite': 'fffaf0',\n        'forestgreen': '228b22',\n        'fuchsia': 'f0f',\n        'gainsboro': 'dcdcdc',\n        'ghostwhite': 'f8f8ff',\n        'gold': 'ffd700',\n        'goldenrod': 'daa520',\n        'gray': '808080',\n        'grey': '808080',\n        'green': '008000',\n        'greenyellow': 'adff2f',\n        'honeydew': 'f0fff0',\n        'hotpink': 'ff69b4',\n        'indianred': 'cd5c5c',\n        'indigo': '4b0082',\n        'ivory': 'fffff0',\n        'khaki': 'f0e68c',\n        'lavender': 'e6e6fa',\n        'lavenderblush': 'fff0f5',\n        'lawngreen': '7cfc00',\n        'lemonchiffon': 'fffacd',\n        'lightblue': 'add8e6',\n        'lightcoral': 'f08080',\n        'lightcyan': 'e0ffff',\n        'lightgoldenrodyellow': 'fafad2',\n        'lightgray': 'd3d3d3',\n        'lightgrey': 'd3d3d3',\n        'lightgreen': '90ee90',\n        'lightpink': 'ffb6c1',\n        'lightsalmon': 'ffa07a',\n        'lightseagreen': '20b2aa',\n        'lightskyblue': '87cefa',\n        'lightslategray': '789',\n        'lightslategrey': '789',\n        'lightsteelblue': 'b0c4de',\n        'lightyellow': 'ffffe0',\n        'lime': '0f0',\n        'limegreen': '32cd32',\n        'linen': 'faf0e6',\n        'magenta': 'f0f',\n        'maroon': '800000',\n        'mediumaquamarine': '66cdaa',\n        'mediumblue': '0000cd',\n        'mediumorchid': 'ba55d3',\n        'mediumpurple': '9370db',\n        'mediumseagreen': '3cb371',\n        'mediumslateblue': '7b68ee',\n        'mediumspringgreen': '00fa9a',\n        'mediumturquoise': '48d1cc',\n        'mediumvioletred': 'c71585',\n        'midnightblue': '191970',\n        'mintcream': 'f5fffa',\n        'mistyrose': 'ffe4e1',\n        'moccasin': 'ffe4b5',\n        'navajowhite': 'ffdead',\n        'navy': '000080',\n        'oldlace': 'fdf5e6',\n        'olive': '808000',\n        'olivedrab': '6b8e23',\n        'orange': 'ffa500',\n        'orangered': 'ff4500',\n        'orchid': 'da70d6',\n        'palegoldenrod': 'eee8aa',\n        'palegreen': '98fb98',\n        'paleturquoise': 'afeeee',\n        'palevioletred': 'db7093',\n        'papayawhip': 'ffefd5',\n        'peachpuff': 'ffdab9',\n        'peru': 'cd853f',\n        'pink': 'ffc0cb',\n        'plum': 'dda0dd',\n        'powderblue': 'b0e0e6',\n        'purple': '800080',\n        'rebeccapurple': '639',\n        'red': 'f00',\n        'rosybrown': 'bc8f8f',\n        'royalblue': '4169e1',\n        'saddlebrown': '8b4513',\n        'salmon': 'fa8072',\n        'sandybrown': 'f4a460',\n        'seagreen': '2e8b57',\n        'seashell': 'fff5ee',\n        'sienna': 'a0522d',\n        'silver': 'c0c0c0',\n        'skyblue': '87ceeb',\n        'slateblue': '6a5acd',\n        'slategray': '708090',\n        'slategrey': '708090',\n        'snow': 'fffafa',\n        'springgreen': '00ff7f',\n        'steelblue': '4682b4',\n        'tan': 'd2b48c',\n        'teal': '008080',\n        'thistle': 'd8bfd8',\n        'tomato': 'ff6347',\n        'turquoise': '40e0d0',\n        'violet': 'ee82ee',\n        'wheat': 'f5deb3',\n        'white': 'fff',\n        'whitesmoke': 'f5f5f5',\n        'yellow': 'ff0',\n        'yellowgreen': '9acd32'\n    };\n\n    var HEX_TO_NAME = {\n        '800000': 'maroon',\n        '800080': 'purple',\n        '808000': 'olive',\n        '808080': 'gray',\n        '00ffff': 'cyan',\n        'f0ffff': 'azure',\n        'f5f5dc': 'beige',\n        'ffe4c4': 'bisque',\n        '000000': 'black',\n        '0000ff': 'blue',\n        'a52a2a': 'brown',\n        'ff7f50': 'coral',\n        'ffd700': 'gold',\n        '008000': 'green',\n        '4b0082': 'indigo',\n        'fffff0': 'ivory',\n        'f0e68c': 'khaki',\n        '00ff00': 'lime',\n        'faf0e6': 'linen',\n        '000080': 'navy',\n        'ffa500': 'orange',\n        'da70d6': 'orchid',\n        'cd853f': 'peru',\n        'ffc0cb': 'pink',\n        'dda0dd': 'plum',\n        'f00': 'red',\n        'ff0000': 'red',\n        'fa8072': 'salmon',\n        'a0522d': 'sienna',\n        'c0c0c0': 'silver',\n        'fffafa': 'snow',\n        'd2b48c': 'tan',\n        '008080': 'teal',\n        'ff6347': 'tomato',\n        'ee82ee': 'violet',\n        'f5deb3': 'wheat',\n        'ffffff': 'white',\n        'ffff00': 'yellow'\n    };\n\n    function hueToRgb(p, q, t) {\n        if (t < 0) {\n            t += 1;\n        }\n        if (t > 1) {\n            t -= 1;\n        }\n        if (t < 1 / 6) {\n            return p + (q - p) * 6 * t;\n        }\n        if (t < 1 / 2) {\n            return q;\n        }\n        if (t < 2 / 3) {\n            return p + (q - p) * (2 / 3 - t) * 6;\n        }\n        return p;\n    }\n\n    function hslToRgb(h, s, l, a) {\n        var r;\n        var g;\n        var b;\n\n        if (s === 0) {\n            r = g = b = l; // achromatic\n        } else {\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            var p = 2 * l - q;\n\n            r = hueToRgb(p, q, h + 1 / 3);\n            g = hueToRgb(p, q, h);\n            b = hueToRgb(p, q, h - 1 / 3);\n        }\n\n        return [\n            Math.round(r * 255),\n            Math.round(g * 255),\n            Math.round(b * 255),\n            a\n        ];\n    }\n\n    function toHex(value) {\n        value = value.toString(16);\n        return value.length === 1 ? '0' + value : value;\n    }\n\n    function parseFunctionArgs(functionArgs, count, rgb) {\n        var cursor = functionArgs.head;\n        var args = [];\n        var wasValue = false;\n\n        while (cursor !== null) {\n            var node = cursor.data;\n            var type = node.type;\n\n            switch (type) {\n                case 'Number':\n                case 'Percentage':\n                    if (wasValue) {\n                        return;\n                    }\n\n                    wasValue = true;\n                    args.push({\n                        type: type,\n                        value: Number(node.value)\n                    });\n                    break;\n\n                case 'Operator':\n                    if (node.value === ',') {\n                        if (!wasValue) {\n                            return;\n                        }\n                        wasValue = false;\n                    } else if (wasValue || node.value !== '+') {\n                        return;\n                    }\n                    break;\n\n                default:\n                    // something we couldn't understand\n                    return;\n            }\n\n            cursor = cursor.next;\n        }\n\n        if (args.length !== count) {\n            // invalid arguments count\n            // TODO: remove those tokens\n            return;\n        }\n\n        if (args.length === 4) {\n            if (args[3].type !== 'Number') {\n                // 4th argument should be a number\n                // TODO: remove those tokens\n                return;\n            }\n\n            args[3].type = 'Alpha';\n        }\n\n        if (rgb) {\n            if (args[0].type !== args[1].type || args[0].type !== args[2].type) {\n                // invalid color, numbers and percentage shouldn't be mixed\n                // TODO: remove those tokens\n                return;\n            }\n        } else {\n            if (args[0].type !== 'Number' ||\n                args[1].type !== 'Percentage' ||\n                args[2].type !== 'Percentage') {\n                // invalid color, for hsl values should be: number, percentage, percentage\n                // TODO: remove those tokens\n                return;\n            }\n\n            args[0].type = 'Angle';\n        }\n\n        return args.map(function(arg) {\n            var value = Math.max(0, arg.value);\n\n            switch (arg.type) {\n                case 'Number':\n                    // fit value to [0..255] range\n                    value = Math.min(value, 255);\n                    break;\n\n                case 'Percentage':\n                    // convert 0..100% to value in [0..255] range\n                    value = Math.min(value, 100) / 100;\n\n                    if (!rgb) {\n                        return value;\n                    }\n\n                    value = 255 * value;\n                    break;\n\n                case 'Angle':\n                    // fit value to (-360..360) range\n                    return (((value % 360) + 360) % 360) / 360;\n\n                case 'Alpha':\n                    // fit value to [0..1] range\n                    return Math.min(value, 1);\n            }\n\n            return Math.round(value);\n        });\n    }\n\n    function compressFunction(node, item, list) {\n        var functionName = node.name;\n        var args;\n\n        if (functionName === 'rgba' || functionName === 'hsla') {\n            args = parseFunctionArgs(node.children, 4, functionName === 'rgba');\n\n            if (!args) {\n                // something went wrong\n                return;\n            }\n\n            if (functionName === 'hsla') {\n                args = hslToRgb.apply(null, args);\n                node.name = 'rgba';\n            }\n\n            if (args[3] === 0) {\n                // try to replace `rgba(x, x, x, 0)` to `transparent`\n                // always replace `rgba(0, 0, 0, 0)` to `transparent`\n                // otherwise avoid replacement in gradients since it may break color transition\n                // http://stackoverflow.com/questions/11829410/css3-gradient-rendering-issues-from-transparent-to-white\n                var scopeFunctionName = this.function && this.function.name;\n                if ((args[0] === 0 && args[1] === 0 && args[2] === 0) ||\n                    !/^(?:to|from|color-stop)$|gradient$/i.test(scopeFunctionName)) {\n\n                    item.data = {\n                        type: 'Identifier',\n                        loc: node.loc,\n                        name: 'transparent'\n                    };\n\n                    return;\n                }\n            }\n\n            if (args[3] !== 1) {\n                // replace argument values for normalized/interpolated\n                node.children.each(function(node, item, list) {\n                    if (node.type === 'Operator') {\n                        if (node.value !== ',') {\n                            list.remove(item);\n                        }\n                        return;\n                    }\n\n                    item.data = {\n                        type: 'Number',\n                        loc: node.loc,\n                        value: packNumber$3(args.shift(), null)\n                    };\n                });\n\n                return;\n            }\n\n            // otherwise convert to rgb, i.e. rgba(255, 0, 0, 1) -> rgb(255, 0, 0)\n            functionName = 'rgb';\n        }\n\n        if (functionName === 'hsl') {\n            args = args || parseFunctionArgs(node.children, 3, false);\n\n            if (!args) {\n                // something went wrong\n                return;\n            }\n\n            // convert to rgb\n            args = hslToRgb.apply(null, args);\n            functionName = 'rgb';\n        }\n\n        if (functionName === 'rgb') {\n            args = args || parseFunctionArgs(node.children, 3, true);\n\n            if (!args) {\n                // something went wrong\n                return;\n            }\n\n            // check if color is not at the end and not followed by space\n            var next = item.next;\n            if (next && next.data.type !== 'WhiteSpace') {\n                list.insert(list.createItem({\n                    type: 'WhiteSpace',\n                    value: ' '\n                }), next);\n            }\n\n            item.data = {\n                type: 'HexColor',\n                loc: node.loc,\n                value: toHex(args[0]) + toHex(args[1]) + toHex(args[2])\n            };\n\n            compressHex(item.data, item);\n        }\n    }\n\n    function compressIdent(node, item) {\n        if (this.declaration === null) {\n            return;\n        }\n\n        var color = node.name.toLowerCase();\n\n        if (NAME_TO_HEX.hasOwnProperty(color) &&\n            lexer$2.matchDeclaration(this.declaration).isType(node, 'color')) {\n            var hex = NAME_TO_HEX[color];\n\n            if (hex.length + 1 <= color.length) {\n                // replace for shorter hex value\n                item.data = {\n                    type: 'HexColor',\n                    loc: node.loc,\n                    value: hex\n                };\n            } else {\n                // special case for consistent colors\n                if (color === 'grey') {\n                    color = 'gray';\n                }\n\n                // just replace value for lower cased name\n                node.name = color;\n            }\n        }\n    }\n\n    function compressHex(node, item) {\n        var color = node.value.toLowerCase();\n\n        // #112233 -> #123\n        if (color.length === 6 &&\n            color[0] === color[1] &&\n            color[2] === color[3] &&\n            color[4] === color[5]) {\n            color = color[0] + color[2] + color[4];\n        }\n\n        if (HEX_TO_NAME[color]) {\n            item.data = {\n                type: 'Identifier',\n                loc: node.loc,\n                name: HEX_TO_NAME[color]\n            };\n        } else {\n            node.value = color;\n        }\n    }\n\n    var color = {\n        compressFunction: compressFunction,\n        compressIdent: compressIdent,\n        compressHex: compressHex\n    };\n\n    var walk$3 = lib.walk;\n    var handlers$2 = {\n        Atrule: Atrule$2,\n        AttributeSelector: AttributeSelector$1,\n        Value: Value$1,\n        Dimension: Dimension$1,\n        Percentage: Percentage$1,\n        Number: _Number$1,\n        String: _String$1,\n        Url: Url$1,\n        HexColor: color.compressHex,\n        Identifier: color.compressIdent,\n        Function: color.compressFunction\n    };\n\n    var replace = function(ast) {\n        walk$3(ast, {\n            leave: function(node, item, list) {\n                if (handlers$2.hasOwnProperty(node.type)) {\n                    handlers$2[node.type].call(this, node, item, list);\n                }\n            }\n        });\n    };\n\n    var generate$1 = lib.generate;\n\n    function Index() {\n        this.seed = 0;\n        this.map = Object.create(null);\n    }\n\n    Index.prototype.resolve = function(str) {\n        var index = this.map[str];\n\n        if (!index) {\n            index = ++this.seed;\n            this.map[str] = index;\n        }\n\n        return index;\n    };\n\n    var createDeclarationIndexer = function createDeclarationIndexer() {\n        var ids = new Index();\n\n        return function markDeclaration(node) {\n            var id = generate$1(node);\n\n            node.id = ids.resolve(id);\n            node.length = id.length;\n            node.fingerprint = null;\n\n            return node;\n        };\n    };\n\n    var specificity = function specificity(simpleSelector) {\n        var A = 0;\n        var B = 0;\n        var C = 0;\n\n        simpleSelector.children.each(function walk(node) {\n            switch (node.type) {\n                case 'SelectorList':\n                case 'Selector':\n                    node.children.each(walk);\n                    break;\n\n                case 'IdSelector':\n                    A++;\n                    break;\n\n                case 'ClassSelector':\n                case 'AttributeSelector':\n                    B++;\n                    break;\n\n                case 'PseudoClassSelector':\n                    switch (node.name.toLowerCase()) {\n                        case 'not':\n                            node.children.each(walk);\n                            break;\n\n                        case 'before':\n                        case 'after':\n                        case 'first-line':\n                        case 'first-letter':\n                            C++;\n                            break;\n\n                        // TODO: support for :nth-*(.. of <SelectorList>), :matches(), :has()\n                        default:\n                            B++;\n                    }\n                    break;\n\n                case 'PseudoElementSelector':\n                    C++;\n                    break;\n\n                case 'TypeSelector':\n                    // ignore universal selector\n                    if (node.name.charAt(node.name.length - 1) !== '*') {\n                        C++;\n                    }\n                    break;\n\n            }\n        });\n\n        return [A, B, C];\n    };\n\n    var generate$2 = lib.generate;\n\n\n    var nonFreezePseudoElements = {\n        'first-letter': true,\n        'first-line': true,\n        'after': true,\n        'before': true\n    };\n    var nonFreezePseudoClasses = {\n        'link': true,\n        'visited': true,\n        'hover': true,\n        'active': true,\n        'first-letter': true,\n        'first-line': true,\n        'after': true,\n        'before': true\n    };\n\n    var processSelector = function freeze(node, usageData) {\n        var pseudos = Object.create(null);\n        var hasPseudo = false;\n\n        node.prelude.children.each(function(simpleSelector) {\n            var tagName = '*';\n            var scope = 0;\n\n            simpleSelector.children.each(function(node) {\n                switch (node.type) {\n                    case 'ClassSelector':\n                        if (usageData && usageData.scopes) {\n                            var classScope = usageData.scopes[node.name] || 0;\n\n                            if (scope !== 0 && classScope !== scope) {\n                                throw new Error('Selector can\\'t has classes from different scopes: ' + generate$2(simpleSelector));\n                            }\n\n                            scope = classScope;\n                        }\n                        break;\n\n                    case 'PseudoClassSelector':\n                        var name = node.name.toLowerCase();\n\n                        if (!nonFreezePseudoClasses.hasOwnProperty(name)) {\n                            pseudos[name] = true;\n                            hasPseudo = true;\n                        }\n                        break;\n\n                    case 'PseudoElementSelector':\n                        var name = node.name.toLowerCase();\n\n                        if (!nonFreezePseudoElements.hasOwnProperty(name)) {\n                            pseudos[name] = true;\n                            hasPseudo = true;\n                        }\n                        break;\n\n                    case 'TypeSelector':\n                        tagName = node.name.toLowerCase();\n                        break;\n\n                    case 'AttributeSelector':\n                        if (node.flags) {\n                            pseudos['[' + node.flags.toLowerCase() + ']'] = true;\n                            hasPseudo = true;\n                        }\n                        break;\n\n                    case 'WhiteSpace':\n                    case 'Combinator':\n                        tagName = '*';\n                        break;\n                }\n            });\n\n            simpleSelector.compareMarker = specificity(simpleSelector).toString();\n            simpleSelector.id = null; // pre-init property to avoid multiple hidden class\n            simpleSelector.id = generate$2(simpleSelector);\n\n            if (scope) {\n                simpleSelector.compareMarker += ':' + scope;\n            }\n\n            if (tagName !== '*') {\n                simpleSelector.compareMarker += ',' + tagName;\n            }\n        });\n\n        // add property to all rule nodes to avoid multiple hidden class\n        node.pseudoSignature = hasPseudo && Object.keys(pseudos).sort().join(',');\n    };\n\n    var resolveKeyword$2 = lib.keyword;\n    var walk$4 = lib.walk;\n    var generate$3 = lib.generate;\n\n\n\n    var prepare = function prepare(ast, options) {\n        var markDeclaration = createDeclarationIndexer();\n\n        walk$4(ast, {\n            visit: 'Rule',\n            enter: function processRule(node) {\n                node.block.children.each(markDeclaration);\n                processSelector(node, options.usage);\n            }\n        });\n\n        walk$4(ast, {\n            visit: 'Atrule',\n            enter: function(node) {\n                if (node.prelude) {\n                    node.prelude.id = null; // pre-init property to avoid multiple hidden class for generate\n                    node.prelude.id = generate$3(node.prelude);\n                }\n\n                // compare keyframe selectors by its values\n                // NOTE: still no clarification about problems with keyframes selector grouping (issue #197)\n                if (resolveKeyword$2(node.name).basename === 'keyframes') {\n                    node.block.avoidRulesMerge = true;  /* probably we don't need to prevent those merges for @keyframes\n                                                           TODO: need to be checked */\n                    node.block.children.each(function(rule) {\n                        rule.prelude.children.each(function(simpleselector) {\n                            simpleselector.compareMarker = simpleselector.id;\n                        });\n                    });\n                }\n            }\n        });\n\n        return {\n            declaration: markDeclaration\n        };\n    };\n\n    var List$2 = lib.List;\n    var resolveKeyword$3 = lib.keyword;\n    var hasOwnProperty$8 = Object.prototype.hasOwnProperty;\n    var walk$5 = lib.walk;\n\n    function addRuleToMap(map, item, list, single) {\n        var node = item.data;\n        var name = resolveKeyword$3(node.name).basename;\n        var id = node.name.toLowerCase() + '/' + (node.prelude ? node.prelude.id : null);\n\n        if (!hasOwnProperty$8.call(map, name)) {\n            map[name] = Object.create(null);\n        }\n\n        if (single) {\n            delete map[name][id];\n        }\n\n        if (!hasOwnProperty$8.call(map[name], id)) {\n            map[name][id] = new List$2();\n        }\n\n        map[name][id].append(list.remove(item));\n    }\n\n    function relocateAtrules(ast, options) {\n        var collected = Object.create(null);\n        var topInjectPoint = null;\n\n        ast.children.each(function(node, item, list) {\n            if (node.type === 'Atrule') {\n                var name = resolveKeyword$3(node.name).basename;\n\n                switch (name) {\n                    case 'keyframes':\n                        addRuleToMap(collected, item, list, true);\n                        return;\n\n                    case 'media':\n                        if (options.forceMediaMerge) {\n                            addRuleToMap(collected, item, list, false);\n                            return;\n                        }\n                        break;\n                }\n\n                if (topInjectPoint === null &&\n                    name !== 'charset' &&\n                    name !== 'import') {\n                    topInjectPoint = item;\n                }\n            } else {\n                if (topInjectPoint === null) {\n                    topInjectPoint = item;\n                }\n            }\n        });\n\n        for (var atrule in collected) {\n            for (var id in collected[atrule]) {\n                ast.children.insertList(\n                    collected[atrule][id],\n                    atrule === 'media' ? null : topInjectPoint\n                );\n            }\n        }\n    }\n    function isMediaRule(node) {\n        return node.type === 'Atrule' && node.name === 'media';\n    }\n\n    function processAtrule(node, item, list) {\n        if (!isMediaRule(node)) {\n            return;\n        }\n\n        var prev = item.prev && item.prev.data;\n\n        if (!prev || !isMediaRule(prev)) {\n            return;\n        }\n\n        // merge @media with same query\n        if (node.prelude &&\n            prev.prelude &&\n            node.prelude.id === prev.prelude.id) {\n            prev.block.children.appendList(node.block.children);\n            list.remove(item);\n\n            // TODO: use it when we can refer to several points in source\n            // prev.loc = {\n            //     primary: prev.loc,\n            //     merged: node.loc\n            // };\n        }\n    }\n\n    var _1MergeAtrule = function rejoinAtrule(ast, options) {\n        relocateAtrules(ast, options);\n\n        walk$5(ast, {\n            visit: 'Atrule',\n            reverse: true,\n            enter: processAtrule\n        });\n    };\n\n    var hasOwnProperty$9 = Object.prototype.hasOwnProperty;\n\n    function isEqualSelectors(a, b) {\n        var cursor1 = a.head;\n        var cursor2 = b.head;\n\n        while (cursor1 !== null && cursor2 !== null && cursor1.data.id === cursor2.data.id) {\n            cursor1 = cursor1.next;\n            cursor2 = cursor2.next;\n        }\n\n        return cursor1 === null && cursor2 === null;\n    }\n\n    function isEqualDeclarations(a, b) {\n        var cursor1 = a.head;\n        var cursor2 = b.head;\n\n        while (cursor1 !== null && cursor2 !== null && cursor1.data.id === cursor2.data.id) {\n            cursor1 = cursor1.next;\n            cursor2 = cursor2.next;\n        }\n\n        return cursor1 === null && cursor2 === null;\n    }\n\n    function compareDeclarations(declarations1, declarations2) {\n        var result = {\n            eq: [],\n            ne1: [],\n            ne2: [],\n            ne2overrided: []\n        };\n\n        var fingerprints = Object.create(null);\n        var declarations2hash = Object.create(null);\n\n        for (var cursor = declarations2.head; cursor; cursor = cursor.next)  {\n            declarations2hash[cursor.data.id] = true;\n        }\n\n        for (var cursor = declarations1.head; cursor; cursor = cursor.next)  {\n            var data = cursor.data;\n\n            if (data.fingerprint) {\n                fingerprints[data.fingerprint] = data.important;\n            }\n\n            if (declarations2hash[data.id]) {\n                declarations2hash[data.id] = false;\n                result.eq.push(data);\n            } else {\n                result.ne1.push(data);\n            }\n        }\n\n        for (var cursor = declarations2.head; cursor; cursor = cursor.next)  {\n            var data = cursor.data;\n\n            if (declarations2hash[data.id]) {\n                // when declarations1 has an overriding declaration, this is not a difference\n                // unless no !important is used on prev and !important is used on the following\n                if (!hasOwnProperty$9.call(fingerprints, data.fingerprint) ||\n                    (!fingerprints[data.fingerprint] && data.important)) {\n                    result.ne2.push(data);\n                }\n\n                result.ne2overrided.push(data);\n            }\n        }\n\n        return result;\n    }\n\n    function addSelectors(dest, source) {\n        source.each(function(sourceData) {\n            var newStr = sourceData.id;\n            var cursor = dest.head;\n\n            while (cursor) {\n                var nextStr = cursor.data.id;\n\n                if (nextStr === newStr) {\n                    return;\n                }\n\n                if (nextStr > newStr) {\n                    break;\n                }\n\n                cursor = cursor.next;\n            }\n\n            dest.insert(dest.createItem(sourceData), cursor);\n        });\n\n        return dest;\n    }\n\n    // check if simpleselectors has no equal specificity and element selector\n    function hasSimilarSelectors(selectors1, selectors2) {\n        var cursor1 = selectors1.head;\n\n        while (cursor1 !== null) {\n            var cursor2 = selectors2.head;\n\n            while (cursor2 !== null) {\n                if (cursor1.data.compareMarker === cursor2.data.compareMarker) {\n                    return true;\n                }\n\n                cursor2 = cursor2.next;\n            }\n\n            cursor1 = cursor1.next;\n        }\n\n        return false;\n    }\n\n    // test node can't to be skipped\n    function unsafeToSkipNode(node) {\n        switch (node.type) {\n            case 'Rule':\n                // unsafe skip ruleset with selector similarities\n                return hasSimilarSelectors(node.prelude.children, this);\n\n            case 'Atrule':\n                // can skip at-rules with blocks\n                if (node.block) {\n                    // unsafe skip at-rule if block contains something unsafe to skip\n                    return node.block.children.some(unsafeToSkipNode, this);\n                }\n                break;\n\n            case 'Declaration':\n                return false;\n        }\n\n        // unsafe by default\n        return true;\n    }\n\n    var utils$2 = {\n        isEqualSelectors: isEqualSelectors,\n        isEqualDeclarations: isEqualDeclarations,\n        compareDeclarations: compareDeclarations,\n        addSelectors: addSelectors,\n        hasSimilarSelectors: hasSimilarSelectors,\n        unsafeToSkipNode: unsafeToSkipNode\n    };\n\n    var walk$6 = lib.walk;\n\n\n    function processRule(node, item, list) {\n        var selectors = node.prelude.children;\n        var declarations = node.block.children;\n\n        list.prevUntil(item.prev, function(prev) {\n            // skip non-ruleset node if safe\n            if (prev.type !== 'Rule') {\n                return utils$2.unsafeToSkipNode.call(selectors, prev);\n            }\n\n            var prevSelectors = prev.prelude.children;\n            var prevDeclarations = prev.block.children;\n\n            // try to join rulesets with equal pseudo signature\n            if (node.pseudoSignature === prev.pseudoSignature) {\n                // try to join by selectors\n                if (utils$2.isEqualSelectors(prevSelectors, selectors)) {\n                    prevDeclarations.appendList(declarations);\n                    list.remove(item);\n                    return true;\n                }\n\n                // try to join by declarations\n                if (utils$2.isEqualDeclarations(declarations, prevDeclarations)) {\n                    utils$2.addSelectors(prevSelectors, selectors);\n                    list.remove(item);\n                    return true;\n                }\n            }\n\n            // go to prev ruleset if has no selector similarities\n            return utils$2.hasSimilarSelectors(selectors, prevSelectors);\n        });\n    }\n\n    // NOTE: direction should be left to right, since rulesets merge to left\n    // ruleset. When direction right to left unmerged rulesets may prevent lookup\n    // TODO: remove initial merge\n    var _2InitialMergeRuleset = function initialMergeRule(ast) {\n        walk$6(ast, {\n            visit: 'Rule',\n            enter: processRule\n        });\n    };\n\n    var List$3 = lib.List;\n    var walk$7 = lib.walk;\n\n    function processRule$1(node, item, list) {\n        var selectors = node.prelude.children;\n\n        // generate new rule sets:\n        // .a, .b { color: red; }\n        // ->\n        // .a { color: red; }\n        // .b { color: red; }\n\n        // while there are more than 1 simple selector split for rulesets\n        while (selectors.head !== selectors.tail) {\n            var newSelectors = new List$3();\n            newSelectors.insert(selectors.remove(selectors.head));\n\n            list.insert(list.createItem({\n                type: 'Rule',\n                loc: node.loc,\n                prelude: {\n                    type: 'SelectorList',\n                    loc: node.prelude.loc,\n                    children: newSelectors\n                },\n                block: {\n                    type: 'Block',\n                    loc: node.block.loc,\n                    children: node.block.children.copy()\n                },\n                pseudoSignature: node.pseudoSignature\n            }), item);\n        }\n    }\n\n    var _3DisjoinRuleset = function disjoinRule(ast) {\n        walk$7(ast, {\n            visit: 'Rule',\n            reverse: true,\n            enter: processRule$1\n        });\n    };\n\n    var List$4 = lib.List;\n    var generate$4 = lib.generate;\n    var walk$8 = lib.walk;\n\n    var REPLACE = 1;\n    var REMOVE = 2;\n    var TOP = 0;\n    var RIGHT = 1;\n    var BOTTOM = 2;\n    var LEFT = 3;\n    var SIDES = ['top', 'right', 'bottom', 'left'];\n    var SIDE = {\n        'margin-top': 'top',\n        'margin-right': 'right',\n        'margin-bottom': 'bottom',\n        'margin-left': 'left',\n\n        'padding-top': 'top',\n        'padding-right': 'right',\n        'padding-bottom': 'bottom',\n        'padding-left': 'left',\n\n        'border-top-color': 'top',\n        'border-right-color': 'right',\n        'border-bottom-color': 'bottom',\n        'border-left-color': 'left',\n        'border-top-width': 'top',\n        'border-right-width': 'right',\n        'border-bottom-width': 'bottom',\n        'border-left-width': 'left',\n        'border-top-style': 'top',\n        'border-right-style': 'right',\n        'border-bottom-style': 'bottom',\n        'border-left-style': 'left'\n    };\n    var MAIN_PROPERTY = {\n        'margin': 'margin',\n        'margin-top': 'margin',\n        'margin-right': 'margin',\n        'margin-bottom': 'margin',\n        'margin-left': 'margin',\n\n        'padding': 'padding',\n        'padding-top': 'padding',\n        'padding-right': 'padding',\n        'padding-bottom': 'padding',\n        'padding-left': 'padding',\n\n        'border-color': 'border-color',\n        'border-top-color': 'border-color',\n        'border-right-color': 'border-color',\n        'border-bottom-color': 'border-color',\n        'border-left-color': 'border-color',\n        'border-width': 'border-width',\n        'border-top-width': 'border-width',\n        'border-right-width': 'border-width',\n        'border-bottom-width': 'border-width',\n        'border-left-width': 'border-width',\n        'border-style': 'border-style',\n        'border-top-style': 'border-style',\n        'border-right-style': 'border-style',\n        'border-bottom-style': 'border-style',\n        'border-left-style': 'border-style'\n    };\n\n    function TRBL(name) {\n        this.name = name;\n        this.loc = null;\n        this.iehack = undefined;\n        this.sides = {\n            'top': null,\n            'right': null,\n            'bottom': null,\n            'left': null\n        };\n    }\n\n    TRBL.prototype.getValueSequence = function(declaration, count) {\n        var values = [];\n        var iehack = '';\n        var hasBadValues = declaration.value.children.some(function(child) {\n            var special = false;\n\n            switch (child.type) {\n                case 'Identifier':\n                    switch (child.name) {\n                        case '\\\\0':\n                        case '\\\\9':\n                            iehack = child.name;\n                            return;\n\n                        case 'inherit':\n                        case 'initial':\n                        case 'unset':\n                        case 'revert':\n                            special = child.name;\n                            break;\n                    }\n                    break;\n\n                case 'Dimension':\n                    switch (child.unit) {\n                        // is not supported until IE11\n                        case 'rem':\n\n                        // v* units is too buggy across browsers and better\n                        // don't merge values with those units\n                        case 'vw':\n                        case 'vh':\n                        case 'vmin':\n                        case 'vmax':\n                        case 'vm': // IE9 supporting \"vm\" instead of \"vmin\".\n                            special = child.unit;\n                            break;\n                    }\n                    break;\n\n                case 'HexColor': // color\n                case 'Number':\n                case 'Percentage':\n                    break;\n\n                case 'Function':\n                    special = child.name;\n                    break;\n\n                case 'WhiteSpace':\n                    return false; // ignore space\n\n                default:\n                    return true;  // bad value\n            }\n\n            values.push({\n                node: child,\n                special: special,\n                important: declaration.important\n            });\n        });\n\n        if (hasBadValues || values.length > count) {\n            return false;\n        }\n\n        if (typeof this.iehack === 'string' && this.iehack !== iehack) {\n            return false;\n        }\n\n        this.iehack = iehack; // move outside\n\n        return values;\n    };\n\n    TRBL.prototype.canOverride = function(side, value) {\n        var currentValue = this.sides[side];\n\n        return !currentValue || (value.important && !currentValue.important);\n    };\n\n    TRBL.prototype.add = function(name, declaration) {\n        function attemptToAdd() {\n            var sides = this.sides;\n            var side = SIDE[name];\n\n            if (side) {\n                if (side in sides === false) {\n                    return false;\n                }\n\n                var values = this.getValueSequence(declaration, 1);\n\n                if (!values || !values.length) {\n                    return false;\n                }\n\n                // can mix only if specials are equal\n                for (var key in sides) {\n                    if (sides[key] !== null && sides[key].special !== values[0].special) {\n                        return false;\n                    }\n                }\n\n                if (!this.canOverride(side, values[0])) {\n                    return true;\n                }\n\n                sides[side] = values[0];\n                return true;\n            } else if (name === this.name) {\n                var values = this.getValueSequence(declaration, 4);\n\n                if (!values || !values.length) {\n                    return false;\n                }\n\n                switch (values.length) {\n                    case 1:\n                        values[RIGHT] = values[TOP];\n                        values[BOTTOM] = values[TOP];\n                        values[LEFT] = values[TOP];\n                        break;\n\n                    case 2:\n                        values[BOTTOM] = values[TOP];\n                        values[LEFT] = values[RIGHT];\n                        break;\n\n                    case 3:\n                        values[LEFT] = values[RIGHT];\n                        break;\n                }\n\n                // can mix only if specials are equal\n                for (var i = 0; i < 4; i++) {\n                    for (var key in sides) {\n                        if (sides[key] !== null && sides[key].special !== values[i].special) {\n                            return false;\n                        }\n                    }\n                }\n\n                for (var i = 0; i < 4; i++) {\n                    if (this.canOverride(SIDES[i], values[i])) {\n                        sides[SIDES[i]] = values[i];\n                    }\n                }\n\n                return true;\n            }\n        }\n\n        if (!attemptToAdd.call(this)) {\n            return false;\n        }\n\n        // TODO: use it when we can refer to several points in source\n        // if (this.loc) {\n        //     this.loc = {\n        //         primary: this.loc,\n        //         merged: declaration.loc\n        //     };\n        // } else {\n        //     this.loc = declaration.loc;\n        // }\n        if (!this.loc) {\n            this.loc = declaration.loc;\n        }\n\n        return true;\n    };\n\n    TRBL.prototype.isOkToMinimize = function() {\n        var top = this.sides.top;\n        var right = this.sides.right;\n        var bottom = this.sides.bottom;\n        var left = this.sides.left;\n\n        if (top && right && bottom && left) {\n            var important =\n                top.important +\n                right.important +\n                bottom.important +\n                left.important;\n\n            return important === 0 || important === 4;\n        }\n\n        return false;\n    };\n\n    TRBL.prototype.getValue = function() {\n        var result = new List$4();\n        var sides = this.sides;\n        var values = [\n            sides.top,\n            sides.right,\n            sides.bottom,\n            sides.left\n        ];\n        var stringValues = [\n            generate$4(sides.top.node),\n            generate$4(sides.right.node),\n            generate$4(sides.bottom.node),\n            generate$4(sides.left.node)\n        ];\n\n        if (stringValues[LEFT] === stringValues[RIGHT]) {\n            values.pop();\n            if (stringValues[BOTTOM] === stringValues[TOP]) {\n                values.pop();\n                if (stringValues[RIGHT] === stringValues[TOP]) {\n                    values.pop();\n                }\n            }\n        }\n\n        for (var i = 0; i < values.length; i++) {\n            if (i) {\n                result.appendData({ type: 'WhiteSpace', value: ' ' });\n            }\n\n            result.appendData(values[i].node);\n        }\n\n        if (this.iehack) {\n            result.appendData({ type: 'WhiteSpace', value: ' ' });\n            result.appendData({\n                type: 'Identifier',\n                loc: null,\n                name: this.iehack\n            });\n        }\n\n        return {\n            type: 'Value',\n            loc: null,\n            children: result\n        };\n    };\n\n    TRBL.prototype.getDeclaration = function() {\n        return {\n            type: 'Declaration',\n            loc: this.loc,\n            important: this.sides.top.important,\n            property: this.name,\n            value: this.getValue()\n        };\n    };\n\n    function processRule$2(rule, shorts, shortDeclarations, lastShortSelector) {\n        var declarations = rule.block.children;\n        var selector = rule.prelude.children.first().id;\n\n        rule.block.children.eachRight(function(declaration, item) {\n            var property = declaration.property;\n\n            if (!MAIN_PROPERTY.hasOwnProperty(property)) {\n                return;\n            }\n\n            var key = MAIN_PROPERTY[property];\n            var shorthand;\n            var operation;\n\n            if (!lastShortSelector || selector === lastShortSelector) {\n                if (key in shorts) {\n                    operation = REMOVE;\n                    shorthand = shorts[key];\n                }\n            }\n\n            if (!shorthand || !shorthand.add(property, declaration)) {\n                operation = REPLACE;\n                shorthand = new TRBL(key);\n\n                // if can't parse value ignore it and break shorthand children\n                if (!shorthand.add(property, declaration)) {\n                    lastShortSelector = null;\n                    return;\n                }\n            }\n\n            shorts[key] = shorthand;\n            shortDeclarations.push({\n                operation: operation,\n                block: declarations,\n                item: item,\n                shorthand: shorthand\n            });\n\n            lastShortSelector = selector;\n        });\n\n        return lastShortSelector;\n    }\n\n    function processShorthands(shortDeclarations, markDeclaration) {\n        shortDeclarations.forEach(function(item) {\n            var shorthand = item.shorthand;\n\n            if (!shorthand.isOkToMinimize()) {\n                return;\n            }\n\n            if (item.operation === REPLACE) {\n                item.item.data = markDeclaration(shorthand.getDeclaration());\n            } else {\n                item.block.remove(item.item);\n            }\n        });\n    }\n\n    var _4RestructShorthand = function restructBlock(ast, indexer) {\n        var stylesheetMap = {};\n        var shortDeclarations = [];\n\n        walk$8(ast, {\n            visit: 'Rule',\n            reverse: true,\n            enter: function(node) {\n                var stylesheet = this.block || this.stylesheet;\n                var ruleId = (node.pseudoSignature || '') + '|' + node.prelude.children.first().id;\n                var ruleMap;\n                var shorts;\n\n                if (!stylesheetMap.hasOwnProperty(stylesheet.id)) {\n                    ruleMap = {\n                        lastShortSelector: null\n                    };\n                    stylesheetMap[stylesheet.id] = ruleMap;\n                } else {\n                    ruleMap = stylesheetMap[stylesheet.id];\n                }\n\n                if (ruleMap.hasOwnProperty(ruleId)) {\n                    shorts = ruleMap[ruleId];\n                } else {\n                    shorts = {};\n                    ruleMap[ruleId] = shorts;\n                }\n\n                ruleMap.lastShortSelector = processRule$2.call(this, node, shorts, shortDeclarations, ruleMap.lastShortSelector);\n            }\n        });\n\n        processShorthands(shortDeclarations, indexer.declaration);\n    };\n\n    var resolveProperty = lib.property;\n    var resolveKeyword$4 = lib.keyword;\n    var walk$9 = lib.walk;\n    var generate$5 = lib.generate;\n    var fingerprintId = 1;\n    var dontRestructure = {\n        'src': 1 // https://github.com/afelix/csso/issues/50\n    };\n\n    var DONT_MIX_VALUE = {\n        // https://developer.mozilla.org/en-US/docs/Web/CSS/display#Browser_compatibility\n        'display': /table|ruby|flex|-(flex)?box$|grid|contents|run-in/i,\n        // https://developer.mozilla.org/en/docs/Web/CSS/text-align\n        'text-align': /^(start|end|match-parent|justify-all)$/i\n    };\n\n    var CURSOR_SAFE_VALUE = [\n        'auto', 'crosshair', 'default', 'move', 'text', 'wait', 'help',\n        'n-resize', 'e-resize', 's-resize', 'w-resize',\n        'ne-resize', 'nw-resize', 'se-resize', 'sw-resize',\n        'pointer', 'progress', 'not-allowed', 'no-drop', 'vertical-text', 'all-scroll',\n        'col-resize', 'row-resize'\n    ];\n\n    var POSITION_SAFE_VALUE = [\n        'static', 'relative', 'absolute', 'fixed'\n    ];\n\n    var NEEDLESS_TABLE = {\n        'border-width': ['border'],\n        'border-style': ['border'],\n        'border-color': ['border'],\n        'border-top': ['border'],\n        'border-right': ['border'],\n        'border-bottom': ['border'],\n        'border-left': ['border'],\n        'border-top-width': ['border-top', 'border-width', 'border'],\n        'border-right-width': ['border-right', 'border-width', 'border'],\n        'border-bottom-width': ['border-bottom', 'border-width', 'border'],\n        'border-left-width': ['border-left', 'border-width', 'border'],\n        'border-top-style': ['border-top', 'border-style', 'border'],\n        'border-right-style': ['border-right', 'border-style', 'border'],\n        'border-bottom-style': ['border-bottom', 'border-style', 'border'],\n        'border-left-style': ['border-left', 'border-style', 'border'],\n        'border-top-color': ['border-top', 'border-color', 'border'],\n        'border-right-color': ['border-right', 'border-color', 'border'],\n        'border-bottom-color': ['border-bottom', 'border-color', 'border'],\n        'border-left-color': ['border-left', 'border-color', 'border'],\n        'margin-top': ['margin'],\n        'margin-right': ['margin'],\n        'margin-bottom': ['margin'],\n        'margin-left': ['margin'],\n        'padding-top': ['padding'],\n        'padding-right': ['padding'],\n        'padding-bottom': ['padding'],\n        'padding-left': ['padding'],\n        'font-style': ['font'],\n        'font-variant': ['font'],\n        'font-weight': ['font'],\n        'font-size': ['font'],\n        'font-family': ['font'],\n        'list-style-type': ['list-style'],\n        'list-style-position': ['list-style'],\n        'list-style-image': ['list-style']\n    };\n\n    function getPropertyFingerprint(propertyName, declaration, fingerprints) {\n        var realName = resolveProperty(propertyName).basename;\n\n        if (realName === 'background') {\n            return propertyName + ':' + generate$5(declaration.value);\n        }\n\n        var declarationId = declaration.id;\n        var fingerprint = fingerprints[declarationId];\n\n        if (!fingerprint) {\n            switch (declaration.value.type) {\n                case 'Value':\n                    var vendorId = '';\n                    var iehack = '';\n                    var special = {};\n                    var raw = false;\n\n                    declaration.value.children.each(function walk(node) {\n                        switch (node.type) {\n                            case 'Value':\n                            case 'Brackets':\n                            case 'Parentheses':\n                                node.children.each(walk);\n                                break;\n\n                            case 'Raw':\n                                raw = true;\n                                break;\n\n                            case 'Identifier':\n                                var name = node.name;\n\n                                if (!vendorId) {\n                                    vendorId = resolveKeyword$4(name).vendor;\n                                }\n\n                                if (/\\\\[09]/.test(name)) {\n                                    iehack = RegExp.lastMatch;\n                                }\n\n                                if (realName === 'cursor') {\n                                    if (CURSOR_SAFE_VALUE.indexOf(name) === -1) {\n                                        special[name] = true;\n                                    }\n                                } else if (realName === 'position') {\n                                    if (POSITION_SAFE_VALUE.indexOf(name) === -1) {\n                                        special[name] = true;\n                                    }\n                                } else if (DONT_MIX_VALUE.hasOwnProperty(realName)) {\n                                    if (DONT_MIX_VALUE[realName].test(name)) {\n                                        special[name] = true;\n                                    }\n                                }\n\n                                break;\n\n                            case 'Function':\n                                var name = node.name;\n\n                                if (!vendorId) {\n                                    vendorId = resolveKeyword$4(name).vendor;\n                                }\n\n                                if (name === 'rect') {\n                                    // there are 2 forms of rect:\n                                    //   rect(<top>, <right>, <bottom>, <left>) - standart\n                                    //   rect(<top> <right> <bottom> <left>) \u2013 backwards compatible syntax\n                                    // only the same form values can be merged\n                                    var hasComma = node.children.some(function(node) {\n                                        return node.type === 'Operator' && node.value === ',';\n                                    });\n                                    if (!hasComma) {\n                                        name = 'rect-backward';\n                                    }\n                                }\n\n                                special[name + '()'] = true;\n\n                                // check nested tokens too\n                                node.children.each(walk);\n\n                                break;\n\n                            case 'Dimension':\n                                var unit = node.unit;\n\n                                if (/\\\\[09]/.test(unit)) {\n                                    iehack = RegExp.lastMatch;\n                                }\n\n                                switch (unit) {\n                                    // is not supported until IE11\n                                    case 'rem':\n\n                                    // v* units is too buggy across browsers and better\n                                    // don't merge values with those units\n                                    case 'vw':\n                                    case 'vh':\n                                    case 'vmin':\n                                    case 'vmax':\n                                    case 'vm': // IE9 supporting \"vm\" instead of \"vmin\".\n                                        special[unit] = true;\n                                        break;\n                                }\n                                break;\n                        }\n                    });\n\n                    fingerprint = raw\n                        ? '!' + fingerprintId++\n                        : '!' + Object.keys(special).sort() + '|' + iehack + vendorId;\n                    break;\n\n                case 'Raw':\n                    fingerprint = '!' + declaration.value.value;\n                    break;\n\n                default:\n                    fingerprint = generate$5(declaration.value);\n            }\n\n            fingerprints[declarationId] = fingerprint;\n        }\n\n        return propertyName + fingerprint;\n    }\n\n    function needless(props, declaration, fingerprints) {\n        var property = resolveProperty(declaration.property);\n\n        if (NEEDLESS_TABLE.hasOwnProperty(property.basename)) {\n            var table = NEEDLESS_TABLE[property.basename];\n\n            for (var i = 0; i < table.length; i++) {\n                var ppre = getPropertyFingerprint(property.prefix + table[i], declaration, fingerprints);\n                var prev = props.hasOwnProperty(ppre) ? props[ppre] : null;\n\n                if (prev && (!declaration.important || prev.item.data.important)) {\n                    return prev;\n                }\n            }\n        }\n    }\n\n    function processRule$3(rule, item, list, props, fingerprints) {\n        var declarations = rule.block.children;\n\n        declarations.eachRight(function(declaration, declarationItem) {\n            var property = declaration.property;\n            var fingerprint = getPropertyFingerprint(property, declaration, fingerprints);\n            var prev = props[fingerprint];\n\n            if (prev && !dontRestructure.hasOwnProperty(property)) {\n                if (declaration.important && !prev.item.data.important) {\n                    props[fingerprint] = {\n                        block: declarations,\n                        item: declarationItem\n                    };\n\n                    prev.block.remove(prev.item);\n\n                    // TODO: use it when we can refer to several points in source\n                    // declaration.loc = {\n                    //     primary: declaration.loc,\n                    //     merged: prev.item.data.loc\n                    // };\n                } else {\n                    declarations.remove(declarationItem);\n\n                    // TODO: use it when we can refer to several points in source\n                    // prev.item.data.loc = {\n                    //     primary: prev.item.data.loc,\n                    //     merged: declaration.loc\n                    // };\n                }\n            } else {\n                var prev = needless(props, declaration, fingerprints);\n\n                if (prev) {\n                    declarations.remove(declarationItem);\n\n                    // TODO: use it when we can refer to several points in source\n                    // prev.item.data.loc = {\n                    //     primary: prev.item.data.loc,\n                    //     merged: declaration.loc\n                    // };\n                } else {\n                    declaration.fingerprint = fingerprint;\n\n                    props[fingerprint] = {\n                        block: declarations,\n                        item: declarationItem\n                    };\n                }\n            }\n        });\n\n        if (declarations.isEmpty()) {\n            list.remove(item);\n        }\n    }\n\n    var _6RestructBlock = function restructBlock(ast) {\n        var stylesheetMap = {};\n        var fingerprints = Object.create(null);\n\n        walk$9(ast, {\n            visit: 'Rule',\n            reverse: true,\n            enter: function(node, item, list) {\n                var stylesheet = this.block || this.stylesheet;\n                var ruleId = (node.pseudoSignature || '') + '|' + node.prelude.children.first().id;\n                var ruleMap;\n                var props;\n\n                if (!stylesheetMap.hasOwnProperty(stylesheet.id)) {\n                    ruleMap = {};\n                    stylesheetMap[stylesheet.id] = ruleMap;\n                } else {\n                    ruleMap = stylesheetMap[stylesheet.id];\n                }\n\n                if (ruleMap.hasOwnProperty(ruleId)) {\n                    props = ruleMap[ruleId];\n                } else {\n                    props = {};\n                    ruleMap[ruleId] = props;\n                }\n\n                processRule$3.call(this, node, item, list, props, fingerprints);\n            }\n        });\n    };\n\n    var walk$a = lib.walk;\n\n\n    /*\n        At this step all rules has single simple selector. We try to join by equal\n        declaration blocks to first rule, e.g.\n\n        .a { color: red }\n        b { ... }\n        .b { color: red }\n        ->\n        .a, .b { color: red }\n        b { ... }\n    */\n\n    function processRule$4(node, item, list) {\n        var selectors = node.prelude.children;\n        var declarations = node.block.children;\n        var nodeCompareMarker = selectors.first().compareMarker;\n        var skippedCompareMarkers = {};\n\n        list.nextUntil(item.next, function(next, nextItem) {\n            // skip non-ruleset node if safe\n            if (next.type !== 'Rule') {\n                return utils$2.unsafeToSkipNode.call(selectors, next);\n            }\n\n            if (node.pseudoSignature !== next.pseudoSignature) {\n                return true;\n            }\n\n            var nextFirstSelector = next.prelude.children.head;\n            var nextDeclarations = next.block.children;\n            var nextCompareMarker = nextFirstSelector.data.compareMarker;\n\n            // if next ruleset has same marked as one of skipped then stop joining\n            if (nextCompareMarker in skippedCompareMarkers) {\n                return true;\n            }\n\n            // try to join by selectors\n            if (selectors.head === selectors.tail) {\n                if (selectors.first().id === nextFirstSelector.data.id) {\n                    declarations.appendList(nextDeclarations);\n                    list.remove(nextItem);\n                    return;\n                }\n            }\n\n            // try to join by properties\n            if (utils$2.isEqualDeclarations(declarations, nextDeclarations)) {\n                var nextStr = nextFirstSelector.data.id;\n\n                selectors.some(function(data, item) {\n                    var curStr = data.id;\n\n                    if (nextStr < curStr) {\n                        selectors.insert(nextFirstSelector, item);\n                        return true;\n                    }\n\n                    if (!item.next) {\n                        selectors.insert(nextFirstSelector);\n                        return true;\n                    }\n                });\n\n                list.remove(nextItem);\n                return;\n            }\n\n            // go to next ruleset if current one can be skipped (has no equal specificity nor element selector)\n            if (nextCompareMarker === nodeCompareMarker) {\n                return true;\n            }\n\n            skippedCompareMarkers[nextCompareMarker] = true;\n        });\n    }\n\n    var _7MergeRuleset = function mergeRule(ast) {\n        walk$a(ast, {\n            visit: 'Rule',\n            enter: processRule$4\n        });\n    };\n\n    var List$5 = lib.List;\n    var walk$b = lib.walk;\n\n\n    function calcSelectorLength(list) {\n        var length = 0;\n\n        list.each(function(data) {\n            length += data.id.length + 1;\n        });\n\n        return length - 1;\n    }\n\n    function calcDeclarationsLength(tokens) {\n        var length = 0;\n\n        for (var i = 0; i < tokens.length; i++) {\n            length += tokens[i].length;\n        }\n\n        return (\n            length +          // declarations\n            tokens.length - 1 // delimeters\n        );\n    }\n\n    function processRule$5(node, item, list) {\n        var avoidRulesMerge = this.block !== null ? this.block.avoidRulesMerge : false;\n        var selectors = node.prelude.children;\n        var block = node.block;\n        var disallowDownMarkers = Object.create(null);\n        var allowMergeUp = true;\n        var allowMergeDown = true;\n\n        list.prevUntil(item.prev, function(prev, prevItem) {\n            var prevBlock = prev.block;\n            var prevType = prev.type;\n\n            if (prevType !== 'Rule') {\n                var unsafe = utils$2.unsafeToSkipNode.call(selectors, prev);\n\n                if (!unsafe && prevType === 'Atrule' && prevBlock) {\n                    walk$b(prevBlock, {\n                        visit: 'Rule',\n                        enter: function(node) {\n                            node.prelude.children.each(function(data) {\n                                disallowDownMarkers[data.compareMarker] = true;\n                            });\n                        }\n                    });\n                }\n\n                return unsafe;\n            }\n\n            var prevSelectors = prev.prelude.children;\n\n            if (node.pseudoSignature !== prev.pseudoSignature) {\n                return true;\n            }\n\n            allowMergeDown = !prevSelectors.some(function(selector) {\n                return selector.compareMarker in disallowDownMarkers;\n            });\n\n            // try prev ruleset if simpleselectors has no equal specifity and element selector\n            if (!allowMergeDown && !allowMergeUp) {\n                return true;\n            }\n\n            // try to join by selectors\n            if (allowMergeUp && utils$2.isEqualSelectors(prevSelectors, selectors)) {\n                prevBlock.children.appendList(block.children);\n                list.remove(item);\n                return true;\n            }\n\n            // try to join by properties\n            var diff = utils$2.compareDeclarations(block.children, prevBlock.children);\n\n            // console.log(diff.eq, diff.ne1, diff.ne2);\n\n            if (diff.eq.length) {\n                if (!diff.ne1.length && !diff.ne2.length) {\n                    // equal blocks\n                    if (allowMergeDown) {\n                        utils$2.addSelectors(selectors, prevSelectors);\n                        list.remove(prevItem);\n                    }\n\n                    return true;\n                } else if (!avoidRulesMerge) { /* probably we don't need to prevent those merges for @keyframes\n                                                  TODO: need to be checked */\n\n                    if (diff.ne1.length && !diff.ne2.length) {\n                        // prevBlock is subset block\n                        var selectorLength = calcSelectorLength(selectors);\n                        var blockLength = calcDeclarationsLength(diff.eq); // declarations length\n\n                        if (allowMergeUp && selectorLength < blockLength) {\n                            utils$2.addSelectors(prevSelectors, selectors);\n                            block.children = new List$5().fromArray(diff.ne1);\n                        }\n                    } else if (!diff.ne1.length && diff.ne2.length) {\n                        // node is subset of prevBlock\n                        var selectorLength = calcSelectorLength(prevSelectors);\n                        var blockLength = calcDeclarationsLength(diff.eq); // declarations length\n\n                        if (allowMergeDown && selectorLength < blockLength) {\n                            utils$2.addSelectors(selectors, prevSelectors);\n                            prevBlock.children = new List$5().fromArray(diff.ne2);\n                        }\n                    } else {\n                        // diff.ne1.length && diff.ne2.length\n                        // extract equal block\n                        var newSelector = {\n                            type: 'SelectorList',\n                            loc: null,\n                            children: utils$2.addSelectors(prevSelectors.copy(), selectors)\n                        };\n                        var newBlockLength = calcSelectorLength(newSelector.children) + 2; // selectors length + curly braces length\n                        var blockLength = calcDeclarationsLength(diff.eq); // declarations length\n\n                        // create new ruleset if declarations length greater than\n                        // ruleset description overhead\n                        if (blockLength >= newBlockLength) {\n                            var newItem = list.createItem({\n                                type: 'Rule',\n                                loc: null,\n                                prelude: newSelector,\n                                block: {\n                                    type: 'Block',\n                                    loc: null,\n                                    children: new List$5().fromArray(diff.eq)\n                                },\n                                pseudoSignature: node.pseudoSignature\n                            });\n\n                            block.children = new List$5().fromArray(diff.ne1);\n                            prevBlock.children = new List$5().fromArray(diff.ne2overrided);\n\n                            if (allowMergeUp) {\n                                list.insert(newItem, prevItem);\n                            } else {\n                                list.insert(newItem, item);\n                            }\n\n                            return true;\n                        }\n                    }\n                }\n            }\n\n            if (allowMergeUp) {\n                // TODO: disallow up merge only if any property interception only (i.e. diff.ne2overrided.length > 0);\n                // await property families to find property interception correctly\n                allowMergeUp = !prevSelectors.some(function(prevSelector) {\n                    return selectors.some(function(selector) {\n                        return selector.compareMarker === prevSelector.compareMarker;\n                    });\n                });\n            }\n\n            prevSelectors.each(function(data) {\n                disallowDownMarkers[data.compareMarker] = true;\n            });\n        });\n    }\n\n    var _8RestructRuleset = function restructRule(ast) {\n        walk$b(ast, {\n            visit: 'Rule',\n            reverse: true,\n            enter: processRule$5\n        });\n    };\n\n    var restructure = function(ast, options) {\n        // prepare ast for restructing\n        var indexer = prepare(ast, options);\n        options.logger('prepare', ast);\n\n        _1MergeAtrule(ast, options);\n        options.logger('mergeAtrule', ast);\n\n        _2InitialMergeRuleset(ast);\n        options.logger('initialMergeRuleset', ast);\n\n        _3DisjoinRuleset(ast);\n        options.logger('disjoinRuleset', ast);\n\n        _4RestructShorthand(ast, indexer);\n        options.logger('restructShorthand', ast);\n\n        _6RestructBlock(ast);\n        options.logger('restructBlock', ast);\n\n        _7MergeRuleset(ast);\n        options.logger('mergeRuleset', ast);\n\n        _8RestructRuleset(ast);\n        options.logger('restructRuleset', ast);\n    };\n\n    var List$6 = lib.List;\n    var clone$1 = lib.clone;\n\n\n\n\n    var walk$c = lib.walk;\n\n    function readChunk(children, specialComments) {\n        var buffer = new List$6();\n        var nonSpaceTokenInBuffer = false;\n        var protectedComment;\n\n        children.nextUntil(children.head, function(node, item, list) {\n            if (node.type === 'Comment') {\n                if (!specialComments || node.value.charAt(0) !== '!') {\n                    list.remove(item);\n                    return;\n                }\n\n                if (nonSpaceTokenInBuffer || protectedComment) {\n                    return true;\n                }\n\n                list.remove(item);\n                protectedComment = node;\n                return;\n            }\n\n            if (node.type !== 'WhiteSpace') {\n                nonSpaceTokenInBuffer = true;\n            }\n\n            buffer.insert(list.remove(item));\n        });\n\n        return {\n            comment: protectedComment,\n            stylesheet: {\n                type: 'StyleSheet',\n                loc: null,\n                children: buffer\n            }\n        };\n    }\n\n    function compressChunk(ast, firstAtrulesAllowed, num, options) {\n        options.logger('Compress block #' + num, null, true);\n\n        var seed = 1;\n\n        if (ast.type === 'StyleSheet') {\n            ast.firstAtrulesAllowed = firstAtrulesAllowed;\n            ast.id = seed++;\n        }\n\n        walk$c(ast, {\n            visit: 'Atrule',\n            enter: function markScopes(node) {\n                if (node.block !== null) {\n                    node.block.id = seed++;\n                }\n            }\n        });\n        options.logger('init', ast);\n\n        // remove redundant\n        clean(ast, options);\n        options.logger('clean', ast);\n\n        // replace nodes for shortened forms\n        replace(ast);\n        options.logger('replace', ast);\n\n        // structure optimisations\n        if (options.restructuring) {\n            restructure(ast, options);\n        }\n\n        return ast;\n    }\n\n    function getCommentsOption(options) {\n        var comments = 'comments' in options ? options.comments : 'exclamation';\n\n        if (typeof comments === 'boolean') {\n            comments = comments ? 'exclamation' : false;\n        } else if (comments !== 'exclamation' && comments !== 'first-exclamation') {\n            comments = false;\n        }\n\n        return comments;\n    }\n\n    function getRestructureOption(options) {\n        if ('restructure' in options) {\n            return options.restructure;\n        }\n\n        return 'restructuring' in options ? options.restructuring : true;\n    }\n\n    function wrapBlock(block) {\n        return new List$6().appendData({\n            type: 'Rule',\n            loc: null,\n            prelude: {\n                type: 'SelectorList',\n                loc: null,\n                children: new List$6().appendData({\n                    type: 'Selector',\n                    loc: null,\n                    children: new List$6().appendData({\n                        type: 'TypeSelector',\n                        loc: null,\n                        name: 'x'\n                    })\n                })\n            },\n            block: block\n        });\n    }\n\n    var compress = function compress(ast, options) {\n        ast = ast || { type: 'StyleSheet', loc: null, children: new List$6() };\n        options = options || {};\n\n        var compressOptions = {\n            logger: typeof options.logger === 'function' ? options.logger : function() {},\n            restructuring: getRestructureOption(options),\n            forceMediaMerge: Boolean(options.forceMediaMerge),\n            usage: options.usage ? usage.buildIndex(options.usage) : false\n        };\n        var specialComments = getCommentsOption(options);\n        var firstAtrulesAllowed = true;\n        var input;\n        var output = new List$6();\n        var chunk;\n        var chunkNum = 1;\n        var chunkChildren;\n\n        if (options.clone) {\n            ast = clone$1(ast);\n        }\n\n        if (ast.type === 'StyleSheet') {\n            input = ast.children;\n            ast.children = output;\n        } else {\n            input = wrapBlock(ast);\n        }\n\n        do {\n            chunk = readChunk(input, Boolean(specialComments));\n            compressChunk(chunk.stylesheet, firstAtrulesAllowed, chunkNum++, compressOptions);\n            chunkChildren = chunk.stylesheet.children;\n\n            if (chunk.comment) {\n                // add \\n before comment if there is another content in output\n                if (!output.isEmpty()) {\n                    output.insert(List$6.createItem({\n                        type: 'Raw',\n                        value: '\\n'\n                    }));\n                }\n\n                output.insert(List$6.createItem(chunk.comment));\n\n                // add \\n after comment if chunk is not empty\n                if (!chunkChildren.isEmpty()) {\n                    output.insert(List$6.createItem({\n                        type: 'Raw',\n                        value: '\\n'\n                    }));\n                }\n            }\n\n            if (firstAtrulesAllowed && !chunkChildren.isEmpty()) {\n                var lastRule = chunkChildren.last();\n\n                if (lastRule.type !== 'Atrule' ||\n                    (lastRule.name !== 'import' && lastRule.name !== 'charset')) {\n                    firstAtrulesAllowed = false;\n                }\n            }\n\n            if (specialComments !== 'exclamation') {\n                specialComments = false;\n            }\n\n            output.appendList(chunkChildren);\n        } while (!input.isEmpty());\n\n        return {\n            ast: ast\n        };\n    };\n\n    var version = \"4.0.3\";\n    var _package = {\n        version: version\n    };\n\n    var _package$1 = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        version: version,\n        'default': _package\n    });\n\n    var require$$0 = getCjsExportFromNamespace(_package$1);\n\n    var parse$1 = lib.parse;\n\n    var generate$6 = lib.generate;\n\n    function debugOutput(name, options, startTime, data) {\n        if (options.debug) {\n            console.error('## ' + name + ' done in %d ms\\n', Date.now() - startTime);\n        }\n\n        return data;\n    }\n\n    function createDefaultLogger(level) {\n        var lastDebug;\n\n        return function logger(title, ast) {\n            var line = title;\n\n            if (ast) {\n                line = '[' + ((Date.now() - lastDebug) / 1000).toFixed(3) + 's] ' + line;\n            }\n\n            if (level > 1 && ast) {\n                var css = generate$6(ast);\n\n                // when level 2, limit css to 256 symbols\n                if (level === 2 && css.length > 256) {\n                    css = css.substr(0, 256) + '...';\n                }\n\n                line += '\\n  ' + css + '\\n';\n            }\n\n            console.error(line);\n            lastDebug = Date.now();\n        };\n    }\n\n    function copy$1(obj) {\n        var result = {};\n\n        for (var key in obj) {\n            result[key] = obj[key];\n        }\n\n        return result;\n    }\n\n    function buildCompressOptions(options) {\n        options = copy$1(options);\n\n        if (typeof options.logger !== 'function' && options.debug) {\n            options.logger = createDefaultLogger(options.debug);\n        }\n\n        return options;\n    }\n\n    function runHandler(ast, options, handlers) {\n        if (!Array.isArray(handlers)) {\n            handlers = [handlers];\n        }\n\n        handlers.forEach(function(fn) {\n            fn(ast, options);\n        });\n    }\n\n    function minify(context, source, options) {\n        options = options || {};\n\n        var filename = options.filename || '<unknown>';\n        var result;\n\n        // parse\n        var ast = debugOutput('parsing', options, Date.now(),\n            parse$1(source, {\n                context: context,\n                filename: filename,\n                positions: Boolean(options.sourceMap)\n            })\n        );\n\n        // before compress handlers\n        if (options.beforeCompress) {\n            debugOutput('beforeCompress', options, Date.now(),\n                runHandler(ast, options, options.beforeCompress)\n            );\n        }\n\n        // compress\n        var compressResult = debugOutput('compress', options, Date.now(),\n            compress(ast, buildCompressOptions(options))\n        );\n\n        // after compress handlers\n        if (options.afterCompress) {\n            debugOutput('afterCompress', options, Date.now(),\n                runHandler(compressResult, options, options.afterCompress)\n            );\n        }\n\n        // generate\n        if (options.sourceMap) {\n            result = debugOutput('generate(sourceMap: true)', options, Date.now(), (function() {\n                var tmp = generate$6(compressResult.ast, { sourceMap: true });\n                tmp.map._file = filename; // since other tools can relay on file in source map transform chain\n                tmp.map.setSourceContent(filename, source);\n                return tmp;\n            }()));\n        } else {\n            result = debugOutput('generate', options, Date.now(), {\n                css: generate$6(compressResult.ast),\n                map: null\n            });\n        }\n\n        return result;\n    }\n\n    function minifyStylesheet(source, options) {\n        return minify('stylesheet', source, options);\n    }\n\n    function minifyBlock(source, options) {\n        return minify('declarationList', source, options);\n    }\n\n    var lib$1 = {\n        version: require$$0.version,\n\n        // main methods\n        minify: minifyStylesheet,\n        minifyBlock: minifyBlock,\n\n        // css syntax parser/walkers/generator/etc\n        syntax: Object.assign({\n            compress: compress\n        }, lib)\n    };\n    var lib_1 = lib$1.version;\n    var lib_2 = lib$1.minify;\n    var lib_3 = lib$1.minifyBlock;\n    var lib_4 = lib$1.syntax;\n\n    exports.default = lib$1;\n    exports.minify = lib_2;\n    exports.minifyBlock = lib_3;\n    exports.syntax = lib_4;\n    exports.version = lib_1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"}
}});
